import{j as t,b as i}from"./BlockEditorTranslator-Do4trUgb.js";import{u as A}from"./ProductContext-ByBXGImP.js";import"./EditorPanel-4oWFueOm.js";import{E as m}from"./EditorPanelRow-CD2W-00O.js";const{createContext:O,useContext:Z}=wp.element,H=O(),R=H.Provider,_=()=>{const r=Z(H);return r||(console.warn("useSingleProductData must be used within a SingleProductDataProvider"),null)},{useBlockProps:W}=wp.blockEditor,G={edit:r=>{var l;const e=W({className:"fc-product-block-editor-product-card-title"}),s=_();return t.jsx("h5",{...r,...e,children:s&&((l=s.product)==null?void 0:l.post_title)||i("Product Title")})},save:r=>null,supports:{html:!1,align:["left","center","right"],typography:{fontSize:!0,lineHeight:!0},spacing:{margin:!0},color:{text:!0}}},{useBlockProps:q}=wp.blockEditor,K={edit:r=>{var l,n,o,u,c,p,f,h;const e=q({className:"fc-product-block-editor-product-card-sub-title"}),s=_();return t.jsxs("div",{...r,...e,children:[t.jsx("div",{dangerouslySetInnerHTML:{__html:(n=(l=s.product)==null?void 0:l.detail)==null?void 0:n.formatted_min_price}}),((u=(o=s.product)==null?void 0:o.detail)==null?void 0:u.min_price)!==((p=(c=s.product)==null?void 0:c.detail)==null?void 0:p.max_price)&&t.jsxs("div",{children:[" - ",t.jsx("span",{dangerouslySetInnerHTML:{__html:(h=(f=s.product)==null?void 0:f.detail)==null?void 0:h.formatted_max_price}})]})]})},save:r=>null,supports:{html:!1,align:["left","center","right"],typography:{fontSize:!0,lineHeight:!0},spacing:{margin:!0},color:{text:!0,background:!0}}},{InnerBlocks:w,useBlockProps:j}=wp.blockEditor,U={edit:r=>{const e=j({className:"fc-product-block-editor-product-card-image group-[.list]:flex-shrink-0"}),{context:s}=r,l=_(),n=()=>{const o=window.fluent_cart_block_editor_asset.placeholder_image;return l.product&&l.product.detail&&l.product.detail.featured_media&&l.product.detail.featured_media!==null&&typeof l.product.detail.featured_media=="object"&&l.product.detail.featured_media.url?l.product.detail.featured_media.url:o};return t.jsxs("div",{...e,children:[t.jsx("div",{className:"group-[.list]:flex-shrink-0",children:t.jsx("img",{src:n(),className:"w-full aspect-square object-cover rounded-md group-[.list]:w-[214px]",alt:l.product?l.product.post_title:"Product"})}),t.jsx(w,{})]})},save:r=>{const e=j.save();return t.jsx("div",{...e,className:"fluent-cart-product-image",children:t.jsx(w.Content,{})})}},J={edit:r=>{var u,c,p;const e=_();if(!e.product)return t.jsx("button",{className:"fc-product-block-editor-product-card-primary-button",children:i("View")});const l=((c=(u=e.product)==null?void 0:u.detail)==null?void 0:c.variation_type)==="simple",n=!!((p=e.product)!=null&&p.has_subscription);let o=i("View Options");return l&&(n?o=i("Buy Now"):o=i("View")),t.jsx("button",{...r,className:"fc-product-block-editor-product-card-primary-button",children:o})},save:r=>null},Q={edit:r=>t.jsx("h2",{...r,children:i("Product Excerpt (Editor)")}),save:r=>null},{InnerBlocks:X,useBlockProps:P,useInnerBlocksProps:Y,__experimentalUseBlockPreview:tt,BlockContextProvider:et}=wp.blockEditor,rt=tt||null,{useContext:Dt,useEffect:C,useState:B,useMemo:Mt,memo:ot}=wp.element,{useSelect:st}=wp.data,lt=()=>{const r=Y({className:"wc-block-product"},{__unstableDisableLayoutClassNames:!0});return t.jsx("div",{...r})},ct=({blocks:r,blockContextId:e,isHidden:s,setActiveBlockContextId:l})=>{const n=rt({blocks:r,props:{className:"fct-block-product"}}),o=()=>{l(e)},u={display:s?"none":void 0};return t.jsx("div",{...n,tabIndex:0,role:"button",onClick:o,onKeyPress:o,style:u})},nt=ot(ct),it=({displayTemplate:r,blocks:e,blockContext:s,setActiveBlockContextId:l})=>t.jsxs(et,{value:s,children:[r?t.jsx(lt,{}):null,t.jsx(nt,{blocks:e,blockContextId:s.ID,setActiveBlockContextId:l,isHidden:r})]},s.ID),at=it,ut={attributes:{wp_client_id:{type:"string",default:""},last_changed:{type:"string",default:""}},edit:r=>{const e=P({className:"fct-shop-app-preview-wrap"}),{attributes:s,setAttributes:l,clientId:n,context:o}=r;C(()=>{l({last_changed:new Date().toISOString()}),!s.wp_client_id&&l({wp_client_id:n})},[n,s.wp_client_id,l]);const u=o["fluent-cart/product_box_grid_size"],c=A(),p=st(d=>d("core/block-editor").getBlock(n),[n]),[f,h]=B(1);C(()=>{if(f>1){new Date().toISOString();return}h(f+1)},[p]);const b=p.innerBlocks,[a,x]=B();return t.jsx("div",{...e,children:t.jsx("div",{className:"shop-app-preview-products gap-5 grid md:grid-cols-dynamic col-dynamic group-[.list]:grid-cols-1 grid-columns-"+u,children:c==null?void 0:c.products.map(d=>{var v;const z=d.ID===(a||((v=c==null?void 0:c.products[0])==null?void 0:v.ID));return t.jsx(R,{value:{product:d},children:t.jsx("div",{className:"fluent-cart-product-loop fc-product-block-editor-product-card",children:t.jsx(at,{attributes:{productId:d.ID},blocks:b,displayTemplate:z,blockContext:d,setActiveBlockContextId:x},d.ID)},d.ID)},d.ID)})})})},save:r=>{const e=P.save();return t.jsx("div",{...e,className:"fluent-cart-product-loop fc-product-block-editor-product-card",children:t.jsx(X.Content,{})})},supports:{align:["wide","full"],html:!1},usesContext:["fluent-cart/paginator","fluent-cart/per_page","fluent-cart/enable_filter","fluent-cart/product_box_grid_size","fluent-cart/view_mode","fluent-cart/filters","fluent-cart/default_filters","fluent-cart/order_type","fluent-cart/live_filter","fluent-cart/price_format","fluent-cart/enable_wildcard_filter"]},{InnerBlocks:N,useBlockProps:I}=wp.blockEditor,dt={attributes:{},edit:r=>{const e=I({className:"fluent-cart-product-container"}),{context:s}=r;return t.jsx("div",{...e,children:t.jsx("div",{className:"shop-app-preview",children:t.jsx(N,{})})})},save:r=>{const e=I.save();return t.jsx("div",{...e,children:t.jsx(N.Content,{})})},usesContext:["fluent-cart/paginator","fluent-cart/per_page","fluent-cart/enable_filter","fluent-cart/product_box_grid_size","fluent-cart/view_mode","fluent-cart/filters","fluent-cart/default_filters","fluent-cart/order_type","fluent-cart/live_filter","fluent-cart/price_format","fluent-cart/enable_wildcard_filter"],supports:{align:["wide","full"],html:!1}},{useBlockProps:k,InspectorControls:pt,InnerBlocks:y}=wp.blockEditor,{ToggleControl:g,TextControl:ft}=wp.components,ht={attributes:{filter:{type:"object",default:{}},enable_filter:{type:"boolean",default:!1},live_filter:{type:"boolean",default:!0},enable_wildcard_filter:{type:"boolean",default:!0},enable_wildcard_for_post_content:{type:"boolean",default:!0},default_filter_options:{}},edit:r=>{const{attributes:e,setAttributes:s}=r,l=(o,u)=>{let c={...e.filters??{}};c[o]=u,s({filters:{...c}})},n=k({className:"fluent-cart-product-filter-wrapper"});return t.jsxs("div",{...r,...k(),children:[t.jsx(pt,{children:t.jsx("div",{className:"fc-shop-filter-inspector-control-wrap fc-inspector-control-wrap",children:t.jsx("div",{className:"fc-inspector-control-group",children:t.jsxs("div",{className:"fc-inspector-control-body",children:[t.jsxs(m,{children:[t.jsx("span",{className:"fc-inspector-control-label",children:i("Enable Filter")}),t.jsx("div",{className:"actions",children:t.jsx(g,{checked:e.enable_filter,onChange:o=>{s({enable_filter:o})}})})]}),e.enable_filter&&t.jsxs(t.Fragment,{children:[t.jsxs(m,{children:[t.jsx("span",{className:"fc-inspector-control-label",children:i("Wildcard Filter")}),t.jsx("div",{className:"actions",children:t.jsx(g,{checked:e.enable_wildcard_filter,onChange:o=>{s({enable_wildcard_filter:o})}})})]}),e.enable_wildcard_filter&&t.jsxs(m,{children:[t.jsx("span",{className:"fc-inspector-control-label",children:i("Also search in Content")}),t.jsx("div",{className:"actions",children:t.jsx(g,{checked:e.enable_wildcard_for_post_content,onChange:o=>{s({enable_wildcard_for_post_content:o})}})})]}),t.jsxs(m,{children:[t.jsx("span",{className:"fc-inspector-control-label",children:i("Live Filter")}),t.jsx("div",{className:"actions",children:t.jsx(g,{checked:e.live_filter,onChange:o=>{s({live_filter:o})}})})]}),Object.keys(e.default_filter_options||{}).map((o,u)=>{var p,f,h;let c={};return(p=e.filters)!=null&&p.hasOwnProperty(o)?c=e.filters[o]:(f=e.default_filter_options)!=null&&f.hasOwnProperty(o)&&(c=e.default_filter_options[o]),o!=="enabled"?t.jsxs("div",{className:"mt-5",children:[t.jsxs(m,{children:[t.jsx("span",{className:"fc-inspector-control-label capitalize",children:o.replace(/[-_]/g," ")}),t.jsx("div",{className:"actions",children:t.jsx(g,{checked:typeof e.filters<"u"&&typeof e.filters[o]<"u"&&((h=e.filters[o])==null?void 0:h.enabled),onChange:b=>{var x,d;let a={};(x=e.filters)!=null&&x.hasOwnProperty(o)?a=e.filters[o]:(d=e.default_filter_options)!=null&&d.hasOwnProperty(o)&&(a=e.default_filter_options[o]),a.enabled=b,a.filter_type=e.default_filter_options[o].filter_type,a.is_meta=e.default_filter_options[o].is_meta,a.multiple=e.default_filter_options[o].multiple,l(o,a)}})})]}),t.jsxs(m,{children:[t.jsx("span",{className:"fc-inspector-control-label",children:i("Display Name")}),t.jsx("div",{className:"actions",children:t.jsx(ft,{value:c.label,onChange:b=>{var x;let a={};(x=e.filters)!=null&&x.hasOwnProperty(o)?a=e.filters[o]:a.enabled=!0,a.label=b,l(o,a)}})})]})]},o):t.jsx(t.Fragment,{})})]})]})})})}),t.jsx("div",{...n,children:t.jsx(y,{allowedBlocks:["fluent-cart/shopapp-product-filter-search-box","fluent-cart/shopapp-product-filter-button"]})})]})},save:r=>{const e=k.save();return t.jsx("div",{...e,className:"fluent-cart-product-filter-wrapper",children:t.jsx(y.Content,{})})}},{useBlockProps:xt,InspectorControls:Vt,InnerBlocks:Ht}=wp.blockEditor,{ToggleControl:Ft,TextControl:zt}=wp.components,mt={attributes:{},usesContext:["fluent-cart/paginator","fluent-cart/per_page","fluent-cart/enable_filter","fluent-cart/product_box_grid_size","fluent-cart/view_mode","fluent-cart/filters","fluent-cart/default_filters","fluent-cart/order_type","fluent-cart/live_filter","fluent-cart/price_format","fluent-cart/enable_wildcard_filter"],edit:r=>{const{attributes:e,setAttributes:s}=r,l=xt({className:"fluent-cart-shop-app-view-switcher fluent-cart-product-filter-view-switcher-wrapper"}),{context:n}=r,o=n["fluent-cart/view_mode"];return t.jsxs("div",{...l,children:[t.jsx("button",{type:"button",className:o==="grid"?"active":"",title:i("Grid View"),children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:[t.jsx("path",{d:"M12.4059 1.59412C13.3334 2.52162 13.3334 4.0144 13.3334 6.99996C13.3334 9.98552 13.3334 11.4783 12.4059 12.4058C11.4784 13.3333 9.98564 13.3333 7.00008 13.3333C4.01452 13.3333 2.52174 13.3333 1.59424 12.4058C0.666748 11.4783 0.666748 9.98552 0.666748 6.99996C0.666748 4.0144 0.666748 2.52162 1.59424 1.59412C2.52174 0.666626 4.01452 0.666626 7.00008 0.666626C9.98564 0.666626 11.4784 0.666626 12.4059 1.59412Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M13.3335 7L0.66683 7",stroke:"currentColor",strokeLinecap:"round"}),t.jsx("path",{d:"M7 0.666626L7 13.3333",stroke:"currentColor",strokeLinecap:"round"})]})}),t.jsx("button",{type:"button",className:o==="list"?"active":"",title:i("List View"),children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[t.jsx("path",{d:"M1.33325 7.60008C1.33325 6.8279 1.49441 6.66675 2.26659 6.66675H13.7333C14.5054 6.66675 14.6666 6.8279 14.6666 7.60008V8.40008C14.6666 9.17226 14.5054 9.33341 13.7333 9.33341H2.26659C1.49441 9.33341 1.33325 9.17226 1.33325 8.40008V7.60008Z",stroke:"currentColor",strokeLinecap:"round"}),t.jsx("path",{d:"M1.33325 2.26671C1.33325 1.49453 1.49441 1.33337 2.26659 1.33337H13.7333C14.5054 1.33337 14.6666 1.49453 14.6666 2.26671V3.06671C14.6666 3.83889 14.5054 4.00004 13.7333 4.00004H2.26659C1.49441 4.00004 1.33325 3.83888 1.33325 3.06671V2.26671Z",stroke:"currentColor",strokeLinecap:"round"}),t.jsx("path",{d:"M1.33325 12.9333C1.33325 12.1612 1.49441 12 2.26659 12H13.7333C14.5054 12 14.6666 12.1612 14.6666 12.9333V13.7333C14.6666 14.5055 14.5054 14.6667 13.7333 14.6667H2.26659C1.49441 14.6667 1.33325 14.5055 1.33325 13.7333V12.9333Z",stroke:"currentColor",strokeLinecap:"round"})]})})]})},save:r=>null},{useBlockProps:$,InspectorControls:At}=wp.blockEditor,{ToggleControl:Ot,TextControl:Zt}=wp.components,bt={attributes:{},edit:r=>{const{attributes:e,setAttributes:s}=r;return t.jsx("div",{...r,...$(),children:t.jsx("div",{className:"fc-product-block-filter-item",children:t.jsxs("div",{className:"relative w-full",children:[t.jsx("div",{className:"absolute top-0 left-[14px] bottom-0 flex items-center text-system-mid",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 18 18",fill:"none",children:[t.jsx("path",{d:"M13.125 13.125L16.5 16.5",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M15 8.25C15 4.52208 11.9779 1.5 8.25 1.5C4.52208 1.5 1.5 4.52208 1.5 8.25C1.5 11.9779 4.52208 15 8.25 15C11.9779 15 15 11.9779 15 8.25Z",stroke:"currentColor",strokeWidth:"1.25",strokeLinejoin:"round"})]})}),t.jsx("input",{className:"fc-product-block-input",type:"text",name:"wildcard",placeholder:i("Search products by name"),value:""})]})})})},save:r=>($.save(),null)},{useBlockProps:T,InnerBlocks:E}=wp.blockEditor,gt={attributes:{},edit:r=>{const{attributes:e,setAttributes:s}=r;return t.jsx("div",{...r,...T(),children:t.jsx("div",{className:"fc-product-block-filter-item",children:t.jsx(E,{allowedBlocks:["fluent-cart/shopapp-product-filter-apply-button","fluent-cart/shopapp-product-filter-reset-button"]})})})},save:r=>{const e=T.save();return t.jsx("div",{...e,className:"fc-product-block-filter-item",children:t.jsx(E.Content,{})})}},{useBlockProps:S,InspectorControls:Rt}=wp.blockEditor,{ToggleControl:Wt,TextControl:Gt}=wp.components,_t={attributes:{},edit:r=>{const{attributes:e,setAttributes:s}=r;return t.jsx("div",{...r,...S(),children:t.jsx("h2",{children:"Product Filters"})})},save:r=>(S.save(),null)},{useBlockProps:kt}=wp.blockEditor,vt={edit:r=>{const e=kt({className:"fc-product-paginator-info fluent-cart-shop-app-paginator-selector-wrap"});return t.jsx("div",{...r,...e,children:i("( Showing 1 to 10 of 34 Items ) 10 Per page")})},save:r=>null,supports:{html:!1,align:["left","center","right"],typography:{fontSize:!0,lineHeight:!0},spacing:{margin:!0},color:{text:!0}}},{useBlockProps:wt}=wp.blockEditor,jt={edit:r=>{const e=wt({className:"fc-product-paginator-number-wrap"});return t.jsx("div",{...r,...e,children:t.jsxs("ul",{className:"fc-product-paginator-number-items",children:[t.jsx("li",{className:"fc-product-paginator-number-item active",children:"1"}),t.jsx("li",{className:"fc-product-paginator-number-item",children:"2"}),t.jsx("li",{className:"fc-product-paginator-number-item",children:"3"}),t.jsx("li",{className:"fc-product-paginator-number-item",children:"4"}),t.jsx("li",{className:"fc-product-paginator-number-item arrow",children:"--"})]})})},save:r=>null,supports:{html:!1,align:["left","center","right"],typography:{fontSize:!0,lineHeight:!0},spacing:{margin:!0},color:{text:!0}}},{useBlockProps:Pt}=wp.blockEditor,Ct={edit:r=>{const e=Pt({className:"fc-product-block-filter-button"});return t.jsx("button",{...r,...e,children:"Apply Filter"})},save:r=>null,supports:{html:!1,align:["left","center","right"],typography:{fontSize:!0,lineHeight:!0},spacing:{margin:!0},color:{text:!0}}},{useBlockProps:Bt}=wp.blockEditor,Nt={edit:r=>{const e=Bt({className:"fc-product-block-reset-button"});return t.jsx("button",{...r,...e,children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:t.jsx("path",{d:"M14.2501 9.75V15.75M9.75012 9.75V15.75M20.2498 5.25L3.74976 5.25001M18.7501 5.25V19.5C18.7501 19.6989 18.6711 19.8897 18.5305 20.0303C18.3898 20.171 18.199 20.25 18.0001 20.25H6.00012C5.80121 20.25 5.61044 20.171 5.46979 20.0303C5.32914 19.8897 5.25012 19.6989 5.25012 19.5V5.25M15.7501 5.25V3.75C15.7501 3.35218 15.5921 2.97064 15.3108 2.68934C15.0295 2.40804 14.6479 2.25 14.2501 2.25H9.75012C9.3523 2.25 8.97077 2.40804 8.68946 2.68934C8.40816 2.97064 8.25012 3.35218 8.25012 3.75V5.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})},save:r=>null,supports:{html:!1,align:["left","center","right"],typography:{fontSize:!0,lineHeight:!0},spacing:{margin:!0},color:{text:!0}}},{useBlockProps:L,InspectorControls:qt,InnerBlocks:D}=wp.blockEditor,{ToggleControl:Kt,TextControl:Ut}=wp.components,It={attributes:{},usesContext:["fluent-cart/paginator","fluent-cart/per_page","fluent-cart/enable_filter","fluent-cart/product_box_grid_size","fluent-cart/view_mode","fluent-cart/filters","fluent-cart/default_filters","fluent-cart/order_type","fluent-cart/live_filter","fluent-cart/price_format","fluent-cart/enable_wildcard_filter"],edit:r=>{const{attributes:e,setAttributes:s}=r,l=L({className:"fluent-cart-shop-no-result-wrap"}),{context:n}=r;return t.jsx("div",{...l,children:t.jsx(D,{})})},save:r=>{const e=L.save();return t.jsx("div",{...e,className:"fc-product-block-filter-item",children:t.jsx(D.Content,{})})}},{registerBlockType:F}=wp.blocks,yt=window.fluent_cart_products_inner_blocks,{InnerBlocks:M,useBlockProps:V}=wp.blockEditor,$t={ProductTitleBlock:G,ProductPriceBlock:K,ProductImageBlock:U,ProductButtonBlock:J,ProductExcerptBlock:Q,ProductFilterBlock:ht,ProductFilterViewSwitcherBlock:mt,ProductLoopBlock:ut,ProductContainerBlock:dt,ProductFilterSearchBlock:bt,ProductFilterButtonBlock:gt,ProductFilterFilters:_t,ProductPaginatorInfoBlock:vt,ProductPaginatorNumberBlock:jt,ProductFilterApplyButtonBlock:Ct,ProductFilterResetButtonBlock:Nt,ProductNoResultBlock:It};yt.blocks.forEach(r=>{const e=$t[r.component],s=[];r.parent&&s.push(...r.parent),e!=null&&e.parent&&s.push(...e.parent),F(r.slug,{apiVersion:2,category:"product-elements",title:r.title,name:r.slug,icon:r.icon||null,parent:s.length>0?s:null,edit:(e==null?void 0:e.edit)||(()=>i("No edit found")),save:(e==null?void 0:e.save)||(()=>null),supports:(e==null?void 0:e.supports)||{},usesContext:(e==null?void 0:e.usesContext)||[],attributes:(e==null?void 0:e.attributes)||{}})});F("fluent-cart/product-paginator",{title:i("Paginator"),icon:"screenoptions",parent:["fluent-cart/products","core/column"],category:"layout",attributes:{},edit:r=>{const e=V({className:"fluent-cart-product-paginator"});return t.jsx("div",{...e,children:t.jsx("div",{children:t.jsx(M,{allowedBlocks:["fluent-cart/product-paginator-info","fluent-cart/product-paginator-number","core/paragraph"]})})})},save:r=>{const e=V.save();return t.jsx("div",{...e,className:"fluent-cart-product-paginator",children:t.jsx(M.Content,{})})},usesContext:["fluent-cart/paginator","fluent-cart/per_page","fluent-cart/enable_filter","fluent-cart/product_box_grid_size","fluent-cart/view_mode","fluent-cart/filters","fluent-cart/default_filters","fluent-cart/order_type","fluent-cart/live_filter","fluent-cart/price_format","fluent-cart/enable_wildcard_filter"]});
