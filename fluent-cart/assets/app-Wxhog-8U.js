          </div>`}),M}},xAxis:{type:"category",data:m.value,axisLabel:{color:l.value?"#ffffff":"#696778",fontSize:12,interval:b.value.interval},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:[{name:p("Revenue"),type:"value",position:"left",axisLabel:{color:l.value?"#ffffff":"#696778",fontSize:12,formatter:E=>`${Fe.formatScaled(E)}`},splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}},{name:p("Orders"),type:"value",position:"right",axisLabel:{color:l.value?"#ffffff":"#696778",fontSize:12},splitLine:{show:!1,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}}],series:h.value};_.setOption(x,{notMerge:!0,replaceMerge:["series"]})},k=(x,E,M,D,R)=>({name:x,type:E,barMaxWidth:30,data:M,smooth:!1,color:D,lineStyle:{width:3},areaStyle:{opacity:.3,color:D},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:D,borderRadius:[4,4,0,0]},yAxisIndex:R,emphasis:{scale:2,itemStyle:{color:Aa(D)},lineStyle:{color:D},areaStyle:{opacity:.3,color:D}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),F=x=>{o.value!==x&&(o.value=x,yt.onChange("order","sales_growth_chart",x),w())};return ke([()=>a.chartData,o],()=>{me(w)},{deep:!0}),He(()=>{window.removeEventListener("onWebmakerrProThemeChange",w,!1)}),he(()=>{window.addEventListener("onWebmakerrProThemeChange",w),me(B)}),(x,E)=>(f(),y("div",v8,[r(oe,{id:"chartContainer",ref_key:"cardRef",ref:n},{default:c(()=>[r(de,{title:x.$t("Sales Growth"),border_bottom:""},{action:c(()=>[d("div",b8,[r(tn,{activeType:o.value,types:{bar:"BarChart",line:"LineChart"},onChange:F},null,8,["activeType"]),r(Qt,{targetRef:s.value},null,8,["targetRef"])])]),_:1},8,["title"]),r(ae,{class:"p-0"},{default:c(()=>[d("div",{class:"fc-chart-wrap fc-gross-sale-vs-net-revenue-chart",ref_key:"chartRef",ref:s},null,512)]),_:1})]),_:1},512)]))}},w8={class:"fc-gross-sale-vs-net-revenue-wrap"},C8={class:"fc-btn-group sm"},B8={key:0,class:"fc-world-map-action-btns absolute top-5 right-5 flex flex-col gap-1 z-10"},k8={key:1,class:"fc-world-map-action-btns absolute top-[10px] right-[40px] flex flex-col gap-1 z-10"},dh=.5,FA=6,cr=1.2,x8={__name:"HeatMap",props:{data:{type:Array,required:!0}},setup(t){const e=t,a=fe.colors,s=T(null),n=T(null),o=T(!1),i=T("world"),l=T(92),A=T(100);T(!1);let u=null,h=null,m=50;const _=T(1.2),B=T(),b=a.blue,w=J(()=>{const H=A.value-l.value,z=e.data?e.data.length:0;return H<60||z<15}),k=H=>{H=H.replace(/^#/,"");const z=parseInt(H.substring(0,2),16),W=parseInt(H.substring(2,4),16),ie=parseInt(H.substring(4,6),16);return[z,W,ie]},F=()=>fe.isDark()?a.gray[50]:a.gray[600],x=k(b[500]),E=async()=>{const H=eo.getUrl("world.geo.json"),W=await(await fetch(H)).json();gv("world",W)},M=H=>{if(!H||isNaN(H))return`rgba(${x.join(",")}, 0)`;const z=Math.log(H+1)/Math.log(m+1);return`rgba(${x.join(",")}, ${z})`},D=H=>{i.value=H,Y(),u&&(u.clear(),u.setOption(V()),H==="bar"&&R()),h&&o.value&&(h.clear(),h.setOption(V()),H==="bar"&&$())},R=()=>{u&&(u.off("dataZoom"),u.on("dataZoom",function(H){H.batch&&H.batch[0]?(l.value=H.batch[0].start||0,A.value=H.batch[0].end||100):(l.value=H.start||0,A.value=H.end||100),setTimeout(()=>{Y()},100)}))},$=()=>{h&&(h.off("dataZoom"),h.on("dataZoom",function(H){H.batch&&H.batch[0]?(l.value=H.batch[0].start||0,A.value=H.batch[0].end||100):(l.value=H.start||0,A.value=H.end||100),setTimeout(()=>{h&&h.setOption(V())},100)}))},Q=J(()=>(e.data||[]).map(H=>({...H,value:H.value||0,itemStyle:{color:M(H.value||0)},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}))),I=()=>({backgroundColor:fe.isDark()?a.dark[700]:a.gray[25],tooltip:{trigger:"item",formatter:H=>p("%1$s%2$s Orders: %3$s",H.name,"<br>",H.value||0),borderRadius:8,backgroundColor:fe.isDark()?"#38485a":"#ffffff",borderColor:fe.isDark()?"#4a5a6b":"#c0c4ca",borderWidth:1,textStyle:{color:fe.isDark()?"#ffffff":"#565865"}},visualMap:{min:0,max:m,left:o.value?"5%":"center",bottom:o.value?"center":"4%",text:[p("High"),p("Low")],orient:o.value?"vertical":"horizontal",calculable:!0,inRange:{color:[b[100],b[500]]},textStyle:{color:a.gray[800]}},series:[{name:"Orders",type:"map",map:"world",roam:B.value,zoom:_.value,label:{show:!1,emphasis:{show:!0,color:a.gray[1e3],fontWeight:"bold",textShadowColor:a.gray[50],textShadowBlur:3,textShadowOffsetX:0,textShadowOffsetY:0}},emphasis:{itemStyle:{areaColor:b[300],shadowBlur:10,shadowColor:a.gray[400]}},itemStyle:{borderColor:a.gray[200],borderWidth:.5},data:Q.value}]}),L=()=>{const H=w.value;return{backgroundColor:fe.isDark()?a.dark[700]:a.gray[25],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(z){const W=z[0];return`${W.name}<br/>${p("Orders")}: ${W.value||0}`},backgroundColor:fe.isDark()?"#38485a":"#ffffff",textStyle:{color:fe.isDark()?a.gray[25]:a.system.mid},borderColor:fe.isDark()?"#4a5a6b":"#c0c4ca",borderWidth:1},dataZoom:[{type:"inside",yAxisIndex:0,start:l.value,end:A.value},{type:"slider",yAxisIndex:0,start:l.value,end:A.value,width:25,top:10,right:10,textStyle:{color:F()},brushSelect:!1,showDetail:!1,disabled:!0}],grid:{left:"0%",right:"15%",top:"10%",bottom:"15%",containLabel:!0},yAxis:{type:"category",axisTick:{show:H},splitLine:{show:!1},axisLine:{show:H,lineStyle:{color:F()}},axisLabel:{show:H,interval:0,color:F(),formatter:function(z){return z&&z.length>15?z.substring(0,15)+"...":z},fontSize:11},data:e.data.map(z=>z.name)},xAxis:{type:"value",axisLabel:{show:!0,color:F(),formatter:function(z){return z.toLocaleString()}},splitLine:{show:!0,lineStyle:{color:fe.isDark()?a.gray[600]:a.gray[200]}}},series:[{type:"bar",large:!0,itemStyle:{color:new jA(0,0,1,0,[{offset:0,color:b[400]},{offset:1,color:b[600]}]),borderRadius:[0,4,4,0]},emphasis:{itemStyle:{color:new jA(0,0,1,0,[{offset:0,color:b[500]},{offset:1,color:b[700]}])}},data:e.data.map(z=>z.value),label:{show:H,formatter:"{c}",position:"right",color:F(),fontSize:10}}]}},V=()=>i.value==="bar"?L():I(),N=async()=>{await E(),s.value&&(u=At(s.value),u.setOption(V()),i.value==="bar"&&R(),u.on("georoam",()=>{const z=u.getOption().series[0].zoom;if(z!==_.value)if(z<cr||z>FA){const W=Math.max(cr,Math.min(FA,z));u.setOption({series:[{zoom:W}]},!1),_.value=W}else _.value=z}))},Y=()=>{e.data&&e.data.length>0?m=Math.max(...e.data.map(H=>H.value||0)):m=1,u&&u.setOption(V(),{notMerge:!0})},K=()=>{_.value=Math.min(_.value+dh,FA),B.value=!0,u.setOption({series:[{zoom:_.value,roam:B.value}]})},X=()=>{_.value=Math.max(_.value-dh,cr),B.value=!0,u.setOption({series:[{zoom:_.value,roam:B.value}]})},re=()=>{i.value==="bar"?(l.value=92,A.value=100,u&&u.dispatchAction({type:"dataZoom",start:92,end:100})):(_.value=cr,B.value="move",u&&(u.clear(),u.setOption(V())))},ce=async()=>{o.value=!0,await me(),h?h.clear():h=At(n.value),h.setOption(V()),i.value==="bar"&&$()},Z=H=>{F(),u&&u.setOption(V())};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",Z),B.value="move",me(N)}),He(()=>{window.removeEventListener("onWebmakerrProThemeChange",Z),u&&(u.dispose(),u=null),h&&(h.dispose(),h=null)}),ke(()=>e.data,()=>Y(),{deep:!0}),ke(w,()=>{i.value==="bar"&&me(()=>{Y()})}),(H,z)=>(f(),y("div",w8,[r(oe,{id:"chartContainer"},{default:c(()=>[r(de,{title:H.$t("Order Heat Map"),border_bottom:""},{action:c(()=>[d("div",C8,[r(tn,{activeType:i.value,types:{world:"Globe",bar:"BarChart"},onChange:D},null,8,["activeType"]),r(Qt,{targetRef:s.value,size:"small"},null,8,["targetRef"])])]),_:1},8,["title"]),r(ae,{class:"p-0 pt-0 relative"},{default:c(()=>[i.value==="world"?(f(),y("div",B8,[r(we,{tag:"button",size:"small",onClick:K},{default:c(()=>[r(G,{name:"Plus"})]),_:1}),r(we,{tag:"button",size:"small",onClick:X},{default:c(()=>[r(G,{name:"Minus"})]),_:1}),r(we,{tag:"button",size:"small",onClick:re},{default:c(()=>[r(G,{name:"Reload"})]),_:1}),r(we,{tag:"button",size:"small lg:hidden",onClick:ce},{default:c(()=>[r(G,{name:"Eye"})]),_:1})])):S("",!0),i.value==="bar"?(f(),y("div",k8,[r(we,{tag:"button",size:"small",onClick:re},{default:c(()=>[r(G,{name:"Reload"})]),_:1})])):S("",!0),d("div",{class:"fc-chart-wrap rounded-[0px] bg-transparent",ref_key:"chartRef",ref:s},null,512)]),_:1})]),_:1}),r(g(_v),{modelValue:o.value,"onUpdate:modelValue":z[0]||(z[0]=W=>o.value=W),title:H.$t("Order Heat Map"),class:"country-heat-map-dialog"},{default:c(()=>[d("div",{class:"fc-chart-wrap",ref_key:"modalChartRef",ref:n},null,512)]),_:1},8,["modelValue","title"])]))}},F8=ve(x8,[["__scopeId","data-v-4e4705d6"]]),S8={class:"fc-report-card"},E8={key:0,class:"fc-report-card-header"},U8={key:0,class:"flex items-center gap-2"},Q8={class:"title"},D8={key:1,class:"actions"},M8={class:"fc-report-card-body flex h-full items-center"},I8={class:"fc-report-sold-product w-full"},Ll={__name:"ReportCard",props:{cardOptions:{type:Object,default:()=>({heading:"",linkButtonText:"",linkButtonUrl:"",headingIcon:{type:Boolean,default:!1}})}},setup(t){return(e,a)=>{const s=C("router-link");return f(),y("div",S8,[t.cardOptions.heading||t.cardOptions.linkButtonText?(f(),y("div",E8,[t.cardOptions.heading?(f(),y("div",U8,[t.cardOptions.headingIcon?(f(),U(we,{key:0,size:"x-small",bg:"danger",soft:""},{default:c(()=>[r(G,{name:"FailedCircle"})]),_:1})):S("",!0),d("h4",Q8,v(t.cardOptions.heading),1)])):S("",!0),t.cardOptions.linkButtonText?(f(),y("div",D8,[r(s,{to:`/${t.cardOptions.linkButtonUrl}`,class:"link"},{default:c(()=>[O(v(e.$t(t.cardOptions.linkButtonText)),1)]),_:1},8,["to"])])):S("",!0)])):S("",!0),d("div",M8,[d("div",I8,[aa(e.$slots,"default")])])])}}},T8={key:0,class:"fc-report-sold-product-list has-scroll"},$8={class:"list-left-content"},O8={class:"list-title"},L8={class:"list-title-inner"},V8={class:"list-id"},R8={class:"list-right-content"},H8={class:"list-value"},P8={class:"list-price"},N8={__name:"RecentOrders",setup(t){const e=la.data;return(a,s)=>{const n=C("router-link");return f(),U(Ll,{class:"top-sold-products","card-options":{heading:g(p)("Recent Orders"),linkButtonText:g(p)("View All"),linkButtonUrl:"orders"}},{default:c(()=>{var o,i;return[((i=(o=g(e))==null?void 0:o.recentOrders)==null?void 0:i.length)>0?(f(),y("ul",T8,[(f(!0),y(P,null,j(g(e).recentOrders,l=>(f(),y("li",{key:l.id},[r(n,{class:"no-underline",to:{name:"view_order",params:{order_id:l.id}}},{default:c(()=>[d("div",$8,[d("div",O8,[d("div",L8,v(l.customer_name)+" #"+v(l.id),1),d("div",V8,[r(Ht,{"date-time":l.created_at},null,8,["date-time"])])])]),d("div",R8,[d("div",H8,v(g(Fe).scaled(l.total_amount)),1),d("div",P8,v(l.order_items_count)+" "+v(g(p)("Items")),1)])]),_:2},1032,["to"])]))),128))])):(f(),U(Tt,{key:1,icon:"Empty/ListView",text:g(p)("Currently there is no item!")},null,8,["text"]))]}),_:1},8,["card-options"])}}},K8={key:0},z8={key:1,class:"fc_dashboard_onboarding_wrap"},G8={class:"fc_dashboard_onboarding_title"},j8={class:"fc_dashboard_onboarding_lists"},Y8=["href"],W8={class:"circle-shape"},q8={class:"fc_dashboard_onboarding_item__title"},X8={__name:"Onboarding",setup(t){const e=T(0),a=T(!1);We().ctx;const s=T([]),n=T(!0);T(localStorage.getItem("started_content_collapse")==="true"||!1),J(()=>{const i=Object.keys(s.value).length;return i?Math.round(e.value/i*100):0});const o=_l("dashboardTogglePageNotification");return he(async()=>{a.value=!0,ne.get("dashboard").then(i=>{var A;s.value=i.data.steps,e.value=i.data.completed,n.value=Object.keys(s.value).length!==e.value,a.value=!1;let l=((A=s.value.page_setup)==null?void 0:A.completed)||!1;o&&o(!l)}).catch(i=>{a.value=!1})}),(i,l)=>{const A=C("el-skeleton"),u=C("Check"),h=C("el-icon");return n.value?(f(),y("div",K8,[a.value?(f(),U(A,{key:0,rows:3,animated:""})):(f(),y("div",z8,[d("h3",G8,v(i.$t("Onboarding Checklist")),1),d("div",j8,[(f(!0),y(P,null,j(s.value,(m,_)=>(f(),y("a",{key:_,href:m.url,class:le([m.completed===!0?"active":"","fc_dashboard_onboarding_item"])},[d("span",W8,[m.completed===!0?(f(),U(h,{key:0},{default:c(()=>[r(u)]),_:1})):S("",!0)]),d("div",q8,v(m.title),1)],10,Y8))),128))])]))])):S("",!0)}}},J8={class:"fc-dashboard-recent-activities-wrap"},Z8={class:"fc-dashboard-recent-activities__header"},eS={class:"fc-dashboard-recent-activities__header_title"},tS={class:"fc-dashboard-recent-activities__header_desc"},aS={key:0,class:"fc-dashboard-recent-activities__body"},sS={key:0,class:"fc-dashboard-recent-activities__item has-icon"},nS={class:"content"},oS={class:"title"},iS=["onClick"],rS={class:"date"},lS=["innerHTML"],AS={class:"created_by"},cS={key:1,class:"fc-dashboard-recent-activities__empty"},dS={class:"fc-dashboard-recent-activities__empty_text"},uS={__name:"RecentActivity",props:{activities:{type:Array,default:()=>[]},showManageActivity:{type:Boolean,default:!1}},emits:["reload"],setup(t,{emit:e}){const a=Ra();T(!1),T({});const s=T([{label:p("All"),value:"all"},{label:p("Today"),value:"today"},{label:p("Yesterday"),value:"yesterday"},{label:p("This Week"),value:"this_week"}]),n=T("all"),o=()=>{switch(n.value){case"all":return p("all");case"today":return p("today");case"yesterday":return p("yesterday");case"this_week":return p("this week");default:return n.value}},i=()=>{o(),la.getRecentActivities({groupKey:n.value})},l={Order:"orders/view",Payment:"orders/view",Product:"products/view",Customer:"customers/view",Coupon:"coupons/view"},A=h=>{const _={Order:{name:"view_order",param:"order_id",permission:"orders/view"},Payment:{name:"view_order",param:"order_id",permission:"orders/view"},Product:{name:"view_product",param:"product_id",permission:"products/view"},Customer:{name:"view_customer",param:"customer_id",permission:"customers/view"},Coupon:{name:"view_coupon",param:"coupon_id",permission:"coupons/view"}}[h.module_name];_&&h.module_id&&u(h)?a.push({name:_.name,params:{[_.param]:h.module_id}}):console.warn("Invalid activity or module not supported:",h)},u=h=>{if(!h.module_name)return!0;const m=be.get(l,lt.capitalize(h.module_name));return m?Ai.has(m):!1};return he(()=>{i()}),(h,m)=>{const _=C("el-radio-button"),B=C("el-radio-group");return f(),y("div",J8,[d("div",Z8,[d("h4",eS,v(g(p)("Recent Activities")),1),d("p",tS,[n.value==="all"?(f(),y(P,{key:0},[O(v(g(p)("%s new activities",g(la).data.recentActivities.length)),1)],64)):(f(),y(P,{key:1},[O(v(g(p)("%s new activities %s",g(la).data.recentActivities.length,o())),1)],64))]),r(B,{class:"fc-dashboard-recent-activities__header_filter",modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=b=>n.value=b),onChange:i,size:"large"},{default:c(()=>[(f(!0),y(P,null,j(s.value,(b,w)=>(f(),U(_,{key:w,label:b.label,value:b.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),g(la).data.recentActivities.length?(f(),y("div",aS,[(f(!0),y(P,null,j(g(la).data.recentActivities,(b,w)=>(f(),y(P,{key:w},[u(b)?(f(),y("div",sS,[m[1]||(m[1]=d("span",{class:"icon"},[d("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[d("path",{d:"M12.8499 9.92029L13.5711 10.3529C13.6156 10.3795 13.6524 10.4172 13.678 10.4623C13.7036 10.5075 13.717 10.5584 13.717 10.6103C13.717 10.6621 13.7036 10.7131 13.678 10.7582C13.6524 10.8033 13.6156 10.841 13.5711 10.8677L8.30911 14.0249C8.21579 14.081 8.10897 14.1106 8.00011 14.1106C7.89124 14.1106 7.78443 14.081 7.69111 14.0249L2.42911 10.8677C2.38462 10.841 2.34779 10.8033 2.32222 10.7582C2.29664 10.7131 2.2832 10.6621 2.2832 10.6103C2.2832 10.5584 2.29664 10.5075 2.32222 10.4623C2.34779 10.4172 2.38462 10.3795 2.42911 10.3529L3.15031 9.92029L8.00011 12.8303L12.8499 9.92029ZM12.8499 7.10029L13.5711 7.53289C13.6156 7.55952 13.6524 7.59723 13.678 7.64235C13.7036 7.68746 13.717 7.73843 13.717 7.79029C13.717 7.84214 13.7036 7.89311 13.678 7.93822C13.6524 7.98334 13.6156 8.02105 13.5711 8.04769L8.00011 11.3903L2.42911 8.04769C2.38462 8.02105 2.34779 7.98334 2.32222 7.93822C2.29664 7.89311 2.2832 7.84214 2.2832 7.79029C2.2832 7.73843 2.29664 7.68746 2.32222 7.64235C2.34779 7.59723 2.38462 7.55952 2.42911 7.53289L3.15031 7.10029L8.00011 10.0103L12.8499 7.10029ZM8.30851 1.58569L13.5711 4.74289C13.6156 4.76952 13.6524 4.80724 13.678 4.85235C13.7036 4.89746 13.717 4.94843 13.717 5.00029C13.717 5.05214 13.7036 5.10311 13.678 5.14822C13.6524 5.19334 13.6156 5.23105 13.5711 5.25769L8.00011 8.60029L2.42911 5.25769C2.38462 5.23105 2.34779 5.19334 2.32222 5.14822C2.29664 5.10311 2.2832 5.05214 2.2832 5.00029C2.2832 4.94843 2.29664 4.89746 2.32222 4.85235C2.34779 4.80724 2.38462 4.76952 2.42911 4.74289L7.69111 1.58569C7.78443 1.52962 7.89124 1.5 8.00011 1.5C8.10897 1.5 8.21579 1.52962 8.30911 1.58569H8.30851ZM8.00011 2.79949L4.33231 5.00029L8.00011 7.20109L11.6679 5.00029L8.00011 2.79949Z",fill:"#335CFF"})])],-1)),d("div",nS,[d("h3",oS,[b.module_name!==""?(f(),y("span",{key:0,onClick:k=>A(b)},v(b.title||"--"),9,iS)):(f(),y(P,{key:1},[O(v(b.title),1)],64)),d("span",rS,[r(Ht,{"date-time":b.created_at},null,8,["date-time"])])]),d("p",{innerHTML:b.content,class:"description"},null,8,lS),d("span",AS,v(g(p)("By %s",b.created_by)),1)])])):S("",!0)],64))),128))])):(f(),y("div",cS,[d("div",dS,v(g(p)("No activity found.")),1)]))])}}},fS={class:"fc_dashboard_sidebar bg-white dark:bg-dark-700 p-5 rounded"},hS={__name:"SideBar",setup(t){return(e,a)=>(f(),y("div",fS,[r(tt,{permission:"is_super_admin"},{default:c(()=>[r(X8)]),_:1}),r(uS,{onReload:a[0]||(a[0]=()=>{})})]))}},pS={class:"fc-product-create"},mS={class:"fc-product-step"},gS={class:"fc-product-item-selector"},_S=["onClick"],vS={class:"fc-product-item-selector-content"},bS={class:"dialog-footer"},Vl={__name:"AddProductModal",props:{customModal:String},emits:["process_custom","update:createProductModal"],setup(t,{emit:e}){const a=t,s=e,n=Ra(),o=T({post_title:"",post_content:"",post_excerpt:"",post_date:new Date,post_status:"draft",detail:{fulfillment_type:"digital",variation_type:"simple",manage_stock:"0",manage_downloadable:"0",other_info:{use_pricing_table:"yes",group_pricing_by:"repeat_interval",active_editor:"wp-editor",sold_individually:"no"}}}),i=[{type:"physical",title:p("Physical Product"),icon:"Gift"},{type:"digital",title:p("Digital Product"),icon:"Code"}],l=T(!1),A=T(null),u=_=>{o.value.detail.fulfillment_type=_},h=()=>{l.value=!0,ne.post("products",{...o.value}).then(_=>{if(q.success(_.message),a.customModal==="order_modal"){const B={id:_.data.product_variants.id,object_id:_.data.product_variants.post_id,variation_id:_.data.product_variants.id,item_name:_.data.product_variants.variation_title,item_price:_.data.product_variants.item_price,quantity:1,stock:100,object_type:_.data.product_details.fulfillment_type,item_total:_.data.product_variants.item_price,line_total:_.data.product_variants.item_price,tax_amount:0,discount_total:0};s("process_custom",B),s("update:createProductModal",!1)}else n.push({name:"product_edit",params:{product_id:_.data.ID}})}).catch(_=>{_.status_code=="422"?q.validationErrors(_):q.error(_.message)}).finally(()=>{l.value=!1})},m=_=>{_.stopPropagation(),_.preventDefault(),h()};return he(()=>{me(()=>{setTimeout(()=>{var _;(_=A.value)==null||_.focus()},10)})}),(_,B)=>{const b=C("el-input"),w=C("el-form-item"),k=C("el-form"),F=C("el-button");return f(),y("div",pS,[d("div",mS,[r(k,{"label-position":"top",model:o.value,"require-asterisk-position":"right"},{default:c(()=>[r(w,{label:g(p)("Product Title"),required:""},{default:c(()=>[r(b,{type:"text",modelValue:o.value.post_title,"onUpdate:modelValue":B[0]||(B[0]=x=>o.value.post_title=x),placeholder:"Product Title",minlength:"3",maxlength:"200","show-word-limit":"",autofocus:"",ref_key:"fcProductTitle",ref:A,onKeydown:ja(m,["enter"])},null,8,["modelValue"])]),_:1},8,["label"]),r(w,null,{default:c(()=>[d("ul",gS,[(f(),y(P,null,j(i,x=>d("li",{key:x.type,class:le({active:x.type===o.value.detail.fulfillment_type}),onClick:E=>u(x.type)},[d("div",vS,[r(G,{name:x.icon},null,8,["name"]),O(" "+v(x.title),1)]),B[1]||(B[1]=d("div",{class:"fc-product-item-selector-dot-wrap"},[d("span",{class:"fc-product-item-selector-dot"})],-1))],10,_S)),64))])]),_:1})]),_:1},8,["model"])]),d("div",bS,[r(F,{disabled:!o.value.post_title||l.value,loading:l.value,onClick:h,type:"primary"},{default:c(()=>[O(v(l.value?g(p)("Creating"):g(p)("Add Product")),1)]),_:1},8,["disabled","loading"])])])}}};class Id{constructor(e=new Date){this.date=e}getHours(){return this.date.getHours()}static greeting(){const e=new Id().getHours();if(e>=5&&e<12)return p("Good morning");if(e>=12&&e<17)return p("Good afternoon");if(e>=17&&e<21)return p("Good evening");{const a=[p("Step into the moonlight!"),p("Evening vibes!"),p("The night's still young!")];return a[Math.floor(Math.random()*a.length)]}}}const yS={class:"fc-current-user-info-wrap"},wS={class:"fc-current-user-info-content"},CS={class:"image"},BS=["src","alt"],kS={class:"content"},xS={key:0,class:"fc-current-user-info-action"},FS={__name:"CurrentUserInfo",setup(t){const e=T(!1),a=T(window.fluentCartAdminApp.me),s=()=>be.get(window,"fluentCartAdminApp.shop.store_name"),n=window.fluentCartAdminApp.total_products_count;return(o,i)=>{const l=C("el-button"),A=C("el-dialog");return f(),y("div",yS,[d("div",wS,[d("div",CS,[d("img",{src:a.value.avatar,alt:a.value.full_name},null,8,BS)]),d("div",kS,[d("h4",null,v(g(Id).greeting())+" "+v(a.value.full_name),1),d("p",null,v(g(p)("Welcome to %s %s",s(),"👋🏻")),1)])]),r(tt,{permission:"products/create"},{default:c(()=>[g(n)==0?(f(),y("div",xS,[r(l,{onClick:i[0]||(i[0]=u=>e.value=!0),type:"primary"},{default:c(()=>[O(v(g(p)("Add Product")),1)]),_:1})])):S("",!0)]),_:1}),r(A,{"append-to-body":!0,modelValue:e.value,"onUpdate:modelValue":i[1]||(i[1]=u=>e.value=u),onClose:i[2]||(i[2]=u=>e.value=!1),title:o.$t("Add New Product")},{default:c(()=>[r(Vl)]),_:1},8,["modelValue","title"])])}}},SS=["innerHTML"],Sc={__name:"FieldNote",props:{note:String},setup(t){return(e,a)=>(f(),y("div",{class:"form-note",innerHTML:t.note},null,8,SS))}},ES=Object.freeze(Object.defineProperty({__proto__:null,default:Sc},Symbol.toStringTag,{value:"Module"})),uh=Object.assign({name:"ValidationError"},{__name:"ValidationErrorNew",props:{errorKey:String,form:{type:Object,required:!0}},setup(t){return(e,a)=>t.form.hasValidationError(t.errorKey)?(f(),y("div",{key:0,class:le(`fluent-cart-admin-validation-error-wrapper ${t.errorKey}`)},[(f(!0),y(P,null,j(t.form.getValidationError(t.errorKey),(s,n)=>(f(),y("span",{class:"fluent-cart-admin-validation-error",key:s.toLowerCase().replace(/\s/g,"")},v(s),1))),128))],2)):S("",!0)}}),cg={__name:"Resolver",props:wa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},label:{type:String},attribute:{type:Object},callback:{type:Function}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Va(t,"modelValue"),a=Object.assign({"./Affix/Test.vue":()=>et(()=>import("./Test-B38lMb0r.js"),__vite__mapDeps([0,1,2]),import.meta.url),"./Base/Inputs/Checkbox.vue":()=>et(()=>Promise.resolve().then(()=>RS),void 0,import.meta.url),"./Base/Inputs/ColorPicker.vue":()=>et(()=>Promise.resolve().then(()=>WS),void 0,import.meta.url),"./Base/Inputs/Date.vue":()=>et(()=>Promise.resolve().then(()=>qS),void 0,import.meta.url),"./Base/Inputs/FieldNote.vue":()=>et(()=>Promise.resolve().then(()=>ES),void 0,import.meta.url),"./Base/Inputs/Input.vue":()=>et(()=>Promise.resolve().then(()=>KS),void 0,import.meta.url),"./Base/Inputs/Media.vue":()=>et(()=>Promise.resolve().then(()=>b4),void 0,import.meta.url),"./Base/Inputs/RadioGroup.vue":()=>et(()=>Promise.resolve().then(()=>PS),void 0,import.meta.url),"./Base/Inputs/RemoteSearchableSelect.vue":()=>et(()=>Promise.resolve().then(()=>e4),void 0,import.meta.url),"./Base/Inputs/Select.vue":()=>et(()=>Promise.resolve().then(()=>ZS),void 0,import.meta.url),"./Base/Inputs/Switch.vue":()=>et(()=>Promise.resolve().then(()=>VS),void 0,import.meta.url),"./Base/Inputs/Time.vue":()=>et(()=>Promise.resolve().then(()=>XS),void 0,import.meta.url),"./Base/Layouts/FormGrid.vue":()=>et(()=>Promise.resolve().then(()=>US),void 0,import.meta.url),"./Base/Layouts/FormSection.vue":()=>et(()=>Promise.resolve().then(()=>TS),void 0,import.meta.url),"./Base/Layouts/FormTab.vue":()=>et(()=>Promise.resolve().then(()=>$S),void 0,import.meta.url),"./Base/Layouts/FormTabPane.vue":()=>et(()=>Promise.resolve().then(()=>OS),void 0,import.meta.url),"./Coupon/BuyProducts.vue":()=>et(()=>import("./BuyProducts-CJBubt63.js"),__vite__mapDeps([3,1]),import.meta.url),"./Coupon/Categories.vue":()=>et(()=>import("./Categories-D9WevFlD.js"),__vite__mapDeps([4,1]),import.meta.url),"./Coupon/Code.vue":()=>et(()=>import("./Code-DR6iv3LY.js"),__vite__mapDeps([5,1]),import.meta.url),"./Coupon/GetProducts.vue":()=>et(()=>import("./GetProducts-uBkK9Cei.js"),__vite__mapDeps([6,1]),import.meta.url),"./Coupon/IncludeExclude/Categories.vue":()=>et(()=>import("./Categories-CD6i5OIO.js"),__vite__mapDeps([7,1]),import.meta.url),"./Coupon/IncludeExclude/Product.vue":()=>et(()=>import("./Product-CQL18t1o.js"),__vite__mapDeps([8,1]),import.meta.url),"./Coupon/Products.vue":()=>et(()=>import("./Products-BUqabe-f.js"),__vite__mapDeps([9,1]),import.meta.url),"./ModuleSettings.vue":()=>et(()=>import("./ModuleSettings-CMWt2FOc.js"),__vite__mapDeps([10,1,11,12,13,14,2,15,16]),import.meta.url),"./PaymentView.vue":()=>et(()=>import("./PaymentView-wEFQNR6D.js"),__vite__mapDeps([17,1,11,15]),import.meta.url),"./StoreSettings/AddressComponent.vue":()=>et(()=>import("./AddressComponent-cvveKS5n.js"),__vite__mapDeps([18,1,19,11,20,2,12,13,14,15,16,21,22,23]),import.meta.url),"./StoreSettings/CreatePageButton.vue":()=>et(()=>import("./CreatePageButton-BAj4XeYw.js"),__vite__mapDeps([24,1,15,11,21,13,22,19,12,14,2,16]),import.meta.url),"./StoreSettings/PageSelector.vue":()=>et(()=>import("./PageSelector-DY7rLFn1.js"),__vite__mapDeps([25,1,11,15,14,24,21,13,22,19,12,2,16]),import.meta.url)}),s=tp(null);he(()=>{n(o.name)});const n=async i=>{const l=`./${i}.vue`;a[l]?s.value=(await a[l]()).default:console.error(`Form Component ${l} not found`)},o=t;return(i,l)=>(f(),y(P,null,[(f(),U($s(s.value),bt({name:t.name,field:t.field,fieldKey:t.fieldKey,value:t.value,variant:t.variant,nesting:t.nesting,statePath:t.statePath,form:t.form,attribute:t.attribute,label:t.label,callback:t.callback},{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=A=>e.value=A)}),null,16,["modelValue"])),aa(i.$slots,"fieldNote"),aa(i.$slots,"validationError")],64))}},Td={__name:"FormGrid",props:{field:{type:Object},value:{type:Object},statePath:{type:String},form:{type:Object,required:!0}},setup(t){return(e,a)=>{var s,n,o,i,l,A,u,h,m,_;return f(),y("div",{class:"gap-2 grid grid-cols-dynamic sm:grid-cols-sm-dynamic md:grid-cols-md-dynamic lg:grid-cols-lg--dynamic",style:Ta({"--grid-columns":((s=t.field.columns)==null?void 0:s.default)??2,"--sm-grid-columns":((n=t.field.columns)==null?void 0:n.sm)??((o=t.field.columns)==null?void 0:o.default)??2,"--md-grid-columns":((i=t.field.columns)==null?void 0:i.sm)??((l=t.field.columns)==null?void 0:l.md)??((A=t.field.columns)==null?void 0:A.default)??2,"--lg-grid-columns":((u=t.field.columns)==null?void 0:u.lg)??((h=t.field.columns)==null?void 0:h.md)??((m=t.field.columns)==null?void 0:m.sm)??((_=t.field.columns)==null?void 0:_.default)??2})},[r(Hl,{form:t.form,schema:t.field.schema,value:t.value,statePath:t.statePath},null,8,["form","schema","value","statePath"])],4)}}},US=Object.freeze(Object.defineProperty({__proto__:null,default:Td},Symbol.toStringTag,{value:"Module"})),QS={key:0,class:"fc-content-card-header"},DS={key:0,class:"title"},MS={key:1,class:"fc-content-card-action"},dg={__name:"ContentCard",props:["title","show_heading"],setup(t){return(e,a)=>(f(),y("div",{class:le({"fc-content-card":t.show_heading!==!1})},[t.show_heading!==!1?(f(),y("div",QS,[t.title||e.$slots.title?(f(),y("div",DS,[aa(e.$slots,"title",{},()=>[O(v(t.title),1)])])):S("",!0),e.$slots.action?(f(),y("div",MS,[aa(e.$slots,"action")])):S("",!0)])):S("",!0),d("div",{class:le({"fc-content-card-body":t.show_heading!==!1})},[aa(e.$slots,"default")],2)],2))}},IS={class:"form-section"},ug={__name:"FormSection",props:{field:{type:Object},fieldKey:{type:String},value:{type:Object},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0}},setup(t){return(e,a)=>(f(),y("div",IS,[r(oe,null,{default:c(()=>[r(de,{title:t.field.title,border_bottom:""},null,8,["title"]),r(ae,null,{default:c(()=>[r(Td,{form:t.form,field:t.field,statePath:t.statePath,value:t.value},null,8,["form","field","statePath","value"])]),_:1})]),_:1})]))}},TS=Object.freeze(Object.defineProperty({__proto__:null,default:ug},Symbol.toStringTag,{value:"Module"})),fg={__name:"FormTab",props:{field:{type:Object},value:{type:Object},statePath:{type:String},form:{type:Object,required:!0}},setup(t){const e=t,a=T(""),s=T([]),n=Ra(),o=u=>{const h=u.props.name;i(h)},i=u=>{const h=new URL(window.location.href);h.hash=`#/settings/${u}`,window.history.replaceState(null,"",h.toString())},l=()=>{const h=window.location.hash.split("/").pop();s.value=Object.keys(e.field.schema);const m=s.value.find(_=>_===h);m?a.value=m:a.value=e.field.default_tab};let A;return he(()=>{A=n.beforeEach((u,h,m)=>{m(),setTimeout(()=>{l()},200)}),l()}),He(()=>{A&&A()}),(u,h)=>{const m=C("el-tabs");return f(),U(m,{modelValue:a.value,"onUpdate:modelValue":h[0]||(h[0]=_=>a.value=_),class:le(["fc-tabs-button",{"hidden-switch":t.field.hide_tab_switch}]),onTabClick:o,type:"card"},{default:c(()=>[r(Hl,{form:t.form,schema:t.field.schema,value:t.value,"state-path":t.statePath},null,8,["form","schema","value","state-path"])]),_:1},8,["modelValue","class"])}}},$S=Object.freeze(Object.defineProperty({__proto__:null,default:fg},Symbol.toStringTag,{value:"Module"})),hg={__name:"FormTabPane",props:{fieldKey:{type:String},field:{type:Object},value:{type:Object},statePath:{type:String},form:{type:Object,required:!0}},setup(t){return(e,a)=>{const s=C("el-tab-pane");return f(),U(s,{label:t.field.title,name:t.fieldKey},{default:c(()=>[r(Hl,{form:t.form,schema:t.field.schema,value:t.value,statePath:t.statePath},null,8,["form","schema","value","statePath"])]),_:1},8,["label","name"])}}},OS=Object.freeze(Object.defineProperty({__proto__:null,default:hg},Symbol.toStringTag,{value:"Module"}));class $d{}ee($d,"attributesBuilders",async(e,a,s)=>{if(e.attributes||(e.attributes={}),e.class&&(e.attributes.class=e.class),e.placeholder&&(e.attributes.placeholder=e.placeholder),typeof a!="function")return e.attributes??{};let n={};typeof e.events!="object"&&(n={}),n.hasOwnProperty("onChange")&&typeof n.onChange=="function"?n.onChange=(...o)=>{s.data.hasChange=!0,n.onChange(o)}:n.onChange=()=>{s.data.hasChange=!0};for(let o in e.events)n[o]=(...i)=>{a(e.events[o],i)};for(let o in e.attributes??{}){let i=e.attributes[o];typeof i=="function"&&await a(i,{})}return{...e.attributes??{},...n}});const LS={__name:"LayoutRenderer",props:{form:{type:Object,required:!0},field:{type:Object,required:!0},value:{type:Object,required:!0},statePath:{type:String,required:!0},fieldKey:{type:String,required:!0},fullStatePath:{type:String,required:!0}},setup(t){const e=t;We().ctx;const a=(o,i)=>{if(typeof o=="function")return o({data:e.value,form:e.form,statePath:e.statePath,field:e.field,event:Array.isArray(i)&&i.length===1?i[0]:i})},s=T(!1),n=T({});return he(async()=>{n.value=await $d.attributesBuilders(e.field,a,e.form),s.value=!0}),(o,i)=>(f(),y(P,null,[t.field.type==="grid"&&typeof t.field.schema<"u"?(f(),U(Td,bt({key:0,class:t.field.wrapperClass,form:t.form,field:t.field,value:t.value,statePath:t.fullStatePath},n.value),null,16,["class","form","field","value","statePath"])):S("",!0),t.field.type==="tab"&&typeof t.field.schema<"u"?(f(),U(fg,bt({key:1,form:t.form,field:t.field,value:t.value,statePath:t.fullStatePath},n.value),null,16,["form","field","value","statePath"])):S("",!0),t.field.type==="tab-pane"&&typeof t.field.schema<"u"&&typeof t.field.title<"u"?(f(),U(hg,bt({key:2,form:t.form,field:t.field,value:t.value,fieldKey:t.fieldKey,statePath:t.fullStatePath},n.value),null,16,["form","field","value","fieldKey","statePath"])):S("",!0),t.field.type==="section"?(f(),U(ug,bt({key:3,form:t.form,statePath:t.field.disable_nesting===!0?t.fullStatePath:t.fieldKey+".",field:t.field,"field-key":t.fieldKey,value:t.field.disable_nesting===!0?t.value:t.value[t.fieldKey],nesting:t.field.disable_nesting===!0},n.value),null,16,["form","statePath","field","field-key","value","nesting"])):S("",!0)],64))}},pg={__name:"Switch",props:wa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Va(t,"modelValue");return(a,s)=>{const n=C("el-switch");return f(),U(n,bt({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o),disabled:t.field.disabled},t.attribute),null,16,["modelValue","disabled"])}}},VS=Object.freeze(Object.defineProperty({__proto__:null,default:pg},Symbol.toStringTag,{value:"Module"})),mg={__name:"Checkbox",props:wa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Va(t,"modelValue");return(a,s)=>{const n=C("el-checkbox");return f(),U(n,bt({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o)},t.attribute,{"true-value":"yes","false-value":"no",disabled:t.field.disabled}),{default:c(()=>[O(v(t.label),1)]),_:1},16,["modelValue","disabled"])}}},RS=Object.freeze(Object.defineProperty({__proto__:null,default:mg},Symbol.toStringTag,{value:"Module"})),HS=["innerHTML"],gg={__name:"RadioGroup",props:wa({field:{type:Object},statePath:{type:String},value:{required:!0},form:{type:Object},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Va(t,"modelValue"),a=t,s=T([]),n=async(o="")=>{if(typeof a.field.options=="function")return s.value=await a.field.options({data:a.value,form:a.form,statePath:a.statePath,search:o});if(Array.isArray(a.field.options))return s.value=[...a.field.options]};return he(async()=>{await n()}),(o,i)=>{const l=C("el-radio"),A=C("el-radio-group");return f(),U(A,bt({modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=u=>e.value=u)},t.attribute),{default:c(()=>[(f(!0),y(P,null,j(t.field.options,(u,h)=>(f(),U(l,{key:h,value:u.value,class:le(u.option_class)},{default:c(()=>[d("div",null,v(u.label),1),d("div",{innerHTML:u.note},null,8,HS)]),_:2},1032,["value","class"]))),128))]),_:1},16,["modelValue"])}}},PS=Object.freeze(Object.defineProperty({__proto__:null,default:gg},Symbol.toStringTag,{value:"Module"})),NS=["innerHTML"],Kn={__name:"Input",props:wa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=We().ctx,a=Va(t,"modelValue"),s=t,n=T(),o=async()=>{typeof s.field.prefix=="function"?n.value=await s.callback(s.field.prefix):n.value=s.field.prefix};return he(()=>{o()}),U_(()=>{o()}),J(()=>s.fieldKey==="amount"?s.form.data.values.type==="fixed"?cp.shop.get("currency_sign"):"%":e.appVars.shop.currency_sign),(i,l)=>{var u;const A=C("el-input");return f(),U(A,bt({modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=h=>a.value=h)},t.attribute,{disabled:t.field.disabled}),vi({_:2},[(u=t.field.prefix)!=null&&u.component?{name:"prefix",fn:c(()=>[r(cg,{form:t.form,name:t.field.prefix.component,field:t.field,value:t.value},null,8,["form","name","field","value"])]),key:"0"}:t.field.prefix?{name:"prefix",fn:c(()=>[d("div",{innerHTML:n.value},null,8,NS)]),key:"1"}:void 0]),1040,["modelValue","disabled"])}}},KS=Object.freeze(Object.defineProperty({__proto__:null,default:Kn},Symbol.toStringTag,{value:"Module"})),zS={class:"fc-color-picker-box"},GS={class:"fc-color-picker-trigger-wrap"},jS={key:0,class:"text-xs text-system-light"},YS={key:1,class:"fc-color-picker-action-wrap"},Od={__name:"ColorPicker",props:wa({field:{type:Object},statePath:{type:String},value:{required:!0},form:{type:Object},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Va(t,"modelValue"),a=s=>{e.value=""};return(s,n)=>{const o=C("el-color-picker");return f(),y("div",zS,[d("div",GS,[r(o,bt({modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=i=>e.value=i)},t.attribute,{disabled:t.field.disabled,"popper-class":"fc-color-picker-popover"}),null,16,["modelValue","disabled"]),e.value?S("",!0):(f(),U(G,{key:0,name:"ColorPicker",class:"fc-color-picker-icon w-4 h-4"}))]),e.value?S("",!0):(f(),y("span",jS,v(g(p)("Add...")),1)),e.value?(f(),y("div",YS,[d("span",null,v(e.value),1),r(G,{name:"Cross",class:"fc-color-picker-action w-5 h-5",onClick:n[1]||(n[1]=i=>a(s.fieldKey))})])):S("",!0)])}}},WS=Object.freeze(Object.defineProperty({__proto__:null,default:Od},Symbol.toStringTag,{value:"Module"})),_g={__name:"Date",props:wa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Va(t,"modelValue");return(a,s)=>{const n=C("el-date-picker");return f(),U(n,bt({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o)},t.attribute,{disabled:t.field.disabled}),null,16,["modelValue","disabled"])}}},qS=Object.freeze(Object.defineProperty({__proto__:null,default:_g},Symbol.toStringTag,{value:"Module"})),vg={__name:"Time",props:wa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Va(t,"modelValue");return(a,s)=>{const n=C("el-time-select");return f(),U(n,bt({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o)},t.attribute,{disabled:t.field.disabled}),null,16,["modelValue","disabled"])}}},XS=Object.freeze(Object.defineProperty({__proto__:null,default:vg},Symbol.toStringTag,{value:"Module"})),JS={key:0},bg={__name:"Select",props:wa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Va(t,"modelValue"),a=t,s=T([]),n=T(!1),o=async(l="")=>{n.value=!0,typeof a.field.options=="function"&&(s.value=await a.field.options({data:a.value,form:a.form,statePath:a.statePath,search:l})),Array.isArray(a.field.options)&&(s.value=[...a.field.options]),n.value=!1};he(async()=>{await o()});const i=l=>typeof l.disabled=="function"?a.callback(l.disabled,{}):l.disabled;return(l,A)=>{const u=C("el-option"),h=C("el-select");return f(),U(h,bt({modelValue:e.value,"onUpdate:modelValue":A[0]||(A[0]=m=>e.value=m)},t.attribute,{"remote-method":o,loading:n.value,filterable:t.field.filterable===!0,clearable:t.field.clearable===!0,disabled:t.field.disabled}),{default:c(()=>[(f(!0),y(P,null,j(s.value,(m,_)=>(f(),U(u,{key:_,value:m.value,label:m.label,disabled:i(m)},{default:c(()=>[m.slot?(f(),y("span",JS,v(m.slot),1)):S("",!0)]),_:2},1032,["value","label","disabled"]))),128))]),_:1},16,["modelValue","loading","filterable","clearable","disabled"])}}},ZS=Object.freeze(Object.defineProperty({__proto__:null,default:bg},Symbol.toStringTag,{value:"Module"})),yg={__name:"RemoteSearchableSelect",props:wa({field:{type:Object},key:{type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Va(t,"modelValue"),a=t,s=T(!1),n=T(a.field.options||[]),o=i=>{if(a.field.search_only_on_type===!0){if(i.query.length===0)return}else if(i.query.length<1&&n.value.length>0)return;s.value=!0,ne.get("forms/search_options",{search_by:i.query,search_for:i.key}).then(l=>{n.value=l.options,s.value=!1})};return(i,l)=>{const A=C("el-option"),u=C("el-select");return f(),U(u,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=h=>e.value=h),filterable:"",remote:"",placeholder:t.field.placeholder??g(p)("Please enter a keyword"),"remote-method":h=>{o({query:h,key:t.field.remote_key})},loading:s.value,multiple:t.field.multiple},{default:c(()=>[(f(!0),y(P,null,j(n.value,h=>(f(),U(A,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading","multiple"])}}},e4=Object.freeze(Object.defineProperty({__proto__:null,default:yg},Symbol.toStringTag,{value:"Module"}));function mo(t,e){e===void 0&&(e={});var a=e.insertAt;if(t&&typeof document<"u"){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",a==="top"&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}mo(".vel-fade-enter-active,.vel-fade-leave-active{-webkit-transition:all .3s ease;transition:all .3s ease}.vel-fade-enter-from,.vel-fade-leave-to{opacity:0}.vel-img-swiper{display:block;position:relative}.vel-modal{background:rgba(0,0,0,.5);bottom:0;left:0;margin:0;position:fixed;right:0;top:0;z-index:9998}.vel-img-wrapper{left:50%;margin:0;position:absolute;top:50%;-webkit-transform:translate(-50% -50%);transform:translate(-50% -50%);-webkit-transition:.3s linear;transition:.3s linear;will-change:transform opacity}.vel-img,.vel-img-wrapper{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-img{background-color:rgba(0,0,0,.7);-webkit-box-shadow:0 5px 20px 2px rgba(0,0,0,.7);box-shadow:0 5px 20px 2px rgba(0,0,0,.7);display:block;max-height:80vh;max-width:80vw;position:relative;-webkit-transition:-webkit-transform .3s ease-in-out;transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out;transition:transform .3s ease-in-out,-webkit-transform .3s ease-in-out}@media (max-width:750px){.vel-img{max-height:95vh;max-width:85vw}}.vel-btns-wrapper{position:static}.vel-btns-wrapper .btn__close,.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;font-size:32px;opacity:.6;outline:none;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-transition:.15s linear;transition:.15s linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-btns-wrapper .btn__close:hover,.vel-btns-wrapper .btn__next:hover,.vel-btns-wrapper .btn__prev:hover{opacity:1}.vel-btns-wrapper .btn__close.disable,.vel-btns-wrapper .btn__close.disable:hover,.vel-btns-wrapper .btn__next.disable,.vel-btns-wrapper .btn__next.disable:hover,.vel-btns-wrapper .btn__prev.disable,.vel-btns-wrapper .btn__prev.disable:hover{cursor:default;opacity:.2}.vel-btns-wrapper .btn__next{right:12px}.vel-btns-wrapper .btn__prev{left:12px}.vel-btns-wrapper .btn__close{right:10px;top:24px}@media (max-width:750px){.vel-btns-wrapper .btn__next,.vel-btns-wrapper .btn__prev{font-size:20px}.vel-btns-wrapper .btn__close{font-size:24px}.vel-btns-wrapper .btn__next{right:4px}.vel-btns-wrapper .btn__prev{left:4px}}.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:12px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{left:auto;right:12px}@media (max-width:750px){.vel-modal.is-rtl .vel-btns-wrapper .btn__next{left:4px;right:auto}.vel-modal.is-rtl .vel-btns-wrapper .btn__prev{left:auto;right:4px}}.vel-modal.is-rtl .vel-img-title{direction:rtl}");mo('.vel-loading{left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-loading .ring{display:inline-block;height:64px;width:64px}.vel-loading .ring:after{-webkit-animation:ring 1.2s linear infinite;animation:ring 1.2s linear infinite;border-color:hsla(0,0%,100%,.7) transparent;border-radius:50%;border-style:solid;border-width:5px;content:" ";display:block;height:46px;margin:1px;width:46px}@-webkit-keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes ring{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}');mo(".vel-on-error{left:50%;position:absolute;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vel-on-error .icon{color:#aaa;font-size:80px}");mo(".vel-img-title{bottom:60px;color:#ccc;cursor:default;font-size:12px;left:50%;line-height:1;max-width:80%;opacity:.8;overflow:hidden;position:absolute;text-align:center;text-overflow:ellipsis;-webkit-transform:translate(-50%);transform:translate(-50%);-webkit-transition:opacity .15s;transition:opacity .15s;white-space:nowrap}.vel-img-title:hover{opacity:1}");mo(".vel-icon{fill:currentColor;height:1em;overflow:hidden;vertical-align:-.15em;width:1em}");mo(".vel-toolbar{border-radius:4px;bottom:8px;display:-webkit-box;display:-ms-flexbox;display:flex;left:50%;opacity:.9;overflow:hidden;padding:0;position:absolute;-webkit-transform:translate(-50%);transform:translate(-50%)}.vel-toolbar,.vel-toolbar .toolbar-btn{background-color:#2d2d2d;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vel-toolbar .toolbar-btn{-ms-flex-negative:0;-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;flex-shrink:0;font-size:20px;outline:none;padding:6px 10px}.vel-toolbar .toolbar-btn:active,.vel-toolbar .toolbar-btn:hover{background-color:#3d3d3d}");const Ea="vel",Ga=qs({name:"SvgIcon",props:{type:{type:String,default:""}},setup:t=>()=>r("svg",{class:`${Ea}-icon icon`,"aria-hidden":"true"},[r("use",{"xlink:href":`#icon-${t.type}`},null)])}),Rl=typeof window<"u",zn=()=>{};let wg=!1;if(Rl)try{const t={};Object.defineProperty(t,"passive",{get(){wg=!0}}),window.addEventListener("test-passive",zn,t)}catch{}const fh=function(t,e,a){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];Rl&&t.addEventListener(e,a,!!wg&&{capture:!1,passive:s})},hh=(t,e,a)=>{Rl&&t.removeEventListener(e,a)},t4=t=>{t.preventDefault()},a4=Object.prototype.toString,Ld=t=>e=>a4.call(e).slice(8,-1)===t,s4=t=>!!t&&Ld("Object")(t),ph=t=>!!t&&Ld("String")(t);function n4(t){return t!=null}const o4=qs({name:"Toolbar",props:{zoomIn:{type:Function,default:zn},zoomOut:{type:Function,default:zn},rotateLeft:{type:Function,default:zn},rotateRight:{type:Function,default:zn},resize:{type:Function,default:zn},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1}},setup:t=>()=>r("div",{class:`${Ea}-toolbar`},[!t.zoomDisabled&&r(P,null,[r("div",{role:"button","aria-label":"zoom in button",class:"toolbar-btn toolbar-btn__zoomin",onClick:t.zoomIn},[r(Ga,{type:"zoomin"},null)]),r("div",{role:"button","aria-label":"zoom out button",class:"toolbar-btn toolbar-btn__zoomout",onClick:t.zoomOut},[r(Ga,{type:"zoomout"},null)])]),r("div",{role:"button","aria-label":"resize image button",class:"toolbar-btn toolbar-btn__resize",onClick:t.resize},[r(Ga,{type:"resize"},null)]),!t.rotateDisabled&&r(P,null,[r("div",{role:"button","aria-label":"image rotate left button",class:"toolbar-btn toolbar-btn__rotate",onClick:t.rotateLeft},[r(Ga,{type:"rotate-left"},null)]),r("div",{role:"button","aria-label":"image rotate right button",class:"toolbar-btn toolbar-btn__rotate",onClick:t.rotateRight},[r(Ga,{type:"rotate-right"},null)])])])}),i4=()=>r("div",{class:`${Ea}-loading`},[r("div",{class:"ring"},null)]),r4=()=>r("div",{class:`${Ea}-on-error`},[r("div",{class:"ring"},null),r(Ga,{type:"img-broken"},null)]),l4=(t,e)=>{let{slots:a}=e;return r("div",{class:`${Ea}-img-title`},[a.default?a.default():""])},A4=qs({name:"DefaultIcons",setup:()=>()=>r("svg",{"aria-hidden":!0,style:"position: absolute; width: 0; height: 0; overflow: hidden; visibility: hidden;"},[r("symbol",{id:"icon-rotate-right",viewBox:"0 0 1024 1024"},[r("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973z m282.559912-479.07185A509.887841 509.887841 0 0 0 511.99984 0.00032C229.215928 0.00032 0 229.216248 0 512.00016s229.215928 511.99984 511.99984 511.99984 511.99984-229.215928 511.99984-511.99984c0-3.743999-0.032-7.455998-0.128-11.167997-1.631999-11.295996-8.159997-27.103992-31.87199-27.103991-27.487991 0-31.67999 21.247993-32.03199 32.06399l0.032 4.127999a30.62399 30.62399 0 0 0 0.16 2.079999H959.9997c0 247.423923-200.575937 447.99986-447.99986 447.99986S63.99998 759.424083 63.99998 512.00016 264.575917 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 1 277.439913 96.22397l-94.91197 91.679971c-25.439992 24.607992-17.439995 44.991986 17.887994 45.599986l188.031942 3.295999a64.31998 64.31998 0 0 0 65.055979-62.84798l3.295999-188.127942C969.407697 15.040315 949.311703 5.792318 923.871711 30.368311l-87.999972 85.023973z",fill:""},null)]),r("symbol",{id:"icon-rotate-left",viewBox:"0 0 1024 1024"},[r("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973zM188.159941 115.392284A509.887841 509.887841 0 0 1 511.99984 0.00032c282.783912 0 511.99984 229.215928 511.99984 511.99984s-229.215928 511.99984-511.99984 511.99984S0 794.784072 0 512.00016c0-3.743999 0.032-7.455998 0.128-11.167997 1.631999-11.295996 8.159997-27.103992 31.87199-27.103991 27.487991 0 31.67999 21.247993 32.03199 32.06399L63.99998 509.920161a30.62399 30.62399 0 0 1-0.16 2.079999H63.99998c0 247.423923 200.575937 447.99986 447.99986 447.99986s447.99986-200.575937 447.99986-447.99986S759.423763 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 0-277.439913 96.22397l94.91197 91.679971c25.439992 24.607992 17.439995 44.991986-17.887994 45.599986L123.551961 300.800226a64.31998 64.31998 0 0 1-65.055979-62.84798l-3.295999-188.127942C54.591983 15.040315 74.687977 5.792318 100.127969 30.368311l87.999972 85.023973z",fill:""},null)]),r("symbol",{id:"icon-resize",viewBox:"0 0 1024 1024"},[r("path",{d:"M456.036919 791.8108 270.553461 791.8108 460.818829 601.572038l-39.593763-39.567157L231.314785 751.915162l0.873903-183.953615c0-15.465227-12.515035-27.981285-27.981285-27.981285s-27.981285 12.515035-27.981285 27.981285l0 251.829516c0 8.3072 3.415796 14.975063 8.826016 19.564591 5.082762 5.192256 12.132318 8.416693 19.947308 8.416693l251.036453 0c15.46625 0 27.981285-12.514012 27.981285-27.981285C484.018204 804.325835 471.504192 791.8108 456.036919 791.8108zM838.945819 184.644347c-5.082762-5.191232-12.132318-8.416693-19.947308-8.416693L567.961034 176.227654c-15.46625 0-27.981285 12.515035-27.981285 27.981285 0 15.46625 12.514012 27.981285 27.981285 27.981285l185.483458 0L563.206754 422.427962l39.567157 39.567157 189.910281-189.910281-0.873903 183.953615c0 15.46625 12.514012 27.981285 27.981285 27.981285s27.981285-12.514012 27.981285-27.981285L847.772858 204.208938C847.771835 195.902762 844.356039 189.234899 838.945819 184.644347zM847.771835 64.303538 176.227142 64.303538c-61.809741 0-111.924115 50.115398-111.924115 111.924115l0 671.544693c0 61.809741 50.114374 111.924115 111.924115 111.924115l671.544693 0c61.809741 0 111.924115-50.114374 111.924115-111.924115l0-671.544693C959.69595 114.418936 909.581576 64.303538 847.771835 64.303538zM903.733381 847.772346c0 30.878265-25.056676 55.962569-55.962569 55.962569L176.227142 903.734916c-30.90487 0-55.962569-25.084305-55.962569-55.962569l0-671.544693c0-30.9325 25.056676-55.962569 55.962569-55.962569l671.544693 0c30.90487 0 55.962569 25.03007 55.962569 55.962569L903.734404 847.772346z"},null)]),r("symbol",{id:"icon-img-broken",viewBox:"0 0 1024 1024"},[r("path",{d:"M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m0 682.666667H213.333333v-195.413334l42.24 42.24 170.666667-170.666666 170.666667 170.666666 170.666666-170.24L810.666667 530.346667V810.666667z m0-401.493334l-43.093334-43.093333-170.666666 171.093333-170.666667-170.666666-170.666667 170.666666-42.24-42.666666V213.333333h597.333334v195.84z"},null)]),r("symbol",{id:"icon-prev",viewBox:"0 0 1024 1024"},[r("path",{d:"M784.652701 955.6957 346.601985 517.644983c-2.822492-2.822492-2.822492-7.902977 0-11.289967l439.179713-439.179713c6.77398-6.77398 10.725469-16.370452 10.725469-25.966924L796.507166 36.692393c0-20.32194-16.370452-36.692393-36.692393-36.692393l-4.515987 0c-9.596472 0-19.192944 3.951488-25.966924 10.725469L250.072767 489.420066c-12.418964 12.418964-12.418964 32.740904 0 45.159868l477.565601 477.565601c7.338479 7.338479 17.499449 11.854465 28.224917 11.854465l0 0c22.015436 0 40.079383-18.063947 40.079383-40.079383l0 0C796.507166 973.759647 791.99118 963.598677 784.652701 955.6957z"},null)]),r("symbol",{id:"icon-next",viewBox:"0 0 1024 1024"},[r("path",{d:"M246.121279 955.6957l438.050717-438.050717c2.822492-2.822492 2.822492-7.902977 0-11.289967L244.992282 67.175303c-6.77398-6.77398-10.725469-16.370452-10.725469-25.966924L234.266814 36.692393C234.266814 16.370452 250.637266 0 270.959206 0l4.515987 0c9.596472 0 19.192944 3.951488 25.966924 10.725469l478.694598 478.694598c12.418964 12.418964 12.418964 32.740904 0 45.159868l-477.565601 477.565601c-7.338479 7.338479-17.499449 11.854465-28.224917 11.854465l0 0c-22.015436 0-40.079383-18.063947-40.079383-40.079383l0 0C234.266814 973.759647 238.7828 963.598677 246.121279 955.6957z"},null)]),r("symbol",{id:"icon-zoomin",viewBox:"0 0 1024 1024"},[r("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),r("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null),r("path",{d:"M367.488 238.144h127.104v390.72H367.488z"},null)]),r("symbol",{id:"icon-close",viewBox:"0 0 1024 1024"},[r("path",{d:"M570.24 512l259.2 259.2-58.88 58.24L512 570.24l-261.12 261.12-58.24-58.24L453.76 512 194.56 252.8l58.24-58.24L512 453.76l261.12-261.12 58.24 58.24z"},null)]),r("symbol",{id:"icon-zoomout",viewBox:"0 0 1024 1024"},[r("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),r("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null)])])}),ti=Rl?window:global;let mh=Date.now();function c4(t){const e=Date.now(),a=Math.max(0,16-(e-mh)),s=setTimeout(t,a);return mh=e+a,s}function SA(t){return(ti.requestAnimationFrame||c4).call(ti,t)}function gh(t){(ti.cancelAnimationFrame||ti.clearTimeout).call(ti,t)}function _h(t,e){const a=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(a*a+s*s)}function EA(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!Q_(t)}var UA=qs({name:"VueEasyLightbox",props:{imgs:{type:[Array,String],default:()=>""},visible:{type:Boolean,default:!1},index:{type:Number,default:0},scrollDisabled:{type:Boolean,default:!0},escDisabled:{type:Boolean,default:!1},moveDisabled:{type:Boolean,default:!1},titleDisabled:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},teleport:{type:[String,Object],default:null},swipeTolerance:{type:Number,default:50},loop:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},zoomScale:{type:Number,default:.12},maxZoom:{type:Number,default:3},minZoom:{type:Number,default:.1},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1},pinchDisabled:{type:Boolean,default:!1},dblclickDisabled:{type:Boolean,default:!1}},emits:{hide:()=>!0,"on-error":t=>!0,"on-prev":(t,e)=>!0,"on-next":(t,e)=>!0,"on-prev-click":(t,e)=>!0,"on-next-click":(t,e)=>!0,"on-index-change":(t,e)=>!0,"on-rotate":t=>!0},setup(t,e){let{emit:a,slots:s}=e;const{imgRef:n,imgState:o,setImgSize:i}=(()=>{const ue=T(),ge=zo({width:0,height:0,maxScale:1});return{imgRef:ue,imgState:ge,setImgSize:()=>{if(ue.value){const{width:Oe,height:Ae,naturalWidth:xe}=ue.value;ge.maxScale=xe/Oe,ge.width=Oe,ge.height=Ae}}}})(),l=T(t.index),A=T(""),u=zo({scale:1,lastScale:1,rotateDeg:0,top:0,left:0,initX:0,initY:0,lastX:0,lastY:0,touches:[]}),h=zo({loadError:!1,loading:!1,dragging:!1,gesturing:!1,wheeling:!1}),m=J(()=>{return ue=t.imgs,Ld("Array")(ue)?t.imgs.map(ge=>typeof ge=="string"?{src:ge}:function(Oe){return s4(Oe)&&ph(Oe.src)}(ge)?ge:void 0).filter(n4):ph(t.imgs)?[{src:t.imgs}]:[];var ue}),_=J(()=>m.value[l.value]),B=J(()=>{var ue;return(ue=m.value[l.value])==null?void 0:ue.src}),b=J(()=>{var ue;return(ue=m.value[l.value])==null?void 0:ue.title}),w=J(()=>{var ue;return(ue=m.value[l.value])==null?void 0:ue.alt}),k=J(()=>({cursor:h.loadError?"default":t.moveDisabled?h.dragging?"grabbing":"grab":"move",top:`calc(50% + ${u.top}px)`,left:`calc(50% + ${u.left}px)`,transition:h.dragging||h.gesturing?"none":"",transform:`translate(-50%, -50%) scale(${u.scale}) rotate(${u.rotateDeg}deg)`})),F=()=>{a("hide")},x=()=>{u.scale=1,u.lastScale=1,u.rotateDeg=0,u.top=0,u.left=0,h.loadError=!1,h.dragging=!1,h.loading=!0},E=(ue,ge)=>{const Oe=l.value;x(),l.value=ue,m.value[l.value]===m.value[ue]&&me(()=>{h.loading=!1}),t.visible&&Oe!==ue&&(ge&&ge(Oe,ue),a("on-index-change",Oe,ue))},M=()=>{const ue=l.value,ge=t.loop?(ue+1)%m.value.length:ue+1;!t.loop&&ge>m.value.length-1||E(ge,(Oe,Ae)=>{a("on-next",Oe,Ae),a("on-next-click",Oe,Ae)})},D=()=>{const ue=l.value;let ge=ue-1;if(ue===0){if(!t.loop)return;ge=m.value.length-1}E(ge,(Oe,Ae)=>{a("on-prev",Oe,Ae),a("on-prev-click",Oe,Ae)})},R=ue=>{Math.abs(1-ue)<.05?ue=1:Math.abs(o.maxScale-ue)<.05&&(ue=o.maxScale),u.lastScale=u.scale,u.scale=ue},$=()=>{const ue=u.scale+t.zoomScale;ue<o.maxScale*t.maxZoom&&R(ue)},Q=()=>{const ue=u.scale-t.zoomScale;ue>t.minZoom&&R(ue)},I=()=>{const ue=u.rotateDeg%360;a("on-rotate",Math.abs(ue<0?ue+360:ue))},L=()=>{u.rotateDeg-=90,I()},V=()=>{u.rotateDeg+=90,I()},N=()=>{u.scale=1,u.top=0,u.left=0},Y=function(){let ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return!t.moveDisabled&&ue===0},{onMouseDown:K,onMouseMove:X,onMouseUp:re}=((ue,ge,Oe)=>{let Ae,xe=!1;return{onMouseDown:Ve=>{ue.initX=ue.lastX=Ve.clientX,ue.initY=ue.lastY=Ve.clientY,ge.dragging=!0,xe=!1,Ve.stopPropagation()},onMouseUp:Ve=>{Oe(Ve.button)&&gh(Ae),ge.dragging=!1,xe=!1},onMouseMove:Ve=>{if(ge.dragging)if(Oe(Ve.button)){if(xe)return;xe=!0,Ae=SA(()=>{const{top:ma,left:Pt,lastY:Dt,lastX:kt}=ue;ue.top=ma-Dt+Ve.clientY,ue.left=Pt-kt+Ve.clientX,ue.lastX=Ve.clientX,ue.lastY=Ve.clientY,xe=!1})}else ue.lastX=Ve.clientX,ue.lastY=Ve.clientY;Ve.stopPropagation()}}})(u,h,Y),{onTouchStart:ce,onTouchMove:Z,onTouchEnd:H}=((ue,ge,Oe,Ae,xe)=>{let Ve,ma=!1;return{onTouchStart:Pt=>{const{touches:Dt}=Pt;Dt.length>1&&xe()?(Oe.gesturing=!0,ge.touches=Dt):(ge.initX=ge.lastX=Dt[0].clientX,ge.initY=ge.lastY=Dt[0].clientY,Oe.dragging=!0),Pt.stopPropagation()},onTouchMove:Pt=>{if(ma)return;const{touches:Dt}=Pt,{lastX:kt,lastY:Ba,left:xt,top:qt,scale:Pa}=ge;if(!Oe.gesturing&&Oe.dragging){if(!Dt[0])return;const{clientX:cs,clientY:qa}=Dt[0];Ae()?Ve=SA(()=>{ge.lastX=cs,ge.lastY=qa,ge.top=qt-Ba+qa,ge.left=xt-kt+cs,ma=!1}):(ge.lastX=cs,ge.lastY=qa)}else Oe.gesturing&&ge.touches.length>1&&Dt.length>1&&xe()&&(Ve=SA(()=>{const cs=(_h(ge.touches[0],ge.touches[1])-_h(Dt[0],Dt[1]))/ue.width;ge.touches=Dt;const qa=Pa-1.3*cs;qa>.5&&qa<1.5*ue.maxScale&&(ge.scale=qa),ma=!1}))},onTouchEnd:()=>{gh(Ve),Oe.dragging=!1,Oe.gesturing=!1,ma=!1}}})(o,u,h,Y,()=>!t.pinchDisabled),z=()=>{t.dblclickDisabled||(u.scale!==o.maxScale?(u.lastScale=u.scale,u.scale=o.maxScale):u.scale=u.lastScale)},W=ue=>{h.loadError||h.gesturing||h.loading||h.dragging||h.wheeling||!t.scrollDisabled||t.zoomDisabled||(h.wheeling=!0,setTimeout(()=>{h.wheeling=!1},80),ue.deltaY<0?$():Q())},ie=ue=>{const ge=ue;t.visible&&(!t.escDisabled&&ge.key==="Escape"&&t.visible&&F(),ge.key==="ArrowLeft"&&(t.rtl?M():D()),ge.key==="ArrowRight"&&(t.rtl?D():M()))},te=()=>{t.maskClosable&&F()},se=()=>{i()},pe=()=>{h.loading=!1},Se=ue=>{h.loading=!1,h.loadError=!0,a("on-error",ue)},$e=()=>{t.visible&&i()};ke(()=>t.index,ue=>{ue<0||ue>=m.value.length||E(ue)}),ke(()=>h.dragging,(ue,ge)=>{const Oe=!ue&&ge;if(!Y()&&Oe){const Ae=u.lastX-u.initX,xe=u.lastY-u.initY,Ve=t.swipeTolerance;Math.abs(Ae)>Math.abs(xe)&&(Ae<-1*Ve?M():Ae>Ve&&D())}}),ke(()=>t.visible,ue=>{if(ue){x();const ge=m.value.length;if(ge===0)return l.value=0,h.loading=!1,void me(()=>h.loadError=!0);l.value=t.index>=ge?ge-1:t.index<0?0:t.index,t.scrollDisabled&&Ue()}else t.scrollDisabled&&Te()});const Ue=()=>{document&&(A.value=document.body.style.overflowY,document.body.style.overflowY="hidden")},Te=()=>{document&&(document.body.style.overflowY=A.value)};he(()=>{fh(document,"keydown",ie),fh(window,"resize",$e)}),ro(()=>{hh(document,"keydown",ie),hh(window,"resize",$e),t.scrollDisabled&&Te()});const Qe=()=>h.loading?s.loading?s.loading({key:"loading"}):r(i4,{key:"img-loading"},null):h.loadError?s.onerror?s.onerror({key:"onerror"}):r(r4,{key:"img-on-error"},null):r("div",{class:`${Ea}-img-wrapper`,style:k.value,key:"img-wrapper"},[r("img",{alt:w.value,ref:n,draggable:"false",class:`${Ea}-img`,src:B.value,onMousedown:K,onMouseup:re,onMousemove:X,onTouchstart:ce,onTouchmove:Z,onTouchend:H,onLoad:se,onDblclick:z,onDragstart:ue=>{ue.preventDefault()}},null)]),Ee=()=>{if(s["prev-btn"])return s["prev-btn"]({prev:D});if(m.value.length<=1)return;const ue=!t.loop&&l.value<=0;return r("div",{role:"button","aria-label":"previous image button",class:"btn__prev "+(ue?"disable":""),onClick:D},[t.rtl?r(Ga,{type:"next"},null):r(Ga,{type:"prev"},null)])},Ze=()=>{if(s["next-btn"])return s["next-btn"]({next:M});if(m.value.length<=1)return;const ue=!t.loop&&l.value>=m.value.length-1;return r("div",{role:"button","aria-label":"next image button",class:"btn__next "+(ue?"disable":""),onClick:M},[t.rtl?r(Ga,{type:"prev"},null):r(Ga,{type:"next"},null)])},mt=()=>{if(!(t.titleDisabled||h.loading||h.loadError))return s.title?s.title({currentImg:_.value}):b.value?r(l4,null,{default:()=>[b.value]}):void 0},Ge=()=>{let ue;if(t.visible)return r("div",{onTouchmove:t4,class:[`${Ea}-modal`,t.rtl?"is-rtl":""],onClick:Ke(te,["self"]),onWheel:W},[r(A4,null,null),r(vr,{name:`${Ea}-fade`,mode:"out-in"},EA(ue=Qe())?ue:{default:()=>[ue]}),r("img",{style:"display:none;",src:B.value,onError:Se,onLoad:pe},null),r("div",{class:`${Ea}-btns-wrapper`},[Ee(),Ze(),mt(),s["close-btn"]?s["close-btn"]({close:F}):r("div",{role:"button","aria-label":"close image preview button",class:"btn__close",onClick:F},[r(Ga,{type:"close"},null)]),s.toolbar?s.toolbar({toolbarMethods:{zoomIn:$,zoomOut:Q,rotate:L,rotateLeft:L,rotateRight:V,resize:N},zoomIn:$,zoomOut:Q,rotate:L,rotateLeft:L,rotateRight:V,resize:N}):r(o4,{zoomIn:$,zoomOut:Q,resize:N,rotateLeft:L,rotateRight:V,rotateDisabled:t.rotateDisabled,zoomDisabled:t.zoomDisabled},null)])])};return()=>{let ue;if(t.teleport){let ge;return r(vl,{to:t.teleport},{default:()=>[r(vr,{name:`${Ea}-fade`},EA(ge=Ge())?ge:{default:()=>[ge]})]})}return r(vr,{name:`${Ea}-fade`},EA(ue=Ge())?ue:{default:()=>[ue]})}}});const Cg=Object.assign(UA,{install:t=>{t.component(UA.name,UA)}}),d4={name:"Attachments",props:{multiple:Boolean,attachments:{type:[Array,Object],default:()=>[]},empty_text:String,isSingle:Boolean,title:String,type:String,icon:String,showList:{type:Boolean,default:!0},showDeleteButton:{type:Boolean,default:!0},previewImage:{type:Boolean,default:!0},mediaInputSize:{type:String},mediaInputBg:{type:String}},emits:["removeImage","mediaUploaded"],data(){return{visible:!1,imageIndex:0,lightboxData:[],images:T([])}},components:{MediaButton:fp,VueEasyLightbox:Cg,IconButton:we,Delete:hn},computed:{showMediaButtonAsIcon:function(){return!this.multiple&&this.attachments.length===1}},mounted:function(){Array.isArray(this.attachments)&&this.attachments.length>0&&this.attachments.forEach(t=>{this.lightboxData.push(t.url),this.images.push({id:t.id,url:t.url,title:t.title})})},methods:{translate:p,removeImageEvent(t){this.$emit("removeImage",t)},onMediaSelected(t){this.images=t.map(e=>({id:e.id,title:e.title,url:e.url})),this.$emit("mediaUploaded",this.images)}},watch:{attachments:{handler:function(t,e){return this.lightboxData=[],Array.isArray(t)&&t.length>0&&t.map((a,s)=>{this.lightboxData.push(a.url)}),t},deep:!0}}},u4={class:"fc-attachments-wrap",style:{position:"relative"}},f4={class:"fc-attachment-img-wrap"},h4=["src","alt","onClick"],p4={class:"fc-attachments-button"};function m4(t,e,a,s,n,o){const i=C("VueEasyLightbox"),l=C("MediaButton"),A=C("IconButton"),u=C("Delete");return f(),y(P,null,[r(i,{visible:n.visible,imgs:n.lightboxData,index:n.imageIndex,onHide:e[0]||(e[0]=()=>{this.visible=!1})},null,8,["visible","imgs","index"]),d("div",u4,[a.attachments?(f(),y("ul",{key:0,class:le(`fc-attachments-list ${a.multiple?"is-multiple":"fc-single-attachment"} ${a.attachments.length>0?"is-single":""}`)},[a.showList===!0?(f(!0),y(P,{key:0},j(a.attachments,(h,m)=>(f(),y("li",{key:m,class:le([[a.mediaInputSize,a.mediaInputBg],"fc-attachment-item"])},[d("div",f4,[a.previewImage?(f(),y("img",{key:0,src:h.url,alt:h.title,onClick:()=>{this.imageIndex=m,this.visible=!0}},null,8,h4)):S("",!0),o.showMediaButtonAsIcon&&!a.multiple?(f(),U(A,{key:1,size:"x-small"},{default:c(()=>[r(l,{"icon-mode":!0,attachments:a.attachments,title:a.multiple?"":a.title,onOnMediaSelected:o.onMediaSelected,multiple:a.multiple,icon:a.icon},null,8,["attachments","title","onOnMediaSelected","multiple","icon"])]),_:1})):S("",!0)]),d("div",p4,[a.showDeleteButton?(f(),U(A,{key:0,tag:"button",bg:"danger",outline:"",size:"x-small",onClick:Ke(_=>o.removeImageEvent(m),["prevent"]),title:o.translate("Delete media")},{default:c(()=>[a.multiple?(f(),U(u,{key:0})):(f(),y(P,{key:1},[O(v(o.translate("Remove")),1)],64))]),_:2},1032,["onClick","title"])):S("",!0),o.showMediaButtonAsIcon&&a.multiple?(f(),U(A,{key:1,size:"x-small"},{default:c(()=>[r(l,{"icon-mode":!0,attachments:a.attachments,title:a.multiple?"":a.title,onOnMediaSelected:o.onMediaSelected,multiple:a.multiple,icon:a.icon},null,8,["attachments","title","onOnMediaSelected","multiple","icon"])]),_:1})):S("",!0)])],2))),128)):S("",!0),o.showMediaButtonAsIcon?S("",!0):(f(),y("li",{key:1,class:le([a.mediaInputSize,a.mediaInputBg])},[r(l,{"icon-mode":!1,attachments:a.attachments,title:a.multiple?"":a.title,onOnMediaSelected:o.onMediaSelected,multiple:a.multiple,icon:a.icon},null,8,["attachments","title","onOnMediaSelected","multiple","icon"])],2))],2)):S("",!0),aa(t.$slots,"default")])],64)}const ol=ve(d4,[["render",m4]]),g4={key:0},_4={key:0,class:"setting-label"},Bg={__name:"MediaInput",props:{modelValue:{default:""},showSupported:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},icon:{type:String},title:{type:String},mediaInputSize:{type:String},mediaInputBg:{type:String},field:{type:Object}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,s=e,n=T();let o=T([]);const i=()=>{a.multiple?n.value=[]:n.value="",o=[],s("update:modelValue",n.value)},l=u=>{if(u.length)if(a.multiple){n.value=[],o=[];for(const h of u)n.value.push(h),o.push(h)}else n.value=u,o=u;s("update:modelValue",n.value)};ke(()=>a.modelValue,u=>{n.value=[u],A()});const A=()=>{o.value=[],Object.values(n.value).forEach((u,h)=>{u!==void 0&&u!==""&&o.value.push(u)})};return he(()=>{n.value=[a.modelValue],A()}),(u,h)=>(f(),y(P,null,[r(ol,{attachments:g(o),onMediaUploaded:l,onRemoveImage:i,icon:t.icon,title:t.title,mediaInputSize:t.mediaInputSize,mediaInputBg:t.mediaInputBg},null,8,["attachments","icon","title","mediaInputSize","mediaInputBg"]),t.showSupported?(f(),y("div",g4,[t.field&&t.field.label?(f(),y("label",_4,v(t.field.label),1)):S("",!0),d("span",null,v(g(p)("%1$s Recommended width: %2$s pixels minimum.","HEIC, WEBP, SVG, PNG, or JPG.","512")),1)])):S("",!0)],64))}},v4={class:"setting-media-wrap"},kg={__name:"Media",props:wa({name:{type:String,required:!0},field:{type:Object},fieldKey:{type:String},value:{required:!0},variant:{type:String},nesting:{type:Boolean,default:!1},statePath:{type:String},form:{type:Object,required:!0},callback:{type:Function,required:!0},label:{type:String},attribute:{required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Va(t,"modelValue");return(a,s)=>(f(),y("div",v4,[r(Bg,bt({modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=n=>e.value=n),field:t.field,icon:"Upload"},t.attribute),null,16,["modelValue","field"])]))}},b4=Object.freeze(Object.defineProperty({__proto__:null,default:kg},Symbol.toStringTag,{value:"Module"})),y4={__name:"InputRenderer",props:{form:{type:Object,required:!0},field:{type:Object,required:!0},value:{type:Object,required:!0},statePath:{type:String,required:!0},fieldKey:{type:String,required:!0},fullStatePath:{type:String,required:!0}},setup(t){const e=t;T(!1),We().ctx;const a=u=>typeof u.label=="function"?u.label(e.value,e.statePath,e.form):u.label,s=(u,h)=>{if(typeof u=="function")return u({data:e.value,form:e.form,statePath:e.statePath,field:e.field,event:Array.isArray(h)&&h.length===1?h[0]:h})},n=T(!1);let o={};he(async()=>{o=await $d.attributesBuilders(e.field,s,e.form),n.value=!0});const i={switch:pg,checkbox:mg,radio:gg,input:Kn,text:Kn,email:Kn,number:Kn,textarea:Kn,color:Od,date:_g,time:vg,select:bg,media:kg,remote_select:yg},l=J(()=>i[e.field.type]||null),A=J(()=>({modelValue:e.value[e.fieldKey],form:e.form,statePath:e.statePath,field:e.field,fieldKey:e.fieldKey,value:e.value[e.fieldKey],nesting:!1,label:a(e.field),attribute:o,callback:s}));return(u,h)=>t.field.type==="wp-editor"?(f(),U(co,{key:0,shortCodes:t.field.shortcodes.data,modelValue:e.value[e.fieldKey],onUpdate:h[0]||(h[0]=m=>{e.value[e.fieldKey]=m})},null,8,["shortCodes","modelValue"])):l.value&&n.value?(f(),U($s(l.value),bt({key:1,onChange:h[1]||(h[1]=m=>{t.form.triggerChange(m)}),onInput:h[2]||(h[2]=m=>{t.form.triggerChange(t.value[t.fieldKey])}),modelValue:t.value[t.fieldKey],"onUpdate:modelValue":h[3]||(h[3]=m=>t.value[t.fieldKey]=m)},A.value),null,16,["modelValue"])):S("",!0)}},w4=["innerHTML"],C4={key:0},B4={key:0},Hl={__name:"FormRenderer",props:{form:{type:Object,required:!0},schema:{type:Object},value:{type:Object},statePath:{type:String}},setup(t){const e=t,a=e.statePath??"",s=["grid","section","tab","tab-pane"];T(!1),We().ctx;const n=(i,l)=>{if(typeof i.label=="function"){let A=o(i)?a:l+".",u=o(i)?e.value:e.value[l];return i.label(u,A,e.form)}return i.label},o=i=>i.disable_nesting!==!1;return(i,l)=>(f(!0),y(P,null,j(t.schema,(A,u)=>(f(),y(P,{key:u},[t.form.isVisible(A,t.statePath+u)?(f(),y(P,{key:0},[A.type==="html"?(f(),y("div",{key:0,class:le(`setting-html-wrapper ${A.wrapperClass??""}`),innerHTML:A.value},null,10,w4)):(f(),y(P,{key:1},[A.component?(f(),y("div",{key:0,class:le(A.wrapperClass??"")},[A.component&&A.label?(f(),U(Xe,{key:0,title:n(A,u),content:A.tooltip,class:"setting-label",placement:A.tooltip_placement},{default:c(()=>[A.labelOptional?(f(),y("span",C4,"("+v(A.labelOptional)+")",1)):S("",!0)]),_:2},1032,["title","content","placement"])):S("",!0),r(cg,{modelValue:t.value[u],"onUpdate:modelValue":h=>t.value[u]=h,name:A.component,form:t.form,statePath:o(A)?g(a):u+".",field:A,"field-key":u,value:o(A)?t.value:t.value[u],nesting:o(A)},{fieldNote:c(()=>[A.note&&A.hide_note!==!0?(f(),U(Sc,{key:0,note:A.note},null,8,["note"])):S("",!0)]),validationError:c(()=>[r(uh,{form:t.form,"error-key":g(a)+u},null,8,["form","error-key"])]),_:2},1032,["modelValue","onUpdate:modelValue","name","form","statePath","field","field-key","value","nesting"])],2)):S("",!0),s.includes(A.type)?(f(),U(LS,{key:1,form:t.form,field:A,value:t.value,"full-state-path":g(a),statePath:o(A)?g(a):u+".","field-key":u},null,8,["form","field","value","full-state-path","statePath","field-key"])):S("",!0),typeof A.type<"u"&&!s.includes(A.type)&&!["custom","component","html","hidden"].includes(A.type)?(f(),y("div",{key:2,class:le(`setting-fields-inner ${A.wrapperClass??""}`)},[A.type!=="checkbox"&&!A.component&&A.label!==!1?(f(),U(Xe,{key:0,class:"setting-label",title:n(A,u),content:A.tooltip,placement:A.tooltip_placement},{default:c(()=>[A.labelOptional?(f(),y("span",B4,"("+v(A.labelOptional)+")",1)):S("",!0)]),_:2},1032,["title","content","placement"])):S("",!0),r(y4,{form:t.form,field:A,value:t.value,"full-state-path":g(a),"state-path":t.statePath,"field-key":u},null,8,["form","field","value","full-state-path","state-path","field-key"]),A.note&&!A.component?(f(),U(Sc,{key:1,note:A.note},null,8,["note"])):S("",!0),A.component?S("",!0):(f(),U(uh,{key:2,form:t.form,"error-key":g(a)+u},null,8,["form","error-key"]))],2)):S("",!0)],64))],64)):S("",!0)],64))),128))}},k4={key:0,class:"vue-form-wrap"},x4={key:0,class:"form-section-save-action"},F4={key:0,class:"cmd block leading-none"},Pl={__name:"VueForm",props:{form:{type:Object,required:!0},schema:{type:Object},value:{type:Object},showSubmitButton:{type:Boolean,default:!1},submitButtonText:{type:String,default:"Save"},loading:{type:Boolean,default:!1}},emits:["onSubmit","onChange","onSubmitButtonClick"],setup(t,{expose:e,emit:a}){const s=t,n=a;he(()=>{me(()=>{o.registerCopyAction()})}),T({});const o=We().ctx,i=()=>{n("onSubmitButtonClick")};return e({getState:()=>s.form.values}),(A,u)=>{const h=C("el-button");return t.form.isReady?(f(),y("div",k4,[r(Hl,{form:t.form,ref:"formRenderer",schema:t.form.schema,value:t.form.values},null,8,["form","schema","value"]),t.showSubmitButton?(f(),y("div",x4,[r(h,{onClick:i,type:"primary",loading:t.loading},{default:c(()=>[t.loading?S("",!0):(f(),y("span",F4,"⌘s")),O(" "+v(t.loading?g(p)("Saving"):t.submitButtonText),1)]),_:1},8,["loading"])])):S("",!0)])):S("",!0)}}};class S4{constructor(){ee(this,"operatorMap",{"!==":"matchNotEqual","!=":"matchNotEqual"});ee(this,"defaultMatcherMethod",null)}getMatchingMethod(e){return e==="=="||e==="==="?"matchEqual":this.operatorMap.hasOwnProperty(e)?this.operatorMap[e]:this.defaultMatcherMethod}defaultMatcher(e,a,s){}matchEqual(e,a,s){return s==="==="?e===a:e==a}matchNotEqual(e,a,s){return s==="!=="?e!==a:e!=a}matchContains(e,a,s){return a instanceof String||Array.isArray(a)?a.includes(e):typeof a=="object"?a.hasOwnProperty(e):!1}matchIn(e,a,s){return this.matchContains(e,a,s)}matchNotIn(e,a,s){return!this.matchContains(e,a,s)}}class E4{constructor(){ee(this,"modifierMap",{"+":"applyAddition","-":"applySubstruction"});ee(this,"defaultModifierMethod",null)}getModificationMethod(e){return e==="=="||e==="==="?"matchEqual":this.modifierMap.hasOwnProperty(e)?this.modifierMap[e]:this.defaultModifierMethod}applyAddition(e,a,s,n,o){return e+a}}class U4{constructor(e,a){ee(this,"value");ee(this,"operator");this.value=e,this.operator=a}setOperator(e){return this.operator=e,this}setValue(e){return this.value=e,this}static make(e,a){return new this(e,a)}build(){return{operator:this.operator,value:this.value instanceof Ec?this.value.setModifiers([]).build():this.value}}}class Ec{constructor(e,a){ee(this,"accessor");ee(this,"modifiers");this.accessor=e,this.modifiers=[],this.setModifiers(a)}setAccessor(e){return this.accessor=e,this}addModifier(e){return this.modifiers.push(e),this}setModifiers(e){return this.modifiers=Array.isArray(e)?e:this.modifiers,this}static make(e,a){return new this(e,a)}build(){let e=[];return Array.isArray(this.modifiers)&&this.modifiers.length>0&&(e=this.modifiers.map(a=>a instanceof U4?a.build():a)),e.length>0?{accessor:this.accessor,modifiers:e}:{accessor:this.accessor}}}class Cn{constructor(e,a,s,n,o){ee(this,"conditionType");ee(this,"conditions");ee(this,"key");ee(this,"operator");ee(this,"value");this.key=e,this.value=a,this.operator=s,this.conditions=[],this.conditionType=this.buildConditionType(n),this.setConditions(o)}static make(e,a,s,n){return new this(e,a,s,n)}setConditionType(e){return this.conditionType=this.buildConditionType(e),this}buildConditionType(e){return e==="or"||e==="|"?"or":"and"}setOperator(e){return this.operator=e,this}setKey(e){return this.key=e,this}setValue(e){return this.value=e,this}addCondition(e){return this.conditions.push(e),this}setConditions(e){return this.conditions=Array.isArray(e)||e instanceof Cn||typeof e=="function"?e:this.conditions,this}build(){if(Array.isArray(this.conditions)&&this.conditions.length>0){let s=[];return s=this.conditions.map(n=>n instanceof Cn?n.build.bind(n)():n),{condition_type:this.conditionType,conditions:s}}const e=this.key instanceof Ec?this.key.build():this.key,a=this.value instanceof Ec?this.value.build():this.value;return{key:e,operator:this.operator,value:a}}}class Q4{constructor(e,a){ee(this,"data");ee(this,"conditions");ee(this,"stateKey");ee(this,"matcher");ee(this,"modifier");this.data=a,this.stateKey=e,this.matcher=new S4,this.modifier=new E4}match(e,a,s,n=!0){let o="",i=this.matcher.getMatchingMethod(a);return i!=null?o=i:o=lt.camel("match"+a),o in this.matcher&&typeof this.matcher[o]=="function"?this.matcher[o](e,s,a,n):(console.error(`Method ${o} does not exist in Matcher Class`),n)}evaluate(e,a="and"){if(e instanceof Cn){const n=e.build.bind(e)();n.hasOwnProperty("conditions")?(e=n.conditions,a=n.condition_type):e=[n]}a=a==="or"?"or":"and";let s=a==="and";if(typeof e=="function")return e(this.stateKey,this.data);if(!Array.isArray(e))return!0;for(let n of e){let o=null;if(Array.isArray(be.get(n,"conditions")))o=this.evaluate(n.conditions,be.get(n,"condition_type","and"));else{if(n.key===null||n.key===void 0){s=!0;continue}o=this.applyCondition(n)}s=a==="and"?s&&o:s||o}return s}applyCondition(e){let a="",s=null;typeof e.key=="object"?a=be.resolvePath(this.stateKey,be.get(e,"key.accessor")):a=be.resolvePath(this.stateKey,e.key);let n=be.get(this.data,a);if(typeof e.value=="object"){const o=be.resolvePath(this.stateKey,be.get(e,"value.accessor"));s=be.get(this.data,o)}else s=e.value;return n=this.applyModification(n,e.key.modifiers,this.stateKey),s=this.applyModification(s,e.value.modifiers,this.stateKey),this.match(n,e.operator,s)}applyModification(e,a,s){return Array.isArray(a)&&a.forEach(n=>{let o=n.operator,i="",l=this.modifier.getModificationMethod(o);if(l!=null?i=l:i=lt.camel("apply"+o),i in this.modifier&&typeof this.modifier[i]=="function"){let A=n.value;typeof A=="object"&&A!==null&&(A=be.getByPath(this.data,s,be.get(A,"accessor"))),e=this.modifier[i](e,A,o,s,this.data)}else console.error(`Method ${i} does not exist in Modifier Class`)}),e}}class xg{constructor(){ee(this,"_conditionType","and");ee(this,"_conditions",null)}conditionType(e){return this._conditionType=e,this}conditions(e){return this._conditions=Array.isArray(e)||e instanceof Cn||typeof e=="function"?e:this._conditions,this}visibleIf(e){return this._conditions=e,this}buildConditions(e){return Array.isArray(e)&&e.length>0?e.map(a=>a instanceof Cn?a.build.bind(a)():a):e}}class Fg{constructor(){ee(this,"_events",{})}event(e,a){return this._events[e]=a,this}}class il{constructor(e=""){this._component="",this._affix=e}static component(e){const a=new il;return a._component="Affix/"+e,a}static make(e=""){return new this(e)}build(){return this._component.length>0?{component:this._component}:this._affix}}class Uc{constructor(e,a="input"){if(typeof e!="string"||e.length<1)throw new Error("Key is Required");this._key=e,this._type=a,this._class="",this._id="",this._name="",this._label="",this._value="",this._placeholder="",this._min="",this._max="",this._prefix="",this._hasPrefix=!1,this._hasSuffix=!1,this._suffix="",js.install(this,im),js.install(this,Fg),js.install(this,xg),this._wrapperClass=""}static make(e,a="input"){return new this(e,a)}wrapperClass(e){return this._wrapperClass=e,this}type(e){return this._type=e,this}class(e){return this._class=e,this}id(e){return this._id=e,this}name(e){return this._name=e,this}label(e){return this._label=e,this}value(e){return this._value=e,this}placeholder(e){return this._placeholder=e,this}min(e){return this._min=e,this}max(e){return this._max=e,this}prefix(e){return this._hasPrefix=!0,this._prefix=e,this}suffix(e){this._hasSuffix=!0,this._suffix=e}onChange(e){return this._onChangeCallback=e,this}onKeyPress(e){return this._onKeyPressCallback=e,this}onKeyUp(e){return this._onKeyUpCallback=e,this}onKeyDown(e){return this._onKeyDownCallback=e,this}build(){return this._conditions,Array.isArray(this._conditions)&&this._conditions.length>0&&this._conditions.map(e=>e instanceof Cn?e.build.bind(e)():e),this._attributes=typeof this._attributes=="object"?this._attributes:{},this._attributes.min=this._min,this._attributes.max=this._max,this._attributes.placeholder=this._placeholder,this._attributes.type=this._type,{key:this._key,type:this._type,class:this._class,id:this._id,name:this._name??p(lt.headline(this._key)),label:this._label??p(lt.headline(this._key)),value:this._value,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),hasSuffix:this._hasSuffix,hasPrefix:this._hasPrefix,suffix:this._suffix instanceof il?this._suffix.build():this._suffix,prefix:this._prefix instanceof il?this._prefix.build():this._prefix,min:this._min,max:this._max,placeholder:this._placeholder,attributes:this._attributes,events:this._events,wrapperClass:this._wrapperClass}}}class Qc{constructor(e){if(typeof e!="string"||e.length<1)throw new Error("Key is Required");this._type="section",this._key=e,this._schema=[],this._class="",this.disable_nesting=!0,js.install(this,im),js.install(this,Fg),js.install(this,xg)}static make(e){return new this(e)}enableNesting(){return this.disable_nesting=!1,this}disableNesting(){return this.disable_nesting=!0,this}class(e){return this._class=e,this}get type(){return this._type}set type(e){if(typeof e=="string")this._type=e;else throw new TypeError("Type must be a string.")}get schema(){return this._schema}setSchema(e){return this._schema=e,this}build(){const e=oo.build(this.schema);return{key:this._key,type:this._type,class:this._class,schema:e,disable_nesting:this.disable_nesting,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),attributes:this._attributes}}}class vh{constructor(e,a){if(typeof e!="string"||e.length<1)throw new Error("Key is Required");js.install(this,Uc,{key:e}),js.install(this,Qc,{key:e}),this._component=a,this._key=e}static make(e,a=""){return new this(e,a)}component(e){return this._component=e,this}value(e){return this._value=e,this}build(){const e=oo.build(this.schema??{});return{type:this._type,class:this._class,id:this._id,name:this._name??p(lt.headline(this._key)),label:this._label??p(lt.headline(this._key)),value:this._value,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),hasSuffix:this._hasSuffix,hasPrefix:this._hasPrefix,suffix:this._suffix,prefix:this._prefix,placeholder:this._placeholder,attributes:this._attributes,onChange:this._onChangeCallback,onKeyUp:this._onKeyUpCallback,onKeyDown:this._onKeyDownCallback,type:this._type,class:this._class,schema:e,disable_nesting:this.disable_nesting,condition_type:this._conditionType,conditions:this.buildConditions(this._conditions),type:"custom",component:this._component,key:this._key}}}class oo{static build(e){return Array.isArray(e)?oo.buildFromArray(e):typeof e=="object"?oo.buildFromObject(e):e}static buildFromObject(e){let a={};return Object.keys(e).forEach((s,n)=>{const o=e[s];o instanceof Uc||o instanceof Qc||o instanceof vh?a[s]=o.build.bind(o)():a[s]=e[s]}),a}static buildFromArray(e){let a={};return Array.isArray(e)&&e.forEach(s=>{if(s instanceof Uc||s instanceof Qc||s instanceof vh){let n=s.build.bind(s)();a[n.key]=n}else a[s.key]=s}),a}}class D4 extends na{constructor(){super(...arguments);ee(this,"data",{schema:{},defaults:{},values:{},initialized:!1,hasChange:!1,validationErrors:{},onChangeCallback:[]});ee(this,"nestedFormLayouts",["section","tab","tab-pane","grid"]);ee(this,"ignorableFormLayouts",["grid"])}get hasChange(){return this.data.hasChange}setSchema(a){return this.data.schema={},this.data.schema=oo.build(a??{}),this.initForm(),this}setDefaults(a){return this.data.defaults=a,this.initForm(),this}get schema(){return this.data.schema}get values(){return this.data.values}get isReady(){return this.data.initialized}initForm(){if(typeof this.data.schema!="object"||typeof this.data.defaults!="object")throw new Error("You need to set Schema and Defaults First");this.setValues(),this.data.initialized=!0}setValues(){this.data.values=this.ensureNestedDataProperties(this.data.schema,this.data.defaults)}getState(){return this.data.values}setValidationErrors(a){this.data.validationErrors=a}hasValidationError(a){return(this.data.validationErrors??{}).hasOwnProperty(a)}getValidationError(a){return this.data.validationErrors[a]}ensureNestedDataProperties(a,s={}){return Object.keys(a).reduce((n,o)=>{const i=a[o];if(i.type==="html")return n;if(this.ignorableFormLayouts.includes(i.type),this.nestedFormLayouts.includes(i.type??""))if(i.disable_nesting===!0){const l=this.ensureNestedDataProperties(i.schema??{},s??{});n={...n,...l}}else n[o]=this.ensureNestedDataProperties(i.schema??{},s[o]??{});else n[o]=s[o]||i.value||"";return n},{})}isVisible(a,s){return a.hasOwnProperty("conditions")?new Q4(s,this.values).evaluate(be.get(a,"conditions"),be.get(a,"condition_type","and")):!0}triggerChange(a){for(let s of this.data.onChangeCallback)s(a)}onDataChanged(a){this.data.onChangeCallback.push(a)}}function Vd(){return D4.init()}const M4={key:0},I4={__name:"DynamicFormLoader",props:["schema","values","submit_button_text","form_name"],setup(t,{expose:e}){let a=Vd();const s=t,n=()=>{const i=s.form_name,l={};return l[i]={...a.values},l},o=_l("triggerChange");return he(()=>{a.setSchema(s.schema).setDefaults(s.values).initForm(),typeof o=="function"&&a.onDataChanged(i=>{o()})}),e({getState:n}),(i,l)=>g(a).isReady?(f(),y("div",M4,[r(Pl,{showSubmitButton:!1,submitButtonText:t.submit_button_text,form:g(a),onOnSubmitButtonClick:l[0]||(l[0]=()=>{g(a).values}),onOnChange:l[1]||(l[1]=A=>{}),"validation-errors":{}},null,8,["submitButtonText","form"])])):S("",!0)}},T4=["innerHTML"],go={__name:"DynamicTemplates",props:{widgetsQuery:{type:Object,default:{},required:!1},filter:{type:String,default:"",required:!1},data:{required:!1}},setup(t,{expose:e}){xd.register(Cw,Qw,yw,Do,Cr,Mo,sc,nc),We().ctx;const a=t,s=T([]),n=D_(M_),o={},i=w=>{window.fluent_cart_admin.app={vue:n,components:w,xhr:ne,notify:q},window.fluent_cart_admin.hooks.applyFilters(a.filter+"_components",[],n,w).forEach(({name:F,component:x})=>{o[F]=qs(x)})};Bn(()=>{let k=We().appContext.components;i(k);let F=window.fluent_cart_admin.hooks.applyFilters(a.filter,[],n,k);Array.isArray(F)&&(s.value=s.value.concat(F));const x={filter:a.filter,data:a.widgetsQuery};ne.get("widgets",x).then(E=>{Array.isArray(E.widgets)&&(s.value=s.value.concat(E.widgets))}),a.widgetsQuery});const l=w=>qs(w),A=w=>o[w]||null,u=T([]),h=async(w,k)=>{const F=u.value.map(x=>typeof x[w]=="function"?x[w](k):Promise.resolve());return await Promise.all(F),!0};e({beforeUpdatingData:async w=>await h("beforeUpdatingData",w),afterUpdatingData:async w=>await h("afterUpdatingData",w),getFormStates:()=>{let w=[];if(Array.isArray(b.value))for(let k of b.value)w={...w,...k.getState()};return w}});const b=T();return(w,k)=>(f(!0),y(P,null,j(s.value,F=>(f(),y(P,null,[F.type!=="vue-component"||F.use_card==!0?(f(),U(oe,{key:0},{default:c(()=>[r(de,{title:F.title,subtitle:F.subtitle,border_bottom:""},null,8,["title","subtitle"]),r(ae,null,{default:c(()=>[F.type==="html"?(f(),y("div",{key:0,innerHTML:F.content},null,8,T4)):F.type==="chart"?(f(),U(g(Gw),{key:1,type:F.data.type,data:F.data.data,options:F.data.options},null,8,["type","data","options"])):F.type==="form"?(f(),U(I4,{key:2,schema:F.schema,values:F.values,submit_button_text:F.submit_button_text,form_name:F.form_name,ref_for:!0,ref_key:"formRefs",ref:b},null,8,["schema","values","submit_button_text","form_name"])):typeof F.component=="object"?(f(),U($s(l(F.component)),bt({key:3,ref_for:!0,ref_key:"componentRefs",ref:u},{ref_for:!0},{...F,data:t.data}),null,16)):A(F.component)?(f(),U($s(A(F.component)),bt({key:4,ref_for:!0,ref_key:"componentRefs",ref:u},{ref_for:!0},{...F,data:t.data}),null,16)):(f(),y(P,{key:5},[O(v(F.content),1)],64))]),_:2},1024)]),_:2},1024)):F.type==="vue-component"?(f(),y(P,{key:1},[typeof F.component=="object"?(f(),U($s(l(F.component)),bt({key:0,ref_for:!0,ref_key:"componentRefs",ref:u},{ref_for:!0},{...F,data:t.data}),null,16)):A(F.component)?(f(),U($s(A(F.component)),bt({key:1,ref_for:!0,ref_key:"componentRefs",ref:u},{ref_for:!0},{...F,data:t.data}),null,16)):S("",!0)],64)):S("",!0)],64))),256))}},$t=t=>t!=null&&!isNaN(Number(t))?new Intl.NumberFormat(void 0,{maximumFractionDigits:2}).format(Number(t)):t,$4={class:"fc-dashboard-stat-widgets"},O4={class:"right w-full"},L4=["href"],V4={class:"fc-dashboard-stat-widget__icon"},R4={class:"fc-dashboard-stat-widget__content"},H4={class:"fc-dashboard-stat-widget__title"},P4={class:"fc-dashboard-stat-widget__value inner-value"},N4={key:1,class:"fc-dashboard-stat-widget__inner"},K4={class:"fc-dashboard-stat-widget__content"},z4={class:"fc-dashboard-stat-widget__title"},G4=["href"],j4={key:1},Y4={class:"fc-dashboard-stat-widget__value"},W4={__name:"StatsWidget",setup(t){const e=T(!0),a=T([]),s=()=>{e.value=!0,ne.get("dashboard/stats").then(n=>{a.value=n.stats}).catch(n=>{q.error(n)}).finally(()=>{e.value=!1})};return he(()=>{s()}),(n,o)=>{const i=C("el-skeleton-item"),l=C("el-skeleton");return f(),y("div",$4,[e.value?(f(),y(P,{key:0},j(4,A=>r(l,{key:A,animated:"",class:"bg-white dark:bg-dark-700 flex flex-col items-start py-5 px-4.5 rounded-[12px] gap-3"},{template:c(()=>[r(i,{variant:"circle",class:"w-10 h-10 flex-none"}),d("div",O4,[r(i,{variant:"p",class:"w-full"}),r(i,{variant:"p",class:"w-10"})])]),_:2},1024)),64)):(f(),y(P,{key:1},[(f(!0),y(P,null,j(a.value,(A,u)=>(f(),y("div",{key:u,class:"fc-dashboard-stat-widget"},[A.url?(f(),y("a",{key:0,href:A.url,class:"fc-dashboard-stat-widget__inner no-underline"},[d("div",V4,[r(G,{class:"w-5",name:A.icon},null,8,["name"])]),d("div",R4,[d("h3",H4,[d("span",null,v(A.title),1)]),d("span",P4,[A.has_currency?(f(),y(P,{key:0},[O(v(g(Fe).scaled(A.current_count)),1)],64)):(f(),y(P,{key:1},[O(v(g($t)(A.current_count)||0),1)],64))])])],8,L4)):(f(),y("div",N4,[o[0]||(o[0]=I_('<div class="fc-dashboard-stat-widget__icon"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.20248 2.62165L5.7818 3.27834C3.59393 4.28965 2.5 4.7953 2.5 5.62533C2.5 6.45535 3.59393 6.961 5.7818 7.97231L7.20249 8.629C8.57936 9.26544 9.26781 9.58366 10 9.58366C10.7322 9.58366 11.4206 9.26544 12.7975 8.629L14.2182 7.97231C16.4061 6.961 17.5 6.45535 17.5 5.62533C17.5 4.7953 16.4061 4.28965 14.2182 3.27834L12.7975 2.62165C11.4206 1.98521 10.7322 1.66699 10 1.66699C9.26781 1.66699 8.57937 1.98521 7.20248 2.62165Z" stroke="#122368" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.3233 9.24805C17.4411 9.41368 17.5 9.5863 17.5 9.77614C17.5 10.5944 16.4061 11.0928 14.2182 12.0897L12.7975 12.7371C11.4206 13.3644 10.7322 13.6781 10 13.6781C9.26781 13.6781 8.57936 13.3644 7.20249 12.7371L5.7818 12.0897C3.59394 11.0928 2.5 10.5944 2.5 9.77614C2.5 9.5863 2.55889 9.41368 2.67667 9.24805" stroke="#122368" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16.9806 13.5557C17.3269 13.8315 17.5 14.1064 17.5 14.4319C17.5 15.2501 16.4061 15.7486 14.2182 16.7455L12.7975 17.3928C11.4206 18.0202 10.7322 18.3339 10 18.3339C9.26781 18.3339 8.57936 18.0202 7.20249 17.3928L5.7818 16.7455C3.59394 15.7486 2.5 15.2501 2.5 14.4319C2.5 14.1064 2.67315 13.8315 3.01945 13.5557" stroke="#122368" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></div>',1)),d("div",K4,[d("h3",z4,[A.url?(f(),y("a",{key:0,class:"link",href:A.url},v(A.title),9,G4)):(f(),y("span",j4,v(A.title),1))]),d("span",Y4,v(A.current_count),1)])]))]))),128)),r(go,{data:{stats:a.value},filter:"dashboard_stats_widget"},null,8,["data"])],64))])}}},bh=200,q4=800,X4=.1,J4=.3,yh=.5,Z4=.5,eE=12,tE=800,aE=1600,sE=150,nE=3500,oE=["#FFC700","#FF0000","#2E3191","#41BBC7"];var Rd={props:{particleCount:{type:Number,default:sE},particleSize:{type:Number,default:eE},duration:{type:Number,default:nE},colors:{type:Array,default:oE},force:{type:Number,default:Z4},stageHeight:{type:Number,default:tE},stageWidth:{type:Number,default:aE},shouldDestroyAfterDone:{type:Boolean,default:!0}},setup(t){const e=T(!0),a=(E,M)=>{x(E,{degree:M})},s=J(()=>o(t.particleCount,t.colors));T_(()=>{t.particleCount>300&&console.log("[VUE-CONFETTI-EXPLOSION] That's a lot of confetti, you sure about that? A lesser number like 200 will still give off the party vibes while still not bricking the device 😉")});const n=J(()=>F(t.particleCount,t.duration,t.colors,t.particleSize,t.force,t.stageHeight,t.stageWidth));he(async()=>{await i(t.duration),t.shouldDestroyAfterDone&&(e.value=!1)});const o=(E,M)=>{const D=360/E;return Array.from({length:E},(R,$)=>({color:M[$%M.length],degree:$*D}))},i=E=>new Promise(M=>setTimeout(M,E));function l(E){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Math.round((E+Number.EPSILON)*10**M)/10**M}function A(E,M){if(E===M)return!0;if(E==null||M==null||E.length!==M.length)return!1;for(let D=0;D<E.length;D++)if(E[D]!==M[D])return!1;return!0}const u=(E,M,D,R,$)=>(E-M)*($-R)/(D-M)+R,h=(E,M)=>{const D=E+M;return D>360?D-360:D},m=()=>Math.random()>.5,_=[0,0,1],B=[[1,1,0],[1,0,1],[0,1,1],[1,0,0],[0,1,0],_],b=E=>!A(B[E],_)&&m(),w=E=>typeof E>"u",k=E=>{console.error(E)};function F(E,M,D,R,$,Q,I){const L=Number.isSafeInteger;return!w(E)&&L(E)&&E<0?(k("particleCount must be a positive integer"),!1):!w(M)&&L(M)&&M<0?(k("duration must be a positive integer"),!1):!w(D)&&!Array.isArray(D)?(k("colors must be an array of strings"),!1):!w(R)&&L(R)&&R<0?(k("particleSize must be a positive integer"),!1):!w($)&&L($)&&($<0||$>1)?(k("force must be a positive integer and should be within 0 and 1"),!1):!w(Q)&&typeof Q=="number"&&L(Q)&&Q<0?(k("floorHeight must be a positive integer"),!1):!w(I)&&typeof I=="number"&&L(I)&&I<0?(k("floorWidth must be a positive integer"),!1):!0}function x(E,M){let{degree:D}=M;const R=u(Math.abs(h(D,90)-180),0,180,-t.stageWidth/2,t.stageWidth/2),$=Math.random()*(q4-bh)+bh,Q=Math.round(Math.random()*(B.length-1)),I=t.duration-Math.round(Math.random()*1e3),L=Math.random()<X4,V=b(Q),N=L?l(Math.random()*J4,2):0,Y=N*-1,K=N,X=l(Math.abs(u(Math.abs(h(D,90)-180),0,180,-1,1)),4),re=l(Math.random()*yh,4),ce=l(Math.random()*t.force*(m()?1:-1),4),Z=yh,H=l(Math.max(u(Math.abs(D-180),0,180,t.force,-t.force),0),4),z=(W,ie)=>E==null?void 0:E.style.setProperty(W,ie+"");z("--x-landing-point",`${R}px`),z("--duration-chaos",`${I}ms`),z("--x1",`${N}`),z("--x2",`${Y}`),z("--x3",`${K}`),z("--x4",`${X}`),z("--y1",`${re}`),z("--y2",`${ce}`),z("--y3",`${Z}`),z("--y4",`${H}`),z("--width",`${V?t.particleSize:Math.round(Math.random()*4)+t.particleSize/2}px`),z("--height",(V?t.particleSize:Math.round(Math.random()*2)+t.particleSize)+"px"),z("--rotation",`${B[Q].join()}`),z("--rotation-duration",`${$}ms`),z("--border-radius",`${V?"50%":"0"}`)}return{isVisible:e,isValid:n,stageHeight:t.stageHeight,particles:s,setItemRef:a}}};function iE(t,e,a,s,n,o){return s.isVisible&&s.isValid?(f(),y("div",{key:0,class:"confetti-container",style:Ta(`--floor-height: ${s.stageHeight}px;`)},[(f(!0),y(P,null,j(s.particles,i=>{let{color:l,degree:A}=i;return f(),y("div",{key:A,class:"particle",ref:u=>s.setItemRef(u,A)},[d("div",{style:Ta(`--bgcolor: ${l};`)},null,4)],512)}),128))],4)):S("",!0)}function rE(t,e){e===void 0&&(e={});var a=e.insertAt;if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",a==="top"&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}var lE=`
`;rE(lE);Rd.render=iE;Rd.__scopeId="data-v-4ff796ae";var AE=(()=>{const t=Rd;return t.install=e=>{e.component("ConfettiExplosion",t)},t})();ye.extend(mp);ye.extend(gp);let ot=class{static withTimezone(e){const a=ye(e);return a.isValid()?a.format("YYYY-MM-DDTHH:mm:ssZ"):null}};class cE extends na{constructor(){super(...arguments);ee(this,"data",{orderStatus:["all"],orderTypes:["all"],paymentStatus:["all"],filterOptions:{},showDropdown:!1,activeFilter:null,searchQuery:"",selectedFilters:{},onFilterChanged:null,dateRange:[ot.withTimezone(ye().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),ot.withTimezone(ye().format("YYYY-MM-DD 23:59:59"))],currencies:[],currency:"",variation_ids:[],rangeKey:"",storageKey:"filter-state",reRenderDate:!1,compareType:"previous_period",compareDate:ot.withTimezone(ye().format("YYYY-MM-DD 23:59:59")),subscriptionType:""})}get dropdownOpen(){return this.data.showDropdown}toggleDropdown(){this.data.showDropdown=!this.data.showDropdown}setFilterOption(a){this.data.filterOptions=a}get filters(){return this.data.filterOptions}get filteredFilters(){var s;const a=(s=this.data.searchQuery)==null?void 0:s.toLowerCase().trim();return this.filters.filter(n=>a?n.label.toLowerCase().includes(a)||n.value.toLowerCase().includes(a):!0)}get visibleFilters(){return this.filteredFilters.filter(a=>this.shouldRenderOption(a))}selectActiveFilter(a){this.data.activeFilter=a}get activeFilterOptions(){return this.data.activeFilter||null}selectFilterOption(a){const s=this.activeFilterOptions;s&&(this.data.selectedFilters[s.value]={label:s.label,value:a.value,type:s.type,options:s.options},this.data[s.value]=a.value,this.triggerFilterChanged())}selectFilterOptionMulti(a){const s=this.activeFilterOptions;if(!s)return;this.data.selectedFilters[s.value]||(this.data.selectedFilters[s.value]={label:s.label,value:[],type:s.type,options:s.options});let n=this.data.selectedFilters[s.value].value;if(a.value==="all")this.data.selectedFilters[s.value].value=[{label:a.label,value:a.value}],this.data[s.value]=["all"];else{const o=n.findIndex(l=>l.value===a.value);o>-1?n.splice(o,1):n.push({label:a.label,value:a.value});const i=n.findIndex(l=>l.value==="all");i>-1&&n.splice(i,1),this.data[s.value]=n.map(l=>l.value)}this.triggerFilterChanged()}setDateRange(a){const s=ye(a[0]),n=ye(a[1]);this.data.selectedFilters.dateRange={label:p("Date"),value:[s,n],type:"date"},this.triggerFilterChanged()}postSetDateRange(){this.data.dateRange=[zt.data.dateRange[0],zt.data.dateRange[1]],this.data.selectedFilters.dateRange={label:p("Date"),value:[ot.withTimezone(ye(this.data.dateRange[0])),ot.withTimezone(ye(this.data.dateRange[1]))],type:"date",rangeKey:this.data.rangeKey},this.data.reRenderDate=!0,this.triggerFilterChanged()}setSelectChange(a,s=null){const n=s||this.activeFilterOptions;n&&(this.data.selectedFilters[n.value]={label:n.label,value:a,type:n.type},this.triggerFilterChanged())}setTreeSelectItem(a){const s=a.filter(n=>!n.children||n.children.length===0).map(n=>({id:n.value,label:n.label}));this.handleTreeSelections(s),this.triggerFilterChanged()}removeTreeSelectItem(a){var o;const n=(((o=this.data.selectedFilters.variation_ids)==null?void 0:o.value)||[]).filter(i=>i.id!==a);this.handleTreeSelections(n),this.data.variation_ids=this.data.variation_ids.filter(i=>i!==a),this.triggerFilterChanged()}handleTreeSelections(a){a.length?(this.data.selectedFilters.variation_ids||(this.data.selectedFilters.variation_ids={label:p("Products"),type:"tree-select"}),this.data.selectedFilters.variation_ids.value=a):delete this.data.selectedFilters.variation_ids}clearTreeSelect(){delete this.data.selectedFilters.variation_ids,this.data.variation_ids=[],zt.resetFilterToDefault("variation_ids"),this.triggerFilterChanged()}isFilterOptionSelected(a){const s=this.activeFilterOptions;if(!s)return!1;const n=this.data.selectedFilters[s.value];return n?n.value===a.value:this.data[s.value]===a.value}isFilterOptionSelectedMulti(a){const s=this.activeFilterOptions,n=this.data.selectedFilters[s==null?void 0:s.value];return n?n.value.some(i=>i.value===a.value):!1}setMultiSelectChange(a,s){this.data.selectedFilters[a]||(this.data.selectedFilters[a]={});const n=s.some(i=>i.value==="all"),o=this.data.selectedFilters[a].value||[];n?o.length===1&&o[0].value==="all"&&s.length>1?this.data.selectedFilters[a].value=s.filter(i=>i.value!=="all"):this.data.selectedFilters[a].value=[s.find(i=>i.value==="all")]:this.data.selectedFilters[a].value=s,this.triggerFilterChanged()}onFilterChanged(a){return this.data.onFilterChanged=a}setCompareTypeChange(a){this.data.compareType=a,this.data.selectedFilters.compareType={value:a},a!=="custom"&&this.triggerFilterChanged()}setCompareDateChange(a){this.data.compareDate=a,this.data.selectedFilters.compareDate={value:ot.withTimezone(ye(a))},this.triggerFilterChanged()}get currencies(){return Object.entries(zt.data.currencies).map(([a,s])=>({label:a,value:a}))}shouldRenderOption(a){const s=a.disableRoutes||[],n=sa();return s.includes(n.name)?!1:a.value==="currency"?this.data.currencies&&this.data.currencies.length>1:!0}applyFilterChange(){this.triggerFilterChanged()}resetFilters(){this.data.selectedFilters={},this.data.currency="",this.data.variation_ids=[],this.data.dateRange=[ot.withTimezone(ye().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),ot.withTimezone(ye().format("YYYY-MM-DD 23:59:59"))],this.data.compareType="previous_period",this.data.compareDate=ot.withTimezone(ye().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),zt.resetFiltersToDefault(),this.triggerFilterChanged()}removeFilter(a,s){s!=null?(this.removeFilterItem(a,s),zt.resetFilterToDefault(a),this.triggerFilterChanged()):(delete this.data.selectedFilters[a],zt.resetFilterToDefault(a),this.triggerFilterChanged())}removeFilterItem(a,s){const n=this.data.selectedFilters[a];if(!n)return;const o=n.value.filter(i=>i.id!==s);o.length?this.data.selectedFilters[a].value=o:delete this.data.selectedFilters[a],a==="variation_ids"&&(this.data.variation_ids=this.data.variation_ids.filter(i=>i!==s)),this.triggerFilterChanged()}triggerFilterChanged(){this.storeSelectedFilters(),typeof this.data.onFilterChanged=="function"&&this.data.onFilterChanged(this.data.selectedFilters)}get activeFilters(){return this.data.selectedFilters}applicableFilters(){return Object.fromEntries(["orderStatus","orderTypes","compareDate","currency","compareType","subscriptionType","variation_ids","paymentStatus","rangeKey"].map(s=>[s,this.data[s]]))}storeSelectedFilters(){const a="report-filter",s=Pe.get(a)||{},n=this.applicableFilters(),o={...s,...n};Pe.set(a,o),Pe.set(this.data.storageKey,this.activeFilters)}retrieveSavedFilters(){return Pe.get(this.data.storageKey)}retrieveSavedReportFilters(){return Pe.get("report-filter")}}function Sg(){return cE.init()}class dE extends na{constructor(){super(...arguments);ee(this,"filterState",null);ee(this,"data",{orderStatus:["all"],orderTypes:["all"],paymentStatus:["all"],currencies:[],currency:"",currencySign:"",dateRange:[ot.withTimezone(ye().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),ot.withTimezone(ye().format("YYYY-MM-DD 23:59:59"))],rangeKey:"",dateDiff:0,minDate:"",variation_ids:[],active_tab:"",filterMode:"",storeMode:"",firstOrderDate:"",compareDate:ot.withTimezone(ye().format("YYYY-MM-DD 23:59:59")),compareType:"previous_period",subscriptionType:""});ee(this,"storageKey","report-filter");ee(this,"currencyStorageKey",`${this.storageKey}_currencies`);ee(this,"listeners",{})}beforeInit(){this.filterState=Sg(),this.mergeWithStorage();const a=Pe.get(this.storageKey),s=Pe.get(this.currencyStorageKey);(!a||!s)&&this.fetchReportMeta()}mergeWithStorage(){const a=Pe.get(this.storageKey),s=Pe.get(this.currencyStorageKey);this.data.paymentStatus=a.paymentStatus??this.data.paymentStatus,this.data.orderStatus=a.orderStatus??this.data.orderStatus,this.data.orderTypes=a.orderTypes??this.data.orderTypes,this.data.compareType=a.compareType?a.compareType:this.data.compareType,this.data.compareDate=a.compareDate??this.data.compareDate,this.data.subscriptionType=a.subscriptionType??this.data.subscriptionType,this.data.currency=a.currency?this.data.currency:window.fluentCartAdminApp.shop.currency,this.data.dateRange=[a.startDate??this.data.dateRange[0],a.endDate??this.data.dateRange[1]],this.data.currencies=s??this.data.currencies,this.data.rangeKey=a.rangeKey,this.data.variation_ids=a.variation_ids?a.variation_ids:this.data.variation_ids,this.data.filterMode=a.filterMode??this.data.filterMode,this.data.storeMode=a.storeMode??this.data.storeMode}fetchReportMeta(){ne.get("reports/fetch-report-meta",this.applicableFilters).then(a=>{this.data.currencies=a.currencies,this.data.dateRange[0]=a.min_date;const[s,n]=Object.entries(a.currencies)[0];this.applicableFilters.params.currency===""&&(this.data.currency=s),this.data.currencySign=n,this.data.storeMode=a.storeMode,this.data.firstOrderDate=ye(a.first_order_date||ye().startOf("month")).format("YYYY-MM-DD 00:00:00"),this.syncStorage()}).catch(a=>{}).finally(()=>{this.data.loading=!1})}get currentCurrencySign(){return this.data.currencies&&this.data.currencies.hasOwnProperty(this.data.currency)?this.data.currencies[this.data.currency]:""}addListener(a,s){this.listeners[a]=s,this.data.active_tab=a}async onFilterChange(){this.syncStorage(),this.setDateDiff();for(let a in this.listeners)this.listeners[a](this.applicableFilters)}onModeChange(a){this.data.filterMode=a,this.syncStorage()}syncStorage(){Pe.set(this.storageKey,this.applicableFilters.params),Pe.set(this.currencyStorageKey,this.data.currencies)}removeListener(a){delete this.listeners[a],this.data.active_tab=""}get applicableFilters(){const a=hp.find(l=>l.text===this.data.rangeKey);let s,n;if(a){const[l,A]=a.value();s=this.data.rangeKey==="All Time"?ot.withTimezone(ye(this.data.dateRange[0]).format("YYYY-MM-DD 00:00:00")):ot.withTimezone(ye(l).format("YYYY-MM-DD 00:00:00")),n=ot.withTimezone(ye(A).format("YYYY-MM-DD 23:59:59"))}else s=ot.withTimezone(ye(this.data.dateRange[0]).format("YYYY-MM-DD 00:00:00")),n=ot.withTimezone(ye(this.data.dateRange[1]).format("YYYY-MM-DD 23:59:59"));const o={orderStatus:this.data.orderStatus,paymentStatus:this.data.paymentStatus,currency:this.data.currency,startDate:window.fluentCartAdminApp.app_config.isProActive?s:ot.withTimezone(ye().startOf("month").format("YYYY-MM-DD 00:00:00")),endDate:window.fluentCartAdminApp.app_config.isProActive?n:ot.withTimezone(ye().endOf("month").format("YYYY-MM-DD 23:59:59")),rangeKey:this.data.rangeKey,variation_ids:this.data.variation_ids,filterMode:this.data.filterMode,storeMode:this.data.storeMode,firstOrderDate:this.data.firstOrderDate,compareType:this.data.compareType,compareDate:this.data.compareDate,subscriptionType:this.data.subscriptionType};let i=this.data.orderTypes;return i.includes("all")||(o.orderTypes=i),{params:o}}setDateDiff(){if(!this.data.dateRange||this.data.dateRange.length<2)return 0;const[a,s]=this.data.dateRange;this.data.dateDiff=ye(s).diff(ye(a),"days")}resetFiltersToDefault(){this.data.orderStatus=["all"],this.data.orderTypes=["all"],this.data.paymentStatus=["all"],this.data.compareType="previous_period",this.data.compareDate=ot.withTimezone(ye().format("YYYY-MM-DD 23:59:59")),this.data.variation_ids=[],this.data.dateRange=[ot.withTimezone(ye().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),ot.withTimezone(ye().format("YYYY-MM-DD 23:59:59"))],this.data.subscriptionType=""}resetFilterToDefault(a){a==="compareType"&&(this.data.compareType="previous_period"),a==="compareDate"&&(this.data.compareDate=ot.withTimezone(ye().subtract(1,"month").format("YYYY-MM-DD 00:00:00"))),a==="subscriptionType"&&(this.data.subscriptionType=""),a==="orderTypes"&&(this.data.orderTypes=["all"]),(a==="orderStatus"||a==="paymentStatus")&&(this.data[a]=["all"]),a==="variation_ids"&&(this.data.variation_ids=[]),a==="dateRange"&&(this.data[a]=[ot.withTimezone(ye().startOf("month").format("YYYY-MM-DD 00:00:00")),ot.withTimezone(ye().format("YYYY-MM-DD 23:59:59"))])}retrieveSavedFilters(){return Pe.get(this.data.storageKey)}}const zt=dE.init(),uE={key:0,class:"fc-report-sold-product-list has-scroll"},fE={class:"list-left-content"},hE={class:"list-image"},pE=["src"],mE=["src"],gE={class:"list-title"},_E=["title"],vE={class:"list-id"},bE={class:"list-right-content"},yE={class:"list-value"},wE={class:"list-price"},Eg={__name:"TopSoldProducts",props:{data:{type:Array,required:!0}},setup(t){const e=t,a=J(()=>e.data);return(s,n)=>{const o=C("router-link");return f(),U(tt,{permission:"reports/view"},{default:c(()=>[r(Ll,{class:"top-sold-products","card-options":{heading:g(p)("Top Sold Products"),linkButtonText:g(p)("View All"),linkButtonUrl:"products"}},{default:c(()=>[a.value.length>0?(f(),y("ul",uE,[(f(!0),y(P,null,j(a.value,i=>(f(),y("li",{key:i.product_id},[r(o,{to:{name:"product_edit",params:{product_id:i.product_id}}},{default:c(()=>[d("div",fE,[d("div",hE,[i.media!==null?(f(),y("img",{key:0,src:i.media},null,8,pE)):(f(),y("img",{key:1,src:s.getPlaceholderImage(),alt:""},null,8,mE))]),d("div",gE,[d("div",{class:"list-title-inner",title:i.product_name},v(i.product_name),9,_E),d("div",vE,"#"+v(i.product_id),1)])]),d("div",bE,[d("div",yE,v(i.quantity_sold)+" "+v(g(p)(" Sold")),1),d("div",wE,v(g(Fe).scaled(i.total_amount)),1)])]),_:2},1032,["to"])]))),128))])):(f(),U(Tt,{key:1,icon:"Empty/ListView","has-dark":!0,text:g(p)("Currently there is no item!")},null,8,["text"]))]),_:1},8,["card-options"])]),_:1})}}},CE={class:"fluent_dashboard fluent-cart-admin-pages fc-layout-width"},BE=["innerHTML"],kE={class:"flex items-center justify-start gap-1 mb-2 text-xs text-system-mid dark:text-system-light"},xE={class:"fc_dashboard_sidebar"},FE={class:"fc-congrats-dialog-content"},SE={class:"fc-congrats-dialog-content-inner"},EE={class:"fc-confetti-wrap pointer-events-none fixed left-0 top-0 w-full h-full flex justify-center items-center"},UE=Object.assign({name:"Dashboard"},{__name:"Dashboard",setup(t){const e=T(!1),a=T([]),s=T(!1);Yc("dashboardTogglePageNotification",m=>{s.value=m});const o=()=>{const[m,_]=[ye().subtract(1,"month").format("YYYY-MM-DD 00:00:00"),ye().format("YYYY-MM-DD 23:59:59")],B={startDate:m,endDate:_,paymentStatus:"all"};la.getSalesGrowthChart({params:{...B,groupKey:"daily"}})},i=()=>{la.getRecentOrders({params:null})},l=()=>{const m={paymentStatus:"all"};la.getCountryHeatMap({params:{...m,groupKey:"daily"}})},A=()=>{const[m,_]=[ye().subtract(1,"month").format("YYYY-MM-DD 00:00:00"),ye().format("YYYY-MM-DD 23:59:59")],B={startDate:m,endDate:_};la.getTopSoldProducts({params:{...B}})},u=()=>{YA.getVueParams(),Pe.get("onboarding_congratulations","no")!=="yes"&&window.fluentCartAdminApp.total_products_count==0&&(Pe.set("onboarding_congratulations","yes"),e.value=!0)},h=()=>{var m;return((m=window.fluentCartAdminApp)==null?void 0:m.admin_url)+"settings/store-settings/pages_setup"};return he(()=>{window.addEventListener("getSalesGrowth",o),a.value=window.fluentCartAdminApp.dummy_product_info,o(),l(),i(),u(),A()}),(m,_)=>{const B=C("el-col"),b=C("el-row"),w=C("el-button"),k=C("el-dialog");return f(),y("div",CE,[s.value?(f(),U(Xs,{key:0,class:"mb-5",type:"warning",icon:"InformationFill"},{default:c(()=>[d("span",{innerHTML:g(p)("Set up your pages first to get started %s",'<a href="'+h()+'" target="_blank">'+g(p)("Set up your pages")+"</a>")},null,8,BE)]),_:1})):S("",!0),r(b,{gutter:20},{default:c(()=>[r(B,{lg:16},{default:c(()=>[r(FS),r(tt,{permission:"dashboard_stats/view"},{default:c(()=>[d("div",kE,[r(G,{name:"InformationFill",class:"w-4 h-4 text-system-light"}),O(" "+v(g(p)("Last 30 Days")),1)]),r(W4)]),_:1}),r(tt,{permission:"reports/view"},{default:c(()=>[r(y8,{chartData:g(la).data.salesGrowthChart},null,8,["chartData"])]),_:1}),r(b,{gutter:24},{default:c(()=>[r(tt,{permission:"reports/view"},{default:c(()=>[r(B,{lg:12},{default:c(()=>[r(N8)]),_:1})]),_:1}),r(tt,{permission:"reports/view"},{default:c(()=>[r(B,{lg:12,class:"mt-6 xl:mt-0"},{default:c(()=>[r(Eg,{data:g(la).topSoldProducts},null,8,["data"])]),_:1})]),_:1}),r(tt,{permission:"reports/view"},{default:c(()=>[r(B,{class:"mt-6"},{default:c(()=>[r(F8,{data:g(la).data.countryHeatMap},null,8,["data"])]),_:1})]),_:1})]),_:1})]),_:1}),r(B,{lg:8},{default:c(()=>[d("div",xE,[r(hS)])]),_:1})]),_:1}),r(k,{class:"fc-congrats-dialog",modelValue:e.value,"onUpdate:modelValue":_[1]||(_[1]=F=>e.value=F),"append-to-body":!0,"close-on-click-modal":!1,"modal-class":"fc-congrats-modal",width:"800"},{default:c(()=>[d("div",FE,[d("div",SE,[_[2]||(_[2]=d("div",{class:"icon"},"🎉",-1)),d("h3",null,v(g(p)("Congratulations!")),1),d("p",null,v(g(p)("You successfully finished your onboarding & your store is ready.")),1),r(w,{type:"primary",onClick:_[0]||(_[0]=F=>e.value=!1)},{default:c(()=>[O(v(g(p)("Let's go")),1)]),_:1})])]),d("div",EE,[r(g(AE),{particleCount:100,force:1})])]),_:1},8,["modelValue"])])}}}),QE={name:"FilterFields",props:{conditionals:{type:Object,required:!0,default:{}},fields:{type:Object,required:!0,default:{}},editorShortcodes:{type:Array,default:()=>[]},disabled:{type:Boolean,required:!0,default:!1},labels:{default:()=>({status_label:"Enable conditional logic",notification_if_start:"Send this notification if",notification_if_end:"of the following match:"})}},data(){return{defaultRules:{field:null,operator:"=",value:null},comingSoon:!1}},computed:{items(){return this.conditionals.conditions}},methods:{add(t){this.items.splice(t+1,0,{...this.defaultRules})},remove(t){this.items.splice(t,1)}},mounted(){this.conditionals.conditions.length||this.conditionals.conditions.push({...this.defaultRules})}},DE={key:2},ME=["onClick"],IE=["onClick"];function TE(t,e,a,s,n,o){const i=C("el-checkbox"),l=C("el-option"),A=C("el-select"),u=C("el-col"),h=C("el-option-group"),m=C("el-input"),_=C("el-row");return f(),y("div",null,[a.disabled?(f(),U(i,{key:1,disabled:"",onClick:e[1]||(e[1]=B=>n.comingSoon=!0)},{default:c(()=>[O(v(a.labels.status_label),1)]),_:1})):(f(),U(i,{key:0,modelValue:a.conditionals.status,"onUpdate:modelValue":e[0]||(e[0]=B=>a.conditionals.status=B)},{default:c(()=>[O(v(a.labels.status_label),1)]),_:1},8,["modelValue"])),a.conditionals.status?(f(),y("div",DE,[O(v(a.labels.notification_if_start)+" ",1),r(A,{class:"fluent_cart_inline_small",modelValue:a.conditionals.type,"onUpdate:modelValue":e[2]||(e[2]=B=>a.conditionals.type=B)},{default:c(()=>[(f(),y(P,null,j({all:"All",any:"Any"},(B,b)=>r(l,{key:b,value:b},{default:c(()=>[O(v(B),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),O(" "+v(a.labels.notification_if_end)+" ",1),(f(!0),y(P,null,j(o.items,(B,b)=>(f(),U(_,{key:b,style:{"margin-top":"15px"},gutter:10},{default:c(()=>[r(u,{md:8},{default:c(()=>[r(A,{size:"default",modelValue:o.items[b].field,"onUpdate:modelValue":w=>o.items[b].field=w,style:{width:"100%"},onChange:w=>o.items[b].value=""},{default:c(()=>[(f(!0),y(P,null,j(a.fields,(w,k)=>(f(),U(l,{key:k,label:w.admin_label,value:k},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),r(u,{md:5},{default:c(()=>[r(A,{size:"default",modelValue:o.items[b].operator,"onUpdate:modelValue":w=>o.items[b].operator=w},{default:c(()=>[r(h,{label:"General Operators"},{default:c(()=>[r(l,{value:"=",label:"equals"}),r(l,{value:"!=",label:"not equal"}),a.fields[B.field]&&!Object.keys(a.fields[B.field].options).length?(f(),y(P,{key:0},[r(l,{value:">",label:"greater than"}),r(l,{value:"<",label:"less than"}),r(l,{value:">=",label:"greater than or equal"}),r(l,{value:"<=",label:"less than or equal"}),r(l,{value:"contains",label:"contains"}),r(l,{value:"doNotContains",label:"do not contains"}),r(l,{value:"startsWith",label:"starts with"}),r(l,{value:"endsWith",label:"ends with"})],64)):S("",!0)]),_:2},1024),r(h,{label:"Advanced Operators"},{default:c(()=>[r(l,{value:"length_equal",label:"Equal to Data Length"}),r(l,{value:"length_less_than",label:"Less than to Data length"}),r(l,{value:"length_greater_than",label:"Greater than to Data Length"})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),r(u,{md:8},{default:c(()=>[o.items[b].operator=="length_equal"||o.items[b].operator=="length_less_than"||o.items[b].operator=="length_greater_than"?(f(),U(m,{key:0,size:"default",type:"number",step:"1",placeholder:"Enter length in number",modelValue:o.items[b].value,"onUpdate:modelValue":w=>o.items[b].value=w},null,8,["modelValue","onUpdate:modelValue"])):(f(),y(P,{key:1},[a.fields[B.field]&&Object.keys(a.fields[B.field].options).length?(f(),U(A,{key:0,size:"default",modelValue:o.items[b].value,"onUpdate:modelValue":w=>o.items[b].value=w,style:{width:"100%"}},{default:c(()=>[(f(!0),y(P,null,j(a.fields[B.field].options,(w,k)=>(f(),U(l,{key:k,label:w,value:k},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(f(),U(m,{key:1,size:"default",placeholder:"Enter a value",modelValue:o.items[b].value,"onUpdate:modelValue":w=>o.items[b].value=w},null,8,["modelValue","onUpdate:modelValue"]))],64))]),_:2},1024),r(u,{md:3,class:"action-btns"},{default:c(()=>[d("i",{class:"el-icon-plus",onClick:w=>o.add(b)},null,8,ME),o.items.length>1?(f(),y("i",{key:0,class:"el-icon-minus",onClick:w=>o.remove(b)},null,8,IE)):S("",!0)]),_:2},1024)]),_:2},1024))),128))])):S("",!0)])}const $E=ve(QE,[["render",TE]]),OE={name:"errorView",props:["field","errors"],computed:{Str(){return lt}}},LE={key:0,class:"fc-inline-error ff"};function VE(t,e,a,s,n,o){return a.errors.has(a.field)?(f(),y("p",LE,v(a.errors.errors[a.field].required?o.Str.headline(a.errors.errors[a.field].required):a.errors.errors[a.field]),1)):S("",!0)}const rl=ve(OE,[["render",VE]]),RE={name:"inputPopover",components:{Popover:pp},props:{value:String,placeholder:{type:String,default:""},placement:{type:String,default:"bottom"},icon:{type:String,default:"el-icon-more"},fieldType:{type:String,default:"text"},data:Array,attrName:{type:String,default:"attribute_name"},defaultValue:{type:[String,Number,Boolean,Array],default:""}},data(){return{model:this.defaultValue}},watch:{model(){this.$emit("update:modelValue",this.model)}},methods:{insertShortcode(t){this.model==null&&(this.model=""),this.model+=t.replace(/param_name/,this.attrName)}}},HE={class:"flex-1"},PE={key:0,class:"input-textarea-value"};function NE(t,e,a,s,n,o){const i=C("el-input"),l=C("Popover");return f(),y("div",{class:le(["input-popover",a.fieldType=="textarea"?"input-popover-textarea":""])},[d("div",HE,[a.fieldType=="textarea"?(f(),y("div",PE,[r(i,{placeholder:a.placeholder,type:"textarea",modelValue:n.model,"onUpdate:modelValue":e[0]||(e[0]=A=>n.model=A)},null,8,["placeholder","modelValue"])])):(f(),U(i,{key:1,placeholder:a.placeholder,modelValue:n.model,"onUpdate:modelValue":e[1]||(e[1]=A=>n.model=A),type:a.fieldType},null,8,["placeholder","modelValue","type"]))]),r(l,{class:le(["popover-wrapper",{"popover-wrapper-plaintext":!1}]),data:a.data[0],onCommand:o.insertShortcode,btnType:"info",plain:!0},null,8,["data","onCommand"])],2)}const KE=ve(RE,[["render",NE]]),zE={name:"FieldGeneral",components:{inputPopover:KE},props:{value:[String,Number,Boolean,Array],editorShortcodes:Array,field_type:{type:String,default:"text"},defaultValue:{type:[String,Number],default:""}},data(){return{fieldValue:this.defaultValue}},watch:{fieldValue(){this.$emit("update:modelValue",this.fieldValue)}},methods:{onValueUpdated(t){this.fieldValue=t,this.$emit("onValueUpdated",this.fieldValue)}}},GE={class:"fc-field-general"};function jE(t,e,a,s,n,o){const i=C("input-popover");return f(),y("div",GE,[r(i,{fieldType:a.field_type,placeholder:t.$t("Select a Field or Type Custom value"),modelValue:n.fieldValue,"onUpdate:modelValue":e[0]||(e[0]=l=>n.fieldValue=l),icon:"el-icon-arrow-down",data:a.editorShortcodes,onOnValueUpdated:e[1]||(e[1]=function(l){o.onValueUpdated(l)}),defaultValue:n.fieldValue},null,8,["fieldType","placeholder","modelValue","data","defaultValue"])])}const bs=ve(zE,[["render",jE]]),YE={key:0,class:"fc-merge-fields"},WE={class:"fc-merge-fields-container"},qE={key:3},XE={name:"field_maps",components:{ErrorView:rl,FieldGeneral:bs},methods:{onValueUpdated(t,e){this.merge_model[e]=t}},props:["settings","merge_fields","field","errors","merge_model","inputs","editorShortcodes"],data(){return{appReady:!1}},mounted(){(Array.isArray(this.merge_model)||!this.merge_model)&&this.$emit("setMergeModelObj"),this.appReady=!0}},JE=Object.assign(XE,{setup(t){return(e,a)=>{const s=C("el-option"),n=C("el-select"),o=C("el-form-item");return e.appReady?(f(),y("div",YE,[d("div",WE,[(f(!0),y(P,null,j(t.field.primary_fileds,(i,l)=>(f(),y("div",{class:"fc-merge-fields-item",key:l},[r(o,{label:i.label,required:i.required},{default:c(()=>[i.input_options==="emails"?(f(),U(n,{key:0,modelValue:t.settings[i.key],"onUpdate:modelValue":A=>t.settings[i.key]=A,placeholder:e.$t("Select a Field"),clearable:"",class:le(t.errors.errors[i.key]?"is-error":"")},{default:c(()=>[(f(!0),y(P,null,j(t.inputs,(A,u)=>(f(),y(P,{key:u},[(A==null?void 0:A.attributes.type)==="email"?(f(),U(s,{key:0,value:A==null?void 0:A.attributes.code,label:A==null?void 0:A.attributes.name},null,8,["value","label"])):S("",!0)],64))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","class"])):i.input_options==="all"?(f(),U(n,{key:1,modelValue:t.settings[i.key],"onUpdate:modelValue":A=>t.settings[i.key]=A,placeholder:e.$t("Select a Field"),clearable:""},{default:c(()=>[(f(!0),y(P,null,j(t.inputs,(A,u)=>(f(),U(s,{key:u,value:A.attributes.name,label:A.admin_label},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):(f(),U(bs,{key:2,editorShortcodes:t.editorShortcodes,defaultValue:t.settings[i.key],modelValue:t.settings[i.key],"onUpdate:modelValue":A=>t.settings[i.key]=A},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])),i.help_text?(f(),y("div",qE,v(i.help_text),1)):S("",!0),r(rl,{field:"fieldEmailAddress",errors:t.errors},null,8,["errors"])]),_:2},1032,["label","required"])]))),128)),t.field.default_fields?(f(!0),y(P,{key:0},j(t.field.default_fields,i=>(f(),y("div",{class:"fc-merge-fields-item",key:i.name},[r(o,{label:i.label,required:i.required},{default:c(()=>[r(bs,{editorShortcodes:t.editorShortcodes,defaultValue:t.settings[e.primary_field.key],modelValue:t.settings.default_fields[i.name],"onUpdate:modelValue":l=>t.settings.default_fields[i.name]=l},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"]),r(rl,{field:"default_fields",errors:t.errors},null,8,["errors"])]),_:2},1032,["label","required"])]))),128)):S("",!0),(f(!0),y(P,null,j(t.merge_fields,(i,l)=>(f(),y("div",{class:"fc-merge-fields-item",key:l},[r(o,{label:i},{default:c(()=>[r(bs,{editorShortcodes:t.editorShortcodes,defaultValue:t.merge_model[l],onOnValueUpdated:function(A){e.onValueUpdated(A,l)}},null,8,["editorShortcodes","defaultValue","onOnValueUpdated"])]),_:2},1032,["label"])]))),128))])])):S("",!0)}}}),ZE={name:"ListSelectFilter",props:["settings","field"],computed:{listItems(){let t=this.settings[this.field.filter_by];this.field.parsedType=="number"&&(t=parseInt(t));let e=[];return ci(this.field.options,a=>{a.lists.indexOf(t)!=-1&&e.push({label:a.label,value:a.value})}),e}}},eU={class:"fluent_cart_list_select_filter"};function tU(t,e,a,s,n,o){const i=C("el-option"),l=C("el-select");return f(),y("div",eU,[r(l,{clearable:"",modelValue:a.settings[a.field.key],"onUpdate:modelValue":e[0]||(e[0]=A=>a.settings[a.field.key]=A),placeholder:a.field.placeholder},{default:c(()=>[(f(!0),y(P,null,j(o.listItems,A=>(f(),U(i,{key:A.label,label:A.label,value:A.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])}const aU=ve(ZE,[["render",tU]]),sU={name:"DropdownLabelRepeater",props:["settings","field","inputs","errors","editorShortcodes"],components:{FieldGeneral:bs},data(){return{loading:!1}},methods:{addItemAfter(t){this.loading=!0,this.settings[this.field.key].splice(t+1,0,{item_value:"",label:""}),this.$nextTick(()=>{this.loading=!1})},removeItem(t){this.loading=!0,this.settings[this.field.key].splice(t,1),this.$nextTick(()=>{this.loading=!1})}}},nU={class:"dropdown_label_repeater"},oU={key:0,class:"fluent_cart-table"};function iU(t,e,a,s,n,o){const i=C("el-input"),l=C("field-general"),A=C("el-button"),u=C("el-button-group");return f(),y("div",nU,[n.loading?S("",!0):(f(),y("table",oU,[d("thead",null,[d("tr",null,[d("th",null,v(a.field.field_label||"Field Label"),1),d("th",null,v(a.field.value_label||"Field Value"),1),e[0]||(e[0]=d("th",null,null,-1))])]),d("tbody",null,[(f(!0),y(P,null,j(a.settings[a.field.key],(h,m)=>(f(),y("tr",{key:"item_"+m},[d("td",null,[r(i,{placeholder:a.field.field_label||"Field Label",modelValue:h.label,"onUpdate:modelValue":_=>h.label=_},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),d("td",null,[r(l,{editorShortcodes:a.editorShortcodes,modelValue:h.item_value,"onUpdate:modelValue":_=>h.item_value=_},null,8,["editorShortcodes","modelValue","onUpdate:modelValue"])]),d("td",null,[r(u,null,{default:c(()=>[r(A,{type:"success",onClick:_=>o.addItemAfter(m)},{default:c(()=>e[1]||(e[1]=[O("+",-1)])),_:2,__:[1]},1032,["onClick"]),r(A,{type:"danger",disabled:a.settings[a.field.key].length==1,onClick:_=>o.removeItem(m)},{default:c(()=>e[2]||(e[2]=[O("-",-1)])),_:2,__:[2]},1032,["disabled","onClick"])]),_:2},1024)])]))),128))])]))])}const rU=ve(sU,[["render",iU]]),lU={name:"DropdownManyFields",props:["settings","field","inputs","errors","editorShortcodes"],data(){return{test:"null",rendered_labels:{remote_text:this.field.remote_text||"Field Label",local_text:this.field.local_text||"Field Value"}}},components:{FieldGeneral:bs,DynamicIcon:G,IconButton:we},methods:{addNewItem(){this.settings[this.field.key].push({item_value:"",label:""})},removeItem(t){this.settings[this.field.key].length!==1&&this.settings[this.field.key].splice(t,1)}},mounted(){(!this.settings[this.field.key]||!this.settings[this.field.key].length)&&(this.settings[this.field.key]=[{item_value:this.field,label:""}])}},AU={class:"dropdown_label_repeater w-full"},cU={class:"fluent_cart-table w-full text-left"},dU={class:"action-btns"},uU={class:"dropdown_label_repeater_footer"};function fU(t,e,a,s,n,o){const i=C("el-option"),l=C("el-select"),A=C("field-general"),u=C("DynamicIcon"),h=C("IconButton"),m=C("el-button");return f(),y("div",AU,[d("table",cU,[e[1]||(e[1]=d("colgroup",null,[d("col",{width:"25%"}),d("col",{width:"70%"}),d("col",{width:"10%"})],-1)),d("thead",null,[d("tr",null,[d("th",null,v(n.rendered_labels.remote_text),1),d("th",null,v(n.rendered_labels.local_text),1),e[0]||(e[0]=d("th",null,null,-1))])]),d("tbody",null,[(f(!0),y(P,null,j(a.settings[a.field.key],(_,B)=>(f(),y("tr",{key:"item_"+B},[d("td",null,[r(l,{modelValue:_.label,"onUpdate:modelValue":b=>_.label=b},{default:c(()=>[(f(!0),y(P,null,j(a.field.options,(b,w)=>(f(),U(i,{key:w,label:b,value:w},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),d("td",null,[r(A,{editorShortcodes:a.editorShortcodes,defaultValue:typeof _.item_value=="object"?"":_.item_value,modelValue:_.item_value,"onUpdate:modelValue":b=>_.item_value=b},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])]),d("td",null,[d("div",dU,[r(h,{size:"x-small",tag:"button",onClick:Ke(b=>o.removeItem(B),["prevent"]),disabled:a.settings[a.field.key].length===1,class:"border-none"},{default:c(()=>[r(u,{name:"Delete"})]),_:2},1032,["onClick","disabled"])])])]))),128))])]),d("div",uU,[r(m,{text:"",onClick:Ke(o.addNewItem,["prevent"])},{default:c(()=>[r(u,{name:"Plus"}),O(" "+v(t.$t("Add More")),1)]),_:1},8,["onClick"])])])}const hU=ve(lU,[["render",fU]]),pU={name:"ChainedFields",props:["settings","field","value"],computed:{listItems(){}},watch:{"settings.list_id"(){this.field.require_list&&this.fetchSettings()}},data(){return{loading:!1,app_ready:!1,categories:[],subcategories:[],chained_settings:{category:"",sub_category:""},selected_subcategory:""}},methods:{fetchSettings(){this.loading=!0,this.$post("integration/feed/chained",{route:this.field.remote_url,settings:this.settings}).then(t=>{this.loading=!1,this.categories=t.data.categories,this.subcategories=t.data.subcategories,t.data.reset_values&&(this.chained_settings={category:"",sub_category:""})}).catch(t=>{console.log(t)})},handleCategoryChange(){this.$set(this.settings,this.field.key.category,this.selected_category),this.fetchSettings()}},mounted(){this.settings[this.field.key]?this.chained_settings=this.settings[this.field.key]:this.settings[this.field.key]=this.chained_settings,this.app_ready=!0,this.fetchSettings()}},mU={class:"fluent_cart_chained_filter"};function gU(t,e,a,s,n,o){const i=C("el-option"),l=C("el-select"),A=Ut("loading");return ut((f(),y("div",mU,[r(l,{onChange:e[0]||(e[0]=u=>o.handleCategoryChange()),clearable:"",modelValue:n.chained_settings.category,"onUpdate:modelValue":e[1]||(e[1]=u=>n.chained_settings.category=u),placeholder:a.field.category_label},{default:c(()=>[(f(!0),y(P,null,j(n.categories,u=>(f(),U(i,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),ut(r(l,{modelValue:n.chained_settings.sub_category,"onUpdate:modelValue":e[2]||(e[2]=u=>n.chained_settings.sub_category=u),clearable:"",placeholder:a.field.subcategory_label},{default:c(()=>[(f(!0),y(P,null,j(n.subcategories,u=>(f(),U(i,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),[[GA,n.chained_settings.category]])])),[[A,n.loading]])}const _U=ve(pU,[["render",gU]]),vU={name:"ChainedSelects",props:["settings","field","value"],data(){return{app_ready:!1,loading:!1}},methods:{fetchSettings(){this.loading=!0,this.$get(this.field.remote_url,{settings:this.settings}).then(t=>{this.loading=!1;let e=t.data;ci(e,(a,s)=>{this.$set(this.field,s,a)})}).catch(t=>{console.log(t)})},handleSlectChange(t){t===this.field.primary_key&&(this.fetchSettings(),ci(this.value,(e,a)=>{a!=t&&(this.field.options_labels[a].type=="multi-select"?this.value[a]=[]:this.value[a]="")}))}},mounted(){this.fetchSettings(),this.app_ready=!0}},bU={class:"fluent_cart_chained_filter"};function yU(t,e,a,s,n,o){const i=C("el-option"),l=C("el-select"),A=C("el-col"),u=C("el-row"),h=Ut("loading");return ut((f(),y("div",bU,[r(u,{gutter:0},{default:c(()=>[(f(!0),y(P,null,j(a.field.fields_options,(m,_)=>(f(),U(A,{span:12,key:_,class:"fluent_carteach_filter"},{default:c(()=>[d("label",null,v(a.field.options_labels[_].label),1),r(l,{onChange:B=>o.handleSlectChange(_),filterable:"",clearable:"",placeholder:a.field.options_labels[_].placeholder,multiple:a.field.options_labels[_].type=="multi-select",modelValue:a.value[_],"onUpdate:modelValue":B=>a.value[_]=B},{default:c(()=>[(f(!0),y(P,null,j(m,(B,b)=>(f(),U(i,{key:b,value:b,label:B},null,8,["value","label"]))),128))]),_:2},1032,["onChange","placeholder","multiple","modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})])),[[h,n.loading]])}const wU=ve(vU,[["render",yU]]),CU={name:"RoutingFilterFields",components:{DynamicIcon:G,IconButton:we,FieldGeneral:bs},props:{routings:{type:Array,required:!0,default(){return[]}},fields:{type:Object,required:!0,default(){return{}}},disabled:{type:Boolean,required:!1,default:!1},labels:{default:()=>({input_label:"Send To",input_placeholder:"Email Address"})},input_type:{type:String,default:"text"},input_options:{type:Object,required:!1,default(){return{}}},editorShortcodes:{type:Object}},data(){return{defaultRules:{input_value:"",field:"",operator:"=",value:null},comingSoon:!1}},methods:{add(t){this.routings.splice(t+1,0,{...this.defaultRules})},remove(t){this.routings.splice(t,1)}},mounted(){(!this.routings||!this.routings.length)&&this.routings.push({...this.defaultRules})}},BU={class:"fluent_cart_routing_fields"},kU={key:0,class:"fluent_cart_routing_table"},xU={class:"fluent_cart_inline"},FU={class:"action-btns"};function SU(t,e,a,s,n,o){const i=C("el-input"),l=C("el-option"),A=C("el-select"),u=C("FieldGeneral"),h=C("DynamicIcon"),m=C("IconButton");return f(),y("div",BU,[a.disabled?S("",!0):(f(),y("table",kU,[d("tbody",null,[(f(!0),y(P,null,j(a.routings,(_,B)=>(f(),y("tr",{key:B},[d("td",null,[d("label",xU,v(a.labels.input_label),1),a.input_type=="text"?(f(),U(i,{key:0,placeholder:a.labels.input_placeholder,modelValue:_.input_value,"onUpdate:modelValue":b=>_.input_value=b},null,8,["placeholder","modelValue","onUpdate:modelValue"])):a.input_type=="select"?(f(),U(A,{key:1,modelValue:_.input_value,"onUpdate:modelValue":b=>_.input_value=b,placeholder:a.labels.input_placeholder},{default:c(()=>[(f(!0),y(P,null,j(a.input_options,(b,w)=>(f(),U(l,{key:w,label:b,value:w},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):S("",!0)]),e[0]||(e[0]=d("td",null,"If",-1)),d("td",null,[r(u,{editorShortcodes:a.editorShortcodes,modelValue:_.field,"onUpdate:modelValue":b=>_.field=b,defaultValue:_.field,onChange:b=>_.value=""},null,8,["editorShortcodes","modelValue","onUpdate:modelValue","defaultValue","onChange"])]),d("td",null,[r(A,{modelValue:_.operator,"onUpdate:modelValue":b=>_.operator=b,class:"w-[100px]"},{default:c(()=>[r(l,{value:"=",label:"equal"}),r(l,{value:"!=",label:"not equal"}),r(l,{value:">",label:"greater than"}),r(l,{value:"<",label:"less than"}),r(l,{value:">=",label:"greater than or equal"}),r(l,{value:"<=",label:"less than or equal"}),a.fields[_.field]&&!Object.keys(a.fields[_.field].options).length?(f(),y(P,{key:0},[r(l,{value:">",label:"greater than"}),r(l,{value:"<",label:"less than"}),r(l,{value:">=",label:"greater than or equal"}),r(l,{value:"<=",label:"less than or equal"}),r(l,{value:"contains",label:"contains"}),r(l,{value:"doNotContains",label:"do not contains"}),r(l,{value:"startsWith",label:"starts with"}),r(l,{value:"endsWith",label:"ends with"})],64)):S("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),d("td",null,[a.fields[_.field]&&Object.keys(a.fields[_.field].options).length?(f(),U(A,{key:0,modelValue:_.value,"onUpdate:modelValue":b=>_.value=b,style:{width:"100%"}},{default:c(()=>[(f(!0),y(P,null,j(a.fields[_.field].options,(b,w)=>(f(),U(l,{key:w,label:b,value:w},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(f(),U(i,{key:1,placeholder:"Enter a value",modelValue:_.value,"onUpdate:modelValue":b=>_.value=b},null,8,["modelValue","onUpdate:modelValue"]))]),d("td",null,[d("div",FU,[r(m,{size:"x-small",tag:"button",onClick:Ke(b=>o.add(B),["prevent"])},{default:c(()=>[r(h,{name:"Plus"})]),_:2},1032,["onClick"]),a.routings.length>1?(f(),U(m,{key:0,size:"x-small",tag:"button",onClick:Ke(b=>o.remove(B),["prevent"])},{default:c(()=>[r(h,{name:"Minus"})]),_:2},1032,["onClick"])):S("",!0)])])]))),128))])]))])}const EU=ve(CU,[["render",SU]]),UU={name:"SelectionRouting",props:["field","settings","inputs","editorShortcodes"],components:{RoutingFilterFields:EU,FiledGeneral:bs}},QU={class:"fluent_cart_field_routing"},DU={class:"mb-4"},MU={key:3};function IU(t,e,a,s,n,o){const i=C("el-checkbox"),l=C("el-option"),A=C("el-select"),u=C("el-input"),h=C("filed-general"),m=C("routing-filter-fields");return f(),y("div",QU,[d("div",DU,[r(i,{modelValue:a.settings[a.field.routing_key],"onUpdate:modelValue":e[0]||(e[0]=_=>a.settings[a.field.routing_key]=_),"true-value":"routing","false-value":"simple"},{default:c(()=>[O(v(a.field.labels.choice_label),1)]),_:1},8,["modelValue"])]),d("div",null,[a.field.simple_component=="select"?(f(),U(A,{key:0,disabled:a.settings[a.field.routing_key]!="simple",filterable:"",clearable:"",multiple:a.field.is_multiple,modelValue:a.settings[a.field.key],"onUpdate:modelValue":e[1]||(e[1]=_=>a.settings[a.field.key]=_),placeholder:a.field.placeholder},{default:c(()=>[(f(!0),y(P,null,j(a.field.options,(_,B)=>(f(),U(l,{key:B,value:B,label:_},null,8,["value","label"]))),128))]),_:1},8,["disabled","multiple","modelValue","placeholder"])):a.field.simple_component=="text"?(f(),U(u,{key:1,disabled:a.settings[a.field.routing_key]!="simple",modelValue:a.settings[a.field.key],"onUpdate:modelValue":e[2]||(e[2]=_=>a.settings[a.field.key]=_),placeholder:a.field.placeholder},null,8,["disabled","modelValue","placeholder"])):a.field.simple_component=="value_text"&&a.settings[a.field.routing_key]=="simple"?(f(),U(h,{key:2,editorShortcodes:a.editorShortcodes,modelValue:a.settings[a.field.key],"onUpdate:modelValue":e[3]||(e[3]=_=>a.settings[a.field.key]=_)},null,8,["editorShortcodes","modelValue"])):S("",!0),a.settings[a.field.routing_key]=="simple"&&a.field.inline_tip?(f(),y("p",MU,v(a.field.inline_tip),1)):S("",!0)]),a.settings[a.field.routing_key]=="routing"?(f(),U(m,{key:0,routings:a.settings[a.field.settings_key],input_type:a.field.routing_input_type,fields:a.inputs,labels:a.field.labels,input_options:a.field.options,editorShortcodes:a.editorShortcodes},null,8,["routings","input_type","fields","labels","input_options","editorShortcodes"])):S("",!0)])}const TU=ve(UU,[["render",IU]]),$U={name:"CustomComponentRender",props:{field:{type:Object,required:!0},settings:{type:Object,required:!0}},data(){return{message:"This is a custom component render"}},render(){if(this.field&&this.field.render_template){const t=`<div>${this.field.render_template}</div>`,e=$_(t).bind(this);return ri(e,{settings:this.settings,app:this})}return null}},OU={name:"FeedHeader",props:{integration_name:String,settings:Object},computed:{ArrowRight(){return Ca},prevRoute(){return this.$route.name==="product_integration_feed_editor"?{name:"product_integrations",params:{product_id:this.$route.params.product_id}}:{name:"integrations"}}}},LU={class:"fc-feed-header mb-5"},VU={class:"mb-5 flex items-center justify-between"},RU={class:"capitalize"};function HU(t,e,a,s,n,o){const i=C("el-breadcrumb-item"),l=C("el-breadcrumb"),A=C("el-switch");return f(),y("div",LU,[d("div",VU,[r(l,{"separator-icon":o.ArrowRight},{default:c(()=>[r(i,{to:o.prevRoute},{default:c(()=>[O(v(t.$t("Integrations")),1)]),_:1},8,["to"]),r(i,null,{default:c(()=>[d("span",RU,v(a.integration_name),1)]),_:1})]),_:1},8,["separator-icon"]),r(A,{modelValue:a.settings.enabled,"onUpdate:modelValue":e[0]||(e[0]=u=>a.settings.enabled=u),"active-value":"yes","inactive-value":"no","active-text":t.$t("Enable this Integration")},null,8,["modelValue","active-text"])])])}const PU=ve(OU,[["render",HU]]);class NU{constructor(){this.errors={}}get(e){if(this.errors[e])return this.errors[e]}first(e){if(this.errors[e]){let a=Object.keys(this.errors[e]);return a.length?this.errors[e][a[0]]:""}}has(e){return!!this.errors[e]}record(e){this.errors=e}clear(e){e?this.errors[e]=null:this.errors={}}}const KU={name:"RestSelector",props:["field","modelValue"],emits:["update:modelValue"],data(){return{model:this.modelValue,loading:!1,options:[]}},watch:{model(t){this.$emit("update:modelValue",t)}},methods:{fetchOptions(t){let e=this.field.option_key;this.field.extended_key&&(e+="_"+this.field.extended_key);let a="";if(this.field.cacheable){if(a+="_fcrm_ajax_cache_"+e,window[a]){this.options=window[a];return}}else if(this.field.experimental_cache&&(a+="_fcrm_ajax_cache_"+e+"_"+t+" "+JSON.stringify(this.model),this.field.sub_option_key&&(a+="_"+JSON.stringify(this.field.sub_option_key)),window[a])){this.options=window[a];return}if(this.doing_ajax)return!1;this.loading=!0;const s={search:t,values:this.model,option_key:e};this.field.sub_option_key&&(s.sub_option_key=this.field.sub_option_key),this.$get("integration/feed/dynamic_options",s).then(n=>{this.options=n.options,a&&n.options&&(window[a]=n.options)}).catch(n=>{this.handleError(n)}).finally(()=>{this.loading=!1})}},mounted(){this.fetchOptions("")}};function zU(t,e,a,s,n,o){const i=C("el-option"),l=C("el-select"),A=Ut("loading");return ut((f(),U(l,{modelValue:n.model,"onUpdate:modelValue":e[0]||(e[0]=u=>n.model=u),multiple:a.field.is_multiple,filterable:"",remote:!a.field.cacheable,clearable:a.field.clearable,disabled:a.field.disabled,"reserve-keyword":"","allow-create":a.field.creatable,size:a.field.size,placeholder:a.field.placeholder||t.$t("Please enter a keyword"),"remote-method":o.fetchOptions},{default:c(()=>[(f(!0),y(P,null,j(n.options,u=>(f(),U(i,{key:u.id,label:u.title,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","multiple","remote","clearable","disabled","allow-create","size","placeholder","remote-method"])),[[A,n.loading]])}const GU=ve(KU,[["render",zU]]),jU={name:"FeedEditor",components:{FilterFields:$E,MergeFieldMapper:JE,FiledGeneral:bs,ListSelectFilter:aU,DropDownLabelRepeater:rU,DropDownManyFields:hU,ChainedFields:_U,ChainedSelects:wU,SelectionRouting:TU,CardContainer:oe,CardBody:ae,CardHeader:de,LabelHint:Xe,FeedHeader:PU,ErrorView:rl,CustomComponentRender:$U,RestSelector:GU},data(){return{loading_app:!1,loading_list:!1,errors:new NU,integration_id:parseInt(this.$route.params.integration_id),integration_name:this.$route.params.integration_name,saving:!1,merge_fields:{},settings:{},settings_fields:{},attachedForms:[],inputs:[],editorShortcodes:[],scope:"",product_variations:[]}},computed:{getTitle(){let t=this.settings_fields.integration_title||"";return this.integration_id?`Update ${t} Integration Feed`:`Add New ${t} Integration Feed`},maybeShowSaveButton(){let t=this.settings_fields,e=this.merge_fields;return t.button_require_list&&e||!t.button_require_list}},methods:{translate:p,loadIntegrationSettings(){if(this.$route.name==="product_integration_feed_editor"){this.loading_app=!0;const t=this.$route.params.product_id;this.$get(`products/${t}/integrations/${this.integration_name}/settings`,{integration_id:this.integration_id}).then(e=>{this.loading_app=!1,this.settings_fields=e.settings_fields,this.scope=e.scope,this.product_variations=e.product_variations,this.settings=e.settings,this.editorShortcodes=Object.values(e.shortcodes||{}),this.inputs=e.inputs,this.settings.name||(this.settings.name=e.settings_fields.integration_title+" Integration Feed"||""),this.merge_fields=e.merge_fields}).catch(e=>{this.loading_app=!1,e.status_code=="422"?q.validationErrors(e):q.error(e.message)})}else this.loading_app=!0,this.$get("integration/global-feeds/settings",{integration_id:this.integration_id,integration_name:this.integration_name}).then(t=>{this.loading_app=!1,this.settings_fields=t.settings_fields,this.settings=t.settings,this.editorShortcodes=Object.values(t.shortcodes),this.inputs=t.inputs,this.settings.name||(this.settings.name=t.settings_fields.integration_title+" Integration Feed"||""),this.merge_fields=t.merge_fields}).catch(t=>{var e,a;console.log(t),this.loading_app=!1,this.handleError(((a=(e=t.responseJSON)==null?void 0:e.data)==null?void 0:a.message)||"Failed to load integration settings")})},loadMergeFields(){this.loading_list=!0,this.fieldsLoaded=!1,this.$get("integration/feed/lists",{integration_id:this.integration_id,list_id:this.settings.list_id,integration_name:this.integration_name}).then(t=>{this.loading_list=!1,this.merge_fields=t.merge_fields,this.fieldsLoaded=!0}).catch(t=>{console.log(t)})},saveNotification(){if(this.errors.clear(),this.$route.name==="product_integration_feed_editor"){this.saving=!0;const t=this.$route.params.product_id;let e={integration_id:this.integration_id,integration_name:this.integration_name,integration:JSON.stringify(this.settings)};this.$post(`products/${t}/integrations`,e).then(a=>{a.feedData&&(this.settings=a.feedData),a.created&&this.$router.push({name:"product_integrations",params:{product_id:t}}),this.handleSuccess(a.message||"Integration saved successfully"),this.errors.clear()}).catch(a=>{var s;this.errors.record(((s=a==null?void 0:a.data)==null?void 0:s.errors)||{}),this.handleError(a)}).finally(()=>{this.saving=!1})}else{this.saving=!0;let t={integration_id:this.integration_id,integration_name:this.integration_name,integration:JSON.stringify(this.settings)};this.$post("integration/global-feeds/settings",t).then(e=>{e.created&&this.$router.push({name:"integrations"}),this.handleSuccess(e.message)}).catch(e=>{var a;this.errors.record(((a=e==null?void 0:e.data)==null?void 0:a.errors)||{}),this.handleError(e)}).finally(()=>{this.saving=!1})}},setMergeModel(t){this.settings[t.key]={}}},mounted(){this.loadIntegrationSettings()}},YU={class:"fc-integration-container fc-layout-width"},WU={class:"fc-add-integration py-7.5"},qU={class:"grid gap-5"},XU={key:0,class:"fc-setting-form-content"},JU=["innerHTML"],ZU={class:"fc-setting-form-fields"},e3=["innerHTML"],t3=["innerHTML"],a3=["innerHTML"],s3={key:0,class:"fc-setting-form-row"},n3={class:"fc-setting-form-content"},o3={class:"fc-setting-form-content"},i3={class:"fc-setting-form-fields"},r3={class:"fc-inline-tip pl-6"},l3={key:0,class:"setting-save-action"};function A3(t,e,a,s,n,o){const i=C("el-skeleton-item"),l=C("el-skeleton"),A=C("FeedHeader"),u=C("LabelHint"),h=C("el-input"),m=C("error-view"),_=C("el-option"),B=C("el-select"),b=C("MergeFieldMapper"),w=C("el-checkbox"),k=C("el-checkbox-group"),F=C("el-option-group"),x=C("filter-fields"),E=C("filed-general"),M=C("list-select-filter"),D=C("drop-down-label-repeater"),R=C("drop-down-many-fields"),$=C("el-radio"),Q=C("el-radio-group"),I=C("el-input-number"),L=C("chained-fields"),V=C("chained-selects"),N=C("selection-routing"),Y=C("rest-selector"),K=C("CardBody"),X=C("CardContainer"),re=C("el-button"),ce=C("el-form"),Z=Ut("loading");return f(),y("div",YU,[d("div",WU,[r(l,{loading:n.loading_app,class:"bg-white rounded p-6 mb-7.5 dark:bg-dark-700",animated:""},{template:c(()=>[r(i,{variant:"h3",class:"w-[150px] mb-5"}),d("div",qU,[d("div",null,[r(i,{variant:"h3",class:"w-[50px] mb-3"}),r(i,{variant:"p"})]),d("div",null,[r(i,{variant:"h3",class:"w-[50px] mb-3"}),r(i,{variant:"p"})])])]),_:1},8,["loading"]),n.loading_app?S("",!0):(f(),U(ce,{key:0,"label-position":"top","require-asterisk-position":"right"},{default:c(()=>[r(A,{settings:n.settings,integration_name:n.integration_name},null,8,["settings","integration_name"]),r(X,null,{default:c(()=>[r(K,null,{default:c(()=>[(f(!0),y(P,null,j(n.settings_fields.fields,(H,z)=>(f(),y("div",{key:z,class:le(["fc-setting-form-row",H.key])},[H.label?(f(),y("div",XU,[H.tips?(f(),U(u,{key:0,title:H.label,content:H.tips,placement:"top-start",required:H.required},null,8,["title","content","required"])):(f(),U(u,{key:1,title:H.label,required:H.required},null,8,["title","required"])),H.inline_tip?(f(),y("p",{key:2,class:"fc-inline-tip",innerHTML:H.inline_tip},null,8,JU)):S("",!0)])):S("",!0),d("div",ZU,[H.component==="text"?(f(),y(P,{key:0},[r(h,{placeholder:H.placeholder,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W,class:le(n.errors.errors[H.key]?"is-error":"")},null,8,["placeholder","modelValue","onUpdate:modelValue","class"]),r(m,{field:H.key,errors:n.errors},null,8,["field","errors"])],64)):H.component==="list_ajax_options"?(f(),y(P,{key:1},[ut((f(),U(B,{onChange:e[0]||(e[0]=W=>o.loadMergeFields()),modelValue:n.settings.list_id,"onUpdate:modelValue":e[1]||(e[1]=W=>n.settings.list_id=W),placeholder:H.placeholder,clearable:""},{default:c(()=>[(f(!0),y(P,null,j(H.options,(W,ie)=>(f(),U(_,{key:ie,value:ie,label:W},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","placeholder"])),[[Z,n.loading_list]]),r(m,{field:H.key,errors:n.errors},null,8,["field","errors"])],64)):H.component==="map_fields"?(f(),U(b,{key:2,onSetMergeModelObj:W=>o.setMergeModel(H),errors:n.errors,inputs:n.inputs,field:H,settings:n.settings,editorShortcodes:n.editorShortcodes,merge_model:n.settings[H.key],merge_fields:n.merge_fields},null,8,["onSetMergeModelObj","errors","inputs","field","settings","editorShortcodes","merge_model","merge_fields"])):H.component==="select"?(f(),y(P,{key:3},[r(B,{filterable:"",clearable:"",multiple:H.is_multiple,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W,placeholder:H.placeholder},{default:c(()=>[(f(!0),y(P,null,j(H.options,(W,ie)=>(f(),U(_,{key:ie,value:ie,label:W},null,8,["value","label"]))),128))]),_:2},1032,["multiple","modelValue","onUpdate:modelValue","placeholder"]),r(m,{field:H.key,errors:n.errors},null,8,["field","errors"])],64)):H.component==="checkbox-single"?(f(),y(P,{key:4},[r(w,{modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},{default:c(()=>[O(v(H.checkbox_label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),H.inline_tip?(f(),y("p",{key:0,class:"fc-inline-tip pl-6",innerHTML:H.inline_tip},null,8,e3)):S("",!0)],64)):H.component==="yes-no-checkbox"?(f(),y(P,{key:5},[r(w,{"true-value":"yes","false-value":"no",modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},{default:c(()=>[O(v(H.checkbox_label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),H.inline_tip?(f(),y("p",{key:0,class:"fc-inline-tip pl-6",innerHTML:H.inline_tip},null,8,t3)):S("",!0)],64)):H.component==="checkbox-multiple"?(f(),U(k,{key:6,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},{default:c(()=>[(f(!0),y(P,null,j(H.options,(W,ie)=>(f(),U(w,{key:ie,label:Number(ie)},{default:c(()=>[O(v(W),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):H.component==="selection_group"?(f(),y(P,{key:7},[r(B,{modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W,placeholder:H.placeholder,multiple:"",class:le(n.errors.errors[H.key]?"is-error":"")},{default:c(()=>[(f(!0),y(P,null,j(H.options,(W,ie)=>(f(),U(F,{key:ie,label:W.label},{default:c(()=>[(f(!0),y(P,null,j(W.options,te=>(f(),U(_,{key:te.value,label:te.label,value:te.value},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","class"]),r(m,{field:H.key,errors:n.errors},null,8,["field","errors"])],64)):H.component==="conditional_block"?(f(),U(x,{key:8,fields:n.inputs,conditionals:n.settings[H.key],editorShortcodes:n.editorShortcodes},null,8,["fields","conditionals","editorShortcodes"])):H.component==="value_text"?(f(),U(E,{key:9,editorShortcodes:n.editorShortcodes,defaultValue:n.settings[H.key],modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])):H.component==="value_textarea"?(f(),U(E,{key:10,field_type:"textarea",editorShortcodes:n.editorShortcodes,defaultValue:n.settings[H.key],modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W,isIconBtn:""},null,8,["editorShortcodes","defaultValue","modelValue","onUpdate:modelValue"])):H.component==="list_select_filter"?(f(),U(M,{key:11,settings:n.settings,field:H},null,8,["settings","field"])):H.component==="dropdown_label_repeater"?(f(),U(D,{key:12,errors:n.errors,inputs:n.inputs,field:H,settings:n.settings,editorShortcodes:n.editorShortcodes},null,8,["errors","inputs","field","settings","editorShortcodes"])):H.component==="dropdown_many_fields"?(f(),U(R,{key:13,errors:n.errors,inputs:n.inputs,field:H,settings:n.settings,editorShortcodes:n.editorShortcodes},null,8,["errors","inputs","field","settings","editorShortcodes"])):H.component==="radio_choice"?(f(),U(Q,{key:14,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},{default:c(()=>[(f(!0),y(P,null,j(H.options,(W,ie)=>(f(),U($,{key:ie,label:ie},{default:c(()=>[O(v(W),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):H.component==="number"?(f(),U(I,{key:15,size:"default",modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},null,8,["modelValue","onUpdate:modelValue"])):H.component==="chained_fields"?(f(),U(L,{key:16,settings:n.settings,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W,field:H},null,8,["settings","modelValue","onUpdate:modelValue","field"])):H.component==="chained_select"?(f(),U(V,{key:17,settings:n.settings,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W,field:H},null,8,["settings","modelValue","onUpdate:modelValue","field"])):H.component==="html_info"?(f(),y("div",{key:18,innerHTML:H.html_info},null,8,a3)):H.component==="selection_routing"?(f(),U(N,{key:19,inputs:n.inputs,field:H,editorShortcodes:n.editorShortcodes,settings:n.settings},null,8,["inputs","field","editorShortcodes","settings"])):H.component==="rest_selector"?(f(),U(Y,{key:20,field:H,modelValue:n.settings[H.key],"onUpdate:modelValue":W=>n.settings[H.key]=W},null,8,["field","modelValue","onUpdate:modelValue"])):H.component==="custom_component"?(f(),U($s("custom-component-render"),{key:21,field:H,settings:n.settings},null,8,["field","settings"])):S("",!0)])],2))),128)),n.scope==="product"&&n.product_variations.length?(f(),y("div",s3,[d("div",n3,[d("div",o3,[r(u,{title:o.translate("Run on Selected Variations Only")},null,8,["title"])])]),d("div",i3,[r(B,{filterable:"",clearable:"",multiple:!0,modelValue:n.settings.conditional_variation_ids,"onUpdate:modelValue":e[2]||(e[2]=H=>n.settings.conditional_variation_ids=H),placeholder:t.$t("Leave empty for all the variations")},{default:c(()=>[(f(!0),y(P,null,j(n.product_variations,H=>(f(),U(_,{key:H.id,value:H.id,label:H.title},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"]),d("p",r3,v(t.$t("Leave empty to run this feed for all variations")),1)])])):S("",!0)]),_:1})]),_:1}),o.maybeShowSaveButton?(f(),y("div",l3,[r(re,{type:"primary",loading:n.saving,onClick:o.saveNotification},{default:c(()=>[O(v(n.integration_id?`Update ${n.settings_fields.integration_title} Feed`:`Create ${n.settings_fields.integration_title} Feed`),1)]),_:1},8,["loading","onClick"])])):S("",!0)]),_:1}))])])}const wh=ve(jU,[["render",A3]]),c3={class:"setting-wrap"},d3={key:0,class:"integration-actions"},u3={key:0,class:"fc-empty-integration-wrap text-center max-w-[600px] mx-auto mb-5"},f3={class:"text-base"},h3={key:1,class:"fc-integrations-table-wrap"},p3={class:"fc-integration-logo-wrap"},m3=["src","alt"],g3={class:"text-xs text-gray-700"},_3=["onClick"],v3={class:"fc-event-triggers"},b3={class:"fc-event-triggers"},y3={class:"fc-btn-group sm"},w3={key:2,class:"fc-integration-table-footer"},C3={target:"_blank",rel:"noopener",href:"https://docs.webmakerrpro.com"},B3={name:"GloablIntegration",props:["editorShortcodes"],data(){return{loading:!0,feeds:[],available_integrations:{},all_module_config_url:""}},computed:{hasActiveIntegrations(){return Object.values(this.available_integrations).some(t=>t.enabled)}},methods:{getFeeds(){this.loading=!0,this.$get("integration/global-feeds").then(t=>{this.available_integrations=t.available_integrations,this.feeds=t.feeds,this.all_module_config_url=t.all_module_config_url}).catch(t=>{this.loading=!1}).finally(()=>{this.loading=!1})},handleActive(t){let e={status:t.enabled};this.$post(`integration/global-feeds/change-status/${t.id}`,e).then(a=>{this.handleSuccess(a.message)}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})},removeFeed(t,e){let a=e.$index;this.$confirm("Are you sure you want to delete this integration?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",confirmButtonClass:"el-button--primary",cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{this.$del(`integration/global-feeds/${t}`).then(s=>{this.handleSuccess(s.message),this.feeds.splice(a,1)}).catch(s=>{var n;this.handleError(((n=s==null?void 0:s.data)==null?void 0:n.message)||"Failed to delete integration.")})}).catch(()=>{})},add(t){let e=this.available_integrations[t];e&&e.enabled?this.$router.push({name:"feed_editor",params:{integration_id:0,integration_name:t}}):this.$notify.error({message:this.$t("This integration is not enabled. Please enable it from the integration modules.")})},edit(t){this.$router.push({name:"feed_editor",params:{integration_id:t.id,integration_name:t.provider}})},isEmpty:id},mounted(){this.getFeeds()}},k3=Object.assign(B3,{setup(t){return(e,a)=>{const s=C("el-button"),n=C("el-dropdown-item"),o=C("el-dropdown-menu"),i=C("el-dropdown"),l=C("el-skeleton"),A=C("el-switch"),u=C("el-table-column"),h=C("el-tag"),m=C("el-popover"),_=C("el-tooltip"),B=C("el-table"),b=Ut("loading");return f(),y("div",c3,[r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{title:e.$t("Global Integrations Feeds"),text:e.$t("These integration feeds will be applied globally across all your orders and related actions.")},{action:c(()=>[e.hasActiveIntegrations?(f(),y("div",d3,[r(i,{onCommand:e.add,trigger:"click","popper-class":"fc-dropdown"},{dropdown:c(()=>[r(o,null,{default:c(()=>[(f(!0),y(P,null,j(e.available_integrations,(w,k)=>(f(),U(n,{key:k,command:k},{default:c(()=>[O(v(w.title),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:c(()=>[r(s,{type:"info",plain:"",size:"small"},{default:c(()=>[O(v(e.$t("Add Integration"))+" ",1),r(G,{name:"ChevronDown"})]),_:1})]),_:1},8,["onCommand"])])):S("",!0)]),_:1},8,["title","text"]),r(ae,{class:"px-0 pb-0 pt-4"},{default:c(()=>[r(l,{class:"px-5 pb-5",loading:e.loading,animated:"",rows:6},null,8,["loading"]),e.loading?S("",!0):(f(),y(P,{key:0},[e.hasActiveIntegrations?(f(),y("div",h3,[ut((f(),U(B,{data:e.feeds},{empty:c(()=>[r(Tt,{icon:"Folder",text:e.$t("You did not add any integration actions yet.")},null,8,["text"])]),default:c(()=>[r(u,{label:e.$t("Enabled"),width:60},{default:c(w=>[r(A,{"active-value":"yes","inactive-value":"no",onChange:k=>e.handleActive(w.row),modelValue:w.row.enabled,"onUpdate:modelValue":k=>w.row.enabled=k},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),r(u,{width:120,label:e.$t("Integration")},{default:c(w=>{var k,F;return[d("div",p3,[(k=e.available_integrations[w.row.provider])!=null&&k.logo?(f(),y("img",{key:0,style:{"min-width":"24px"},class:"fc-integration-logo",src:e.available_integrations[w.row.provider].logo,alt:w.row.provider},null,8,m3)):S("",!0),d("span",g3,v(((F=e.available_integrations[w.row.provider])==null?void 0:F.title)||w.row.provider),1)])]}),_:1},8,["label"]),r(u,{width:220,label:e.$t("Title")},{default:c(w=>[d("a",{class:"fc-action-link-btn",onClick:Ke(k=>e.edit(w.row),["prevent"]),href:"#"},v(w.row.name),9,_3)]),_:1},8,["label"]),r(u,{width:160,label:e.$t("Triggers")},{default:c(w=>[d("div",v3,[(f(!0),y(P,null,j((w.row.feed.event_trigger||[]).slice(0,2),(k,F)=>(f(),U(h,{key:k},{default:c(()=>[r(G,{name:"Trigger"}),O(" "+v(g(lt).headline(k)),1)]),_:2},1024))),128)),(w.row.feed.event_trigger||[]).length>2?(f(),U(m,{key:0,placement:"bottom",width:"300",trigger:"hover"},{reference:c(()=>[r(h,{type:"info"},{default:c(()=>[O(" +"+v((w.row.feed.event_trigger||[]).length-2),1)]),_:2},1024)]),default:c(()=>[d("div",b3,[(f(!0),y(P,null,j((w.row.feed.event_trigger||[]).slice(2),(k,F)=>(f(),U(h,{key:k+F},{default:c(()=>[r(G,{name:"Trigger"}),O(" "+v(g(lt).headline(k)),1)]),_:2},1024))),128))])]),_:2},1024)):S("",!0)])]),_:1},8,["label"]),r(u,{width:80},{default:c(w=>[d("div",y3,[r(_,{effect:"dark",content:e.$t("Edit"),placement:"top","popper-class":"fc-tooltip"},{default:c(()=>[r(we,{tag:"button",onClick:k=>e.edit(w.row),size:"x-small",hover:"primary"},{default:c(()=>[r(G,{name:"Edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"]),r(_,{effect:"dark",content:e.$t("Delete"),placement:"top","popper-class":"fc-tooltip"},{default:c(()=>[r(we,{tag:"button",size:"x-small",onClick:k=>e.removeFeed(w.row.id,w),hover:"danger"},{default:c(()=>[r(G,{name:"Delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])])]),_:1})]),_:1},8,["data"])),[[b,e.loading]])])):(f(),y("div",u3,[d("p",f3,v(e.$t("You don't have any integration module enabled. Please go to integration modules and enable and configured from available modules")),1),r(s,{tag:"a",type:"primary",href:e.all_module_config_url},{default:c(()=>[O(v(e.$t("Configure Modules")),1)]),_:1},8,["href"])])),e.feeds.length?S("",!0):(f(),y("div",w3,[d("a",C3,v(e.$t("View Documentations")),1)]))],64))]),_:1})]),_:1})])}}}),x3={name:"Integrations",components:{Badge:pt,FluidTabItem:Ir,FluidTab:Wc,CardBody:ae,CardContainer:oe,CardHeader:de,PageHeading:kn,IconButton:we,DynamicIcon:G,Empty:Tt,GlobalIntegrationFeeds:k3},data(){var t;return{search:"",fetching:!1,addOns:{},module_type:"all",integrationTab:"global",modules:["all","crm","lms","core","marketing"],installationLoading:!1,admin_url:(t=window.fluentCartAdminApp)==null?void 0:t.admin_url,installing:!1,installingAdding:""}},computed:{filteredAddons(){let t=this.addOns;if(this.search){let e={};ci(t,(a,s)=>{JSON.stringify(a).indexOf(this.search)!==-1&&(e[s]=a)}),t=e}if(this.module_type!="all"){let e={};ci(t,(a,s)=>{a.categories&&a.categories.includes(this.module_type)&&(e[s]=a)}),t=e}return t},is_no_modules(){return id(this.filteredAddons)}},methods:{fetchAddons(){this.fetching=!0,this.$get("integration/addons").then(t=>{this.addOns=t.addons}).catch(t=>{this.handleError(t)}).finally(()=>{this.fetching=!1})},translate:p,changeModuleType(t){this.module_type=t},installAddon(t,e){this.installing=!0,this.installingAdding=e,this.$post("integration/feed/install-plugin",{addon:e}).then(a=>{this.$notify.success(a.message),window.location.reload()}).catch(a=>{this.handleError(a)}).finally(()=>{this.installing=!1,this.installingAdding=""})}},mounted(){this.fetchAddons()}},F3={class:"fc-integration-container fc-layout-width"},S3={style:{"margin-top":"100px"},class:"fc-integration-content"},E3={class:"fc-integration-content-head"},U3={class:"fc-card-header-title mb-1"},Q3={class:"card-header-text mt-0"},D3={class:"flex items-center gap-3 justify-between py-5 mt-5 border border-solid border-gray-divider border-x-0 dark:border-dark-500 flex-col md:flex-row"},M3={class:"fc-integration-search"},I3={key:1},T3={class:"fc-integration-card-content"},$3={class:"fc-integration-card-content-inner"},O3={class:"fc-integration-card-logo"},L3=["src","alt"],V3={class:"title"},R3={class:"desc"},H3={key:0,class:"mt-2"};function P3(t,e,a,s,n,o){const i=C("PageHeading"),l=C("GlobalIntegrationFeeds"),A=C("DynamicIcon"),u=C("IconButton"),h=C("FluidTabItem"),m=C("FluidTab"),_=C("el-input"),B=C("el-skeleton"),b=C("Badge"),w=C("el-button"),k=C("Empty"),F=C("CardBody"),x=C("CardContainer");return f(),y("div",F3,[r(i,{title:t.$t("Integrations & Addons")},null,8,["title"]),r(l),d("div",S3,[r(x,null,{default:c(()=>[r(F,null,{default:c(()=>[d("div",E3,[r(u,{circle:"",size:"large"},{default:c(()=>[r(A,{name:"EqualizerLine"})]),_:1}),d("div",null,[d("h2",U3,v(t.$t("Integration Modules")),1),d("p",Q3,v(t.$t("Configure your integrations and extend WebmakerrPro to enhance your store's functionality.")),1)])]),d("div",D3,[r(m,null,{default:c(()=>[(f(!0),y(P,null,j(n.modules,(E,M)=>(f(),U(h,{key:M,class:le(["uppercase",E===n.module_type?"active":""]),onClick:D=>o.changeModuleType(E)},{default:c(()=>[O(v(E),1)]),_:2},1032,["onClick","class"]))),128))]),_:1}),d("div",M3,[r(_,{placeholder:t.$t("Search..."),modelValue:n.search,"onUpdate:modelValue":e[0]||(e[0]=E=>n.search=E)},{prefix:c(()=>[r(A,{name:"Search"})]),_:1},8,["placeholder","modelValue"])])]),n.fetching?(f(),U(B,{key:0,loading:!0,animated:"",rows:4})):S("",!0),n.fetching?S("",!0):(f(),y("div",I3,[(f(!0),y(P,null,j(o.filteredAddons,(E,M)=>(f(),y("div",{key:M,class:le(["fc-integration-card","addon-enabled-"+E.enabled])},[d("div",T3,[d("div",$3,[d("div",O3,[E.logo?(f(),y("img",{key:0,src:E.logo,alt:E.title},null,8,L3)):S("",!0)]),d("div",null,[d("h5",V3,[O(v(E.title)+" ",1),r(b,{status:E.enabled?"active":"info",text:E.enabled?"enabled":"disabled"},null,8,["status","text"])]),d("p",R3,v(E.description),1),!E.enabled&&E.installable?(f(),y("div",H3,[r(w,{loading:n.installingAdding==M,disabled:n.installingAdding==M,onClick:D=>o.installAddon(E,M),type:"primary",size:"small"},{default:c(()=>[O(v(o.translate("Install %s",E.title)),1)]),_:2},1032,["loading","disabled","onClick"])])):S("",!0)])])])],2))),128))])),o.is_no_modules&&!n.fetching?(f(),U(k,{key:2,icon:"Folder",text:t.$t("Sorry! No modules found based on your filter.")},null,8,["text"])):S("",!0)]),_:1})]),_:1})])])}const N3=ve(x3,[["render",P3]]),K3={class:"fc-connect-details"},z3={key:0,class:"fc-connect-require"},G3={class:"flex items-center justify-between"},j3={key:0,class:"display-name"},Y3={name:"ConnectAccount",props:["connect","connect_config","mode","method","methodName","methodLabel"],data(){return{saving:!1}},methods:{disconnect(){this.saving=!0,this.$post("settings/payment-methods/disconnect",{method:this.method,mode:this.mode}).then(t=>{this.saving=!1,this.$emit("reload_settings",!0)})}}},Ch=Object.assign(Y3,{setup(t){return(e,a)=>{const s=C("el-button"),n=C("el-popconfirm");return f(),y("div",K3,[!t.connect||t.connect.error?(f(),y("div",z3,[d("h4",null,v(e.$t("Connect Your %s Account to your website to accept Payments",t.methodName)),1),r(s,{tag:"a",type:"info",plain:"",href:t.connect_config[t.mode+"_redirect"]},{default:c(()=>[r(G,{name:"ArrowLeftRight"}),O(" "+v(e.$t("Connect with %s",t.methodLabel)),1)]),_:1},8,["href"])])):(f(),U(dg,{key:1,title:e.$t("Your %s Account is Up & Running 🎉",t.methodLabel)},{default:c(()=>{var o;return[d("div",G3,[d("div",null,[t.connect.display_name?(f(),y("p",j3,v(t.connect.display_name),1)):S("",!0),d("h4",null,v(e.$t("Administrator"))+" ("+v(e.$t("Owner"))+")",1)]),r(n,{width:"230","confirm-button-text":e.$t("Confirm"),"cancel-button-text":e.$t("No, Thanks"),icon:"el-icon-info","icon-color":"red",title:((o=t.connect_config)==null?void 0:o.disconnect_note)??e.$t("Are you sure to disconnect?"),position:"top",onConfirm:e.disconnect},{reference:c(()=>[r(s,{type:"danger",plain:""},{default:c(()=>[O(v(e.$t("Disconnect %s",t.methodLabel)),1)]),_:1})]),_:1},8,["confirm-button-text","cancel-button-text","title","onConfirm"])])]}),_:1},8,["title"]))])}}}),W3={__name:"Tabs",props:{fields:Object,settings:Object,tabs:Object,index:[String,Number]},setup(t){return(e,a)=>{const s=C("el-tab-pane"),n=C("el-tabs");return f(),U(n,{class:"demo-tabs",modelValue:t.settings[t.index],"onUpdate:modelValue":a[0]||(a[0]=o=>t.settings[t.index]=o)},{default:c(()=>[(f(!0),y(P,null,j(t.tabs.schema,(o,i)=>(f(),U(s,{label:o.label,name:o.value,key:i},{default:c(()=>[d("div",null,[r(Hd,{fields:o.schema,settings:t.settings},null,8,["fields","settings"])])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])}}},q3={class:"setting-label"},X3=["innerHTML"],J3={key:0},Z3={__name:"RadioSelectDependants",props:{fields:Object,settings:Object,index:[String,Number]},setup(t){return(e,a)=>{const s=C("el-icon"),n=C("el-tooltip"),o=C("el-radio"),i=C("el-radio-group");return f(),y(P,null,[d("p",q3,[O(v(t.fields[t.index].label)+" ",1),t.fields[t.index].tooltip?(f(),U(n,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:c(()=>[d("p",{innerHTML:t.fields[t.index].tooltip},null,8,X3)]),default:c(()=>[r(s,null,{default:c(()=>[r(g(Sa))]),_:1})]),_:1})):S("",!0)]),r(i,{modelValue:t.settings[t.index],"onUpdate:modelValue":a[0]||(a[0]=l=>t.settings[t.index]=l)},{default:c(()=>[(f(!0),y(P,null,j(t.fields[t.index].options,(l,A)=>(f(),U(o,{label:l,value:A,key:A},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a[1]||(a[1]=d("br",null,null,-1)),a[2]||(a[2]=d("br",null,null,-1)),(f(!0),y(P,null,j(t.fields[t.index].dependants,(l,A)=>(f(),y("div",{key:A},[t.settings[t.index]===l.value?(f(),y("div",J3,[r(Hd,{fields:l.schema,settings:t.settings,index:t.index},null,8,["fields","settings","index"])])):S("",!0)]))),128))],64)}}},eQ={name:"PayPalWebhookSetup",data(){return{isLoading:!1,setupStatus:null,checkingWebhook:!1}},props:["mode","webhook_info","testConnect","liveConnect"],watch:{testConnect(){this.checkWebhookStatus()},liveConnect(){this.checkWebhookStatus()}},computed:{isConnected(){return this.mode==="test"&&this.testConnect||this.mode==="live"&&this.liveConnect}},components:{Notify:q},methods:{checkWebhookStatus(){this.isConnected&&(this.checkingWebhook=!0,this.$get("settings/payment-methods/paypal/webhook/check",{mode:this.mode}).then(t=>{this.checkingWebhook=!1}).catch(t=>{this.checkingWebhook=!1}))},setupWebhook(){this.isLoading=!0,this.$post("settings/payment-methods/paypal/webhook/setup",{mode:this.mode}).then(t=>{this.isLoading=!1,this.setupStatus="success",q.success(t.message),this.$emit("reload_settings",!0)}).catch(t=>{this.isLoading=!1,this.setupStatus="error",q.error(t.message),setTimeout(()=>{window.location.reload()},2e3)})}},mounted(){this.checkWebhookStatus()}},tQ={key:0,class:"fluent_cart_paypal_webhook_setup"},aQ={class:"fluent_cart_paypal_webhook_setup_title"},sQ=["innerHTML"],nQ={key:1};function oQ(t,e,a,s,n,o){const i=C("el-button"),l=Ut("loading");return o.isConnected?(f(),y("div",tQ,[d("p",aQ,"PayPal "+v(a.mode)+" webhook setup",1),a.webhook_info?ut((f(),y("div",{key:0,"element-loading-text":"Checking webhook...",innerHTML:a.webhook_info},null,8,sQ)),[[l,n.checkingWebhook]]):(f(),y("div",nQ,[e[1]||(e[1]=d("p",{class:"fluent_cart_paypal_webhook_setup_description"}," Configure PayPal webhooks to receive real-time payment notifications ",-1)),e[2]||(e[2]=d("br",null,null,-1)),r(i,{type:t.text,loading:n.isLoading,onClick:o.setupWebhook,disabled:n.isLoading,class:"setup-button",size:"small"},{default:c(()=>e[0]||(e[0]=[d("span",null,"Setup Webhook",-1)])),_:1,__:[0]},8,["type","loading","onClick","disabled"])]))])):S("",!0)}const iQ=ve(eQ,[["render",oQ],["__scopeId","data-v-b34bc5cb"]]),rQ={key:0,class:"fc-col"},lQ=["innerHTML"],AQ={key:1,class:"fc-col"},cQ={class:"font-bold p-6 mt-6 text-center bg-gray-200"},dQ={key:2,class:"fc-col"},uQ={class:"text-red-700"},fQ={key:1},hQ={key:0},pQ={class:"flex items-center justify-between"},mQ={key:1,class:"flex items-center justify-between"},gQ={class:"text-red-700"},_Q={key:3,class:"fc-col"},vQ={class:"setting-label"},bQ=["innerHTML"],yQ={key:4,class:"fc-col"},wQ=["innerHTML"],CQ={key:5,class:"fc-col"},BQ={class:"setting-label"},kQ=["innerHTML"],xQ={key:6,class:"fc-col"},FQ={class:"setting-label"},SQ=["innerHTML"],EQ={key:7,class:"fc-col"},UQ={key:0},QQ=["innerHTML"],DQ={key:8,class:"fc-col"},MQ={class:"setting-label"},IQ={key:9,class:"fc-col"},TQ={class:"setting-label"},$Q={key:10,class:"fc-col"},OQ={class:"setting-label"},LQ=["innerHTML"],VQ={key:11,class:"fc-col"},RQ={class:"setting-label"},HQ=["innerHTML"],PQ={key:12,class:"fc-col"},NQ={class:"setting-label"},KQ={key:13,class:"fc-col"},zQ=["innerHTML"],GQ={key:14,class:"fc-col"},jQ={key:0},YQ={key:0},WQ={class:"setting-label"},qQ={class:"flex flex-wrap gap-2"},XQ={class:"mt-4 text-gray-700 dark:text-gray-300"},JQ=["href"],ZQ={key:1},eD={class:"setting-label"},tD={class:"flex flex-wrap gap-2"},aD={class:"mt-4 text-gray-700 dark:text-gray-300"},sD=["href"],nD={key:15,class:"fc-col"},oD={key:16,class:"fc-col"},Hd={__name:"Renderer",props:{fields:Object,settings:Object,route_name:String,methodName:String,methodTitle:String,methodLabel:String},emits:["onSettingsChange"],setup(t,{emit:e}){var b,w;const a=We().ctx,s=T({}),n=T(null),o=T(null),i=T(!1),l=T({}),A=(w=(b=window.fluentCartAdminApp)==null?void 0:b.shop)==null?void 0:w.order_mode,u=t,h=e,m=J(()=>{var k,F,x;return((k=u.settings)==null?void 0:k.payment_mode)==="test"?(F=u.settings)==null?void 0:F.define_test_keys:(x=u.settings)==null?void 0:x.define_live_keys});J(()=>{var k,F;return(k=u.fields)!=null&&k.payment_mode&&((F=u.settings)==null?void 0:F.payment_mode)!==A&&h("onSettingsChange",{...u.settings,payment_mode:A}),!0});const _=J(()=>{var k;return((k=u.settings)==null?void 0:k.payment_mode)==="test"?"test":"live"}),B=()=>{i.value=!0,a.$get("settings/payment-methods/connect/info",{method:u.route_name}).then(k=>{k&&(i.value=!1,s.value=k.connect_config,h("onSettingsChange",k.settings),n.value=k.live_account,o.value=k.test_account,n.value.error&&(l.value=n.value),o.value.error&&(l.value=o.value),i.value=!1)}).catch(k=>{i.value=!1,l.value=k}).finally(()=>{i.value=!1})};return he(()=>{B()}),(k,F)=>{const x=C("el-skeleton-item"),E=C("el-skeleton"),M=C("el-icon"),D=C("el-tooltip"),R=C("el-switch"),$=C("el-checkbox"),Q=C("el-option"),I=C("el-select"),L=C("el-radio"),V=C("el-radio-group"),N=C("el-input"),Y=C("el-checkbox-group");return f(),y("div",{class:le([_.value==="test"?"fct_test_mode":"fct_live_mode","grid grid-cols-1 gap-4"])},[(f(!0),y(P,null,j(t.fields,(K,X)=>{var re,ce,Z,H,z,W;return f(),y("div",{class:"fc-setting-row fc-row",key:X},[K.type==="notice"?(f(),y("div",rQ,[d("p",{innerHTML:K.value},null,8,lQ)])):S("",!0),K.type==="upcoming"?(f(),y("div",AQ,[d("h1",cQ,v(g(p)("Upcoming")),1)])):S("",!0),K.type==="provider"?(f(),y("div",dQ,[K.value=="connect"?(f(),y(P,{key:0},[t.settings.payment_mode=="test"?(f(),y(P,{key:0},[r(E,{loading:i.value,animated:""},{template:c(()=>[r(x,{variant:"h3",class:"w-[150px] mb-3"}),r(x,{variant:"p",class:"h-[50px]"})]),_:1},8,["loading"]),i.value?S("",!0):(f(),U(Ch,{key:0,onReload_settings:F[0]||(F[0]=ie=>B()),method:t.route_name,methodName:t.methodName,methodLabel:t.methodLabel,connect_config:s.value,mode:"test",connect:o.value},null,8,["method","methodName","methodLabel","connect_config","connect"]))],64)):t.settings.payment_mode=="live"?(f(),y(P,{key:1},[i.value?S("",!0):(f(),U(Ch,{key:0,method:t.route_name,methodName:t.methodName,onReload_settings:F[1]||(F[1]=ie=>B()),connect_config:s.value,mode:"live",methodLabel:t.methodLabel,connect:n.value},null,8,["method","methodName","connect_config","methodLabel","connect"]))],64)):S("",!0),F[3]||(F[3]=d("br",null,null,-1)),d("p",uQ,v((re=l.value)==null?void 0:re.error),1)],64)):(f(),y("div",fQ,[m.value?(f(),y("div",hQ,[d("div",null,[r(dg,{title:g(p)("Your API setup is Up & Running 🎉")},{default:c(()=>[d("div",pQ,[d("div",null,[d("b",null,v(g(p)("Payment API settings is enabled by defined API keys.")),1)])])]),_:1},8,["title"])])])):(f(),y("div",mQ,[d("div",null,[d("b",null,v(g(p)("Payment API settings is not enabled by API keys / Connect")),1),F[4]||(F[4]=d("br",null,null,-1)),d("p",null,v(g(p)("You can Set Up API keys defined as constant, Or use connect.")),1),d("p",gQ,v((ce=l.value)==null?void 0:ce.error),1)])]))]))])):S("",!0),K.type==="enable"?(f(),y("div",_Q,[d("p",vQ,[O(v(K.label)+" ",1),K.tooltip?(f(),U(D,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:c(()=>[d("p",{innerHTML:K.tooltip},null,8,bQ)]),default:c(()=>[r(M,null,{default:c(()=>[r(g(Sa))]),_:1})]),_:2},1024)):S("",!0)]),r(R,{modelValue:t.settings[X],"onUpdate:modelValue":ie=>t.settings[X]=ie,"active-value":"yes","inactive-value":"no","active-text":g(p)("Active"),"inactive-text":g(p)("Inactive")},null,8,["modelValue","onUpdate:modelValue","active-text","inactive-text"])])):S("",!0),K.type==="checkbox"?(f(),y("div",yQ,[r($,{"true-value":"yes","false-value":"no",modelValue:t.settings[X],"onUpdate:modelValue":ie=>t.settings[X]=ie},{default:c(()=>[O(v(K.label)+" ",1),K.tooltip?(f(),U(D,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:c(()=>[d("p",{innerHTML:K.tooltip},null,8,wQ)]),default:c(()=>[r(M,null,{default:c(()=>[r(g(Sa))]),_:1})]),_:2},1024)):S("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])])):S("",!0),K.type==="select"?(f(),y("div",CQ,[d("p",BQ,[O(v(K.label)+" ",1),K.tooltip?(f(),U(D,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:c(()=>[d("p",{innerHTML:K.tooltip},null,8,kQ)]),default:c(()=>[r(M,null,{default:c(()=>[r(g(Sa))]),_:1})]),_:2},1024)):S("",!0)]),r(I,{placeholder:K.placeholder,modelValue:t.settings[X],"onUpdate:modelValue":ie=>t.settings[X]=ie,filterable:K.filterable!==!1},{default:c(()=>[(f(!0),y(P,null,j(K.options,(ie,te)=>(f(),U(Q,{label:ie.label,value:ie.value,key:te},null,8,["label","value"]))),128))]),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","filterable"])])):S("",!0),K.type==="radio"?(f(),y("div",xQ,[d("p",FQ,[O(v(K.label)+" ",1),K.tooltip?(f(),U(D,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:c(()=>[d("p",{innerHTML:K.tooltip},null,8,SQ)]),default:c(()=>[r(M,null,{default:c(()=>[r(g(Sa))]),_:1})]),_:2},1024)):S("",!0)]),r(V,{modelValue:t.settings[X],"onUpdate:modelValue":ie=>t.settings[X]=ie},{default:c(()=>[(f(!0),y(P,null,j(K.options,(ie,te)=>(f(),U(L,{label:ie,value:te,key:te},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):S("",!0),K.type==="webhook_info"&&((Z=t.settings)==null?void 0:Z.payment_mode)===K.mode?(f(),y("div",EQ,[t.route_name==="paypal"&&!m.value?(f(),y("div",UQ,[r(iQ,{testConnect:o.value,liveConnect:n.value,webhook_info:K.info,onReload_settings:F[2]||(F[2]=ie=>B()),mode:K==null?void 0:K.mode},null,8,["testConnect","liveConnect","webhook_info","mode"])])):K.info?(f(),y("div",{key:1,innerHTML:K.info},null,8,QQ)):S("",!0)])):S("",!0),K.type==="input"||K.type==="password"?(f(),y("div",DQ,[d("p",MQ,v(K.label),1),r(N,{type:K.type,placeholder:K.placeholder,modelValue:t.settings[X],"onUpdate:modelValue":ie=>t.settings[X]=ie},null,8,["type","placeholder","modelValue","onUpdate:modelValue"])])):S("",!0),K.type==="email"?(f(),y("div",IQ,[d("p",TQ,v(K.label),1),r(N,{type:"email",placeholder:K.placeholder,modelValue:t.settings[X],"onUpdate:modelValue":ie=>t.settings[X]=ie},null,8,["placeholder","modelValue","onUpdate:modelValue"])])):S("",!0),K.type==="text"?(f(),y("div",$Q,[d("p",OQ,[O(v(K.label)+" ",1),K.tooltip?(f(),U(D,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:c(()=>[d("p",{innerHTML:K.tooltip},null,8,LQ)]),default:c(()=>[r(M,null,{default:c(()=>[r(g(Sa))]),_:1})]),_:2},1024)):S("",!0)]),r(N,{type:"text",placeholder:K.placeholder,modelValue:t.settings[X],"onUpdate:modelValue":ie=>t.settings[X]=ie,disabled:K.disabled},null,8,["placeholder","modelValue","onUpdate:modelValue","disabled"])])):S("",!0),K.type==="color"?(f(),y("div",VQ,[d("p",RQ,[O(v(K.label)+" ",1),K.tooltip?(f(),U(D,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:c(()=>[d("p",{innerHTML:K.tooltip},null,8,HQ)]),default:c(()=>[r(M,null,{default:c(()=>[r(g(Sa))]),_:1})]),_:2},1024)):S("",!0)]),r(Od,{modelValue:t.settings[X],"onUpdate:modelValue":ie=>t.settings[X]=ie,field:K},null,8,["modelValue","onUpdate:modelValue","field"])])):S("",!0),K.type==="checkbox_group"?(f(),y("div",PQ,[d("p",NQ,[O(v(K.title)+" ",1),K.tooltip?(f(),U(D,{key:0,placement:"top-start","popper-class":"fc-tooltip"},{content:c(()=>[d("p",null,v(K.tooltip),1)]),default:c(()=>[r(M,null,{default:c(()=>[r(g(Sa))]),_:1})]),_:2},1024)):S("",!0)]),d("p",null,v(K.desc),1),r(Y,{modelValue:t.settings[X],"onUpdate:modelValue":ie=>t.settings[X]=ie},{default:c(()=>[(f(!0),y(P,null,j(K.options,(ie,te)=>(f(),U($,{label:te,key:te},{default:c(()=>[O(v(ie),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):S("",!0),K.type==="html_attr"?(f(),y("div",KQ,[d("div",{innerHTML:K.value},null,8,zQ)])):S("",!0),K.type==="active_methods"?(f(),y("div",GQ,[(H=K.value)!=null&&H.activated_methods?(f(),y("div",jQ,[t.settings.payment_mode==="live"&&X==="live_active_methods"?(f(),y("div",YQ,[d("p",WQ,v(K.label),1),d("ul",qQ,[(f(!0),y(P,null,j(K.value.activated_methods,(ie,te)=>(f(),y("li",{class:"bg-gray-50 dark:bg-gray-800 p-2 rounded text-sm text-gray-600 dark:text-gray-200 border border-gray-100 dark:border-gray-700",key:te},v(ie),1))),128))]),d("p",XQ,[O(v(g(p)("You can configure methods ")),1),d("a",{href:(z=K.value)==null?void 0:z.configure_url,target:"_blank",class:"underline text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"},v(g(p)("here")),9,JQ)])])):S("",!0),t.settings.payment_mode==="test"&&X==="test_active_methods"?(f(),y("div",ZQ,[d("p",eD,v(K.label),1),d("ul",tD,[(f(!0),y(P,null,j(K.value.activated_methods,(ie,te)=>(f(),y("li",{class:"bg-gray-50 dark:bg-gray-800 p-2 rounded text-sm text-gray-600 dark:text-gray-200 border border-gray-100 dark:border-gray-700",key:te},v(ie),1))),128))]),d("p",aD,[O(v(g(p)("You can configure methods ")),1),d("a",{href:(W=K.value)==null?void 0:W.configure_url,target:"_blank",class:"underline text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"},v(g(p)("here")),9,sD)])])):S("",!0)])):S("",!0)])):S("",!0),K.type==="tabs"?(f(),y("div",nD,[r(W3,{fields:t.fields,settings:t.settings,index:X,tabs:t.fields[X]},null,8,["fields","settings","index","tabs"])])):S("",!0),K.type==="radio-select-dependants"?(f(),y("div",oD,[r(Z3,{fields:t.fields,settings:t.settings,index:X},null,8,["fields","settings","index"])])):S("",!0)])}),128))],2)}}},iD={class:"setting-wrap"},rD={class:"mb-5 flex items-center justify-between"},lD={class:"setting-switcher"},AD={class:"setting-save-action"},cD={name:"GlobalPaymentComponents",data(){return{fields:{},settings:{},saving:!1,fetching:!1,is_key_defined:!1,labelPosition:"top",webhook_url:"",fetchRoute:"",pages:[],route_name:"",ipn_url:"Blank",verifiedMessage:!1,verifiedStatus:!1,verifying:!1,methodName:"",methodTitle:"",methodLabel:""}},watch:{$route(t,e){this.getRoute(),this.getSettings(),this.getPageName()}},methods:{getLogo(t){const e=t.replace(/_/g,"-");return eo.getUrl("images/payment-methods/"+e+"-icon.svg")},updateSettings(t){this.settings=t},getSettings(){this.fetching=!0,this.$get("settings/payment-methods",{method:this.route_name}).then(t=>{this.fetching=!1,this.fields=t.fields,this.settings=t.settings,this.registerCopyAction()})},saveSettings(){this.saving=!0,this.$post("settings/payment-methods",{settings:this.settings,method:this.route_name}).then(t=>{this.saving=!1,ad("Settings updated!")}).catch(t=>{var e;this.saving=!1,tv(((e=t==null?void 0:t.data)==null?void 0:e.message)||"Something went wrong!")})},verifyKeys(t,e){this.verifying=!0},getRoute(){var t,e,a,s,n,o,i,l,A;this.route_name=this.$route.name,this.methodName=(t=this.$route)==null?void 0:t.name,(a=(e=this.$route)==null?void 0:e.meta)!=null&&a.admin_title?this.methodTitle=(n=(s=this.$route)==null?void 0:s.meta)==null?void 0:n.admin_title:this.methodTitle=(i=(o=this.$route)==null?void 0:o.meta)==null?void 0:i.title,this.methodLabel=(A=(l=this.$route)==null?void 0:l.meta)==null?void 0:A.label,this.fetchRoute=`settings/payments/${this.$route.name}`},getPageName(){let t="";return this.$route.meta.title?t=this.$route.meta.title+" Settings":t=this.$route.name.charAt(0).toUpperCase()+this.$route.name.slice(1).toLowerCase()+" Settings",t}},mounted(){this.getRoute(),this.getSettings(),window.outerWidth<500&&(this.labelPosition="top")}},dD=Object.assign(cD,{setup(t){const e=We().ctx;return xn().onSave(()=>{e.saveSettings()}),(s,n)=>{const o=C("el-breadcrumb-item"),i=C("el-breadcrumb"),l=C("el-switch"),A=C("el-skeleton"),u=C("el-button");return f(),y("div",iD,[d("div",rD,[r(i,{class:"mb-0","separator-icon":g(Ca)},{default:c(()=>[r(o,{to:{path:"/settings/payments"}},{default:c(()=>[O(v(s.$t("Payment Settings")),1)]),_:1}),r(o,null,{default:c(()=>[d("span",null,v(s.methodTitle),1)]),_:1})]),_:1},8,["separator-icon"]),d("div",lD,[r(l,{modelValue:s.settings.is_active,"onUpdate:modelValue":n[0]||(n[0]=h=>s.settings.is_active=h),"active-value":"yes","inactive-value":"no","inactive-text":s.$t("Payment Activation")},null,8,["modelValue","inactive-text"])])]),r(oe,null,{default:c(()=>[r(de,{title:s.methodTitle,border_bottom:""},null,8,["title"]),r(ae,{class:"pt-0"},{default:c(()=>[r(A,{loading:s.fetching,animated:"",rows:6,class:"pt-5"},null,8,["loading"]),s.fetching?S("",!0):(f(),U(Hd,{key:0,onOnSettingsChange:s.updateSettings,route_name:s.route_name,methodName:s.methodName,methodTitle:s.methodTitle,methodLabel:s.methodLabel,fields:s.fields,settings:s.settings},null,8,["onOnSettingsChange","route_name","methodName","methodTitle","methodLabel","fields","settings"]))]),_:1})]),_:1}),d("div",AD,[r(u,{onClick:n[1]||(n[1]=h=>s.saveSettings()),type:"primary",loading:s.saving},{default:c(()=>[O(v(s.saving?s.$t("Saving"):s.$t("Save Settings")),1)]),_:1},8,["loading"])])])}}}),uD={class:"fc-integration-setting-content"},fD={class:"fc-integration-setting-head"},hD={class:"flex items-center gap-3 mb-2"},pD=["src"],mD={class:"title"},gD=["innerHTML"],_D={key:0,class:"integration_success_state"},vD=["innerHTML"],bD={key:1,class:"fc-integration-setting-body"},yD={class:"fc-integration-setting-body-inner"},wD=["innerHTML"],CD=["innerHTML"],BD=["target","href"],kD={key:0},xD={key:0,class:"fc-integration-setting-body-footer"},FD={key:2},SD={name:"generalIntegration",props:["settings_key"],components:{InfoFilled:Sa,Setting:sv},data(){return{integration:{},loading:!1,saving:!1,settings:{},error_message:""}},watch:{settings_key(){this.integration={},this.settings={},this.getIntegrationSettings()}},methods:{save(){this.saving=!0,this.$post("integration/global-settings",{settings_key:this.settings_key,integration:this.integration}).then(t=>{if(this.saving=!1,this.handleSuccess(t.data.message),t.data.redirect_url){window.location.href=t.data.redirect_url;return}this.integration.status=t.data.status}).catch(t=>{this.integration.status=!1,t&&t.data.message?this.handleError(t.data.message):t&&t.responseJSON.data.message&&this.handleerror(t.responseJSON.data.message)})},getIntegrationSettings(){this.loading=!0,this.$get("integration/global-settings",{settings_key:this.settings_key}).then(t=>{this.loading=!1,this.integration=t.data.integration,this.settings=t.data.settings}).catch(t=>{this.error_message=t.responseJSON.data.message})},disconnect(t){this.integration=t,this.save()},authenticate(t,e){this.loading=!0,this.$post("integration/global-settings"+t,{settings_key:this.settings_key,integration:this.integration}).then(a=>{this.loading=!1,a.data.url?window.open(a.data.url,"_blank"):this.handleSuccess(a.data.message)}).catch(a=>{this.handleError(a.responseJSON.data.message)})}},mounted(){this.getIntegrationSettings()}},ED=Object.assign(SD,{setup(t){const e=We().ctx;return xn().onSave(()=>{e.integration.status||e.save()}),(s,n)=>{const o=C("el-button"),i=C("el-icon"),l=C("el-tooltip"),A=C("el-option"),u=C("el-select"),h=C("el-input"),m=C("el-form-item"),_=C("el-form"),B=Ut("loading");return f(),y("div",uD,[d("div",fD,[d("div",hD,[s.settings.logo?(f(),y("img",{key:0,class:"h-8",src:s.settings.logo,alt:""},null,8,pD)):S("",!0),d("h3",mD,v(s.settings.menu_title),1)]),d("p",{class:"desc",innerHTML:s.settings.menu_description},null,8,gD)]),s.settings.hide_on_valid&&s.integration.status?(f(),y("div",_D,[d("p",{innerHTML:s.settings.discard_settings.section_description},null,8,vD),d("div",null,[r(o,{onClick:n[0]||(n[0]=b=>s.disconnect(s.settings.discard_settings.data)),type:"danger",plain:""},{default:c(()=>[O(v(s.settings.discard_settings.disconnect_button_text),1)]),_:1}),s.settings.discard_settings.show_verify?(f(),U(o,{key:0,onClick:n[1]||(n[1]=b=>s.save()),type:"primary"},{default:c(()=>[O(v(s.settings.discard_settings.verify_button_text),1)]),_:1})):S("",!0)])])):ut((f(),y("div",bD,[d("div",yD,[s.settings.config_instruction&&!s.integration.status?(f(),y("div",{key:0,class:"integration_instraction",innerHTML:s.settings.config_instruction},null,8,wD)):S("",!0),r(_,{"label-width":"205px","label-position":"top"},{default:c(()=>[(f(!0),y(P,null,j(s.settings.fields,(b,w)=>(f(),U(m,{key:w},{label:c(()=>[O(v(b.label)+" ",1),b.label_tips?(f(),U(l,{key:0,"popper-class":"fc-tooltip",placement:"top-start"},{content:c(()=>[d("div",{innerHTML:b.label_tips},null,8,CD)]),default:c(()=>[r(i,null,{default:c(()=>[r(g(Sa))]),_:1})]),_:2},1024)):S("",!0)]),default:c(()=>[b.type=="authenticate-button"?(f(),U(o,{key:0,onClick:k=>s.authenticate(b.end_point,b.params)},{default:c(()=>[O(v(b.button_text),1)]),_:2},1032,["onClick"])):b.type=="select"?(f(),U(u,{key:1,modelValue:s.integration[w],"onUpdate:modelValue":k=>s.integration[w]=k},{default:c(()=>[(f(!0),y(P,null,j(b.options,(k,F)=>(f(),U(A,{key:F,label:k,value:F},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):b.type=="link"?(f(),y(P,{key:2},[d("a",{target:b.target,class:le(b.btn_class),href:b.link},v(b.link_text),11,BD),d("p",null,v(b.tips),1)],64)):(f(),y(P,{key:3},[r(h,{placeholder:b.placeholder,type:b.type,modelValue:s.integration[w],"onUpdate:modelValue":k=>s.integration[w]=k},null,8,["placeholder","type","modelValue","onUpdate:modelValue"]),b.tips?(f(),y("p",kD,v(b.tips),1)):S("",!0)],64))]),_:2},1024))),128))]),_:1})]),s.loading?S("",!0):(f(),y("div",xD,[r(o,{type:"primary",onClick:s.save},{default:c(()=>[O(v(s.settings.save_button_text),1)]),_:1},8,["onClick"])]))])),[[B,s.loading]]),s.error_message?(f(),y("p",FD,v(s.error_message),1)):S("",!0)])}}}),UD={class:"fc-integration-setting-container fc-layout-width"},QD={class:"single-page-header"},DD={class:"single-page-body"},MD={class:"fc-integration-setting-wrap"},ID={name:"IntegrationEditor"},TD=Object.assign(ID,{setup(t){return(e,a)=>{const s=C("el-breadcrumb-item"),n=C("el-breadcrumb");return f(),y("div",UD,[d("div",QD,[r(n,{"separator-icon":g(Ca)},{default:c(()=>[r(s,{to:{name:"integrations"}},{default:c(()=>[O(v(e.$t("Integrations")),1)]),_:1}),r(s,null,{default:c(()=>[O(v(g(lt).capitalize(e.$route.params.integration_name)),1)]),_:1})]),_:1},8,["separator-icon"])]),d("div",DD,[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[d("div",MD,[r(ED,{settings_key:e.$route.params.integration_name},null,8,["settings_key"])])]),_:1})]),_:1})])])}}}),$D={class:"dialog-footer"},OD={__name:"CreatePageButton",props:{title:{default:p("Create Page")},content:{required:!0,type:String}},emits:["onPageCreated"],setup(t,{emit:e}){const a=t,s=e,n=T(!1),o=T(a.title),i=()=>{ne.post("onboarding/create-page",{page_name:o.value,content:a.content}).then(l=>{s("onPageCreated",{value:l.page_id,label:`${o.value}( ${l.page_id})`,page_link:l.link}),o.value="",n.value=!1,q.success(p("The page created successfully."))}).catch(l=>{if(l&&l.hasOwnProperty("page_name")){const A=Object.entries(l.page_name).length;let u="",h=0;for(const m in l.page_name)u+=l.page_name[m],h!==A&&(u+=`
`),h++;q.error(u)}else q.error(p("Sorry, Unable To Create Page!!"))})};return(l,A)=>{const u=C("el-input"),h=C("el-form-item"),m=C("el-form"),_=C("el-button"),B=C("el-dialog");return f(),y(P,null,[r(we,{onClick:A[0]||(A[0]=Ke(b=>n.value=!0,["prevent"])),tag:"button",bg:"info",outline:""},{default:c(()=>[r(G,{name:"Plus"})]),_:1}),r(B,{modelValue:n.value,"onUpdate:modelValue":A[3]||(A[3]=b=>n.value=b),title:g(p)("Create %s Page",t.title),width:"35%",center:"","append-to-body":!0},{footer:c(()=>[d("div",$D,[r(_,{onClick:A[2]||(A[2]=b=>n.value=!1),type:"info",soft:""},{default:c(()=>[O(v(g(p)("Cancel")),1)]),_:1}),r(_,{type:"primary",onClick:i},{default:c(()=>[O(v(g(p)("Create Page")),1)]),_:1})])]),default:c(()=>[r(m,{"require-asterisk-position":"right","label-position":"top",onSubmit:Ke(i,["prevent"])},{default:c(()=>[r(h,{label:g(p)("Page Name"),required:""},{default:c(()=>[r(u,{modelValue:o.value,"onUpdate:modelValue":A[1]||(A[1]=b=>o.value=b),placeholder:g(p)("Page Name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"])],64)}}},LD={class:"fc-form-group"},VD={class:"fc-form-group-inner"},RD={class:"input-prepend"},HD={class:"input-append"},PD={__name:"PageSelector",props:wa({title:{type:String,required:!0},pages:{type:Array,required:!0},modelId:{type:String,required:!0}},{modelValue:{},modelModifiers:{}}),emits:wa(["onPageCreated"],["update:modelValue"]),setup(t,{emit:e}){const a=Va(t,"modelValue",{get:i=>i?typeof i=="string"?Number(i):i:""}),s=e,n=T(!1),o=i=>{n.value=i};return(i,l)=>{const A=C("el-option"),u=C("el-select");return f(),y("div",LD,[d("label",null,v(t.title),1),d("div",VD,[d("div",{class:le(["fc-input-group w-full",{focused:n.value}])},[d("div",RD,[r(u,{filterable:"",modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=h=>a.value=h),onFocus:l[1]||(l[1]=h=>o(!0)),onBlur:l[2]||(l[2]=h=>o(!1)),placeholder:g(p)("Select"),clearable:""},{default:c(()=>[(f(!0),y(P,null,j(t.pages,(h,m)=>(f(),U(A,{key:m,label:h.label,value:Number(h.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),d("div",HD,[r(OD,{title:t.title,onOnPageCreated:l[3]||(l[3]=h=>s("onPageCreated",h,t.modelId)),content:t.modelId},null,8,["title","content"])])],2)])])}}},ND={class:"fc-onboarding-wrap"},KD={key:0,class:"fc-onboarding-card"},zD={class:"fc-onboarding-card-body"},GD={class:"fc-onboarding-content-box"},jD={class:"fc-onboarding-card-head"},YD={class:"fc-onboarding-card-head-top"},WD=["src","alt"],qD={class:"fc-onboarding-steps-count"},XD={class:"fc-onboarding-card-title"},JD={class:"fc-onboarding-card-text"},ZD={class:"fc-onboarding-content-box-inner"},eM={class:"fc-onboarding-form-body"},tM={class:"fc-form-group"},aM={for:"store-country"},sM={class:"fc-form-group"},nM={class:"fc-form-group"},oM={class:"fc-form-group"},iM={class:"fc-onboarding-form-body"},rM={class:"fc-onboarding-form-body-header"},lM={class:"left"},AM={class:"fc-onboarding-form-body-header__title"},cM={class:"fc-onboarding-form-body-header__desc"},dM={key:0,class:"fc-onboarding-form-body-header__action"},uM={class:"fc-form-group"},fM={class:"fc-onboarding-form-body"},hM={class:"fc-form-group"},pM={class:"marker"},mM={class:"label"},gM={class:"marker"},_M={key:0,class:"fc-onboarding-bottom"},vM={class:"fc-onboarding-bottom-left"},bM={class:"fc-onboarding-bottom-right"},yM={key:0,class:"cmd"},wM=4,CM={__name:"Onboarding",setup(t){const e=We().ctx,a=T(1),s=T([]),n=T({});T(!1);const o=T(!1),i=T([]),l=T("start-from-scratch"),A=T(!1);T("auto-generate-pages"),T([1]);const u=T("Welcome aboard! Let’s create your online store."),h=eo.getUrl("images/logo/logo-full-dark.svg"),m=eo.getUrl("images/logo/logo-full.svg"),_=T(window.fluentCartAdminApp.asset_url+"/images/logo/logo-full-dark.svg"),B=T(!1),b=T("Select Pages"),w=T("Select the pages you'd like from your website"),k=T(!1),F=xn();We().ctx;const x=()=>{a.value!==1&&(a.value--,M())},E=()=>{a.value!==wM&&(a.value++,M())};F.onSave(()=>{a.value===3&&Y()});const M=()=>{a.value===2?u.value=p("Setup Your Pages"):a.value===3?u.value=p("Setup Your Products"):a.value===4?u.value=p("Setup Your Payments"):u.value=p("Welcome aboard! Let’s create your online store.")},D=()=>{o.value=!0,A.value=!0,e.$get("onboarding/",{}).then(H=>{s.value=H.pages,n.value=H.currencies,I.value=H.default_settings,o.value=!1,A.value=!1})},R=()=>{o.value=!0,A.value=!0,ne.post("onboarding/create-pages",{}).then(H=>{s.value=H.pages,n.value=H.currencies,Object.keys($).forEach(function(z){I.value[z]=H.default_settings[z]+""}),o.value=!1,A.value=!1,k.value=!0,b.value="Existing Pages",w.value="Select the pages you'd like from the list provided."})},$={checkout_page_id:"",cart_page_id:"",receipt_page_id:"",shop_page_id:"",customer_profile_page_id:""},Q=H=>{switch(H){case"checkout_page_id":return p("Checkout");case"cart_page_id":return p("Cart");case"receipt_page_id":return p("Receipt");case"shop_page_id":return p("Shop");case"customer_profile_page_id":return p("Customer Profile")}},I=T({store_name:"",store_logo:"",store_country:"",currency:"",category:"",...$}),L=T([]),V=(H,z)=>{s.value.push(H),I.value[z]=H.value},N=(H=0)=>{if(l.value===null||l.value==="start-from-scratch")return;const z=i.value[l.value];H>z.count-1||ne.post("products/create-dummy",{category:z.category,index:H}).then(W=>{N(H+1)}).catch(W=>{W.code===400?console.log(W):N(H+1),q.error(W.message)})},Y=()=>{var z;if(B.value=!0,N(),A.value===!0)return;A.value=!0;let H=JSON.parse(JSON.stringify(I.value));Array.isArray(H.store_logo)&&H.store_logo.length>0&&(H.store_logo=(z=H.store_logo)==null?void 0:z[0]),ne.post("onboarding/",H).then(W=>{A.value=!1,q.success(W.message),setTimeout(()=>{B.value=!1,K()},300)}).catch(W=>{A.value=!1,q.error(W)})},K=()=>{if(window.location.href=window.fluentCartAdminApp.dashboard_url,l.value!==null&&l.value!=="start-from-scratch"){const H={};H.import_product=l.value;const z=YA.appendToVueUrl(null,H);window.location.href=YA.appendQueryParams(z)}},X=()=>{K()},re=H=>{fe.isDark()?_.value=m:_.value=h},ce=()=>{L.value.length>0||ne.get("address-info/countries").then(H=>{L.value=H.data}).catch(H=>{console.log(H,"errors")}).finally(()=>{})},Z=H=>{H!==""&&ne.post("settings/store",{store_country:H,store_name:I.value.store_name,settings_name:"store_setup"}).then(z=>{}).catch(z=>{console.log(z,"errors")}).finally(()=>{})};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",re),i.value=window.fluentCartAdminApp.dummy_product_info,jQuery(".fca_admin_menu").hide(),jQuery(".fca_admin_menu_row").css({"padding-top":"16px","padding-bottom":"16px"}),jQuery("body").addClass("fc-onboarding-body"),D(),_.value=fe.isDark()?m:h,ce()}),He(()=>{window.removeEventListener("onWebmakerrProThemeChange",re),jQuery(".fca_admin_menu").show(),jQuery(".fca_admin_menu_row").css({"padding-top":"0","padding-bottom":"0"}),jQuery("body").removeClass("fc-onboarding-body")}),(H,z)=>{const W=C("el-progress"),ie=C("el-option"),te=C("el-select"),se=C("el-input"),pe=C("el-button"),Se=C("el-icon"),$e=C("el-radio-button"),Ue=C("el-radio-group"),Te=Ut("loading");return f(),y(P,null,[d("div",ND,[a.value<4?(f(),y("div",KD,[ut((f(),y("div",zD,[d("div",GD,[d("div",jD,[d("div",YD,[d("img",{src:_.value,alt:g(p)("Fluent Cart")},null,8,WD),d("div",qD,v(g(p)("Step %s of 3",a.value)),1),r(W,{percentage:a.value/3*100,"stroke-width":8,"show-text":!1,class:"fc-onboarding-progress"},null,8,["percentage"])]),d("h2",XD,v(u.value),1),d("p",JD,v(g(p)("You've successfully Installed The Plugin.")),1)]),d("div",ZD,[d("div",{class:le(`fc-onboarding-form-wrap ${a.value===1?"active":""}`)},[d("div",eM,[d("div",tM,[d("label",aM,v(g(p)("Store Country")),1),r(te,{modelValue:I.value.store_country,"onUpdate:modelValue":z[0]||(z[0]=Qe=>I.value.store_country=Qe),placeholder:g(p)("Store Country"),onChange:Z,filterable:""},{default:c(()=>[(f(!0),y(P,null,j(L.value,(Qe,Ee)=>(f(),U(ie,{key:Ee,label:Qe.name,value:Qe.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),d("div",sM,[d("label",null,v(g(p)("Shop Name")),1),r(se,{modelValue:I.value.store_name,"onUpdate:modelValue":z[1]||(z[1]=Qe=>I.value.store_name=Qe)},null,8,["modelValue"])]),d("div",nM,[d("label",null,v(g(p)("Store Currency")),1),r(te,{modelValue:I.value.currency,"onUpdate:modelValue":z[2]||(z[2]=Qe=>I.value.currency=Qe),filterable:"",placeholder:g(p)("Select")},{default:c(()=>[(f(!0),y(P,null,j(n.value,(Qe,Ee)=>(f(),U(ie,{key:Ee,label:Qe.label,value:Qe.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),d("div",oM,[d("label",null,v(g(p)("Shop Image/Logo")),1),r(Bg,{modelValue:I.value.store_logo,"onUpdate:modelValue":z[3]||(z[3]=Qe=>I.value.store_logo=Qe),showSupported:"",icon:"Upload",title:g(p)("Upload")},null,8,["modelValue","title"])])])],2),d("div",{class:le(`fc-onboarding-form-page-setup fc-onboarding-form-wrap ${a.value===2?"active":""}`)},[d("div",iM,[d("div",rM,[d("div",lM,[d("div",AM,v(b.value),1),d("div",cM,v(w.value),1)]),k.value?S("",!0):(f(),y("div",dM,[r(pe,{onClick:R},{default:c(()=>[r(G,{name:"MagicPen"}),O(" "+v(g(p)("Generate All Pages")),1)]),_:1})]))]),(f(),y(P,null,j($,(Qe,Ee)=>d("div",uM,[r(PD,{title:Q(Ee),pages:s.value,modelId:Ee,modelValue:I.value[Ee],"onUpdate:modelValue":Ze=>I.value[Ee]=Ze,onOnPageCreated:V},null,8,["title","pages","modelId","modelValue","onUpdate:modelValue"])])),64))])],2),d("div",{class:le(`fc-onboarding-form-wrap ${a.value===3?"active":""}`)},[d("div",fM,[d("div",hM,[r(Ue,{class:"fc-import-onboarding-products",modelValue:l.value,"onUpdate:modelValue":z[4]||(z[4]=Qe=>l.value=Qe),size:"large"},{default:c(()=>[r($e,{value:"start-from-scratch"},{default:c(()=>[r(G,{name:"Scratch"}),z[5]||(z[5]=d("span",{class:"label"},[O("Start "),d("br"),O("From scratch")],-1)),d("span",pM,[r(Se,null,{default:c(()=>[r(g(Tr))]),_:1})])]),_:1,__:[5]}),(f(!0),y(P,null,j(i.value,(Qe,Ee)=>(f(),U($e,{key:Ee,value:Ee},{default:c(()=>[r(G,{name:Qe.icon},null,8,["name"]),d("span",mM,v(Qe.title),1),d("span",gM,[r(Se,null,{default:c(()=>[r(g(Tr))]),_:1})])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])],2)])])])),[[Te,o.value]])])):S("",!0)]),a.value<4?(f(),y("div",_M,[d("div",vM,[a.value>1?(f(),U(pe,{key:0,text:"",onClick:X},{default:c(()=>[O(v(g(p)("Skip All")),1)]),_:1})):S("",!0)]),d("div",bM,[r(pe,{onClick:x,type:"info",plain:"",disabled:a.value===1},{default:c(()=>[O(v(g(p)("Go Back")),1)]),_:1},8,["disabled"]),a.value<3?(f(),U(pe,{key:0,onClick:E,type:"primary"},{default:c(()=>[O(v(g(p)("Continue")),1)]),_:1})):S("",!0),a.value===3?(f(),U(pe,{key:1,onClick:Y,type:"primary",loading:B.value},{default:c(()=>[B.value?S("",!0):(f(),y("span",yM,"⌘s")),O(" "+v(B.value?g(p)("Saving"):g(p)("Save")),1)]),_:1},8,["loading"])):S("",!0)])])):S("",!0)],64)}}},BM={class:"fc-orders-route-wrap"},kM=Object.assign({name:"OrdersRoute"},{__name:"OrdersRoute",setup(t){return(e,a)=>{const s=C("router-view");return f(),y("div",BM,[r(s)])}}}),xM={class:"setting-wrap"},FM={key:0,class:"payment-method-list fc-content-card-list"},SM=["onClick"],EM=["src","alt"],UM={key:0,class:"fct_payment_method_tag"},QM={class:"fc-content-card-list-content"},DM={class:"fc-content-card-list-action"},MM={key:0},IM={__name:"PaymentSettings",setup(t){const e=We().ctx,a=T(!1),s=T([]);sa(),Ra();const n=l=>l===!0?"active":"inactive",o=()=>{a.value=!0,e.$get("settings/payment-methods/all",{}).then(l=>{s.value=l.gateways}).catch(l=>{console.error(l)}).finally(()=>{a.value=!1})},i=()=>{window.open("https://webmakerrpro.com/discount-deal","_blank")};return he(()=>{o()}),(l,A)=>{const u=C("el-skeleton"),h=C("el-button");return f(),y("div",xM,[r(oe,null,{default:c(()=>[r(de,{title:l.$t("Payment Settings"),border_bottom:""},null,8,["title"]),r(ae,null,{default:c(()=>[r(u,{loading:a.value,animated:"",rows:6},null,8,["loading"]),a.value?S("",!0):(f(),y("div",FM,[(f(!0),y(P,null,j(s.value,(m,_)=>(f(),y("div",{class:le(m!=null&&m.upcoming?"upcoming fc-content-card-list-item":"fc-content-card-list-item"),key:_},[d("div",{onClick:()=>l.$router.push({name:m.route}),class:"cursor-pointer grid gap-2"},[d("div",{class:le(["fc-content-card-list-head",m.route])},[d("img",{src:m.icon,alt:m.admin_title||m.title},null,8,EM),m!=null&&m.tag?(f(),y("span",UM,[r(pt,{size:"small",status:"info",text:m.tag},null,8,["text"])])):S("",!0),(m==null?void 0:m.upcoming)===!1&&!(m!=null&&m.requires_pro)?(f(),U(pt,{key:1,size:"small",status:m.status?"active":"disabled","hide-icon":!0},{default:c(()=>[O(v(n(m.status)),1)]),_:2},1032,["status"])):S("",!0)],2),d("div",QM,[d("p",null,v(m.description),1)])],8,SM),d("div",DM,[m!=null&&m.upcoming?(f(),y("div",MM,v(g(p)("Coming Soon!")),1)):m!=null&&m.requires_pro?(f(),U(h,{key:1,class:"el-button--x-small el-button--primary",onClick:A[0]||(A[0]=()=>i())},{default:c(()=>[O(v(l.$t("Upgrade to Pro")),1)]),_:1})):(f(),U(h,{key:2,class:"el-button--x-small",onClick:()=>l.$router.push({name:m.route})},{default:c(()=>[O(v(l.$t("Manage")),1)]),_:2},1032,["onClick"]))])],2))),128))]))]),_:1})]),_:1})])}}},TM={key:0,class:"fluent-cart-admin-validation-error-wrapper"},it=Object.assign({name:"ValidationError"},{__name:"ValidationError",props:{validationErrors:Object,fieldKey:String},setup(t){const e=t,a=()=>{if(typeof e.validationErrors[e.fieldKey]!="object")return"";const[[n,o]]=Object.entries(e.validationErrors[e.fieldKey]);return{[n]:o}};return(s,n)=>t.validationErrors&&t.validationErrors.hasOwnProperty(t.fieldKey)?(f(),y("div",TM,[(f(!0),y(P,null,j(a(),(o,i)=>(f(),y("span",{class:"fluent-cart-admin-validation-error",key:o.toLowerCase().replace(/\s/g,"")},v(o),1))),128))])):S("",!0)}}),$M={class:"role-form"},OM={class:"select-use-option"},LM={class:"select-label"},VM={key:0,class:"select-desc"},RM={class:"dialog-footer"},HM={__name:"RoleAssignmentModal",props:{},emits:["fetchRoles"],setup(t,{expose:e,emit:a}){const s=T(!1),n=a,o=T(!1),i=T(null),l=T(null),A=T(!1),u=T(null),h=T(null),m=T({}),_=T(!1),B=E=>{if(!E){u.value=[];return}ne.get("roles/user-list",{search:E}).then(M=>{u.value=M.users.data}).finally(()=>{})},b=()=>{ne.get("roles").then(E=>{h.value=E.roles}).catch(E=>{if(E.message){q.error(E.message);return}console.log(E)}).finally(()=>{})},w=()=>{m.value={},o.value=!0,ne.post("roles",{user_id:i.value,role_key:l.value}).then((E,M)=>{s.value=!1,q.success(E.message),n("fetchRoles")}).catch(E=>{if(E.message)return q.error(E.message);m.value=E}).finally(()=>{o.value=!1})},k=()=>{i.value=null,l.value=null,A.value=!1,m.value={},s.value=!1},F=T("");return e({openModal:(E,M,D,R=!1)=>{i.value=E,l.value=M,F.value=D,s.value=!0,A.value=R,b()}}),(E,M)=>{const D=C("el-option"),R=C("el-select"),$=C("el-form-item"),Q=C("el-form"),I=C("el-button"),L=C("el-dialog");return f(),U(L,{title:A.value?`Edit ${F.value}'s Role`:"Add Role",modelValue:s.value,"onUpdate:modelValue":M[4]||(M[4]=V=>s.value=V),onClosed:k},{footer:c(()=>[d("span",RM,[r(I,{onClick:k},{default:c(()=>[O(v(E.$t("Cancel")),1)]),_:1}),r(I,{type:"primary",onClick:w,loading:o.value,disabled:o.value},{default:c(()=>[O(v(A.value?E.$t("Update Role"):E.$t("Attach Role")),1)]),_:1},8,["loading","disabled"])])]),default:c(()=>[d("div",$M,[r(Q,{"label-position":"top"},{default:c(()=>[A.value?S("",!0):(f(),U($,{key:0,label:E.$t("Select User")},{default:c(()=>[r(R,{modelValue:i.value,"onUpdate:modelValue":M[0]||(M[0]=V=>i.value=V),remote:!0,"remote-method":B,loading:_.value,filterable:"",clearable:"",placeholder:E.$t("Type to search user"),class:"w-full",onChange:M[1]||(M[1]=()=>{delete m.value.user_id})},{default:c(()=>[(f(!0),y(P,null,j(u.value,V=>(f(),U(D,{key:V.ID,label:V.name,value:V.ID},{default:c(()=>[d("div",OM,[d("span",null,v(V.name),1),d("span",null,v(V.email),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading","placeholder"]),m.value.hasOwnProperty("user_id")?(f(),U(it,{key:0,"validation-errors":m.value,"field-key":"user_id"},null,8,["validation-errors"])):S("",!0)]),_:1},8,["label"])),r($,{label:E.$t("Select Role")},{default:c(()=>[r(R,{onChange:M[2]||(M[2]=V=>{delete m.value.role_key}),id:"role_key",modelValue:l.value,"onUpdate:modelValue":M[3]||(M[3]=V=>l.value=V),placeholder:E.$t("Select a role"),class:"w-full","popper-class":"fc-select-role-dropdown"},{default:c(()=>[(f(!0),y(P,null,j(h.value,(V,N)=>(f(),U(D,{key:N,label:V.title,value:N},{default:c(()=>[d("div",LM,v(V.title),1),V.description?(f(),y("div",VM,v(V.description),1)):S("",!0)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),m.value.hasOwnProperty("role_key")?(f(),U(it,{key:0,"validation-errors":m.value,"field-key":"role_key"},null,8,["validation-errors"])):S("",!0)]),_:1},8,["label"])]),_:1})])]),_:1},8,["title","modelValue"])}}},PM=ve(HM,[["__scopeId","data-v-8db74063"]]),NM={class:"setting-wrap"},KM={class:"fc-role-settings"},zM={class:"fc-customer-card"},GM={class:"fc-customer-details"},jM={class:"fc-customer-name"},YM={class:"fc-customer-id"},WM={class:"fc-customer-email"},qM={class:"role-title flex items-center gap-1 capitalize"},XM={class:"role-desc flex items-center gap-1 capitalize text-system-mid dark:text-system-light text-xs"},JM={class:"fc-role-settings-table-action fc-btn-group sm justify-end"},ZM={__name:"RoleSettings",setup(t){var A,u;const e=T(!1);T(!1);const a=T([]),s=T(),n=T(!1),o=(u=(A=window.fluentCartAdminApp)==null?void 0:A.app_config)==null?void 0:u.isProActive,i=()=>{e.value=!0,ne.get("roles/managers").then(h=>{a.value=h.managers}).finally(()=>{e.value=!1})},l=h=>{n.value=!0,ne.delete("roles/"+h.shop_role,{user_id:h.id}).then(m=>{a.value=a.value.filter(_=>_.id!==h.id),q.success(m.message)}).catch(m=>{if(m.message)return q.error(m.message);console.log(m)}).finally(()=>{n.value=!1})};return he(()=>{i()}),(h,m)=>{const _=C("el-button"),B=C("el-table-column"),b=C("el-popconfirm"),w=C("el-table"),k=Ut("loading");return f(),y("div",NM,[r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{title:g(p)("Roles and Permissions")},vi({_:2},[g(o)?{name:"action",fn:c(()=>[r(_,{type:"primary",onClick:m[0]||(m[0]=()=>{var F;(F=s.value)==null||F.openModal()})},{default:c(()=>[O(v(g(p)("Add Role")),1)]),_:1})]),key:"0"}:void 0]),1032,["title"]),g(o)?(f(),U(ae,{key:0,class:"px-0 pb-0"},{default:c(()=>[d("div",KM,[ut((f(),U(w,{data:a.value},{empty:c(()=>[r(Tt,{icon:"Empty/RoleAndPermission","has-dark":!0,text:g(p)("No roles found!")},null,8,["text"])]),default:c(()=>[r(B,{label:g(p)("User"),width:150},{default:c(F=>{var x,E,M;return[d("div",zM,[d("div",GM,[d("div",jM,[O(v(((x=F.row)==null?void 0:x.display_name)||g(p)("No Name"))+" ",1),d("span",YM,"#"+v((E=F.row)==null?void 0:E.id),1)]),d("div",WM,v((M=F.row)==null?void 0:M.email),1)])])]}),_:1},8,["label"]),r(B,{prop:"shop_role",label:g(p)("Role Title"),width:100},{default:c(F=>[d("span",qM,v(F.row.shop_role),1)]),_:1},8,["label"]),r(B,{prop:"description",label:g(p)("Roles"),width:100},{default:c(F=>[d("span",XM,v(F.row.description),1)]),_:1},8,["label"]),r(B,{width:100},{default:c(F=>[d("div",JM,[r(we,{bg:"ghost",tag:"a",size:"x-small",hover:"primary",onClick:()=>{var x;(x=s.value)==null||x.openModal(F.row.id,F.row.shop_role,F.row.display_name,!0)}},{default:c(()=>[r(G,{name:"Edit"})]),_:2},1032,["onClick"]),r(b,{width:235,"confirm-button-text":g(p)("Confirm"),"cancel-button-text":g(p)("No, Thanks"),"icon-color":"red",title:g(p)("Are you sure to delete this user?"),onConfirm:x=>l(F.row)},{reference:c(()=>[r(we,{bg:"ghost",tag:"a",size:"x-small",hover:"danger"},{default:c(()=>[r(G,{name:"Delete"})]),_:1})]),_:2},1032,["confirm-button-text","cancel-button-text","title","onConfirm"])])]),_:1})]),_:1},8,["data"])),[[k,e.value||n.value]])])]),_:1})):(f(),U(ae,{key:1,class:"px-0 pb-0"},{default:c(()=>[r(qc,{class:"py-7.5",title:g(p)("Upgrade to Pro for Roles & Permission"),text:g(p)("This feature is only available in WebmakerrPro Pro.")},null,8,["title","text"])]),_:1}))]),_:1}),r(PM,{ref_key:"roleModal",ref:s,onFetchRoles:i},null,512)])}}},eI={name:"Tab"},tI={class:"tab-wrapper"};function aI(t,e,a,s,n,o){return f(),y("div",tI,[aa(t.$slots,"default")])}const Ug=ve(eI,[["render",aI]]),sI={name:"TabItems"},nI={class:"tab-item-wrapper"};function oI(t,e,a,s,n,o){return f(),y("div",nI,[aa(t.$slots,"default")])}const Qg=ve(sI,[["render",oI]]),iI={name:"TabItem"},rI={class:"tab-item"};function lI(t,e,a,s,n,o){return f(),y("div",rI,[aa(t.$slots,"default")])}const ll=ve(iI,[["render",lI]]),AI={name:"TabLink",props:{to:{type:[Object,String]}}},cI={key:1,class:"tab-link"};function dI(t,e,a,s,n,o){const i=C("router-link");return a.to?(f(),U(i,{key:0,to:a.to,class:"tab-link"},{default:c(()=>[aa(t.$slots,"default")]),_:3},8,["to"])):(f(),y("div",cI,[aa(t.$slots,"default")]))}const Al=ve(AI,[["render",dI]]),uI={name:"TabContent"},fI={class:"tab-content"};function hI(t,e,a,s,n,o){return f(),y("div",fI,[aa(t.$slots,"default")])}const pI=ve(uI,[["render",hI]]),mI=["innerHTML"],Pd={__name:"AdminNotice",props:{placement:{type:String,default:"top"}},setup(t){const e=_l("appVars"),a=sa(),s=J(()=>{let i="notices fc-notices-wrap fc-layout-width ";return a.fullPath.includes("settings")?i+="settings":a.fullPath.includes("reports")&&(i+="reports"),i}),n=J(()=>e.admin_notices&&e.admin_notices.length>0),o=T(!1);return he(()=>{me(()=>{o.value=!0})}),(i,l)=>n.value?(f(),y("div",{key:0,class:le(s.value)},[(f(!0),y(P,null,j(g(e).admin_notices,A=>(f(),U(Xs,{type:"warning",icon:"WarningFill"},{default:c(()=>[d("div",{innerHTML:A},null,8,mI)]),_:2},1024))),256))],2)):S("",!0)}},gI={class:"fct-setting-container setting-container"},_I={class:"fc-settings-menu-toggle"},vI={class:"relative w-6 h-6"},bI={class:"tab-content-inner"},yI=Object.assign({name:"SettingsView"},{__name:"SettingsView",setup(t){var m,_;const e=sa(),a=Ra();cp.config.get("isModuleTabEnabled");const s=T(!1),n=()=>{},o=()=>{document.body.style.overflow=""};Ai.has("store/settings");const i=T([{name:p("Store Settings"),icon:"Gift",permission:["store/settings","store/sensitive"],url:"/settings/store-settings/",child:[{name:p("Store Setup"),url:"/settings/store-settings/"},{name:p("Pages Setup"),url:"/settings/store-settings/pages_setup"},{name:p("Product Page"),url:"/settings/store-settings/single_product_setup"},{name:p("Cart & Checkout"),url:"/settings/store-settings/cart_and_checkout"},{name:p("Checkout Fields"),url:"/settings/store-settings/checkout_fields"}]},{name:p("Payment Settings"),icon:"PaymentIcon",permission:["is_super_admin"],url:"/settings/payments"},{name:p("Invoice & Packing"),icon:"Invoice",permission:["is_super_admin"],url:"/settings/invoice-packing"},{name:p("Tax & Duties"),icon:"Tax",permission:["is_super_admin"],url:"/settings/tax_settings",child:[{name:p("Configuration & Classes"),url:"/settings/tax_settings"},{name:p("Rates"),url:"/settings/tax_settings/tax_rates"},{name:p("European Union"),url:"/settings/tax_settings/eu"}]},{name:p("Email Configuration"),icon:"Message",permission:["store/sensitive"],url:"/settings/email_mailing_settings",child:[{name:p("Mailing Settings"),url:"/settings/email_mailing_settings"},{name:p("Notifications"),url:"/settings/email_notifications"}]},{name:p("Roles and Permissions"),icon:"ShieldCheck",permission:["is_super_admin"],url:"/settings/roles"},{name:p("Storage Settings"),icon:"Database",permission:["is_super_admin"],url:"/settings/storage"}]);a.hasRoute("shipping")&&i.value.push({name:p("Shipping"),icon:"Truck",permission:["store/sensitive"],url:"/settings/shipping",child:[{name:p("Shipping Zones"),permission:["store/sensitive"],url:"/settings/shipping"},{name:p("Shipping Classes"),permission:["store/sensitive"],url:"/settings/shipping/shipping_classes"}]}),i.value.push({name:p("Features & addon"),icon:"Module",permission:["is_super_admin"],url:"/settings/addons"}),((_=(m=window.fluentCartAdminApp)==null?void 0:m.app_config)==null?void 0:_.isProActive)&&i.value.push({name:p("License Settings"),icon:"License",permission:"store/sensitive",url:"/settings/licensing"});const A=()=>{s.value=!s.value},u=B=>{const b=e.path;return!!(B.child&&B.child.length&&B.child.some(k=>b===k.url||b.includes(k.url))||b===B.url||b.includes(B.url))},h=(B,b,w)=>{const k=e.path;return k===B.url||k===w.url&&b===0};return(B,b)=>{const w=C("el-button"),k=C("router-view");return f(),y("div",gI,[s.value?(f(),y("div",{key:0,class:"fc-settings-menu-overlay",onClick:A})):S("",!0),d("div",_I,[r(w,{onClick:A},{default:c(()=>[d("div",vI,[r(pa,{visible:s.value,fade:""},{default:c(()=>[r(G,{name:"Cross",class:"absolute justify-center inset-0 w-full h-full"})]),_:1},8,["visible"]),r(pa,{visible:!s.value,fade:""},{default:c(()=>[r(G,{name:"Setting",class:"absolute justify-center inset-0 w-full h-full"})]),_:1},8,["visible"])]),O(" "+v(g(p)("Settings")),1)]),_:1})]),r(Ug,{onMouseenter:n,onMouseleave:o},{default:c(()=>[r(Qg,{class:le({"is-open":s.value})},{default:c(()=>[(f(!0),y(P,null,j(i.value,(F,x)=>(f(),U(ll,{key:x,class:le({"tab-item-active":u(F)})},{default:c(()=>[g(Ai).hasAny(F.permission)?(f(),U(Al,{key:0,to:F.url},{default:c(()=>[r(G,{name:F.icon},null,8,["name"]),O(" "+v(F.name)+" ",1),r(G,{name:"ChevronRight",class:"tab-icon-right"})]),_:2},1032,["to"])):S("",!0),r(pa,{visible:u(F)&&F.child,accordion:"",class:"fc-settings-menu-child-wrap"},{default:c(()=>[(f(!0),y(P,null,j(F.child,(E,M)=>(f(),U(ll,{key:M,onClick:A,class:le({"tab-item-active":h(E,M,F)})},{default:c(()=>[r(Al,{to:E.url},{default:c(()=>[O(v(E.name),1)]),_:2},1032,["to"])]),_:2},1032,["class"]))),128))]),_:2},1032,["visible"])]),_:2},1032,["class"]))),128))]),_:1},8,["class"]),r(pI,null,{default:c(()=>[d("div",bI,[r(Pd),r(k)])]),_:1})]),_:1})])}}}),wI={class:"min-h-[72px] px-2 pl-6 flex flex-col justify-center"},CI={__name:"CustomerOrdersLoader",props:{columns:{type:Array,default:()=>[]}},setup(t){const e=t,a=s=>e.columns.includes(s);return(s,n)=>{const o=C("el-table-column"),i=C("el-skeleton-item"),l=C("el-skeleton"),A=C("el-table");return f(),U(A,{class:"w-full compact-table responsive",data:[1,2,3,4,5,6,7,8,9,10]},{default:c(()=>[a("selection")?(f(),U(o,{key:0,type:"selection",width:"45"})):S("",!0),r(o,{width:140,label:g(p)("# Date")},{default:c(()=>[d("div",wI,[r(l,{animated:""},{template:c(()=>[r(i,{varient:"p",class:"w-3/5"})]),_:1}),r(l,{animated:""},{template:c(()=>[r(i,{varient:"p",class:"w-4/5"})]),_:1})])]),_:1},8,["label"]),a("order_items")?(f(),U(o,{key:1,"min-width":200,label:g(p)("Items")},{default:c(()=>[r(l,{animated:""},{template:c(()=>[r(i,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"])):S("",!0),r(o,{width:150,label:g(p)("Total")},{default:c(()=>[r(l,{animated:""},{template:c(()=>[r(i,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"]),r(o,{width:150,label:g(p)("Payment Status")},{default:c(()=>[r(l,{animated:""},{template:c(()=>[r(i,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),a("status")?(f(),U(o,{key:2,width:120,label:g(p)("Status")},{default:c(()=>[r(l,{animated:""},{template:c(()=>[r(i,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"])):S("",!0),a("type")?(f(),U(o,{key:3,width:140,label:g(p)("Order Type")},{default:c(()=>[r(l,{animated:""},{template:c(()=>[r(i,{varient:"p",class:"w-3/5"})]),_:1})]),_:1},8,["label"])):S("",!0)]),_:1})}}},BI={class:"select-use-option"},kI={class:"dialog-footer"},Dg={__name:"UserAttchModal",props:{customer:{}},setup(t){const e=t,a=T(!1),s=T([]),n=T(null),o=T({}),i=T(!1),l=()=>{o.value={},i.value=!0,ne.post(`customers/${e.customer.id}/attachable-user`,{user_id:n.value}).then((h,m)=>{a.value=!1,q.success(h.message),e.customer.user_id=n.value}).catch(h=>{if(h.message)return q.error(h.message);o.value=h}).finally(()=>{i.value=!1})},A=()=>{n.value=null,o.value={},a.value=!1},u=()=>{ne.get("customers/attachable-user").then(h=>{s.value=be.get(h,"users")})};return he(()=>{u()}),(h,m)=>{C("el-link");const _=C("el-option"),B=C("el-select"),b=C("el-form-item"),w=C("el-form"),k=C("el-button"),F=C("el-dialog");return f(),y(P,null,[S("",!0),r(F,{modelValue:a.value,"onUpdate:modelValue":m[2]||(m[2]=x=>a.value=x),title:g(p)("Attach User"),onClosed:A},{footer:c(()=>[d("span",kI,[r(k,{onClick:A},{default:c(()=>[O(v(g(p)("Cancel")),1)]),_:1}),r(k,{type:"primary",onClick:l,loading:i.value,disabled:i.value},{default:c(()=>[O(v(g(p)("Attach User")),1)]),_:1},8,["loading","disabled"])])]),default:c(()=>[r(w,{"label-position":"top"},{default:c(()=>[r(b,{label:h.$t("Select User")},{default:c(()=>[r(B,{id:"user_id",modelValue:n.value,"onUpdate:modelValue":m[1]||(m[1]=x=>n.value=x),filterable:"",placeholder:h.$t("Select a user"),class:"w-full"},{default:c(()=>[(f(!0),y(P,null,j(s.value,x=>(f(),U(_,{key:x.ID,label:x.display_name,value:x.ID},{default:c(()=>[d("div",BI,[d("span",null,v(x.display_name),1),d("span",null,v(x.user_email),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),o.value.hasOwnProperty("user_id")?(f(),U(it,{key:0,"validation-errors":o.value,"field-key":"user_id"},null,8,["validation-errors"])):S("",!0)]),_:1},8,["label"])]),_:1})]),_:1},8,["modelValue","title"])],64)}}},xI={class:"more-btn"},FI={class:"fc-admin-sidebar-item"},SI={class:"fc-profile-card"},EI={class:"fc-profile-image"},UI=["src","alt"],QI={class:"fc-profile-details"},DI={class:"title"},MI={class:"text"},II={key:0},TI={class:"text"},$I={key:0,class:"flex items-center gap-2 mt-1.5"},OI={class:"user-info"},LI=["href"],VI={key:1},RI={class:"fc-admin-sidebar-item mt-5"},HI={class:"sidebar-title"},PI={class:"fc-contact-info-list"},NI={class:"flex items-center justify-between gap-2"},KI=["href"],zI={class:"fc-admin-sidebar-item mt-5"},GI={class:"sidebar-title"},jI={key:0,class:"fc-address-copy-wrap"},YI={class:"text"},WI={key:0,class:"pr-1"},qI=["innerHTML"],XI={key:0,class:"no-address-text"},JI={class:"fc-admin-sidebar-item mt-5"},ZI={class:"sidebar-title"},eT={key:0,class:"fc-address-copy-wrap"},tT={class:"text"},aT={key:0,class:"pr-1"},sT=["innerHTML"],nT={key:0,class:"no-address-text"},oT={class:"fluent-cart-admin-pages"},iT={name:"CustomerInformations",props:["customer","customer_id"],components:{CustomerPurchaseValue:J_,NewCustomerModal:Xc,ManageAddressModal:op,AddOrEditAddressModal:np,DynamicIcon:G,CopyToClipboard:$a,UserAttchModal:Dg,Back:nd},data(){return{addOrEditAddress:!1,shippingAddress:[],billingAddress:[],showAddressModal:!1,modalAction:{type:"billing",action:"create"},address:{},address_mock:{label:"",name:"",phone:"",email:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",is_primary:"0"},customerModalInfos:{showModal:!1,action:"edit",title:"Edit Customer Information",customer:{}},detaching:!1,shouldShowSetAsAlsoCheckbox:!0,closingModal:!1}},computed:{hasPrimaryBilling(){return this.billingAddress.findIndex(t=>t.is_primary=="1")},hasPrimaryShipping(){return this.shippingAddress.findIndex(t=>t.is_primary=="1")}},methods:{handleCustomerBulkCommand(t){t==="edit_customer_information"&&(this.customerModalInfos.showModal=!0),t==="manage_billing_address"&&this.manageAddress("billing"),t==="manage_shipping_address"&&this.manageAddress("shipping")},getCustomerTotalOrders(t){return t>0?t+" "+(t.toString()==="1"?this.$t("order"):this.$t("orders")):this.$t("No orders")},refresh(){this.addOrEditAddress=!1,this.fetch()},getTitle(){return this.modalAction.action==="create"?this.modalAction.type==="billing"?this.$t("Add new billing address"):this.$t("Add new shipping Address"):this.modalAction.type==="billing"?this.$t("Edit billing address"):this.$t("Edit shipping address")},addNewAddress(t="billing",e="create",a=[]){Object.keys(a).length>0?(this.address=JSON.parse(JSON.stringify(a)),this.shouldShowSetAsAlsoCheckbox=!1):this.address=JSON.parse(JSON.stringify(this.address_mock)),this.addOrEditAddress=!0,this.modalAction.type=t,this.modalAction.action=e,this.showAddressModal=!1},manageAddress(t="billing",e="edit"){this.showAddressModal=!0,this.modalAction.type=t,this.modalAction.action=e},fetch(){this.$emit("fetch")},handleDetachUser(){this.detaching=!0,ne.post(`customers/${this.customer_id}/detach-user`,{user_id:this.customer.user_id}).then((t,e)=>{this.customer.user_id=0,q.success(t.message)}).catch(t=>{if(t.message)return q.error(t.message);console.log(t)}).finally(()=>{this.detaching=!1})}},mounted(){this.billingAddress=this.customer.billing_address,this.shippingAddress=this.customer.shipping_address,this.customerModalInfos.customer=this.customer,this.customerModalInfos.customer_id=this.customer.id}},Mg=Object.assign(iT,{setup(t){return(e,a)=>{const s=C("el-dropdown-item"),n=C("el-dropdown-menu"),o=C("el-dropdown"),i=C("el-button"),l=C("el-popconfirm"),A=C("el-tag"),u=C("el-icon"),h=C("el-dialog"),m=Ut("loading");return f(),y("div",null,[r(oe,null,{default:c(()=>[r(de,{title:e.$t("Customer Information"),title_size:"small",border_bottom:""},{action:c(()=>[r(o,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:e.handleCustomerBulkCommand},{dropdown:c(()=>[r(n,null,{default:c(()=>[r(s,{command:"edit_customer_information"},{default:c(()=>[O(v(e.$t("Edit customer information")),1)]),_:1}),r(s,{command:"manage_shipping_address"},{default:c(()=>[O(v(e.$t("Manage shipping address")),1)]),_:1}),r(s,{command:"manage_billing_address"},{default:c(()=>[O(v(e.$t("Manage billing address")),1)]),_:1})]),_:1})]),default:c(()=>[d("span",xI,[r(G,{name:"More"})])]),_:1},8,["onCommand"])]),_:1},8,["title"]),r(ae,null,{default:c(()=>{var _,B,b,w,k,F;return[d("div",FI,[d("div",SI,[d("div",EI,[d("img",{src:(_=t.customer)==null?void 0:_.photo,alt:(B=t.customer)==null?void 0:B.full_name},null,8,UI)]),d("div",QI,[d("div",DI,v((b=t.customer)==null?void 0:b.full_name),1),d("span",MI,[t.customer.purchase_count>0?(f(),y("span",II,v(t.customer.purchase_count),1)):S("",!0),O(" "+v(e.$n("Order","Orders",t.customer.purchase_count??0,"No Order")),1)]),d("span",TI,v(g(st)((w=t.customer)==null?void 0:w.ltv,!0))+" "+v(g(p)("Lifetime Value")),1)])])]),d("div",null,[t.customer.user_id&&t.customer.user_id>0?(f(),y("div",$I,[d("div",OI,[a[6]||(a[6]=O(" WP User: ",-1)),d("a",{href:t.customer.user_link,target:"_blank",class:"inline-flex items-center gap-1 dark:text-gray-100 text-primary-500 focus:shadow-none hover:!underline"},[O(" #"+v(t.customer.user_id)+" ",1),r(G,{name:"Redirect",class:"w-2.5 h-2.5 text-primary-500 dark:text-gray-200"})],8,LI)]),S("",!0)])):(f(),y("div",VI,[r(Dg,{customer:t.customer},null,8,["customer"])]))]),d("div",RI,[d("h4",HI,v(e.$t("Contact Information")),1),d("ul",PI,[d("li",null,[d("div",NI,[d("a",{class:"text",href:"mailto:"+((k=t.customer)==null?void 0:k.email)},v((F=t.customer)==null?void 0:F.email),9,KI),r($a,{text:t.customer.email,showMode:"basic_copy_btn",tooltipText:"Copy email"},null,8,["text"])])])])]),d("div",zI,[d("h4",GI,[O(v(e.$t("Shipping Address"))+" ",1),e.hasPrimaryShipping!=-1?(f(),U(A,{key:0,type:"info",round:""},{default:c(()=>[O(v(e.$t("Default")),1)]),_:1})):S("",!0)]),(f(!0),y(P,null,j(e.shippingAddress,(x,E)=>(f(),y(P,null,[x.is_primary==="1"?(f(),y("div",jI,[d("span",YI,[x.name?(f(),y("strong",WI,v(x.name),1)):S("",!0),d("span",{innerHTML:e.getOrderAddress(x,"shipping",!0)},null,8,qI)]),r($a,{text:e.getOrderAddress(x),showMode:"basic_copy_btn",tooltipText:"Copy address"},null,8,["text"])])):S("",!0)],64))),256)),e.hasPrimaryShipping==-1?(f(),y("p",XI,v(e.$t("No default address found.")),1)):S("",!0)]),d("div",JI,[d("h4",ZI,[O(v(e.$t("Billing Address"))+" ",1),e.hasPrimaryBilling!=-1?(f(),U(A,{key:0,type:"info",round:""},{default:c(()=>[O(v(e.$t("Default")),1)]),_:1})):S("",!0)]),(f(!0),y(P,null,j(e.billingAddress,(x,E)=>(f(),y(P,null,[x.is_primary==="1"?(f(),y("div",eT,[d("span",tT,[x.name?(f(),y("strong",aT,v(x.name),1)):S("",!0),d("span",{innerHTML:e.getOrderAddress(x,"billing",!0)},null,8,sT)]),r($a,{text:e.getOrderAddress(x),showMode:"basic_copy_btn",tooltipText:e.$t("Copy address")},null,8,["text","tooltipText"])])):S("",!0)],64))),256)),e.hasPrimaryBilling===-1?(f(),y("p",nT,v(e.$t("No default address found.")),1)):S("",!0)])]}),_:1})]),_:1}),e.customerModalInfos.showModal?(f(),U(Xc,{key:0,"onUpdate:customerModal":e.fetch,customerModalInfos:e.customerModalInfos,customer_id:e.customerModalInfos.customer_id,customer:e.customerModalInfos.customer,onCloseModal:a[0]||(a[0]=_=>e.customerModalInfos.showModal=!1)},null,8,["onUpdate:customerModal","customerModalInfos","customer_id","customer"])):S("",!0),r(op,{modalAction:e.modalAction,onRefreshAddress:e.refresh,"onUpdate:showAddressModal":a[1]||(a[1]=_=>e.showAddressModal=_),showAddressModal:e.showAddressModal,customer_id:t.customer_id,onAddNewAddress:e.addNewAddress},null,8,["modalAction","onRefreshAddress","showAddressModal","customer_id","onAddNewAddress"]),r(h,{"show-close":!0,modelValue:e.addOrEditAddress,"onUpdate:modelValue":a[4]||(a[4]=_=>e.addOrEditAddress=_),"append-to-body":!0,title:e.getTitle(),onClose:a[5]||(a[5]=()=>{e.closingModal=!0})},{default:c(()=>[d("div",oT,[r(i,{text:"",onClick:a[2]||(a[2]=()=>{e.showAddressModal=!0,e.addOrEditAddress=!1}),class:"mb-4"},{default:c(()=>[r(u,null,{default:c(()=>[r(g(nd))]),_:1}),O(" "+v(e.$t("Manage address")),1)]),_:1}),r(np,{"onUpdate:refreshAddress":e.refresh,customer_id:t.customer_id,modalAction:e.modalAction,address:e.address,showAddressModal:e.addOrEditAddress,showSetAsAlsoCheckbox:e.shouldShowSetAsAlsoCheckbox,onCloseModal:a[3]||(a[3]=_=>e.addOrEditAddress=!1),closing_modal:e.closingModal},null,8,["onUpdate:refreshAddress","customer_id","modalAction","address","showAddressModal","showSetAsAlsoCheckbox","closing_modal"])])]),_:1},8,["modelValue","title"])])}}}),rT={class:"fc-single-customer-loader-wrap fc-layout-width"},lT={class:"single-page-header fc-page-loader-header flex items-start justify-between"},AT={class:"single-page-body"},cT={class:"fc-single-order"},dT={class:"fc-single-order-main"},uT={class:"fc-single-order-aside"},fT={class:"fc-admin-sidebar"},Ig={__name:"SingleCustomerLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton");return f(),y("div",rT,[d("div",lT,[r(n,{animated:"",class:"flex items-start gap-2"},{template:c(()=>[(f(),y(P,null,j(3,o=>r(s,{key:o,class:"max-w-[100px]"})),64))]),_:1})]),d("div",AT,[d("div",cT,[d("div",dT,[r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{border_bottom:"",title_size:"small",title:e.$t("Orders")},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:5})]),_:1})]),_:1})]),d("div",uT,[d("div",fT,[r(oe,null,{default:c(()=>[r(de,{title:e.$t("Customer Informations"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:5})]),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(de,{title:e.$t("Labels"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:1})]),_:1})]),_:1})])])])])])}}},hT={key:2},pT={key:0,class:"fc-single-customer-wrapper fc-layout-width"},mT={class:"single-page-header"},gT={class:"single-page-header-title-wrap"},_T={key:0},vT={key:0,class:"single-page-body"},bT={class:"fc-admin-sidebar"},yT={key:0},wT={name:"SingleCustomer",props:["customer_id"],components:{OrdersTable:ed,IconButton:we,Empty:Tt,DynamicIcon:G,Badge:pt,SaveBar:uo,CustomerInformation:Mg,Labels:bl,DynamicTemplates:go,ArrowDown:sd,ArrowRight:Ca,CardContainer:oe,CardHeader:de,CardBody:ae,LicenseTable:Jc,OrdersTableMobile:td,SubscriptionsTable:lp,SingleCustomerLoader:Ig,SubscriptionsTableMobile:rp},data(){return{changes_made:0,notFound:{show:!1,message:"",buttonText:"",route:""},loading:!1,customer:"",selection:!1,selectedOrders:[],editableOrderStatues:this.appVars.editable_order_statues,selectedLabels:[],licenses:[],subscriptions:[],customerOrders:[],paginate:{current_page:1,per_page:10,last_page:1,total:0,from:1,to:10},fetchingOrders:!1,search:"",showSearch:!1}},watch:{customer_id:{handler(t,e){this.fetch()}}},computed:{},methods:{getProductName(t){var e,a;return(e=t==null?void 0:t.product)!=null&&e.post_title?(a=t==null?void 0:t.product)==null?void 0:a.post_title:"n/a"},getProductVariationName(t){var e,a;return(e=t==null?void 0:t.product_variant)!=null&&e.variation_title?(a=t==null?void 0:t.product_variant)==null?void 0:a.variation_title:"n/a"},onChangeLabel(t){this.selectedLabels=t,this.changes_made++},update(){this.loading=!0,ne.put("customers/"+this.customer_id+"/additional-info",{labels:this.selectedLabels}).then(t=>{q.success(t)}).catch(t=>{t.status_code=="422"?q.validationErrors(t):q.error(t.message)}).finally(()=>{this.loading=!1,this.changes_made=0})},discardChanges(){return window.location.reload()},fetch(){this.notFound.show=!1,this.loading=!0,this.selectedOrders=[],ne.get("customers/"+this.customer_id,{with:["shipping_address","billing_address","labels","subscriptions"]}).then(t=>{this.changeTitle(p("Customer: %s",t.customer.full_name)),this.customer=t.customer,this.selectedLabels=t.customer.selected_labels,this.licenses=this.customer.licenses,this.subscriptions=this.customer.subscriptions}).catch(t=>{t.code==="fluent_cart_entity_not_found"?(this.notFound.show=!0,this.notFound.buttonText=be.get(t,"data.buttonText"),this.notFound.message=be.get(t,"data.message"),this.notFound.route=be.get(t,"data.route")):t.status_code=="422"?q.validationErrors(t):q.error(t.message)}).finally(()=>{this.loading=!1})},getCustomerOrders(){this.fetchingOrders=!0,ne.get("customers/"+this.customer_id+"/orders",{per_page:this.paginate.per_page,page:this.paginate.current_page,with:["order_items"],search:this.search,order_by:"id",order_type:"DESC"}).then(t=>{this.customerOrders=t.orders,this.paginate.total=t.orders.total,this.paginate.per_page=t.orders.per_page,this.paginate.current_page=t.orders.current_page,this.paginate.last_page=t.orders.last_page,this.paginate.from=t.orders.from,this.paginate.to=t.orders.to}).catch(t=>{t.status_code=="422"?q.validationErrors(t):q.error(t.message)}).finally(()=>{this.fetchingOrders=!1})},onSelection(t){this.selection=!!t.length,this.selectedOrders=t,this.selectionCount=t.length},exportOrders(){location.href=window.ajaxurl+"?"+jQuery.param({action:"fluent_cart_admin_ajax",route:"export_orders",customer_id:this.customer_id,search:this.search,format:"csv"})}},mounted(){this.fetch(),this.getCustomerOrders()}},CT=Object.assign(wT,{setup(t){return(e,a)=>{const s=C("el-breadcrumb-item"),n=C("el-breadcrumb"),o=C("el-input"),i=C("el-col"),l=C("el-row");return f(),y(P,null,[e.loading?(f(),U(Ig,{key:0})):S("",!0),e.notFound.show?(f(),U(Cl,{key:1,"button-text":e.notFound.buttonText,message:e.notFound.message,route:e.notFound.route},null,8,["button-text","message","route"])):S("",!0),e.notFound.show===!1?(f(),y("div",hT,[e.loading?S("",!0):(f(),y("div",pT,[r(uo,{isActive:e.changes_made>0?"is-active":"",onDiscard:e.discardChanges,onSave:e.update,loading:e.loading},null,8,["isActive","onDiscard","onSave","loading"]),d("div",mT,[d("div",gT,[r(n,{"separator-icon":g(Ca)},{default:c(()=>[r(s,{to:{name:"customers"}},{default:c(()=>[O(v(g(p)("Customers")),1)]),_:1}),r(s,null,{default:c(()=>[e.customer?(f(),y("span",_T,v(e.customer.full_name),1)):S("",!0)]),_:1}),r(s,null,{default:c(()=>[O(v(g(p)("Overview")),1)]),_:1})]),_:1},8,["separator-icon"])])]),e.customer.id?(f(),y("div",vT,[r(l,{gutter:30},{default:c(()=>[r(i,{lg:17,xs:24},{default:c(()=>[r(g(oe),{class:"overflow-hidden fc-customer-orders-items"},{default:c(()=>[r(g(de),{title:g(p)("Orders")+" ("+e.customerOrders.total+")",title_size:"small"},{action:c(()=>[r(o,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=A=>e.search=A),onKeyup:a[1]||(a[1]=ja(A=>e.getCustomerOrders(),["enter"])),placeholder:g(p)("Type and hit enter..."),clearable:"",onClear:a[2]||(a[2]=A=>e.getCustomerOrders()),class:le(`w-[210px] ${e.showSearch?"":"search-input-hide-on-mobile"}`)},null,8,["modelValue","placeholder","class"]),r(we,{tag:"button",size:"small",onClick:a[3]||(a[3]=A=>e.showSearch=!e.showSearch),class:"icon-button-show-on-mobile ml-2"},{default:c(()=>[e.showSearch?(f(),U(G,{key:0,name:"Cross"})):(f(),U(G,{key:1,name:"Search"}))]),_:1})]),_:1},8,["title"]),r(g(ae),{class:"px-0 pb-0"},{default:c(()=>[e.fetchingOrders?(f(),U(CI,{key:0,columns:["items","order_items","total","type","status"]})):(f(),y(P,{key:1},[r(ed,{class:"hide-on-mobile",onFetch:e.getCustomerOrders,orders:e.customerOrders.data,columns:["items","order_items","total","type","status"]},null,8,["onFetch","orders"]),r(td,{class:"show-on-mobile",orders:e.customerOrders.data,columns:["items","order_items","total","type","status"]},null,8,["orders"])],64)),e.paginate.total>10?(f(),U(Ap,{key:2,onFetch:e.getCustomerOrders,hide_on_single:!1,pagination:e.paginate},null,8,["onFetch","pagination"])):S("",!0)]),_:1})]),_:1}),e.customer.subscriptions?(f(),U(g(oe),{key:0,class:"overflow-hidden"},{default:c(()=>[r(g(de),{title:g(p)("Subscriptions")+" ("+e.customer.subscriptions.length+")",title_size:"small"},null,8,["title"]),r(g(ae),{class:"px-0 pb-0"},{default:c(()=>[r(lp,{class:"hide-on-mobile",subscriptions:e.customer.subscriptions,columns:["next_billing_date","collection_method","bills_count","order_id","payment_method","valid_till"]},null,8,["subscriptions"]),r(rp,{class:"show-on-mobile",subscriptions:e.customer.subscriptions,columns:["next_billing_date","collection_method","bills_count","order_id","payment_method","valid_till"]},null,8,["subscriptions"])]),_:1})]),_:1})):S("",!0),e.customer.licenses?(f(),U(g(oe),{key:1,class:"overflow-hidden"},{default:c(()=>[r(g(de),{title:g(p)("Licenses")+" ("+e.customer.licenses.length+")",title_size:"small"},null,8,["title"]),r(g(ae),{class:"px-0 pb-0 fc-single-customer-license-table"},{default:c(()=>[r(Jc,{columns:["product","order_id"],licenses:e.customer.licenses},null,8,["licenses"])]),_:1})]),_:1})):S("",!0)]),_:1}),r(i,{lg:7,xs:24},{default:c(()=>[d("div",bT,[r(Mg,{customer:e.customer,customer_id:t.customer_id,onFetch:e.fetch},null,8,["customer","customer_id","onFetch"]),r(bl,{"bind-to-id":e.customer.id,"bind-to-type":"Customer",selectedLabels:e.selectedLabels,shouldEnableEditing:!0},null,8,["bind-to-id","selectedLabels"]),e.customer?(f(),y("div",yT,[r(go,{widgetsQuery:{customer_id:e.customer.id},data:{customer:e.customer}},null,8,["widgetsQuery","data"])])):S("",!0)])]),_:1})]),_:1})])):S("",!0)]))])):S("",!0)],64)}}}),BT={components:{Empty:Tt,Pagination:Ap,Badge:pt,DynamicIcon:G},props:["searchQueryParent","orderParent","order_id"],data(){return{loading:!1,searching:!1,orderAddModal:!1,availableProducts:[],selectedProducts:[],cartItems:[],paginate:{per_page:10,current_page:1,total:0,last_page:1},collapsedStates:null}},computed:{CurrencyFormatter(){return Fe},Asset(){return eo},order:{get(){return this.orderParent},set(t){this.$emit("update:order",t)}},searchQuery:{get(){return this.searchQueryParent},set(t){this.$emit("update:searchQuery",t)}}},created(){this.initializeCollapsedStates()},methods:{translate:p,initializeCollapsedStates(){this.collapsedStates=Array.from({length:this.availableProducts.length},()=>!1)},handleToggleCollapse(t){this.collapsedStates[t]=!this.collapsedStates[t];for(let e=0;e<this.collapsedStates.length;e++)e!==t&&(this.collapsedStates[e]=!1)},hasSubscriptionProduct(t,e){return t.filter(s=>s.variants&&s.variants.other_info&&s.variants.other_info.payment_type===e?!0:!!(s.other_info.payment_type&&s.other_info.payment_type===e)).length>0},validateShouldAddProduct(t){var o;const e=this.order.order_items.map(i=>i.object_id),a=this.selectedProducts.map(i=>i.object_id),s=((o=t==null?void 0:t.other_info)==null?void 0:o.payment_type)==="onetime"?"subscription":"onetime",n=this.order.order_items.length===0;if(n&&this.selectedProducts.length===0)return!0;if(n&&a.includes(t.object_id))return!0;if(!n&&e.includes(t.object_id))return!0;if(n&&!this.hasSubscriptionProduct(this.selectedProducts,s)){if(!this.hasSubscriptionProduct(this.selectedProducts,"subscription"))return!0}else if(!n&&!this.hasSubscriptionProduct(this.order.order_items,s)&&!this.hasSubscriptionProduct(this.order.order_items,"subscription"))return!0;return!1},handleCheckboxChange(t,e){if(e.checked)if(this.validateShouldAddProduct(e))this.selectedProducts.push(e);else return e.checked=!1,q.error(p("You can purchase one subscription at a time."));else{const a=this.selectedProducts.findIndex(s=>s.id===e.id);if(a!==-1)return this.selectedProducts.splice(a,1)}},onCurrentPageChanged({page:t,currentPageCount:e}){this.paginate.current_page=t,this.doSearch()},onPerPageChanged(t){this.paginate.per_page=t,this.doSearch()},isAlreadyAdded(t){return this.order.order_items?this.order.order_items.some(e=>parseInt(e.object_id)===parseInt(t)):!1},isNotParentVariant(t){return!t.children||t.children.length<1},handleSelectionChanges(t){this.selectedProducts=t},processProducts(){let t={};this.order.order_items&&this.order.order_items.length&&this.order.order_items.forEach((a,s)=>{t[a.object_id]=a}),this.selectedProducts&&this.selectedProducts.forEach((a,s)=>{t[a.object_id]?t[a.object_id].quantity++:(a.tax_amount=parseInt(a.tax_amount)||0,a.discount_total=parseInt(a.discount_total)||0,a.quantity=parseInt(a.quantity)||1,t[a.object_id]=a),t[a.object_id].updated_stock=parseInt(a.available),t[a.object_id].total=parseInt(t[a.object_id].price)*parseInt(t[a.object_id].quantity),t[a.object_id].line_total=parseInt(t[a.object_id].total)-parseInt(t[a.object_id].discount_total)+parseInt(t[a.object_id].tax_amount)}),this.order.order_items=[];let e=0;for(const a in t)if(this.order.order_items.push(t[a]),e+=parseInt(t[a].line_total),t[a].payment_type==="subscription"&&t[a].other_info.manage_setup_fee==="yes"){let s=parseInt(t[a].other_info.signup_fee);t[a].other_info.setup_fee_per_item==="yes"&&(s=s*t[a].quantity),e+=s}return this.order.subtotal=e,this.order.total_amount=e+parseInt(this.order.tax_total)+parseInt(this.order.shipping_total)-parseInt(this.order.manual_discount_total),this.orderAddModal=!1,this.searchQuery="",this.selectedProducts=[],!0},fetchBySearch(){this.loading=!0,this.searching=!0,this.orderAddModal=!0;let t=this;me(()=>{setTimeout(()=>{t.$refs.fc_product_search_new.ref.focus()},50)}),clearTimeout(this.timeout);const e=this;this.timeout=setTimeout(function(){e.doSearch()},700)},doSearch(){this.loading=!0;let t={active_view:"publish",per_page:this.paginate.per_page,page:this.paginate.current_page,search:this.searchQuery,filter_type:"simple",sort_by:"ID",with:["detail.variants.media","categories"]};ne.get("products/",{...t}).then(e=>{let a={...e.products};this.availableProducts=j_(a.data,this.order_id),delete a.data,this.paginate=a,this.searching=!1}).catch(e=>{e.status_code=="422"?q.validationErrors(e):q.error(e.message)}).finally(()=>{this.loading=!1})},formatCapitalized(t){return G_(t)}}},kT={class:"fluent-cart-admin-pages"},xT={class:"-mx-5 pb-5 border border-solid border-t-0 border-x-0 border-gray-divider dark:border-dark-400"},FT={class:"px-5"},ST={class:"fc_product_search_table",ref:"fc_product_search_table"},ET={class:"fc-collapsible-list"},UT={class:"fc-collapsible-list-item-inner"},QT={class:"fc-collapsible-item"},DT={class:"fc-collapsible-content-wrapper"},MT=["onClick"],IT={key:1,class:"content-indent"},TT={class:"content-checkbox"},$T={class:"content-img"},OT=["src","alt"],LT={class:"content-title"},VT={class:"title"},RT={key:0,class:"text-gray-500 dark:text-gray-400"},HT={key:1,class:"text"},PT={key:0,class:"fc-collapsible-stock-wrapper"},NT={key:0},KT={key:1,class:"text-red-500"},zT={class:"fc-collapsible-value-wrapper"},GT={key:0},jT={key:1},YT={class:"fc-collapsible-item-child-inner"},WT={class:"fc-collapsible-item"},qT={class:"fc-collapsible-content-wrapper"},XT={class:"content-checkbox"},JT={class:"content-img"},ZT=["src","alt"],e5={class:"content-title"},t5={class:"title"},a5={key:0,class:"text-gray-500 dark:text-gray-400"},s5={key:0},n5={key:1,class:"text"},o5={class:"fc-collapsible-stock-wrapper"},i5={key:0},r5={key:1,class:"text-red-500"},l5={class:"fc-collapsible-value-wrapper"},A5={class:"-mx-5 -mb-5 fc_product_search_pagination_wrap"},c5={class:"dialog-footer"};function d5(t,e,a,s,n,o){const i=C("DynamicIcon"),l=C("el-input"),A=C("el-skeleton"),u=C("el-checkbox"),h=C("Empty"),m=C("pagination"),_=C("el-button"),B=C("el-dialog");return f(),y("div",kT,[r(B,{width:"56%",ref:"fc_product_search_container",onClose:e[3]||(e[3]=b=>o.searchQuery=""),modelValue:n.orderAddModal,"onUpdate:modelValue":e[4]||(e[4]=b=>n.orderAddModal=b),title:t.$t("Add Items")},{default:c(()=>[d("div",xT,[d("div",FT,[r(l,{placeholder:t.$t("Search products"),autofocus:"",ref:"fc_product_search_new",onInput:e[0]||(e[0]=b=>o.fetchBySearch()),modelValue:o.searchQuery,"onUpdate:modelValue":e[1]||(e[1]=b=>o.searchQuery=b),clearable:""},{prefix:c(()=>[r(i,{name:"Search"})]),_:1},8,["placeholder","modelValue"])])]),d("div",ST,[r(A,{class:"px-5 py-4",loading:n.loading,rows:5,animated:""},null,8,["loading"]),n.loading?S("",!0):(f(),y(P,{key:0},[d("ul",ET,[(f(!0),y(P,null,j(n.availableProducts,(b,w)=>{var k,F,x,E,M,D,R,$,Q;return f(),y("li",{class:"fc-collapsible-list-item",key:w},[d("div",UT,[d("div",QT,[d("div",DT,[((k=b==null?void 0:b.children)==null?void 0:k.length)>0?(f(),y("div",{key:0,class:le(["content-collapsible-btn",{"is-collapsed":n.collapsedStates[w]}]),onClick:I=>o.handleToggleCollapse(w)},[r(i,{name:"CaretRight",class:"w-4 h-5"})],10,MT)):S("",!0),!((F=b==null?void 0:b.children)!=null&&F.length)>0?(f(),y("div",IT)):S("",!0),d("div",TT,[r(u,{modelValue:b.checked,"onUpdate:modelValue":I=>b.checked=I,onChange:I=>o.handleCheckboxChange(w,b),disabled:b.disable===!0||o.isAlreadyAdded(b.object_id)},null,8,["modelValue","onUpdate:modelValue","onChange","disabled"])]),d("div",$T,[d("img",{src:b.featured_media!=null?b.featured_media:o.Asset.getUrl("images/placeholder-small.svg"),alt:b.title},null,8,OT)]),d("div",LT,[d("div",VT,v(b.post_title),1),((x=b==null?void 0:b.other_info)==null?void 0:x.payment_type)==="subscription"&&((E=b.other_info)==null?void 0:E.billing_summary)!==""?(f(),y("small",RT,v((M=b.other_info)==null?void 0:M.billing_summary),1)):S("",!0),o.isAlreadyAdded(b.object_id)?(f(),y("div",HT,v(t.$t("Item already added")),1)):S("",!0)])]),((D=b==null?void 0:b.children)==null?void 0:D.length)==0?(f(),y("div",PT,[b.stockStatus=="in-stock"?(f(),y("span",NT,v(b.available!==1/0?b.available+o.translate(" Available"):o.translate("Unlimited")),1)):S("",!0),b.stockStatus==="out-of-stock"?(f(),y("span",KT,v(o.formatCapitalized(b.stockStatus)),1)):S("",!0)])):S("",!0),d("div",zT,[((R=b==null?void 0:b.children)==null?void 0:R.length)>0?(f(),y("span",GT,v(b.min_price!=b.max_price?t.formatNumber(b.min_price)+" - "+t.formatNumber(b.max_price):t.formatNumber(b.min_price)),1)):(f(),y("span",jT,v(t.formatNumber(b.price)),1))])]),(($=b==null?void 0:b.children)==null?void 0:$.length)>0?(f(),y("div",{key:0,class:le(["fc-collapsible-item-child-container",{"is-collapsed":n.collapsedStates[w]}])},null,2)):S("",!0),((Q=b==null?void 0:b.children)==null?void 0:Q.length)>0?(f(),y("div",{key:1,class:le(["fc-collapsible-item-child-container",{"is-collapsed":n.collapsedStates[w]}])},[d("ul",YT,[(f(!0),y(P,null,j(b.children,(I,L)=>{var V,N,Y,K,X;return f(),y("li",{key:L},[d("div",WT,[d("div",qT,[d("div",XT,[r(u,{modelValue:I.checked,"onUpdate:modelValue":re=>I.checked=re,onChange:re=>o.handleCheckboxChange(L,I),disabled:I.disable===!0||o.isAlreadyAdded(I.object_id)},null,8,["modelValue","onUpdate:modelValue","onChange","disabled"])]),d("div",JT,[d("img",{src:I.featured_media!=null?I.featured_media:t.appVars.asset_url+"images/placeholder-small.svg",alt:I.title},null,8,ZT)]),d("div",e5,[d("div",t5,v(I.title),1),((V=I==null?void 0:I.other_info)==null?void 0:V.payment_type)==="subscription"&&((N=I.other_info)==null?void 0:N.billing_summary)!==""?(f(),y("small",a5,[O(v(o.CurrencyFormatter.currencySign)+" "+v((Y=I.other_info)==null?void 0:Y.billing_summary)+" ",1),((K=I.other_info)==null?void 0:K.trial_days)>0?(f(),y("span",s5,[e[5]||(e[5]=d("br",null,null,-1)),O(" "+v(o.translate("Trial Days"))+": "+v((X=I.other_info)==null?void 0:X.trial_days),1)])):S("",!0)])):S("",!0),o.isAlreadyAdded(I.object_id)?(f(),y("div",n5,v(o.translate("Item already added")),1)):S("",!0)])]),d("div",o5,[I.stockStatus=="in-stock"?(f(),y("span",i5,v(I.available!==1/0?I.available+o.translate(" Available"):o.translate("Unlimited")),1)):S("",!0),I.stockStatus=="out-of-stock"?(f(),y("span",r5,v(o.formatCapitalized(I.stockStatus)),1)):S("",!0)]),d("div",l5,v(t.formatNumber(I.price)),1)])])}),128))])],2)):S("",!0)])])}),128))]),n.availableProducts.length===0?(f(),U(h,{key:0,icon:"Empty/ListView",text:o.translate("We could't find any products matching your search.")},null,8,["text"])):S("",!0)],64))],512),d("div",A5,[r(m,{pagerSizes:!1,hide_on_single:!1,pagination:n.paginate,onFetch:o.doSearch,onCurrentPageChanged:o.onCurrentPageChanged,onOnPerPageChanged:o.onPerPageChanged},null,8,["pagination","onFetch","onCurrentPageChanged","onOnPerPageChanged"])]),d("div",c5,[r(_,{onClick:e[2]||(e[2]=b=>n.orderAddModal=!1)},{default:c(()=>[O(v(o.translate("Cancel")),1)]),_:1}),r(_,{disabled:!this.selectedProducts.length,type:"primary",onClick:o.processProducts},{default:c(()=>[O(v(o.translate("Add Items")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["modelValue","title"])])}const Tg=ve(BT,[["render",d5]]),u5={key:0,class:"fc-downloadable-variation-selector"},f5={class:"price-info"},h5={key:0},cl={__name:"VariationSelector",props:{variant:{type:Object,required:!0}},setup(t){return(e,a)=>{var s;return t.variant?(f(),y("div",u5,[d("span",null,v(t.variant.variation_title),1),d("span",f5,[(s=t.variant.other_info)!=null&&s.repeat_interval?(f(),y("span",h5,v(g(lt).capitalize(t.variant.other_info.repeat_interval)),1)):S("",!0),d("span",null,v(g(st)(t.variant.item_price*100,!0)),1)])])):S("",!0)}}},p5={name:"Refund",components:{Badge:pt,VariationSelector:cl,DynamicIcon:G},props:["order_id","order","is_subscription","subscription_status","showRefundModal"],data(){return{transactions:{},maxRefundAmount:"",refundProcessing:!1,refundableTransactions:[],isShippingRefundable:!1,refund:{item_ids:[],transaction_id:"",amount:0,cancelSubscription:!0,reason:"",availableAmount:"",paymentMethod:"",manageStock:!1},totalPaid:0,refundNote:""}},computed:{CurrencyFormatter(){return Fe},isAnyProductManageStock(){var t;for(const e of this.order.order_items)if(e!=null&&e.variants&&((t=e==null?void 0:e.variants)==null?void 0:t.manage_stock)==="1")return!0;return!1},isSubscriptionCancelable(){return this.is_subscription&&this.subscription_status!=="canceled"&&this.subscription_status!=="expired"},checkMaxRefundAmount(){this.refund.amount>this.maxRefundAmount&&(this.refund.amount=this.maxRefundAmount)},refundTableItems(){let t=[];return!this.refund.item_ids||this.refund.item_ids.length===0?t=this.order.order_items:t=this.order.order_items.filter(e=>this.refund.item_ids.includes(e.id)),t.map(e=>({...e,restore_quantity:e.restore_quantity||0,refund_quantity:Number(e.refund_total)||0}))}},watch:{showRefundModal(t){this.refundNote=""},"order.order_items":{immediate:!0,handler(t){const e=t.filter(a=>Number(a.line_total)-Number(a.refund_total)>0);e.length===1?this.refund.item_ids=[e[0].id]:this.refund.item_ids=[]}}},methods:{translate:p,formatNumber:st,updateMaxRefund(){const t=this.refund.transaction_id;let e=this.refundableTransactions.find(n=>n.id===t);this.refund.amount=e.refundable?parseFloat(e.refundable/100):0,this.refund.paymentMethod=e.payment_method;const a=be.whereIn(this.order.order_items,"id",this.refund.item_ids),s=a.reduce((n,o)=>n+(o.line_total-o.refund_total)/100,0);this.refund.amount>s&&a.length>0&&(this.refund.amount=s),this.maxRefundAmount=this.refund.amount},updateRefundable(){this.refundableTransactions=this.transactions.filter(t=>t.status==="succeeded").map(t=>{var e;return{...t,refundable:t.total-(parseInt((e=t.meta)==null?void 0:e.refunded_total)||0)}}),this.refundableTransactions.length!==0&&(this.refund.transaction_id=this.refundableTransactions[0].id,this.refund.payment_method=this.refundableTransactions[0].payment_method,this.updateMaxRefund(this.refund.transaction_id))},processRefund(){if(this.refundProcessing=!0,!this.refund.amount)return this.refundProcessing=!1,this.handleMessage("Please add refund amount.","error");if(this.refund.amount>this.refund.availableAmount)return this.refundProcessing=!1,this.handleMessage(`Refund amount should not exceed: ${this.appVars.shop.currency_sign}${this.refund.availableAmount}`,"error");const t=this.refundTableItems.filter(e=>e.restore_quantity>0).map(e=>({id:e.id,variation_id:e.object_id,quantity:e.quantity,restore_quantity:e.restore_quantity}));this.refund.refunded_items=t,this.$post("orders/"+this.order_id+"/refund",{refund_info:this.refund,refunded_items:t}).then(e=>{this.refundNote=e}).catch(e=>{this.handleError(e)}).finally(()=>{this.updateRefundable(),this.refundProcessing=!1})}},mounted(){var t,e,a;this.refund.availableAmount=parseInt((t=this==null?void 0:this.order)==null?void 0:t.total_paid)-parseInt((e=this==null?void 0:this.order)==null?void 0:e.total_refund),this.transactions=(a=this.order)==null?void 0:a.transactions,this.transactions.length&&this.updateRefundable()}},m5={key:0,class:"fc-refund-note-list"},g5={class:"message"},_5={key:1},v5={class:"refund-item-info"},b5={class:"right"},y5={class:"price"},w5={class:"price light"},C5=["innerHTML"],B5={class:"form-note"},k5={style:{color:"#F04438","font-weight":"500"}},x5={class:"form-note form-note-tooltip"},F5={class:"dialog-footer is-border"},S5={key:0};function E5(t,e,a,s,n,o){const i=C("Badge"),l=C("el-option"),A=C("el-select"),u=C("el-form-item"),h=C("el-input"),m=C("el-checkbox"),_=C("el-col"),B=C("el-table-column"),b=C("el-input-number"),w=C("el-table"),k=C("DynamicIcon"),F=C("el-tooltip"),x=C("el-row"),E=C("el-form"),M=C("el-button");return f(),y("div",null,[n.refundNote?(f(),y("div",m5,[(f(!0),y(P,null,j(n.refundNote,(D,R)=>(f(),y("div",{key:R,class:"fc-refund-note-item"},[d("span",g5,v(D.message),1),r(i,{status:D.status},null,8,["status"])]))),128))])):(f(),y("div",_5,[r(E,{"label-position":"top","require-asterisk-position":"right"},{default:c(()=>[r(x,{gutter:10},{default:c(()=>[r(_,{lg:24},{default:c(()=>[r(u,{label:t.$t("Refund with transaction"),required:""},{default:c(()=>[r(A,{modelValue:n.refund.transaction_id,"onUpdate:modelValue":e[0]||(e[0]=D=>n.refund.transaction_id=D),placeholder:t.$t("Select"),onChange:o.updateMaxRefund},{default:c(()=>[(f(!0),y(P,null,j(n.refundableTransactions,D=>(f(),U(l,{key:D.id,label:o.translate("#%s - Paid %s",D.id,o.CurrencyFormatter.formatNumber(D.refundable,!0)),value:D.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])]),_:1},8,["label"]),r(u,{label:t.$t("Select Item/s")},{default:c(()=>[r(A,{modelValue:n.refund.item_ids,"onUpdate:modelValue":e[1]||(e[1]=D=>n.refund.item_ids=D),placeholder:t.$t("Select"),multiple:"",onChange:o.updateMaxRefund},{default:c(()=>[(f(!0),y(P,null,j(a.order.order_items,D=>(f(),U(l,{key:D.id,value:D.id,label:D.post_title+" - "+D.title+"  "+o.CurrencyFormatter.formatNumber(D.line_total-D.refund_total),class:"refund-item",disabled:Number(D.line_total)-Number(D.refund_total)<=0},{default:c(()=>[d("div",v5,[d("p",null,[O(v(D.post_title)+" ",1),d("span",null,"-"+v(D.title),1)]),d("div",b5,[d("span",y5,v(o.translate("Refundable: %s",o.CurrencyFormatter.formatNumber(D.line_total-D.refund_total))),1),d("span",w5,v(o.translate("Item price: %s",o.CurrencyFormatter.formatNumber(D.line_total))),1)])])]),_:2},1032,["value","label","disabled"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])]),_:1},8,["label"]),r(_,{lg:24},{default:c(()=>[r(u,{label:t.$t("Refund amount"),required:""},{default:c(()=>[r(h,{type:"number",min:1,max:n.maxRefundAmount,modelValue:n.refund.amount,"onUpdate:modelValue":e[2]||(e[2]=D=>n.refund.amount=D),modelModifiers:{number:!0},onInput:o.checkMaxRefundAmount},{prefix:c(()=>[d("span",{innerHTML:o.CurrencyFormatter.currencySign},null,8,C5)]),_:1},8,["max","modelValue","onInput"]),d("div",B5,[d("p",null,[O(v(t.$t("Max refund amount for this transaction:"))+" ",1),d("span",k5,v(o.CurrencyFormatter.formatNumber(n.maxRefundAmount*100)),1)])])]),_:1},8,["label"]),o.isSubscriptionCancelable?(f(),U(_,{key:0,lg:24},{default:c(()=>[r(u,{label:t.$t("Subscription")},{default:c(()=>[r(m,{label:t.$t("Cancel Subscription (if any)"),modelValue:n.refund.cancelSubscription,"onUpdate:modelValue":e[3]||(e[3]=D=>n.refund.cancelSubscription=D)},null,8,["label","modelValue"])]),_:1},8,["label"])]),_:1})):S("",!0),o.isAnyProductManageStock?(f(),U(_,{key:1,lg:24},{default:c(()=>[r(u,null,{default:c(()=>[r(m,{modelValue:n.refund.manageStock,"onUpdate:modelValue":e[4]||(e[4]=D=>n.refund.manageStock=D)},{default:c(()=>[O(v(t.$t("Restock Quantity")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})):S("",!0),n.refund.manageStock?(f(),U(_,{key:2,lg:24},{default:c(()=>[r(w,{data:o.refundTableItems,border:"",style:{width:"100%","margin-top":"15px"}},{default:c(()=>[r(B,{prop:"post_title",label:t.$t("Product"),"min-width":"200"},{default:c(({row:D})=>[d("span",null,v(D.post_title)+" - "+v(D.title),1)]),_:1},8,["label"]),r(B,{prop:"quantity",label:t.$t("Quantity"),width:"120",align:"center"},{default:c(({row:D})=>[d("span",null,v(D.quantity),1)]),_:1},8,["label"]),r(B,{label:t.$t("Restore Quantity"),width:"180",align:"center"},{default:c(({row:D})=>[r(b,{modelValue:D.restore_quantity,"onUpdate:modelValue":R=>D.restore_quantity=R,min:0,max:D.quantity},null,8,["modelValue","onUpdate:modelValue","max"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})):S("",!0),r(_,{lg:24},{default:c(()=>[r(u,{label:t.$t("Reason of refund")},{default:c(()=>[r(h,{modelValue:n.refund.reason,"onUpdate:modelValue":e[5]||(e[5]=D=>n.refund.reason=D)},null,8,["modelValue"]),d("div",x5,[d("p",null,[O(v(o.translate("Your customers can see this reason"))+" ",1),d("span",null,[r(F,{"popper-class":"fc-tooltip",placement:"top",content:o.translate("If set, possible values are duplicate fraudulent, and requested_by_customer If you believe the charge to be fraudulent, specifying fraudulent as the reason will add the associated card and email to your block lists")},{default:c(()=>[r(k,{name:"InformationFill"})]),_:1},8,["content"])])])])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),d("div",F5,[r(M,{type:"primary",onClick:Ke(o.processRefund,["prevent"]),loading:n.refundProcessing,disabled:n.refund.amount<=0},{default:c(()=>[O(v(n.refundProcessing?o.translate("Processing"):o.translate("Refund"))+" ",1),n.refund.amount?(f(),y("span",S5)):S("",!0),O(v(o.CurrencyFormatter.formatNumber(n.refund.amount*100)),1)]),_:1},8,["onClick","loading","disabled"])])]))])}const U5=ve(p5,[["render",E5]]),Q5={class:"fc-number-input"},D5=["disabled","min","max"],M5={class:"fc-number-input-buttons"},I5=["disabled"],T5=["disabled"],$5={style:{color:"red"}},$g={__name:"NumberInput",props:{min:{type:Number,default:1},max:{type:Number,default:999999},item:{type:Object,default:()=>({})},isDisabled:{type:Boolean,default:!1}},setup(t,{emit:e}){var F,x,E,M,D;const a=e,s=t,n=T(""),o=()=>{var R,$,Q,I;return(((R=s.item)==null?void 0:R.manage_stock)||((I=(Q=($=s.item)==null?void 0:$.variants)==null?void 0:Q.product_detail)==null?void 0:I.manage_stock))==1},i=T(((F=s.item)==null?void 0:F.quantity)||s.min),l=T(i.value),A=T(o()?((x=s.item)==null?void 0:x.available)||((M=(E=s.item)==null?void 0:E.variants)==null?void 0:M.available):s.max),u=T(o()?(D=s.item)==null?void 0:D.updated_stock:s.max);We().ctx;const h=J(()=>l.value<=s.min),m=J(()=>l.value>=u.value),_=()=>{n.value="",l.value<u.value&&(i.value++,l.value=i.value,a("update:value",i.value,u.value,s.item))},B=()=>{n.value="",l.value>s.min&&(i.value--,l.value=i.value,a("update:value",i.value,u.value,s.item))},b=(R,$)=>{n.value="",l.value=parseInt(l.value),(isNaN(l.value)||l.value==="")&&(i.value=1),l.value<s.min?(i.value=s.min,l.value=i.value):l.value>s.max?(i.value=s.min,l.value=i.value,n.value=p("Unable to adjust quantity")):l.value>u.value?(i.value=u.value,l.value=i.value,n.value=p("Available: %s in stock",u.value)):l.value>=s.min&&(l.value===u.value||l.value<u.value)&&(i.value=l.value,l.value=i.value),a("update:value",i.value,u.value,s.item)},w=R=>{R.key==="ArrowDown"&&l.value<=s.min&&R.preventDefault()},k=()=>{var R,$,Q,I,L;n.value="",i.value=((R=s.item)==null?void 0:R.quantity)||s.min,l.value=i.value,A.value=o()?(($=s.item)==null?void 0:$.available)||((I=(Q=s.item)==null?void 0:Q.variants)==null?void 0:I.available):s.max,u.value=o()?(L=s.item)==null?void 0:L.updated_stock:s.max};return Bn(()=>{k()}),ke(()=>s.item,R=>{k()},{deep:!0}),(R,$)=>(f(),y(P,null,[d("div",Q5,[ut(d("input",{disabled:t.isDisabled,"onUpdate:modelValue":$[0]||($[0]=Q=>l.value=Q),type:"number",onInput:$[1]||($[1]=Q=>{b()}),min:t.min,max:t.max,onKeydown:w},null,40,D5),[[O_,l.value,void 0,{number:!0}]]),d("div",M5,[d("button",{onClick:_,class:"increment-btn",disabled:m.value||t.isDisabled},[r(G,{name:"ChevronUp"})],8,I5),d("button",{onClick:B,class:"decrement-btn",disabled:h.value||t.isDisabled},[r(G,{name:"ChevronDown"})],8,T5)])]),d("span",$5,v(n.value),1)],64))}},O5={name:"PaymentLink",props:["order","order_id"],data(){return{fetchLink:!1,selectedMethod:"stripe",business_email:"",buyer_email:"",selectedTransaction:"0",use_vendor_checkout:!1,vendor_url:null,transactionIds:[],actionName:"copy",paymentUrl:"",paymentMethods:[{value:"stripe",label:"Stripe"},{value:"paypal",label:"PayPal"}]}},computed:{DynamicIcon(){return G},adminUrl(){return window.fluentCartAdminApp.admin_url}},components:{IconButton:we,DynamicIcon:G,CopyToClipboard:$a,InfoFilled:Sa},methods:{translate:p,updatePaymentLink(t){t?this.searchOldUrl():this.paymentUrl=this.order.custom_checkout_url},getPaymentLink(){this.fetchLink=!0,this.$get("orders/"+this.order_id+"/transactions/get_payment_link",{data:{method:this.selectedMethod,transaction:0,use_vendor_checkout:this.use_vendor_checkout,business_email:this.business_email,buyer_email:this.buyer_email}}).then(t=>{var e,a;this.vendor_url=(e=t==null?void 0:t.data)==null?void 0:e.redirect_to,this.paymentUrl=(a=t==null?void 0:t.data)==null?void 0:a.redirect_to,this.fetchLink=!1}).catch(t=>{this.handleError(t),this.fetchLink=!1,this.$emit("reload")})},makeSelectableId(){this.transactionIds=[],this.order.transactions.forEach(t=>{t.status!=="paid"&&this.transactionIds.push({label:t.id,value:t.id})})},searchOldUrl(){var e,a;this.selectedTransaction=this.transactionIds[this.transactionIds.length-1].value;const t=this.order.transactions.filter(s=>s.id==this.selectedTransaction&&s.payment_method==this.selectedMethod);this.paymentUrl=(a=(e=t[0])==null?void 0:e.meta)==null?void 0:a.payment_link},generatePaymentUrl(){this.paymentUrl=this.order.custom_checkout_url}},mounted(){this.makeSelectableId(),this.generatePaymentUrl()}},L5=["element-loading-text"],V5={class:"fc-payment-link-block"},R5={key:1,class:"fc-payment-link-block"};function H5(t,e,a,s,n,o){const i=C("CopyToClipboard"),l=C("el-button"),A=C("el-input"),u=C("el-form-item"),h=C("el-col"),m=C("el-row"),_=Ut("loading");return ut((f(),y("div",{class:"fc-payment-link grid gap-5","element-loading-text":o.translate("Please wait, Generating Payment link...")},[d("div",V5,[n.paymentUrl?(f(),U(i,{key:0,text:n.paymentUrl,tooltipText:o.translate("Copy Link"),placeholder:o.translate("No payment link available,Please setup custom checkout page!")},null,8,["text","tooltipText","placeholder"])):(f(),U(l,{key:1,target:"_blank",link:"",tag:"router-link",to:{name:"pages_setup"}},{default:c(()=>[O(v(o.translate("Create a custom checkout page to generate custom links.")),1)]),_:1}))]),n.selectedMethod==="paypal"&&n.use_vendor_checkout?(f(),U(m,{key:0,class:"el-form--label-top",gutter:20},{default:c(()=>[r(h,{md:24,lg:11},{default:c(()=>[r(u,{label:o.translate("PayPal Business/Seller Email")},{default:c(()=>[r(A,{modelValue:n.business_email,"onUpdate:modelValue":e[0]||(e[0]=B=>n.business_email=B),placeholder:"Enter your PayPal business/seller email"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),r(h,{md:24,lg:11},{default:c(()=>[r(u,{label:o.translate("PayPal Buyer Email (optional)")},{default:c(()=>[r(A,{modelValue:n.buyer_email,"onUpdate:modelValue":e[1]||(e[1]=B=>n.buyer_email=B),placeholder:"Enter The buyer email"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})):S("",!0),n.use_vendor_checkout?(f(),y("div",R5,[r(l,{type:"primary",onClick:o.getPaymentLink},{default:c(()=>[O(v(o.translate("Create new transaction & link")),1)]),_:1},8,["onClick"])])):S("",!0)],8,L5)),[[_,n.fetchLink]])}const P5=ve(O5,[["render",H5]]),N5={data(){return{showModal:!1,activity:{}}},components:{ConvertedTime:Ht,DynamicIcon:G,IconButton:we,Badge:pt},props:["activities","showManageActivity"],methods:{deleteModal(t){this.showModal=!0,this.activity=t},deleteActivity(){this.showModal=!1,this.$del("activity/"+this.activity.id,{}).then(t=>{var e;this.handleSuccess((e=t==null?void 0:t.data)==null?void 0:e.message),this.$emit("reload")})}}},K5={class:"fluent-cart-order-activity-list"},z5={class:"fluent-cart-order-activity-complete-icon"},G5={class:"fluent-cart-order-activity-details-container"},j5={class:"date-value"},Y5={class:"event-title"},W5=["innerHTML"],q5={key:0,class:"delete-activity-button"},X5={key:0,class:"p-4 text-center"},J5={class:"fc-delete-activity-content-heading"},Z5={class:"fc-delete-activity-content"},e$={class:"title"},t$={class:"text"},a$={class:"dialog-footer is-border"};function s$(t,e,a,s,n,o){const i=C("DynamicIcon"),l=C("ConvertedTime"),A=C("el-tag"),u=C("IconButton"),h=C("el-button"),m=C("el-dialog");return f(),y("div",K5,[(f(!0),y(P,null,j(a.activities,_=>(f(),y("div",{class:"fluent-cart-order-activity",key:_.id},[d("div",z5,[r(i,{name:"Check"})]),d("div",G5,[d("div",{class:le(`fluent-cart-order-activity-details fluent-cart-order-activity-status-${_.status}`)},[d("span",j5,[r(l,{"date-time":_.created_at},null,8,["date-time"])]),d("div",Y5,[d("span",null,v(t.$t(_.title)),1),r(A,{type:"info"},{default:c(()=>[O(v(_.created_by),1)]),_:2},1024)]),d("div",{class:"event-text",innerHTML:_.content},null,8,W5)],2),a.showManageActivity?(f(),y("div",q5,[r(u,{onClick:B=>o.deleteModal(_),size:"x-small",hover:"info"},{default:c(()=>[r(i,{name:"Delete"})]),_:2},1032,["onClick"])])):S("",!0)])]))),128)),a.activities.length?S("",!0):(f(),y("div",X5,v(t.$t("No activity found.")),1)),r(m,{title:t.$t("Delete Activity"),modelValue:n.showModal,"onUpdate:modelValue":e[1]||(e[1]=_=>n.showModal=_),"append-to-body":!0},{default:c(()=>[d("div",J5,v(t.$t("Are you sure, you want to delete this activity?")),1),d("div",Z5,[d("div",e$,[O(" #"+v(this.activity.id)+" "+v(this.activity.title)+" ",1),d("span",null," by "+v(n.activity.created_by),1)]),d("div",t$,v(this.activity.content),1)]),d("div",a$,[r(h,{onClick:e[0]||(e[0]=_=>n.showModal=!1),size:"small"},{default:c(()=>[O(v(t.$t("Cancel")),1)]),_:1}),r(h,{type:"primary",onClick:o.deleteActivity,size:"small"},{default:c(()=>[O(v(t.$t("Yes! Delete")),1)]),_:1},8,["onClick"])])]),_:1},8,["title","modelValue"])])}const Og=ve(N5,[["render",s$]]),n$={class:"fc-single-order-loader-wrap fc-layout-width"},o$={class:"single-page-header fc-page-loader-header flex items-start justify-between"},i$={class:"single-page-body"},r$={class:"fc-single-order"},l$={class:"fc-single-order-main"},A$={class:"fc-single-order-aside"},c$={class:"fc-admin-sidebar"},d$={__name:"SingleOrderLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton");return f(),y("div",n$,[d("div",o$,[r(n,{animated:"",class:"flex flex-col items-start gap-2"},{template:c(()=>[r(s,{class:"max-w-180"}),r(s,{class:"max-w-[100px]"})]),_:1}),r(n,{animated:"",class:"flex gap-2 max-w-180"},{template:c(()=>[r(s,{class:"w-1/4"}),r(s,{class:"w-3/4"})]),_:1})]),d("div",i$,[d("div",r$,[d("div",l$,[r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{border_bottom:"",title:e.$t("Order items")},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:3})]),_:1})]),_:1}),r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{border_bottom:"",title:e.$t("Payments")},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:3})]),_:1})]),_:1}),r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{border_bottom:"",title:e.$t("Transaction Details")},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:3})]),_:1})]),_:1}),r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{border_bottom:"",title:e.$t("Activity")},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:3})]),_:1})]),_:1})]),d("div",A$,[d("div",c$,[r(oe,null,{default:c(()=>[r(de,{title:e.$t("Notes"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:1})]),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(de,{title:e.$t("Customer Information"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:3})]),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(de,{title:e.$t("Labels"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:1})]),_:1})]),_:1})])])])])])}}},u$={name:"_Plans.vue",components:{Badge:pt},data(){return{}},props:["subscription","header","order","getOrderUrl"],computed:{subscriptionStatus(){var t;return(t=this.subscription)==null?void 0:t.status}},methods:{translate:p}},f$={class:"fc-subscription-plan-wrap"},h$={class:"fc-subs-status-wrap float-end"},p$={class:"fc-subs-title underline"},m$=["innerHTML"],g$={key:0,class:"cursor-pointer"};function _$(t,e,a,s,n,o){var A,u,h,m;const i=C("Badge"),l=C("router-link");return f(),y("div",f$,[d("div",h$,[r(i,{status:o.subscriptionStatus},null,8,["status"])]),r(l,{to:{name:"view_subscription",params:{subscription_id:(A=a.subscription)==null?void 0:A.id}}},{default:c(()=>{var _;return[d("p",p$,v(t.$t((_=a.subscription)==null?void 0:_.item_name)),1)]}),_:1},8,["to"]),d("p",{innerHTML:(u=a.subscription)==null?void 0:u.payment_info},null,8,m$),parseInt((h=a.order)==null?void 0:h.parent_id)?(f(),y("p",g$,[O(v(o.translate("Parent Order:"))+" ",1),d("a",{onClick:e[0]||(e[0]=_=>{var B;return a.getOrderUrl((B=a.order)==null?void 0:B.parent_id)})},"#"+v((m=a.order)==null?void 0:m.parent_id),1)])):S("",!0)])}const Lg=ve(u$,[["render",_$]]),v$={name:"SubscriptionPlanItem",props:["subscription","order","orderId","index","getOrderUrl"],emits:["reload","fetchOrder","cancelSubscription"],components:{CardContainer:oe,CardHeader:de,CardBody:ae,Plans:Lg,Refresh:od,Delete:hn,DynamicIcon:G,CancelSubscription:Z_},data(){return{loadingState:{pause:!1,resume:!1,cancel:!1,fetch:!1,reactivate:!1},cancelSubscriptionModal:!1,cancelReason:""}},computed:{permissions(){var a,s;const t=(((a=this.subscription)==null?void 0:a.status)||"").toLowerCase();let e=(s=this.subscription)==null?void 0:s.vendor_subscription_id;return{canFetch:!0,canPause:e&&!["canceled","paused","trialing","pending","intended","active(collection paused)"].includes(t),canResume:e&&["paused","active(collection paused)"].includes(t),canCancel:e&&!["canceled"].includes(t)}},paymentMethod(){var t;return((t=this.order)==null?void 0:t.payment_method)||""}},methods:{handleSubscriptionAction(t){t==="fetch_subscription"?this.confirmFetch():t==="pause_subscription"?this.confirmPause():t==="resume_subscription"?this.confirmResume():t==="cancel_subscription"&&this.confirmCancel()},confirmFetch(){var t;!this.subscription.vendor_subscription_id&&((t=this.order)==null?void 0:t.payment_method)!=="offline_payment"||_s.confirm("Fetch from remote and update the subscription?","Warning",{type:"warning",icon:Os(hn),cancelButtonText:"Back",confirmButtonText:"Fetch subscription!",beforeClose:async(e,a,s)=>{var n,o;if(e==="confirm")try{a.confirmButtonLoading=!0,this.loadingState.fetch=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/fetch`,{data:{vendor_charge_id:this.subscription.vendor_subscription_id}}),this.$notify({type:"success",title:"Success",message:"Subscription fetched successfully"}),this.$emit("reload")}catch(i){this.$notify({type:"error",title:"Error",message:p(((o=(n=i.response)==null?void 0:n.data)==null?void 0:o.message)||"Failed to fetch subscription")}),console.error(i)}finally{a.confirmButtonLoading=!1,this.loadingState.fetch=!1,s()}else s()}})},confirmPause(){this.subscription.vendor_subscription_id&&_s.prompt("Pause the active subscription?","Warning",{type:"warning",icon:Os(hn),inputPlaceholder:"Enter reason for pausing",inputPattern:/.+/,inputErrorMessage:"Reason is required",cancelButtonText:"Back",confirmButtonText:"Pause Subscription!",beforeClose:async(t,e,a)=>{var s,n;if(t==="confirm")try{e.confirmButtonLoading=!0,this.loadingState.pause=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/pause`,{data:{vendor_subscription_id:this.subscription.vendor_subscription_id,reason:e.inputValue}}),this.$notify({type:"success",title:"Success",message:"Subscription paused successfully"}),this.$emit("reload")}catch(o){this.$notify({type:"error",title:"Error",message:p(((n=(s=o.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to pause subscription")}),console.error(o)}finally{e.confirmButtonLoading=!1,this.loadingState.pause=!1,a()}else a()}})},confirmResume(){this.subscription.vendor_subscription_id&&_s.prompt(p("Resume the paused subscription?"),p("Warning"),{type:"warning",icon:Os(hn),inputPlaceholder:p("Enter reason for resuming"),inputPattern:/.+/,inputErrorMessage:p("Reason is required"),cancelButtonText:p("Back"),confirmButtonText:p("Resume Subscription!"),beforeClose:async(t,e,a)=>{if(t==="confirm")try{e.confirmButtonLoading=!0,this.loadingState.resume=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/resume`,{data:{vendor_subscription_id:this.subscription.vendor_subscription_id,reason:e.inputValue}}),this.$notify({type:"success",title:"Success",message:"Subscription resumed successfully"}),this.$emit("reload")}catch(s){this.$notify({type:"error",title:"Error",message:"Failed to resume subscription"}),console.error(s)}finally{e.confirmButtonLoading=!1,this.loadingState.resume=!1,a()}else a()}})},confirmCancel(){this.subscription.vendor_subscription_id&&(this.cancelSubscriptionModal=!0)},confirmReactivate(){this.subscription.vendor_subscription_id&&_s.confirm("Reactivate the canceled subscription?","Warning",{type:"warning",icon:Os(hn),cancelButtonText:"Back",confirmButtonText:p("Reactivate Subscription!"),beforeClose:async(t,e,a)=>{var s,n;if(t==="confirm")try{e.confirmButtonLoading=!0,this.loadingState.reactivate=!0,await this.$put(`orders/${this.orderId}/subscriptions/${this.subscription.id}/reactivate`,{data:{vendor_subscription_id:this.subscription.vendor_subscription_id}}),this.$notify({type:"success",title:"Success",message:"Subscription reactivated successfully"}),this.$emit("reload")}catch(o){this.$notify({type:"error",title:"Error",message:p(((n=(s=o.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to reactivate subscription")}),console.error(o)}finally{e.confirmButtonLoading=!1,this.loadingState.reactivate=!1,a()}else a()}})}}},b$={class:"more-btn"},y$={class:"text-red-600"};function w$(t,e,a,s,n,o){const i=C("DynamicIcon"),l=C("refresh"),A=C("el-icon"),u=C("el-dropdown-item"),h=C("delete"),m=C("el-dropdown-menu"),_=C("el-dropdown"),B=C("CardHeader"),b=C("plans"),w=C("CardBody"),k=C("CardContainer"),F=C("CancelSubscription");return f(),y(P,null,[r(k,null,{default:c(()=>[r(B,{title:t.$t("Subscription Plan"),border_bottom:"",title_size:"small"},{default:c(()=>[o.permissions.canFetch||o.permissions.canPause||o.permissions.canResume||o.permissions.canCancel?(f(),U(_,{key:0,trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:e[0]||(e[0]=x=>o.handleSubscriptionAction(x))},{dropdown:c(()=>[r(m,null,{default:c(()=>[o.permissions.canFetch?(f(),U(u,{key:0,command:"fetch_subscription"},{default:c(()=>[r(A,null,{default:c(()=>[r(l)]),_:1}),O(" "+v(t.$t("Fetch subscription -"))+" "+v(o.paymentMethod),1)]),_:1})):S("",!0),o.permissions.canPause?(f(),U(u,{key:1,command:"pause_subscription"},{default:c(()=>[r(A,null,{default:c(()=>[r(l)]),_:1}),O(" "+v(t.$t("Pause subscription -"))+" "+v(o.paymentMethod),1)]),_:1})):S("",!0),o.permissions.canResume?(f(),U(u,{key:2,command:"resume_subscription"},{default:c(()=>[r(A,null,{default:c(()=>[r(l)]),_:1}),O(" "+v(t.$t("Resume subscription -"))+" "+v(o.paymentMethod),1)]),_:1})):S("",!0),o.permissions.canCancel?(f(),U(u,{key:3,command:"cancel_subscription"},{default:c(()=>[r(A,null,{default:c(()=>[r(h)]),_:1}),d("span",y$,v(t.$t("Cancel subscription")),1)]),_:1})):S("",!0)]),_:1})]),default:c(()=>[d("span",b$,[r(i,{name:"More"})])]),_:1})):S("",!0)]),_:1},8,["title"]),r(w,null,{default:c(()=>[r(b,{onReload:e[1]||(e[1]=x=>t.$emit("reload")),getOrderUrl:a.getOrderUrl,subscription:a.subscription,order:a.order,header:t.$t("Subscription Plans #")+(a.index+1)},null,8,["getOrderUrl","subscription","order","header"])]),_:1})]),_:1}),r(F,{subscription:a.subscription,orderId:a.orderId,onClose:e[2]||(e[2]=x=>n.cancelSubscriptionModal=!1),modelValue:n.cancelSubscriptionModal,"onUpdate:modelValue":e[3]||(e[3]=x=>n.cancelSubscriptionModal=x),onReload:e[4]||(e[4]=x=>t.$emit("reload")),onCancelSubscription:o.confirmCancel},null,8,["subscription","orderId","modelValue","onCancelSubscription"])],64)}const C$=ve(v$,[["render",w$]]),B$={class:"fc-admin-sidebar-item"},k$={class:"fct-admin-summary-item-list"},x$={class:"fct-admin-summary-item"},F$={class:"font-medium"},S$={__name:"TaxInformationWidget",props:{taxId:{type:[Number,String],default:0}},setup(t){return(e,a)=>(f(),U(oe,null,{default:c(()=>[r(de,{title:g(p)("Tax Information"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[d("div",B$,[d("ul",k$,[d("li",x$,[d("span",F$,v(g(p)("Tax ID")),1),d("span",null,v(t.taxId||"--"),1)])])])]),_:1})]),_:1}))}},E$={name:"OrderBulkActions",components:{DynamicIcon:G},emits:["reload","addItem","addProduct","enableItemEditing","disableItemEditing","handlePaymentActions"],props:["order","trigger_action","isEditingItem","mode","triggerMode","shouldShowRefund","warningMessage"],data(){return{selected_action:"",showModal:!1,status_data:{order_status:this.order.status,shipping_status:this.order.shipping_status,payment_status:this.order.payment_status},doing_actions:!1,manage_stock:!0,shouldDisableEditing:["completed","archived","canceled"].includes(this.order.status),isCancelled:["canceled"].includes(this.order.status),isCompleted:["completed"].includes(this.order.status),isUnshippable:["unshippable"].includes(this.order.shipping_status)}},methods:{translate:p,handleCommandAction(t){if(this.selected_action=t,t==="shipping_status")this.changeShipping();else if(t==="delete_order")this.confirmDeleteOrder();else if(t==="order_complete")this.selected_action="order_status",this.completeOrder();else if(t==="order_cancel")this.selected_action="order_status",this.cancelOrder();else if(t==="order_processing")this.selected_action="order_status",this.backToProcessing();else if(t==="order_receipt")this.showModal=!1;else if(t==="generate_missing_licenses")this.generateMissingLicenses();else if(t==="refund_order")this.$emit("handlePaymentActions","refund");else if(t.action==="order_edit")if(t.isEditingItem)this.$emit("disableItemEditing");else{if(this.shouldDisableEditing)return;this.$emit("enableItemEditing")}else this.showModal=!0},confirmDeleteOrder(){this.$confirm(p("Are you sure you want to delete this order? This action can not be undone!"),p("Confirm Deleting"),{confirmButtonText:p("Yes, Delete"),cancelButtonText:p("Cancel"),cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{this.deleteOrder()})},deleteOrder(){this.deleting=!0,this.$del("orders/"+this.order.id).then(t=>{ad(t.message),this.$router.push({name:"orders"})}).catch(t=>{t.status_code=="422"?q.validationErrors(t):q.error(t==null?void 0:t.data)}).finally(()=>{this.deleting=!1})},changeShipping(){this.showModal=!0},completeOrder(){this.$confirm(p("Are you sure you want to complete this order!"),p("Please confirm"),{confirmButtonText:p("Yes, Mark order as complete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.updateOrderStatuses({order_status:"completed"})})},generateMissingLicenses(){this.$confirm(p("Are you sure you want to generate missing licenses!"),p("Please confirm"),{confirmButtonText:p("Yes, Generate all missing licenses!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.generateLicenses()})},generateLicenses(){this.doing_actions=!0,this.$post("orders/"+this.order.id+"/generate-missing-licenses",{}).then(t=>{q.success(t.message),this.$emit("reload")}).catch(t=>{t.status_code=="422"?q.validationErrors(t):q.error(t.message)}).finally(()=>{this.doing_actions=!1,this.showModal=!1})},backToProcessing(){this.$confirm(p("Are you sure you want to revert back processing this order!"),p("Please confirm"),{confirmButtonText:p("Yes, Mark order as processing!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.updateOrderStatuses({order_status:"processing"})})},cancelOrder(){this.$confirm(p("Are you sure you want to change the order status to Cancel? This action is irreversible and cannot be undone."),p("Please confirm"),{confirmButtonText:p("Yes, Changed status to Cancel"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{this.manage_stock=!0,this.updateOrderStatuses({order_status:"canceled"})})},changeShippingStatus(){let t={};this.manage_stock=!0,t[this.selected_action]=this.status_data[this.selected_action],this.updateOrderStatuses(t)},updateOrderStatuses(t){this.doing_actions=!0,this.$put("orders/"+this.order.id+"/statuses",{action:"change_"+this.selected_action,statuses:t,manage_stock:this.manage_stock}).then(e=>{q.success(e.message),this.$emit("reload")}).catch(e=>{e.status_code=="422"?q.validationErrors(e):q.error(e.message)}).finally(()=>{this.doing_actions=!1,this.showModal=!1})}}},U$={class:"fc-order-bulk-action-modal"},Q$={key:1,class:"more-btn"},D$={key:0},M$=["href"],I$={class:"dialog-footer"};function T$(t,e,a,s,n,o){const i=C("DynamicIcon"),l=C("el-button"),A=C("el-dropdown-item"),u=C("el-tooltip"),h=C("el-dropdown-menu"),m=C("el-dropdown"),_=C("el-option"),B=C("el-select"),b=C("el-form-item"),w=C("el-form"),k=C("el-dialog");return f(),y("div",U$,[r(m,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:o.handleCommandAction},{dropdown:c(()=>[r(h,null,{default:c(()=>{var F,x;return[a.trigger_action!=="add"?(f(),y("div",D$,[!n.isCancelled&&((F=a.order)==null?void 0:F.fulfillment_type)==="physical"?(f(),U(A,{key:0,command:"shipping_status"},{default:c(()=>[r(i,{name:"ShipmentStatus"}),O(" "+v(o.translate("Change Shipping Status")),1)]),_:1})):S("",!0),n.isCancelled?(f(),U(A,{key:1,command:"delete_order",class:"item-destructive"},{default:c(()=>[r(i,{name:"Delete"}),O(" "+v(o.translate("Delete order")),1)]),_:1})):S("",!0),a.order.status==="processing"?(f(),U(A,{key:2,command:"order_complete"},{default:c(()=>[r(i,{name:"Check"}),O(" "+v(o.translate("Mark As Complete")),1)]),_:1})):S("",!0),n.isCancelled?S("",!0):(f(),U(A,{key:3,command:"order_cancel"},{default:c(()=>[r(i,{name:"Cross"}),O(" "+v(o.translate("Cancel Order")),1)]),_:1})),a.order.status==="completed"?(f(),U(A,{key:4,command:"order_processing"},{default:c(()=>[r(i,{name:"Refresh"}),O(" "+v(o.translate("Back to processing")),1)]),_:1})):S("",!0),r(A,{command:"order_receipt",class:"item-link"},{default:c(()=>[d("a",{target:"_blank",href:a.order.receipt_url},[r(i,{name:"External"}),O(" "+v(o.translate("Receipt")),1)],8,M$)]),_:1}),(x=a.order)!=null&&x.has_missing_licenses?(f(),U(A,{key:5,command:"generate_missing_licenses"},{default:c(()=>[r(i,{name:"Files"}),O(" "+v(o.translate("Generate missing licenses")),1)]),_:1})):S("",!0),a.shouldShowRefund?(f(),U(A,{key:6,command:"refund_order",class:"bulk-action-only-mobile"},{default:c(()=>[r(i,{name:"Money"}),O(" "+v(o.translate("Refund")),1)]),_:1})):S("",!0),r(A,{command:{action:"order_edit",isEditingItem:a.isEditingItem},class:"bulk-action-only-mobile",disabled:n.shouldDisableEditing},{default:c(()=>[r(i,{name:"Edit"}),a.isEditingItem?(f(),y(P,{key:1},[O(v(o.translate("Disable Editing")),1)],64)):(f(),y(P,{key:0},[n.shouldDisableEditing?(f(),U(u,{key:0,placement:"top","popper-class":"fc-tooltip fc-disabled-edit-order-tooltip"},{content:c(()=>[O(v(a.warningMessage),1)]),default:c(()=>[O(" "+v(o.translate("Edit")),1)]),_:1})):(f(),y(P,{key:1},[O(v(o.translate("Edit")),1)],64))],64))]),_:1},8,["command","disabled"])])):S("",!0)]}),_:1})]),default:c(()=>[a.triggerMode==="button"?(f(),U(l,{key:0},{default:c(()=>[O(v(o.translate("More Action"))+" ",1),r(i,{name:"ChevronDown"})]),_:1})):(f(),y("span",Q$,[r(i,{name:"More"})]))]),_:1},8,["onCommand"]),r(k,{modelValue:n.showModal,"onUpdate:modelValue":e[2]||(e[2]=F=>n.showModal=F),title:o.translate("Update Shipping Status")},{default:c(()=>[r(w,{data:n.status_data,"label-position":"top"},{default:c(()=>[n.selected_action==="shipping_status"||n.selected_action==="all"?(f(),U(b,{key:0,label:o.translate("Shipping Status")},{default:c(()=>[r(B,{modelValue:n.status_data.shipping_status,"onUpdate:modelValue":e[0]||(e[0]=F=>n.status_data.shipping_status=F),placeholder:o.translate("Select Shipping Status")},{default:c(()=>[(f(!0),y(P,null,j(t.appVars.shipping_statuses,(F,x)=>(f(),U(_,{key:x,label:F,value:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):S("",!0)]),_:1},8,["data"]),d("span",I$,[r(l,{onClick:e[1]||(e[1]=F=>o.changeShippingStatus()),type:"primary"},{default:c(()=>[O(v(o.translate("Update")),1)]),_:1})])]),_:1},8,["modelValue","title"])])}const Nd=ve(E$,[["render",T$]]),$$={name:"Transaction",computed:{Str(){return lt}},components:{ConvertedTime:Ht,ArrowDown:Os(sd),Check:up,Badge:pt,DynamicIcon:G},props:["transactions","transaction","header","transaction_data","order_id"],emits:["reload"],data(){return{visible:!1,doing_action:!1,disputeHandleModal:!1,disputeForm:{dispute_note:""},disputeTransaction:null,loadingDisputeAction:!1}},methods:{translate:p,getCardBrand:dp,handleDispute(t){this.disputeHandleModal=!0,this.disputeTransaction=t},handleDisputeSubmit(t){this.loadingDisputeAction=!0,this.$post("orders/"+this.order_id+"/transactions/"+this.disputeTransaction.id+"/accept-dispute",{dispute_note:this.disputeForm.dispute_note}).then(e=>{this.$notify.success(e.message),this.$emit("reload"),this.disputeHandleModal=!1}).catch(e=>{this.$notify.error(e.message)}).finally(()=>{this.disputeHandleModal=!1,this.loadingDisputeAction=!1})},hasDisputedTransaction(t){return t.some(e=>e.transaction_type=="dispute"&&e.status=="succeeded")}}},O$={key:0,class:"fc-transaction-details -mt-[1px]"},L$={class:"fc-table-wrap"},V$={class:"p-0 m-0 text-xs text-gray-500"},R$={key:0},H$=["href"],P$={class:"flex items-center gap-2.5"},N$={key:0,class:"w-7"},K$=["title","src","alt"],z$={key:1,class:"capitalize"},G$={key:2},j$={class:"text-sm"},Y$={class:"text-sm text-gray-700"},W$={class:"text-sm flex gap-2"},q$=["href"];function X$(t,e,a,s,n,o){var F,x;const i=C("ConvertedTime"),l=C("el-table-column"),A=C("Badge"),u=C("el-tooltip"),h=C("el-button"),m=C("el-table"),_=C("el-form-item"),B=C("el-input"),b=C("el-form"),w=C("DynamicIcon"),k=C("el-dialog");return a.transactions.length>0?(f(),y("div",O$,[d("div",L$,[r(m,{data:a.transactions,class:"w-full"},{default:c(()=>[r(l,{label:o.translate("# Date"),width:"auto"},{default:c(E=>[d("div",null,[d("p",V$,"#"+v(E.row.id),1),r(i,{"date-time":E.row.created_at},null,8,["date-time"])])]),_:1},8,["label"]),r(l,{label:o.translate("Gateway ID"),width:"160"},{default:c(E=>[E.row.vendor_charge_id==""?(f(),y("span",R$,"--")):(f(),y("a",{key:1,class:"text-primary-500 dark:text-gray-50 link",target:"_blank",href:E.row.url},v(E.row.vendor_charge_id),9,H$))]),_:1},8,["label"]),r(l,{label:o.translate("Payment Method"),width:"140"},{default:c(E=>[d("div",P$,[o.getCardBrand(E.row.card_brand,E.row.payment_method_type)?(f(),y("div",N$,[d("img",{class:"w-full",title:E.row.payment_method,src:o.getCardBrand(E.row.card_brand,E.row.payment_method_type),alt:E.row.card_brand},null,8,K$)])):(f(),y("span",z$,v(E.row.payment_method_type),1)),E.row.card_last_4&&E.row.card_last_4!="0"?(f(),y("span",G$,v("..."+E.row.card_last_4),1)):S("",!0)])]),_:1},8,["label"]),r(l,{label:o.translate("Total"),width:"auto"},{default:c(E=>[d("span",null,v(t.formatNumber(E.row.total)),1)]),_:1},8,["label"]),r(l,{label:o.translate("Status"),width:"120"},{default:c(E=>{var M,D,R,$,Q,I;return[E.row.transaction_type=="dispute"?(f(),U(u,{key:0,effect:"dark",placement:"top",content:"Transaction dispute, please resolve it from action menu. Reason: "+((D=(M=E.row)==null?void 0:M.meta)==null?void 0:D.dispute_reason),"popper-class":"fc-label-hint-popover fc-tooltip"},{default:c(()=>[r(A,{class:"m-2 b-red",status:"dispute"},{default:c(()=>e[3]||(e[3]=[O(" Dispute ",-1)])),_:1,__:[3]})]),_:2},1032,["content"])):S("",!0),($=(R=E.row)==null?void 0:R.meta)!=null&&$.reason?(f(),U(u,{key:1,effect:"dark",placement:"top",content:o.translate((I=(Q=E.row)==null?void 0:Q.meta)==null?void 0:I.reason),"popper-class":"fc-label-hint-popover fc-tooltip"},{default:c(()=>{var L,V,N,Y;return[((V=(L=E.row)==null?void 0:L.meta)==null?void 0:V.disputed)=="yes"&&((Y=(N=E.row)==null?void 0:N.meta)==null?void 0:Y.dispute_resolved)=="no"?(f(),U(A,{key:0,status:E.row.status},{default:c(()=>{var K;return[O(v(E.row.status)+" "+v((K=E==null?void 0:E.row)==null?void 0:K.transaction_type),1)]}),_:2},1032,["status"])):(f(),U(A,{key:1,status:E.row.status},{default:c(()=>[O(v(E.row.status),1)]),_:2},1032,["status"]))]}),_:2},1032,["content"])):(f(),U(A,{key:2,status:E.row.status},{default:c(()=>[O(v(E.row.status),1)]),_:2},1032,["status"]))]}),_:1},8,["label"]),o.hasDisputedTransaction(a.transactions)?(f(),U(l,{key:0,label:o.translate("Actions"),width:"140"},{default:c(E=>[E.row.transaction_type=="dispute"&&E.row.status=="succeeded"?(f(),U(h,{key:0,type:"warning",size:"small",onClick:M=>o.handleDispute(E.row)},{default:c(()=>[O(v(o.translate("Handle dispute")),1)]),_:2},1032,["onClick"])):S("",!0)]),_:1},8,["label"])):S("",!0)]),_:1},8,["data"])]),r(k,{modelValue:n.disputeHandleModal,"onUpdate:modelValue":e[2]||(e[2]=E=>n.disputeHandleModal=E),title:"Handle Dispute #"+((x=(F=n.disputeTransaction)==null?void 0:F.meta)==null?void 0:x.dispute_id),width:"800px"},{footer:c(()=>{var E,M,D,R,$,Q;return[d("a",{href:(E=n.disputeTransaction)==null?void 0:E.url,target:"_blank",class:"el-button el-button--warning is-link"},v(o.translate("See dispute on ")+((M=n.disputeTransaction)==null?void 0:M.payment_method)),9,q$),(R=(D=n.disputeTransaction)==null?void 0:D.meta)!=null&&R.is_charge_refundable?(f(),U(h,{key:0,type:"primary",onClick:e[1]||(e[1]=()=>t.$emit("triggerRefundModal")),loading:n.loadingDisputeAction},{default:c(()=>[O(v(o.translate("Refund customer")),1)]),_:1},8,["loading"])):S("",!0),(Q=($=n.disputeTransaction)==null?void 0:$.meta)!=null&&Q.is_dispute_actionable?(f(),U(h,{key:1,type:"primary",onClick:o.handleDisputeSubmit,loading:n.loadingDisputeAction},{default:c(()=>[O(v(o.translate("Accept Dispute")),1)]),_:1},8,["onClick","loading"])):S("",!0)]}),default:c(()=>{var E,M,D,R,$,Q;return[(M=(E=n.disputeTransaction)==null?void 0:E.meta)!=null&&M.dispute_reason?(f(),U(_,{key:0},{default:c(()=>{var I,L;return[d("div",j$," Dispute Reason: "+v((L=(I=n.disputeTransaction)==null?void 0:I.meta)==null?void 0:L.dispute_reason),1)]}),_:1})):S("",!0),r(_,null,{default:c(()=>[d("div",Y$,v(o.translate("You may either counter the dispute by providing evidence to prove that the cardholder is the legitimate purchaser, or you can accept this dispute immediately to refund the cardholder and close the dispute.")),1)]),_:1}),(R=(D=n.disputeTransaction)==null?void 0:D.meta)!=null&&R.is_dispute_actionable?(f(),U(b,{key:1,model:n.disputeForm,"label-position":"top"},{default:c(()=>[r(_,{label:o.translate("Note"),prop:"dispute_note"},{default:c(()=>[r(B,{modelValue:n.disputeForm.dispute_note,"onUpdate:modelValue":e[0]||(e[0]=I=>n.disputeForm.dispute_note=I),placeholder:"(optional)",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])):S("",!0),(Q=($=n.disputeTransaction)==null?void 0:$.meta)!=null&&Q.is_charge_refundable?(f(),U(_,{key:2},{default:c(()=>[d("div",W$,[r(w,{class:"w-6 h-6",name:"Information"}),O(" "+v(o.translate("This dispute has refundable action, so you may refund the charge to the customer for a dispute resolution.")),1)])]),_:1})):S("",!0)]}),_:1},8,["modelValue","title"])])):S("",!0)}const Kd=ve($$,[["render",X$]]),zd=(t,e,a=0)=>{let s=0,n=0;return e&&(t.manual_discount_total=0),t.order_items&&t.order_items.forEach((o,i)=>{let l=o.updateStock||0;o.quantity<1?o.quantity=1:l!=0&&parseInt(o.quantity)>l&&(o.quantity=l),o.total=o.unit_price*o.quantity;let A=o.unit_price*o.quantity;if(t.manual_discount_total>0?o.discount_total=o.discount_total:e===!0?n+=o.discount_total:(!t.manual_discount_total===0?t.manual_discount_total-=o.discount_total:t.manual_discount_total=0,o.discount_total=0),s+=A,o.payment_type=="subscription"&&o.other_info.manage_setup_fee=="yes"){let u=parseInt(o.other_info.signup_fee);o.other_info.setup_fee_per_item=="yes"&&(u=u*o.quantity),s+=u}}),t.subtotal=s,t.coupon_discount_total=n,(t.subtotal<=0||t.subtotal<=t.manual_discount_total)&&(t.manual_discount_total=t.coupon_discount_total=t.shipping_tax=t.shipping_total=t.tax_total=0),J$(t),t},Bh=(t,e)=>{if(e.value<0)return t;let a=e.value?e.value*100:0;e.label="",e.type==="percentage"&&(a=t.subtotal*e.value/100),Vg(e),a=parseInt(a),a>=0&&a<=parseInt(t.subtotal)&&(t.manual_discount_total=a);let s=t.subtotal*1+t.tax_total*1+t.shipping_total*1-t.manual_discount_total-t.coupon_discount_total;return s>=0&&(t.total_amount=s),t},J$=t=>(t.total_amount=t.subtotal*1+t.tax_total*1+t.shipping_tax*1+t.shipping_total*1-t.manual_discount_total-t.coupon_discount_total,t),Vg=t=>(t.type==="percentage"&&(t.label="(-"+t.value+"%)"),t),Z$={name:"NoteModal",props:["note"],data(){return{notes:this.note}},watch:{note:{handler:function(t,e){this.notes=t},deep:!0}},methods:{saveNote(){this.$emit("whenNoteEditIsDone",this.notes,!1)},closeModal(){this.$emit("closeModal")}},mounted(){}},e9={class:"fc-note-modal"},t9={class:"dialog-footer"};function a9(t,e,a,s,n,o){const i=C("el-input"),l=C("el-form-item"),A=C("el-form"),u=C("el-button");return f(),y("div",e9,[r(A,{"label-position":"top"},{default:c(()=>[r(l,null,{default:c(()=>[r(i,{modelValue:n.notes,"onUpdate:modelValue":e[0]||(e[0]=h=>n.notes=h),autosize:{minRows:4},type:"textarea",minlength:"1",maxlength:"5000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),d("div",t9,[r(u,{type:"info",soft:"",onClick:o.closeModal},{default:c(()=>[O(v(t.$t("Cancel")),1)]),_:1},8,["onClick"]),r(u,{type:"primary",onClick:o.saveNote},{default:c(()=>[O(v(t.$t("Save")),1)]),_:1},8,["onClick"])])])}const Rg=ve(Z$,[["render",a9]]),s9={class:"fc-admin-sidebar-item"},n9={key:0},o9={name:"Notes",props:{note:{type:String,default:""},shouldEnableEditing:{type:Boolean,default:!0},orderId:{type:[String,Number]}},components:{IconButton:we,NoteModal:Rg,DynamicIcon:G},data(){return{noteModalIsOpen:!1,isNoteExpanded:!1,noteCopy:this.note,loading:!1}},watch:{note:{handler(t,e){this.noteCopy=t},deep:!0,immediate:!0}},computed:{noteNeedsCollapse(){var t;return((t=this.noteCopy)==null?void 0:t.length)>355},noteTextToDisplay(){return this.isNoteExpanded||!this.noteNeedsCollapse?this.noteCopy:this.noteCopy.substring(0,355)+"..."}},methods:{saveNoteModal(t,e){this.loading=!0,this.noteModalIsOpen=e,this.$emit("whenNoteEditIsDone",t),this.orderId&&this.$post("notes/attach",{order_id:this.orderId,note:t}).then(a=>{q.success(a.message),this.noteCopy=t}).catch(a=>{q.error(a.message)}).finally(()=>{this.loading=!1})},toggleNoteText(){this.isNoteExpanded=!this.isNoteExpanded}},mounted(){}},Nl=Object.assign(o9,{setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton"),o=C("el-button"),i=C("el-dialog");return f(),y("div",null,[t.orderId?(f(),U(oe,{key:0},{default:c(()=>[r(de,{title:e.$t("Notes"),border_bottom:"",title_size:"small"},{action:c(()=>[t.shouldEnableEditing?(f(),U(we,{key:0,size:"x-small",bg:"transparent",tag:"button",border:"transparent",onClick:a[0]||(a[0]=l=>e.noteModalIsOpen=!0)},{default:c(()=>[r(G,{name:"Edit"})]),_:1})):S("",!0)]),_:1},8,["title"]),r(ae,{class:le(e.noteNeedsCollapse?"pb-0":"")},{default:c(()=>[d("div",s9,[e.loading?(f(),U(n,{key:0,animated:""},{template:c(()=>[r(s,{variant:"p"})]),_:1})):(f(),y(P,{key:1},[d("span",null,v(e.noteCopy?e.noteTextToDisplay:e.$t("No notes")),1),e.noteNeedsCollapse?(f(),U(o,{key:0,class:"fc-show-more-button",onClick:e.toggleNoteText,text:""},{default:c(()=>[e.isNoteExpanded?(f(),y(P,{key:0},[O(v(e.$t("Show less"))+" ",1),r(G,{name:"ChevronUp"})],64)):(f(),y(P,{key:1},[O(v(e.$t("Show more"))+" ",1),r(G,{name:"ChevronDown"})],64))]),_:1},8,["onClick"])):S("",!0)],64))])]),_:1},8,["class"])]),_:1})):S("",!0),r(i,{"append-to-body":!0,width:"45%",modelValue:e.noteModalIsOpen,"onUpdate:modelValue":a[2]||(a[2]=l=>e.noteModalIsOpen=l),title:e.noteCopy?e.$t("Edit Note"):e.$t("Add Note")},{default:c(()=>[e.noteModalIsOpen?(f(),y("div",n9,[r(Rg,{note:e.noteCopy,onWhenNoteEditIsDone:e.saveNoteModal,onCloseModal:a[1]||(a[1]=l=>e.noteModalIsOpen=!1)},null,8,["note","onWhenNoteEditIsDone"])])):S("",!0)]),_:1},8,["modelValue","title"])])}}}),i9={name:"Coupon",components:{IconButton:we,DynamicIcon:G},props:{order:{type:Object,default:()=>({})},appliedCouponsAttributes:{type:Array,default:()=>[]},hasCouponAttributes:{type:Boolean,default:!1},couponsAttributes:{type:Array,default:()=>[]},action:{type:String,default:""},shouldManageCoupon:{type:Boolean,default:!0}},data(){return{appliedCoupons:[...this.appliedCouponsAttributes],hasCoupon:this.hasCouponAttributes,availableCoupons:[],newCoupon:"",coupons:[...this.couponsAttributes]}},methods:{translate:p,searchCoupon(t,e){this.fetchCoupon(t,e)},fetchCoupon(t="",e=()=>{}){this.$get("coupons",{search:t,select:"code",scopes:["active"]}).then(a=>{var o;const s=(o=a.coupons)==null?void 0:o.data;this.availableCoupons=s.map(i=>i.code);const n=this.availableCoupons.filter(i=>i.toLowerCase().includes(t.toLowerCase())).map(i=>({value:i}));e(n)}).catch(a=>{a.status_code=="422"?q.validationErrors(a):q.error(a.message)}).finally(()=>{})},applyCoupon(){if(this.coupons&&this.coupons.find(t=>t.code===this.newCoupon)){q.error(this.translate("Coupon already applied"));return}this.$post("coupons/apply",{coupon_code:this.newCoupon,order_items:this.order.order_items,order_uuid:this.order.uuid,applied_coupons:this.appliedCoupons}).then(t=>{this.processCoupon(t),this.newCoupon=""}).catch(t=>{t.status_code=="422"?q.validationErrors(t):q.error(t.message)})},cancelCoupon(t,e){this.$post("coupons/cancel",{id:e.id,coupon_code:e.code,order_uuid:this.order.uuid,applied_coupons:this.appliedCoupons,order_items:this.order.order_items}).then(a=>{this.processCoupon(a)}).catch(a=>{a.status_code=="422"?q.validationErrors(a):q.error(a.message)}).finally(()=>{})},reApplyCoupon(){this.$post("coupons/re-apply",{order_items:this.order.order_items,order_uuid:this.order.uuid,applied_coupons:this.appliedCoupons}).then(t=>{this.processCoupon(t)}).catch(t=>{t.status_code=="422"?q.validationErrors(t):q.error(t.message)}).finally(()=>{})},processCoupon(t){this.coupons=[],this.appliedCoupons=[];for(let n in t.applied_coupons)this.coupons.push({id:t.applied_coupons[n].id,code:n,amount:t.applied_coupons[n].discount}),this.appliedCoupons.push(t.applied_coupons[n].id);let e=0,a=0;const s=Object.values(t.calculated_items);this.order.order_items.forEach((n,o)=>{const i=s.find(l=>l.id==n.object_id);i!=null&&(this.order.order_items[o].price=i.price,this.order.order_items[o].unit_price=i.unit_price,this.order.order_items[o].line_total=i.unit_price*i.quantity-i.discount_total,e+=this.order.order_items[o].line_total,a+=i.discount_total,this.order.order_items[o].line_total_formatted=i.line_total_formatted,this.order.order_items[o].discount_total=i.discount_total)}),this.order.applied_coupon=t.applied_coupons,this.hasCoupon=this.coupons.length>0,zd(this.order,this.hasCoupon,a),this.$emit("update:coupons",this.coupons,this.appliedCoupons,this.hasCoupon)}},mounted(){}},r9={colspan:"3"},l9={class:"fc-add-coupon-wrap"},A9={key:0,class:"fc-add-coupon-input-label"},c9={key:1,class:"fc-add-coupon-input-label"},d9={key:2,class:"fc-add-coupon-input-wrap"},u9={class:"flex gap-0.5 items-center"};function f9(t,e,a,s,n,o){const i=C("el-autocomplete"),l=C("el-button"),A=C("el-alert"),u=C("DynamicIcon"),h=C("IconButton"),m=C("el-popconfirm");return f(),y(P,null,[d("tr",null,[d("td",r9,[d("div",l9,[a.action==="create_order"?(f(),y("div",A9,v(t.$t("Have a Coupon?")),1)):(f(),y("div",c9,v(a.shouldManageCoupon?t.$t("Have a Coupon?"):n.hasCoupon?t.$t("Coupons"):t.$t("")),1)),a.shouldManageCoupon?(f(),y("div",d9,[r(i,{modelValue:n.newCoupon,"onUpdate:modelValue":e[0]||(e[0]=_=>n.newCoupon=_),"fetch-suggestions":o.searchCoupon,"trigger-on-focus":!1,clearable:"",class:"w-full",placeholder:t.$t("Enter coupon code")},null,8,["modelValue","fetch-suggestions","placeholder"]),r(l,{onClick:o.applyCoupon,type:"info",soft:"",class:"el-button--x-small"},{default:c(()=>[O(v(t.$t("Apply")),1)]),_:1},8,["onClick"])])):S("",!0),!n.hasCoupon&&a.shouldManageCoupon?(f(),U(A,{key:3,title:t.$t("If you apply coupon, regular discounts for this order will be removed."),type:"warning","show-icon":""},null,8,["title"])):S("",!0),e[1]||(e[1]=d("span",null,null,-1))])])]),(f(!0),y(P,null,j(n.coupons,_=>(f(),y("tr",{key:_.id,class:"fc-coupons-applied-row"},[d("td",null,[d("div",u9,[d("span",null,v(_.code),1),a.action==="create_order"?(f(),U(h,{key:0,bg:"transparent",border:"transparent",tag:"a",size:"x-small",onClick:Ke(B=>o.cancelCoupon(_.id,_),["prevent"]),class:"coupon-delete-btn"},{default:c(()=>[r(u,{name:"Delete"})]),_:2},1032,["onClick"])):S("",!0),a.action==="edit_order"?(f(),U(m,{key:1,icon:"InfoFilled","icon-color":"#626AEF",title:o.translate("Are you sure to cancel this coupon? This action is not recoverable"),onConfirm:B=>o.cancelCoupon(_.id,_),width:"250"},{reference:c(()=>[a.shouldManageCoupon?(f(),U(h,{key:0,bg:"transparent",border:"transparent",tag:"a",size:"x-small",class:"coupon-delete-btn"},{default:c(()=>[r(u,{name:"Delete"})]),_:1})):S("",!0)]),_:2},1032,["title","onConfirm"])):S("",!0)])]),e[2]||(e[2]=d("td",null,null,-1)),d("td",null,"- "+v(t.formatNumber(_.amount)),1)]))),128))],64)}const Kl=ve(i9,[["render",f9]]),h9={name:"DiscountModal",props:["discount","showModal","totalAmount"],setup(t,{emit:e}){const a=zo({...t.discount}),s=T([{label:p("Amount"),value:"amount"}]),n=T("");return{discountOptions:s,applyDiscount:()=>{const A=parseInt(a.value);isNaN(A)||A<1?a.value=1:e("whenDiscountEditIsDone",!1,{...a})},cancelDiscount:()=>{e("emitCancelDiscountModal")},initialDiscount:a,isDisabledApplyButton:()=>{n.value="";const A=parseInt(a.value);let u=A||0;const h=t.totalAmount/100;return a.type=="percentage"?(u=h*A/100,(A>100||u>h)&&(n.value=p("Discount should not exceed the full product price (100%).")),isNaN(A)||A<1||A>100):(u>h&&(n.value=p("Discount should not exceed the full product price (%s).",Y_(h))),isNaN(A)||A<1||u>h)},error:n}}},p9={class:"fc-discount-modal"},m9=["innerHTML"],g9={key:1},_9={style:{color:"red"}},v9={class:"form-note"},b9={class:"dialog-footer"};function y9(t,e,a,s,n,o){const i=C("el-option"),l=C("el-select"),A=C("el-form-item"),u=C("el-col"),h=C("el-input"),m=C("el-row"),_=C("el-form"),B=C("el-button");return f(),y("div",p9,[r(_,{"label-position":"top"},{default:c(()=>[r(m,{gutter:20},{default:c(()=>[r(u,{md:12,sm:12,xs:24},{default:c(()=>[r(A,{label:t.$t("Discount type")},{default:c(()=>[r(l,{modelValue:s.initialDiscount.type,"onUpdate:modelValue":e[0]||(e[0]=b=>s.initialDiscount.type=b),placeholder:t.$t("Select"),onChange:e[1]||(e[1]=b=>{s.error=""})},{default:c(()=>[(f(!0),y(P,null,j(s.discountOptions,b=>(f(),U(i,{key:b.value,label:b.label,value:b.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),r(u,{md:12,sm:12,xs:24},{default:c(()=>[r(A,{label:t.$t("Discount value")},{default:c(()=>[r(h,{type:"number",min:1,modelValue:s.initialDiscount.value,"onUpdate:modelValue":e[2]||(e[2]=b=>s.initialDiscount.value=b),modelModifiers:{number:!0},onKeyup:s.isDisabledApplyButton},{prefix:c(()=>[s.initialDiscount.type==="amount"?(f(),y("span",{key:0,innerHTML:t.appVars.shop.currency_sign},null,8,m9)):(f(),y("span",g9,"%"))]),_:1},8,["modelValue","onKeyup"]),d("span",_9,v(s.error),1)]),_:1},8,["label"])]),_:1})]),_:1}),r(m,null,{default:c(()=>[r(u,{md:24,sm:12,xs:24},{default:c(()=>[r(A,{label:t.$t("Reason for discount")},{default:c(()=>[r(h,{modelValue:s.initialDiscount.reason,"onUpdate:modelValue":e[3]||(e[3]=b=>s.initialDiscount.reason=b),minlength:"1",maxlength:"255","show-word-limit":""},null,8,["modelValue"]),d("div",v9,[d("p",null,v(t.$t("Customer can see this reason")),1)])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),d("div",b9,[r(B,{type:"info",onClick:s.cancelDiscount,soft:""},{default:c(()=>[O(v(t.$t("Cancel")),1)]),_:1},8,["onClick"]),r(B,{type:"primary",disabled:s.isDisabledApplyButton(),onClick:s.applyDiscount},{default:c(()=>[O(v(t.$t("Apply")),1)]),_:1},8,["disabled","onClick"])])])}const w9=ve(h9,[["render",y9]]),C9={name:"CustomDiscount",components:{IconButton:we,DynamicIcon:G,DiscountModal:w9},props:{order:{type:Object,default:()=>({})},discountAttributes:{type:Object,default:()=>({type:"amount",label:"",reason:""})},hasCoupon:{type:Boolean,default:!1},shouldEnableEditing:{type:Boolean,default:!0}},data(){return{discountModalIsOpen:!1,discount:this.discountAttributes}},methods:{translate:p,getDiscountButtonLabel(){return!this.shouldEnableEditing&&this.order.order_items.length>0?p("Discount"):this.order.manual_discount_total!==0?p("Edit Discount"):p("Add Discount")},manageDiscount(){this.discount.action=parseInt(this.order.manual_discount_total)>0?"edit":"add",this.shouldEnableEditing&&!this.hasCoupon&&this.order.order_items.length>0&&(this.discountModalIsOpen=!0)},removeDiscount(){this.discount={},Bh(this.order,this.discount),this.$emit("update:custom-discount",this.discount)},applyDiscount(t,e){this.discount=e,Bh(this.order,this.discount),this.discountModalIsOpen=t,this.$emit("update:custom-discount",this.discount)}},mounted(){}},B9={key:0},k9={key:1},x9={key:2},F9={key:0};function S9(t,e,a,s,n,o){const i=C("DynamicIcon"),l=C("discount-modal"),A=C("el-dialog");return f(),y(P,null,[a.order.manual_discount_total>0||a.order.manual_discount_total===0&&a.shouldEnableEditing?(f(),y("tr",B9,[d("td",null,[a.shouldEnableEditing&&!a.hasCoupon&&a.order.order_items.length>0?(f(),y("a",{key:0,href:"#",onClick:e[0]||(e[0]=Ke(u=>o.manageDiscount(),["prevent"]))},[O(v(o.getDiscountButtonLabel())+" ",1),r(i,{name:"External"})])):(f(),y("span",k9,v(o.getDiscountButtonLabel()),1)),n.discount.label?(f(),y("span",x9,v(n.discount.label),1)):S("",!0),a.order.manual_discount_total&&a.shouldEnableEditing?(f(),y(P,{key:3},[e[4]||(e[4]=O(" | ",-1)),d("a",{href:"#",onClick:e[1]||(e[1]=Ke(u=>o.removeDiscount(),["prevent"]))},v(o.translate("Remove Discount")),1)],64)):S("",!0)]),d("td",null,v(n.discount.reason?n.discount.reason:"__"),1),d("td",null,[d("span",null,"- "+v(t.formatNumber(a.order.manual_discount_total)),1)])])):S("",!0),r(A,{"append-to-body":!0,width:"50%",modelValue:n.discountModalIsOpen,"onUpdate:modelValue":e[3]||(e[3]=u=>n.discountModalIsOpen=u),title:a.order.manual_discount_total===0?o.translate("Add discount"):o.translate("Edit discount")},{default:c(()=>[n.discountModalIsOpen?(f(),y("div",F9,[r(l,{discount:n.discount,totalAmount:a.order.subtotal,onWhenDiscountEditIsDone:o.applyDiscount,onEmitCancelDiscountModal:e[2]||(e[2]=u=>n.discountModalIsOpen=!1)},null,8,["discount","totalAmount","onWhenDiscountEditIsDone"])])):S("",!0)]),_:1},8,["modelValue","title"])],64)}const zl=ve(C9,[["render",S9]]),E9={name:"ShippingModal",props:["shipping","shipping_type"],setup(t,{emit:e}){const a=T(t.shipping_type);return{availableOptions:T([{label:"Custom",value:"custom"}]),updatingIsDone:()=>parseInt(t.shipping.custom_price)<0?t.shipping.custom_price=0:(parseInt(t.shipping.custom_price)==0&&(t.shipping.custom_price=0),t.shipping.rate_name=t.shipping.rate_name==""||t.shipping.rate_name==null?"Custom":t.shipping.rate_name,t.shipping.type=a.value,e("whenShippingEditIsDone",!1)),removeShipping:()=>{t.shipping.type="",t.shipping.custom_price="",t.shipping.rate_name="",e("whenShippingEditIsDone",!1)},isDisabledApplyButton:()=>{const l=parseInt(t.shipping.custom_price);return isNaN(l)||l<0},shippingType:a}}},U9={class:"fc-shipping-modal"},Q9=["innerHTML"],D9={class:"dialog-footer"};function M9(t,e,a,s,n,o){const i=C("el-radio"),l=C("el-radio-group"),A=C("el-form-item"),u=C("el-col"),h=C("el-row"),m=C("el-input"),_=C("el-form"),B=C("el-button");return f(),y("div",U9,[r(_,{"label-position":"top","require-asterisk-position":"right"},{default:c(()=>[r(h,{gutter:20},{default:c(()=>[r(u,{md:24,sm:24,xs:24},{default:c(()=>[r(A,{label:t.$t(""),required:""},{default:c(()=>[r(l,{modelValue:s.shippingType,"onUpdate:modelValue":e[0]||(e[0]=b=>s.shippingType=b)},{default:c(()=>[(f(!0),y(P,null,j(s.availableOptions,(b,w)=>(f(),U(i,{label:b.value,key:w},{default:c(()=>[O(v(b.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),s.shippingType==="custom"?(f(),U(h,{key:0,gutter:15},{default:c(()=>[r(u,{md:12,sm:12,xs:24},{default:c(()=>[r(A,{label:t.$t("Name")},{default:c(()=>[r(m,{type:"text",modelValue:a.shipping.rate_name,"onUpdate:modelValue":e[1]||(e[1]=b=>a.shipping.rate_name=b)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),r(u,{md:12,sm:12,xs:24},{default:c(()=>[r(A,{label:t.$t("Price")},{default:c(()=>[r(m,{type:"number",min:1,modelValue:a.shipping.custom_price,"onUpdate:modelValue":e[2]||(e[2]=b=>a.shipping.custom_price=b),modelModifiers:{number:!0},onKeyup:s.isDisabledApplyButton},{prefix:c(()=>[d("span",{innerHTML:t.appVars.shop.currency_sign},null,8,Q9)]),_:1},8,["modelValue","onKeyup"])]),_:1},8,["label"])]),_:1})]),_:1})):S("",!0)]),_:1}),d("div",D9,[a.shipping.type?(f(),U(B,{key:0,type:"danger",onClick:s.removeShipping},{default:c(()=>[O(v(t.$t("Remove Shipping")),1)]),_:1},8,["onClick"])):S("",!0),r(B,{type:"primary",onClick:s.updatingIsDone,disabled:s.isDisabledApplyButton()},{default:c(()=>[O(v(t.$t("Apply")),1)]),_:1},8,["onClick","disabled"])])])}const I9=ve(E9,[["render",M9]]),T9={name:"Shipping",components:{IconButton:we,DynamicIcon:G,ShippingModal:I9},props:{order:{type:Object,default:()=>({})},shippingAttributes:{type:Object,default:()=>({id:""})},shouldEnableEditing:{type:Boolean,default:!0},shippingMethodsProps:{type:Array,default:()=>[]},otherShippingMethodsProps:{type:Array,default:()=>[]}},data(){return{shippingModalIsOpen:!1,shipping:this.shippingAttributes,currency:window.fluentCartAdminApp.shop.currency_sign,shippingMethods:this.shippingMethodsProps,otherShippingMethods:this.otherShippingMethodsProps,total_shipping:this.order.shipping_total/100}},watch:{shippingMethodsProps:{handler:function(t,e){this.shippingMethods=t},deep:!0},otherShippingMethodsProps:{handler:function(t,e){this.otherShippingMethods=t},deep:!0},order:{handler:function(t,e){this.total_shipping=t.shipping_total/100},deep:!0}},methods:{formatNumber:st,translate:p,showShippingModal(){this.shippingModalIsOpen=!0},hasFreeShipping(){return Object.keys(this.shipping).length>0&&parseInt(this.shipping.custom_price)==0},getShippingButtonLabel(){return!this.shouldEnableEditing&&this.order.order_items.length>0?p("Shipping"):this.shipping.id!==0?p("Edit Shipping"):p("Add Shipping")},getShippingTitle(){if(this.shipping.id==0)return"__";const t=this.shippingMethods.find(e=>e.id==this.shipping.id);return t?t.title:"__"},updateShipping(){this.shippingModalIsOpen=!1;const t=[];this.order.order_items.length>0&&this.order.order_items.forEach(e=>{t.push({id:e.object_id,quantity:e.quantity,unit_price:e.unit_price,discount_total:e.discount_total})}),ne.post("orders/calculate-shipping",{shipping_id:this.shipping.id,order_items:t}).then(e=>{this.order.shipping_total=e.shipping_charge;const a={order_items:e.order_items,shipping_total:e.shipping_charge};this.total_shipping=this.order.shipping_total/100,this.$emit("update:shipping",a.order_items,a.shipping_total)}).catch(e=>{e.status_code=="422"?q.validationErrors(e):q.error(e.message)}).finally(()=>{this.shippingModalIsOpen=!1})},getShippingMethodsNotFoundMessage(){const t=this.$router.resolve({name:"shipping"}).href;return p("No shipping methods found. You can add shipping methods from %1s here %2s",`<a href="${t}" target="_blank" class="link-text">`,"</a>")}},mounted(){}},$9={key:1},O9={key:0},L9={key:1,class:"max-w-[120px] block ml-auto text-right"},V9={key:2},R9={key:0},H9={key:0,class:"fc-shipping-methods-list-wrap"},P9={key:0,class:"charge"},N9={key:1,class:"fc-other-shipping-methods-list-wrap"},K9={key:0,class:"charge"},z9={key:1,class:"fc-no-shipping-methods-found"},G9=["innerHTML"];function j9(t,e,a,s,n,o){const i=C("DynamicIcon"),l=C("el-input"),A=C("el-radio"),u=C("el-radio-group"),h=C("el-button"),m=C("el-dialog");return f(),y(P,null,[d("tr",null,[d("td",null,[a.shouldEnableEditing&&a.order.order_items.length>0?(f(),y("a",{key:0,href:"#",onClick:e[0]||(e[0]=Ke(_=>o.showShippingModal(),["prevent"]))},[O(v(o.getShippingButtonLabel())+" ",1),r(i,{name:"External"})])):(f(),y("span",$9,v(o.getShippingButtonLabel()),1))]),d("td",null,v(o.getShippingTitle()),1),d("td",null,[o.hasFreeShipping()?(f(),y("span",O9,[d("del",null,v(o.formatNumber(a.order.shipping_total)),1),O(" "+v(o.translate("Free")),1)])):S("",!0),a.shouldEnableEditing&&!o.hasFreeShipping()?(f(),y("span",L9,[r(l,{modelValue:n.total_shipping,"onUpdate:modelValue":e[1]||(e[1]=_=>n.total_shipping=_),onChange:e[2]||(e[2]=_=>{a.order.shipping_total=_*100}),type:"number"},{prefix:c(()=>[O(v(n.currency),1)]),_:1},8,["modelValue"])])):(f(),y("span",V9,v(o.formatNumber(a.order.shipping_total)),1))])]),r(m,{"append-to-body":!0,width:"50%",modelValue:n.shippingModalIsOpen,"onUpdate:modelValue":e[6]||(e[6]=_=>n.shippingModalIsOpen=_),title:t.$t("Shipping and delivery options")},vi({default:c(()=>[n.shippingModalIsOpen?(f(),y("div",R9,[n.shippingMethods.length||n.otherShippingMethods.length?(f(),y(P,{key:0},[n.shippingMethods.length?(f(),y("div",H9,[d("h3",null,v(o.translate("Shipping Methods")),1),r(u,{modelValue:n.shipping.id,"onUpdate:modelValue":e[3]||(e[3]=_=>n.shipping.id=_),class:"fc-shipping-methods-radio"},{default:c(()=>[(f(!0),y(P,null,j(n.shippingMethods,(_,B)=>(f(),U(A,{label:_.id,key:B},{default:c(()=>[O(v(_.title)+" ",1),_.shipping_charge?(f(),y("span",P9,v(o.formatNumber(_.shipping_charge)),1)):S("",!0)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])):S("",!0),n.otherShippingMethods.length?(f(),y("div",N9,[d("h3",null,v(o.translate("Other Shipping Methods")),1),r(u,{modelValue:n.shipping.id,"onUpdate:modelValue":e[4]||(e[4]=_=>n.shipping.id=_),class:"fc-shipping-methods-radio"},{default:c(()=>[(f(!0),y(P,null,j(n.otherShippingMethods,(_,B)=>(f(),U(A,{label:_.id,key:B},{default:c(()=>[O(v(_.title)+" ",1),_.shipping_charge?(f(),y("span",K9,v(o.formatNumber(_.shipping_charge)),1)):S("",!0)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])):S("",!0)],64)):(f(),y("div",z9,[d("span",{innerHTML:o.getShippingMethodsNotFoundMessage()},null,8,G9)]))])):S("",!0)]),_:2},[n.shippingMethods.length||n.otherShippingMethods.length?{name:"footer",fn:c(()=>[r(h,{onClick:e[5]||(e[5]=_=>n.shippingModalIsOpen=!1)},{default:c(()=>[O(v(o.translate("Cancel")),1)]),_:1}),r(h,{type:"primary",onClick:o.updateShipping},{default:c(()=>[O(v(o.translate("Apply")),1)]),_:1},8,["onClick"])]),key:"0"}:void 0]),1032,["modelValue","title"])],64)}const Gd=ve(T9,[["render",j9]]),Y9={key:0},W9={class:"fc-admin-sidebar-item"},q9={class:"fct-admin-summary-item-list"},X9={class:"fct-admin-summary-item"},J9={class:"font-medium"},Z9={key:0,class:"fct-admin-summary-item"},e6={class:"font-medium"},t6={key:1,class:"fct-admin-summary-item"},a6={class:"font-medium"},s6={key:2,class:"fct-admin-summary-item"},n6={class:"font-medium"},o6={key:3,class:"fct-admin-summary-item"},i6={class:"font-medium"},r6={key:4,class:"fct-admin-summary-item"},l6={class:"font-medium"},A6={key:5,class:"fct-admin-summary-item"},c6={class:"font-medium"},d6={key:6,class:"fct-admin-summary-item"},u6={class:"font-medium"},f6={class:"fct-admin-summary-item"},h6={class:"font-medium"},p6={name:"UtmDetails",props:{order_operation:{type:Object}}},Hg=Object.assign(p6,{setup(t){return(e,a)=>t.order_operation?(f(),y("div",Y9,[r(oe,null,{default:c(()=>[r(de,{title:e.$t("UTM Details"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[d("div",W9,[d("ul",q9,[d("li",X9,[d("span",J9,v(e.$t("UTM Campaign")),1),d("span",null,v(t.order_operation.utm_campaign||"--"),1)]),t.order_operation.utm_medium?(f(),y("li",Z9,[d("span",e6,v(e.$t("UTM Medium")),1),d("span",null,v(t.order_operation.utm_medium||"--"),1)])):S("",!0),t.order_operation.utm_source?(f(),y("li",t6,[d("span",a6,v(e.$t("UTM Source")),1),d("span",null,v(t.order_operation.utm_source||"--"),1)])):S("",!0),t.order_operation.utm_content?(f(),y("li",s6,[d("span",n6,v(e.$t("UTM Content")),1),d("span",null,v(t.order_operation.utm_content||"--"),1)])):S("",!0),t.order_operation.utm_id?(f(),y("li",o6,[d("span",i6,v(e.$t("UTM ID")),1),d("span",null,v(t.order_operation.utm_id||"--"),1)])):S("",!0),t.order_operation.utm_term?(f(),y("li",r6,[d("span",l6,v(e.$t("UTM Term")),1),d("span",null,v(t.order_operation.utm_term||"--"),1)])):S("",!0),t.order_operation.utm_term?(f(),y("li",A6,[d("span",c6,v(e.$t("UTM Term")),1),d("span",null,v(t.order_operation.utm_term||"--"),1)])):S("",!0),t.order_operation.refer_url?(f(),y("li",d6,[d("span",u6,v(e.$t("Refer Url")),1),d("span",null,v(t.order_operation.refer_url||"--"),1)])):S("",!0),Array.isArray(t.order_operation.meta)?(f(!0),y(P,{key:7},j(t.order_operation.meta,(s,n)=>(f(),y("li",f6,[d("span",h6,v(n),1),d("span",null,v(s||"--"),1)]))),256)):S("",!0)])])]),_:1})]),_:1})])):S("",!0)}}),m6={name:"Transaction",components:{ConvertedTime:Ht,Badge:pt},computed:{Str(){return lt}},props:{transactions:{type:Array,required:!0},order_id:{type:Number,required:!0}},emits:["reload"],methods:{translate:p,getCardBrand:dp}},g6={class:"fc-table-mobile-wrap fc-transaction-details-mobile-wrap"},_6={class:"fc-table-mobile-header"},v6={class:"fc-table-mobile-header-left"},b6={class:"fc-table-status-col"},y6={class:"fc-table-date-col"},w6={class:"id"},C6={class:"fc-table-price-col"},B6={class:"fc-table-mobile-body"},k6={class:"fc-table-mobile-body-list"},x6={class:"fc-table-mobile-method-col"},F6={class:"label"},S6={class:"value"},E6={class:"flex items-center gap-2.5"},U6={key:0,class:"w-7"},Q6=["title","src","alt"],D6={key:1,class:"capitalize"},M6={key:2},I6={class:"fc-table-mobile-gateway-col"},T6={class:"label"},$6={class:"value"},O6={key:0},L6=["href"];function V6(t,e,a,s,n,o){const i=C("Badge"),l=C("el-tooltip"),A=C("ConvertedTime");return f(),y("div",g6,[(f(!0),y(P,null,j(a.transactions,(u,h)=>{var m,_;return f(),y("div",{class:"fc-table-mobile-row",key:h},[d("div",_6,[d("div",v6,[d("div",b6,[(m=u==null?void 0:u.meta)!=null&&m.reason?(f(),U(l,{key:0,effect:"dark",placement:"top",content:o.translate((_=u==null?void 0:u.meta)==null?void 0:_.reason),"popper-class":"fc-label-hint-popover fc-tooltip"},{default:c(()=>{var B,b;return[((B=u==null?void 0:u.meta)==null?void 0:B.disputed)==="yes"&&((b=u==null?void 0:u.meta)==null?void 0:b.dispute_resolved)==="no"?(f(),U(i,{key:0,status:u.status},{default:c(()=>[O(v(u.status==="paid"?"Completed":u.status),1)]),_:2},1032,["status"])):(f(),U(i,{key:1,status:u.status},{default:c(()=>[O(v(u.status==="paid"?"Completed":u.status),1)]),_:2},1032,["status"]))]}),_:2},1032,["content"])):(f(),U(i,{key:1,status:u.status},{default:c(()=>[O(v(u.status==="paid"?"Completed":u.status),1)]),_:2},1032,["status"]))]),d("div",y6,[d("span",w6,"#"+v(u.id),1),e[0]||(e[0]=d("span",{class:"bullet"},"•",-1)),r(A,{"date-time":u.created_at},null,8,["date-time"])])]),d("div",C6,v(t.formatNumber(u.total)),1)]),d("div",B6,[d("ul",k6,[d("li",x6,[d("div",F6,v(o.translate("Payment Method:")),1),d("div",S6,[d("div",E6,[o.getCardBrand(u.card_brand,u.payment_method_type)?(f(),y("div",U6,[d("img",{class:"w-full",title:u.payment_method,src:o.getCardBrand(u.card_brand,u.payment_method_type),alt:u.card_brand},null,8,Q6)])):(f(),y("span",D6,v(u.payment_method_type),1)),u.card_last_4&&u.card_last_4!="0"?(f(),y("span",M6,v("..."+u.card_last_4),1)):S("",!0)])])]),d("li",I6,[d("div",T6,v(o.translate("Gateway ID:")),1),d("div",$6,[u.vendor_charge_id===""?(f(),y("span",O6,"--")):(f(),y("a",{key:1,class:"link",target:"_blank",href:u.url},v(u.vendor_charge_id),9,L6))])])])])])}),128))])}const Pg=ve(m6,[["render",V6]]),R6={key:1,class:"fc-single-order-page"},H6={key:1,class:"fc-single-order-wrapper fc-layout-width"},P6={class:"single-page-header flex items-start justify-between"},N6={class:"single-page-header-title-wrap"},K6={class:"single-page-header-status-wrap"},z6={class:"single-page-header-text"},G6={class:"capitalize"},j6={class:"fc-btn-group sm"},Y6={class:"single-page-body"},W6={class:"fc-single-order"},q6={class:"fc-single-order-main"},X6={class:"fc-card-header-title is-small"},J6={key:0,class:"fc-browse-product-form-group pb-5"},Z6={class:"fc-ordered-product-list-container"},eO={key:0,class:"fc-ordered-product-list-wrapper"},tO={class:"fc-media-content-list -mt-4"},aO={key:0,class:"fc-media-content-list-item px-0"},sO={class:"product-thumbnail"},nO=["src","alt"],oO={class:"product-details"},iO={class:"product-details-content-row"},rO={class:"product-details-content-first flex flex-col"},lO={class:"product-title m-0"},AO={class:"product-variation-title m-0"},cO={key:0,class:"product-subscription-info"},dO=["innerHTML"],uO=["innerHTML"],fO={key:1,class:"product-details-quantity"},hO={key:2,class:"product-details-price-mobile"},pO={class:"product-details-quantity"},mO={key:0,class:"del"},gO={key:0,class:"product-details-content-second shrink-0 grow-0 basis-[90px]"},_O={class:"product-details-quantity"},vO={key:0,class:"del"},bO={class:"product-details-content-third shrink-0 grow-0 flex flex-row justify-end gap-2 basis-[100px]"},yO={key:0},wO={key:1},CO={key:0},BO={key:1},kO={key:0,class:"product-details-action-row"},xO=["onClick"],FO=["onClick"],SO={key:1,class:"m-0 text-center"},EO={class:"fc-card-header-title is-small"},UO={class:"fc-table-border fc-table-order-details"},QO={key:0},DO={key:2},MO={key:3},IO={class:"total-amount-tr"},TO={class:"payment-tr"},$O={key:4,class:"payment-tr"},OO={key:5,class:"payment-tr"},LO={class:"font-semibold"},VO={key:6,class:"payment-tr"},RO={class:"font-semibold"},HO={key:7,class:"payment-tr total-refund-owed-tr"},PO={class:"flex flex-end m-0 items-center"},NO={class:"font-semibold"},KO={class:"fc-single-order-aside"},zO={class:"fc-admin-sidebar"},GO={key:0},jO={class:"fc-adjust-quantity-modal-content"},YO={class:"title"},WO={class:"fc-form-group"},qO={class:"dialog-footer"},XO={key:0},JO={name:"SingleOrder",props:["order_id"],components:{OrderBulkActions:Nd,Alert:Xs,Transaction:Kd,Plans:Lg,Badge:pt,Refresh:od,ElMessageBox:_s,CopyToClipboard:$a,Notes:Nl,Coupon:Kl,CustomDiscount:zl,OrderCustomerInformation:yl,ShippingComponent:Gd,UtmDetails:Hg,OrderUpDownIndicator:ip,TransactionMobile:Pg},data(){return{notFound:{show:!1,message:"",buttonText:"",route:""},warningMessage:"",loading:!1,calculating:!1,customModal:!1,canceling_subscription:!1,reactivate_subscription:!1,fetching_subscription:!1,pausing_subscription:!1,resuming_subscription:!1,processing_refund:!1,nextInvoiceModal:!1,cartItems:{},discount:{},shippingSettings:{},customItem:{item_name:"",item_price:0,quantity:1,is_physical:"yes"},transactionMedium:!1,otherData:{payment_method:"offline_payment",mark_paid_note:"",vendor_charge_id:""},paymentMethodOption:[{name:"Others",value:"others"}],timeout:"",widgets:[],order:!1,searching:!1,orderSettings:!1,orderAddModal:!1,availableProducts:[],selectedProducts:[],deletedItems:[],searchQuery:"",actionableActivities:[],isSubscription:!1,subscriptionStatus:"",showManageActivity:!1,change_order_infos:!1,change_payment_infos:!1,changes_made:0,createProductModal:!1,showRefundModal:!1,isEditingItem:!1,shouldDisableEditing:!1,adjustQuantityModal:!1,adjustItem:[],selectedLabels:[],tmpAdjustedItem:{},coupons:[],appliedCoupons:[],hasCoupon:!1,shippingMethods:[],otherShippingMethods:[],uniqueItemsCount:0,markingOrderAsPaid:!1,isMobile:window.innerWidth<768,taxId:0}},watch:{order:{handler(t,e){this.changes_made++},deep:!0},order_id:{handler(t,e){this.changeTitle("Order #"+t),this.changes_made=0,this.fetch()}}},computed:{transactionType(){return this.order.order_items.some(t=>t.payment_type==="subscription")?"subscription":"charge"},placeholderImage(){return`${window.fluentCartAdminApp.asset_url}images/empty-image.svg`}},methods:{handleResize(){this.isMobile=window.innerWidth<768},getDueRefund(){var t;return this.formatNumber(Math.abs(parseFloat(this.order.total_amount-((t=this.order)==null?void 0:t.total_paid))+parseFloat(this.order.total_refund)))},triggerRefundModal(){this.showRefundModal=!0},getNetPayment(){var t;return this.formatNumber(this.order.total_paid-((t=this.order)==null?void 0:t.total_refund))},getTotalDue(){var t;return this.formatNumber(Math.abs(this.order.total_amount-((t=this.order)==null?void 0:t.total_paid)))},markOrderAsPaid(){this.markingOrderAsPaid||(this.markingOrderAsPaid=!0,ne.post("orders/"+this.order_id+"/mark-as-paid",{...this.otherData,transaction_type:this.transactionType}).then(()=>{this.markingOrderAsPaid=!1,this.transactionMedium=!1,this.reloadOrder()}).catch(t=>{this.markingOrderAsPaid=!1,t.status_code=="422"?q.validationErrors(t):q.error(t.message)}))},handleCommand(t){t==="custom-payment-link"?this.nextInvoiceModal=!0:this.transactionMedium=!0},shouldSkipAdjustmentItem(t){return!(this.order.order_items.some(a=>a.payment_type==="subscription")&&t.payment_type==="adjustment")},handleAdjustQuantityModal(t){this.adjustItem={},this.adjustQuantityModal=!0,this.adjustItem=t},getImageUrl(t){var s,n,o,i;const e=(s=t==null?void 0:t.variants)==null?void 0:s.media;if(e&&Array.isArray(e.meta_value)&&((n=e.meta_value[0])!=null&&n.url))return e.meta_value[0].url;const a=(i=(o=t==null?void 0:t.variants)==null?void 0:o.product_detail)==null?void 0:i.featured_media;return!e&&a&&typeof a=="object"&&a!==null?a.url:this.placeholderImage},getClass(t){let e=null;return t.featured_media!=null&&(e=this.getImageUrl(t)),{"w-full":!0,"border border-solid border-gray-divider rounded":e&&e!==null&&e!==void 0}},shouldShowRefund(){var e;if(!this.order||(e=this.order.config)!=null&&e.upgraded_to)return!1;const t=parseInt(this.order.total_paid/100);return this.order.payment_status!=="refunded"&&t>0&&t>=parseInt(this.order.total_refund/100)},enableItemEditing(){this.isEditingItem=!0,this.fetchShippingMethods()},disableItemEditing(){this.isEditingItem=!1},handlePaymentActions(t){this.changes_made=0,t==="refund"?this.showRefundModal=!0:t==="create_next_invoice"&&(this.nextInvoiceModal=!0)},getOrderUrl(t){const e=window.fluentCartAdminApp.dashboard_url+"/orders/"+t+"/view";window.location=e},resetUnsaved(){this.changes_made=0},updateCustomModal(t){this.customModal=t},updateProductModal(t){this.createProductModal=t},updateSearchQuery(t){this.searchQuery=t,this.calculateLine()},updateQuantity(t,e,a){this.tmpAdjustedItem={quantity:t,updatedStock:e,item:a}},saveAdjustedProductQuantity(t){this.adjustQuantityModal=!1,Object.keys(t).length>0&&(parseInt(t.updatedStock)<0?q.error(p("You have exceeded the stock limit! Current stock is : %s",t.updatedStock)):t.item.quantity=t.quantity,t.item.updated_stock=t.updatedStock,this.calculateLine())},calculateLine(){return this.hasCoupon?this.$refs.reApplyCouponRef.reApplyCoupon():zd(this.order,this.hasCoupon)},deleteProduct(t,e){e.id&&this.deletedItems.push(e.id),this.order.order_items.splice(t,1),this.calculateLine()},processCustom(t){t.order_id=this.order_id,this.order.order_items.unshift(t),this.customModal=!1,this.calculateLine()},update(){this.loading=!0;const t={...this.order};delete t.note,ne.post("orders/"+this.order_id,{...t,deletedItems:this.deletedItems,discount:this.discount,shipping:this.shippingSettings}).then(e=>{q.success(e.message),this.fetch()}).catch(e=>{e.status_code=="422"?q.validationErrors(e):q.error(e.message)}).finally(()=>{this.loading=!1})},fetch(){this.notFound.show=!1,this.loading=!0,ne.get("orders/"+this.order_id,{with:["widgets"]}).then(t=>{var e,a,s,n,o;this.coupons=t.order.applied_coupons||[],this.hasCoupon=this.coupons.length>0,this.appliedCoupons=this.coupons.map(i=>i.coupon_id),this.order=t.order,this.isSubscription=((e=this.order)==null?void 0:e.subscriptions)&&this.order.subscriptions.length>0,this.isSubscription&&(this.subscriptionStatus=(a=this.order.subscriptions[0])==null?void 0:a.status),this.shouldDisableEditing=["completed","archived","canceled"].includes(this.order.status)||this.isSubscription||this.order.payment_status==="paid",["completed","archived","canceled"].includes(this.order.status)&&(this.warningMessage=p("Order cannot be edited once it is %s",this.order.status)),this.order.payment_status==="paid"&&(this.warningMessage=p("Order cannot be edited once paid.")),this.isSubscription&&(this.warningMessage=p("Subscription Order cannot be edited.")),this.orderSettings=t.orderSettings,this.widgets=t.widgets,this.selectedProducts=this.availableProducts=[],this.discount.value=((s=t.discount_meta)==null?void 0:s.value)||0,this.discount.reason=((n=t.discount_meta)==null?void 0:n.reason)||"",this.discount.type=((o=t.discount_meta)==null?void 0:o.type)||"amount",this.selectedLabels=t.selected_labels||[],this.uniqueItemsCount=W_(t.order),t.shipping_meta&&t.shipping_meta.type&&(this.shippingSettings=t.shipping_meta),this.taxId=t.tax_id,Vg(this.discount),this.order.order_items.find(i=>i.payment_type==="subscription"),this.order.order_items=this.order.order_items.map(i=>{var l;return{...i,quantity:Number(i.quantity),updated_stock:parseInt((i==null?void 0:i.available)||((l=i==null?void 0:i.variants)==null?void 0:l.available))+parseInt(i.quantity)}}),this.resetUnsaved(),this.renderActionables(),me(()=>{this.changes_made=0})}).catch(t=>{t.code==="fluent_cart_entity_not_found"?(this.notFound.show=!0,this.notFound.buttonText=be.get(t,"data.buttonText"),this.notFound.message=be.get(t,"data.message"),this.notFound.route=be.get(t,"data.route")):t.status_code=="422"?q.validationErrors(t):q.error(t.message)}).finally(()=>{this.loading=!1,(["completed","archived","canceled"].includes(this.order.status)||["unshippable"].includes(this.order.shipping_status))&&this.disableItemEditing()})},updateCustomDiscount(t){this.discount=t,this.changes_made++},updateCoupons(t,e,a){this.coupons=t,this.appliedCoupons=e,this.hasCoupon=a},updateShipping(t){this.shippingSettings=t,this.changes_made++},reloadOrder(){return window.location.reload()},addProduct(){this.createProductModal=!this.createProductModal},clearActivityAction(t){ne.put("activity/"+t.id+"/mark-read",{id:t.id,status:"read"}).then(e=>{this.actionableActivities=this.actionableActivities.filter(a=>a.id!==t.id),this.handleSuccess(e==null?void 0:e.message)}).catch(e=>{e.status_code=="422"?q.validationErrors(e):q.error(e.message)})},renderActionables(){var a;let t=(a=this==null?void 0:this.order)==null?void 0:a.activities;const e=["warning","error"];this.actionableActivities=t==null?void 0:t.filter(s=>(s==null?void 0:s.read_status)==="unread"&&e.includes(s==null?void 0:s.status))},getCustomerTotalOrders(t){return t>0?t+" "+(t==1?this.$t("order"):this.$t("orders")):this.$t("No orders")},onChangeLabel(t){this.selectedLabels=t,this.changes_made++},saveNoteModal(t){this.order.note=t},hasSubscriptionProduct(t,e){return t.filter(s=>s.variants&&s.variants.other_info&&s.variants.other_info.payment_type===e?!0:!!(s.payment_type&&s.payment_type===e)).length>0},fetchShippingMethods(){const t=[];this.order.order_items.length>0&&this.order.order_items.forEach(e=>{t.push({id:e.object_id,quantity:e.quantity,unit_price:e.unit_price,discount_total:e.discount_total})}),ne.get("orders/shipping_methods",{country_code:this.order.customer.country,order_items:t}).then(e=>{this.shippingMethods=e.shipping_methods,this.otherShippingMethods=e.other_shipping_methods}).finally(()=>{})}},mounted(){this.changeTitle("Order #"+this.order_id),this.fetch(),window.onbeforeunload=()=>{if(this.changes_made>1)return!0},(window.fluentCartAdminApp.payment_routes??[]).filter(e=>!(e!=null&&e.upcoming)).forEach(e=>{var a;this.paymentMethodOption.unshift({name:(a=e==null?void 0:e.meta)==null?void 0:a.title,value:e==null?void 0:e.path})}),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)}},ZO=Object.assign(JO,{setup(t){const e=T(),a=()=>e.value.fetchBySearch(),s=()=>{a()};return(n,o)=>{var Q,I;const i=C("el-breadcrumb-item"),l=C("el-breadcrumb"),A=C("el-button"),u=C("el-tooltip"),h=C("el-input"),m=C("router-link"),_=C("el-icon"),B=C("el-dropdown-item"),b=C("el-dropdown-menu"),w=C("el-dropdown"),k=C("el-option"),F=C("el-select"),x=C("el-form-item"),E=C("el-form"),M=C("el-dialog"),D=C("el-skeleton-item"),R=C("el-skeleton"),$=Ut("loading");return f(),y(P,null,[n.notFound.show?(f(),U(Cl,{key:0,"button-text":n.notFound.buttonText,message:n.notFound.message,route:n.notFound.route},null,8,["button-text","message","route"])):S("",!0),n.notFound.show===!1?(f(),y("div",R6,[r(uo,{isActive:n.changes_made>=1&&!n.showRefundModal?"is-active":"",onDiscard:n.reloadOrder,onSave:n.update,loading:n.loading,saveButtonText:g(p)("Update"),loadingText:g(p)("Updating")},null,8,["isActive","onDiscard","onSave","loading","saveButtonText","loadingText"]),n.loading?(f(),U(d$,{key:0})):S("",!0),n.order?(f(),y("div",H6,[!n.loading&&n.order?(f(),y(P,{key:0},[d("div",P6,[d("div",null,[d("div",N6,[r(l,{"separator-icon":g(Ca)},{default:c(()=>{var L;return[r(i,{to:{name:"orders"}},{default:c(()=>[O(v(g(p)("Orders")),1)]),_:1}),(L=n.order)!=null&&L.parent_id&&n.order.parent_id!="0"?(f(),U(i,{key:0,to:{name:"view_order",params:{}}},{default:c(()=>[d("a",{onClick:o[0]||(o[0]=V=>{var N;return n.getOrderUrl((N=n.order)==null?void 0:N.parent_id)})}," #"+v(n.order.parent_id),1)]),_:1})):S("",!0),r(i,null,{default:c(()=>[O(" #"+v(t.order_id),1)]),_:1})]}),_:1},8,["separator-icon"]),d("div",K6,[r(pt,{status:n.order.status},null,8,["status"]),r(ip,{order:n.order},null,8,["order"])])]),d("div",z6,[r(Ht,{"date-time":n.order.created_at,"with-time":""},null,8,["date-time"]),o[23]||(o[23]=d("span",{class:"fct_separator"},null,-1)),n.order.invoice_no?(f(),y(P,{key:0},[d("span",null,v(n.order.invoice_no),1),o[22]||(o[22]=d("span",{class:"fct_separator"},null,-1))],64)):S("",!0),d("span",G6,v(n.order.type),1)])]),d("div",j6,[n.shouldShowRefund()?(f(),U(A,{key:0,onClick:o[1]||(o[1]=L=>n.handlePaymentActions("refund")),class:"bulk-action-hide-only-mobile"},{default:c(()=>[O(v(g(p)("Refund")),1)]),_:1})):S("",!0),n.isEditingItem?(f(),U(A,{key:2,onClick:n.disableItemEditing,class:"bulk-action-hide-only-mobile"},{default:c(()=>[O(v(g(p)("Disable Editing")),1)]),_:1},8,["onClick"])):(f(),U(A,{key:1,onClick:n.enableItemEditing,disabled:n.shouldDisableEditing,class:"bulk-action-hide-only-mobile"},{default:c(()=>[n.shouldDisableEditing?(f(),U(u,{key:0,placement:"top","popper-class":"fc-tooltip fc-disabled-edit-order-tooltip"},{content:c(()=>[O(v(n.warningMessage),1)]),default:c(()=>[O(" "+v(g(p)("Edit")),1)]),_:1})):(f(),y(P,{key:1},[O(v(g(p)("Edit")),1)],64))]),_:1},8,["onClick","disabled"])),r(Nd,{onReload:o[2]||(o[2]=L=>n.reloadOrder()),onAddItem:a,onAddProduct:n.addProduct,onEnableItemEditing:n.enableItemEditing,onDisableItemEditing:n.disableItemEditing,onHandlePaymentActions:n.handlePaymentActions,"is-editing-item":n.isEditingItem,order:n.order,triggerMode:n.isMobile?"":"button",shouldShowRefund:n.shouldShowRefund(),warningMessage:n.warningMessage},null,8,["onAddProduct","onEnableItemEditing","onDisableItemEditing","onHandlePaymentActions","is-editing-item","order","triggerMode","shouldShowRefund","warningMessage"])])]),d("div",Y6,[(f(!0),y(P,null,j(n.actionableActivities,L=>(f(),U(Xs,{class:"mb-5",type:"error",key:L.id,content:L==null?void 0:L.content,closable:"",onClose:V=>n.clearActivityAction(L)},null,8,["content","onClose"]))),128)),d("div",W6,[d("div",q6,[r(oe,{class:"overflow-hidden fc-order-items-card"},{default:c(()=>[r(de,{border_bottom:""},{title:c(()=>{var L,V;return[d("h2",X6,[O(v(g(p)("Order items"))+" ",1),((L=n.order)==null?void 0:L.fulfillment_type)==="physical"?(f(),U(pt,{key:0,status:(V=n.order)==null?void 0:V.shipping_status},{default:c(()=>{var N;return[O(v((N=n.order)==null?void 0:N.shipping_status),1)]}),_:1},8,["status"])):S("",!0)])]}),_:1}),r(ae,null,{default:c(()=>[n.isEditingItem?(f(),y("div",J6,[r(h,{placeholder:g(p)("Search products..."),onKeyup:o[3]||(o[3]=L=>a()),modelValue:n.searchQuery,"onUpdate:modelValue":o[4]||(o[4]=L=>n.searchQuery=L)},{prefix:c(()=>[r(G,{name:"Search"})]),_:1},8,["placeholder","modelValue"]),r(A,{onClick:s,type:"info",soft:"",class:"el-button--x-small"},{default:c(()=>[O(v(g(p)("Browse")),1)]),_:1})])):S("",!0),d("div",Z6,[n.order.order_items.length>0?(f(),y("div",eO,[d("div",tO,[(f(!0),y(P,null,j(n.order.order_items,(L,V)=>{var N,Y,K,X,re,ce,Z;return f(),y(P,{key:V},[L.payment_type!=="signup_fee"&&((N=L==null?void 0:L.other_info)==null?void 0:N.item_status)!=="adjusted"&&n.shouldSkipAdjustmentItem(L)?(f(),y("div",aO,[d("div",sO,[r(m,{class:"link",to:{name:"product_edit",params:{product_id:L==null?void 0:L.post_id}}},{default:c(()=>[d("img",{src:L.featured_media!=null?L.featured_media:n.getImageUrl(L),alt:L.title,class:le(n.getClass(L))},null,10,nO)]),_:2},1032,["to"])]),d("div",oO,[d("div",iO,[d("div",rO,[d("div",lO,[r(m,{class:"link",to:{name:"product_edit",params:{product_id:L==null?void 0:L.post_id}}},{default:c(()=>[O(v(L==null?void 0:L.post_title),1)]),_:2},1032,["to"])]),d("div",AO," – "+v(L==null?void 0:L.title),1),(L==null?void 0:L.payment_type)==="subscription"?(f(),y("div",cO,[d("span",{innerHTML:L==null?void 0:L.payment_info},null,8,dO),((Y=L==null?void 0:L.other_info)==null?void 0:Y.manage_setup_fee)==="yes"?(f(),y("span",{key:0,innerHTML:L==null?void 0:L.setup_info},null,8,uO)):S("",!0)])):S("",!0),n.isEditingItem?(f(),y("div",fO,[d("span",null,v(n.formatNumber(L.unit_price)),1),o[24]||(o[24]=d("span",null,"x",-1)),d("span",null,v(L.quantity),1)])):S("",!0),n.isEditingItem?S("",!0):(f(),y("div",hO,[d("div",pO,[((K=L==null?void 0:L.variants)==null?void 0:K.length)>0?(f(),y("span",mO,v(n.formatNumber(L.variants.compare_price)),1)):S("",!0),d("span",null,v(n.formatNumber(L.unit_price)),1),o[25]||(o[25]=d("span",null,"x",-1)),d("span",null,v(L.quantity),1)])]))]),n.isEditingItem?S("",!0):(f(),y("div",gO,[d("div",_O,[((X=L==null?void 0:L.variants)==null?void 0:X.length)>0?(f(),y("span",vO,v(n.formatNumber(L.variants.compare_price)),1)):S("",!0),d("span",null,v(n.formatNumber(L.unit_price)),1),o[26]||(o[26]=d("span",null,"x",-1)),d("span",null,v(L.quantity),1)])])),d("div",bO,[((re=L==null?void 0:L.other_info)==null?void 0:re.item_status)!=="adjusted"?(f(),y("span",yO,v(n.formatNumber(L.subtotal)),1)):S("",!0),L.payment_type==="subscription"&&((ce=L==null?void 0:L.other_info)==null?void 0:ce.manage_setup_fee)==="yes"?(f(),y("div",wO,[o[27]||(o[27]=d("span",null,"+ ",-1)),((Z=L==null?void 0:L.other_info)==null?void 0:Z.setup_fee_per_item)==="yes"?(f(),y("span",CO,[d("span",null,v(n.formatNumber(L.other_info.signup_fee*L.quantity)),1)])):(f(),y("span",BO,v(n.formatNumber(L.other_info.signup_fee)),1))])):S("",!0)])]),n.isEditingItem?(f(),y("div",kO,[d("a",{href:"#",onClick:Ke(H=>n.handleAdjustQuantityModal(L),["prevent"])},v(g(p)("Adjust Quantity")),9,xO),d("a",{href:"#",onClick:Ke(H=>n.deleteProduct(V,L),["prevent"])},v(g(p)("Remove Item")),9,FO)])):S("",!0)])])):S("",!0)],64)}),128))])])):S("",!0),n.order.order_items.length==0?(f(),y("p",SO,v(g(p)("No items found.")),1)):S("",!0)])]),_:1})]),_:1}),r(oe,{class:"fc-order-payment-card"},{default:c(()=>[r(de,{border_bottom:""},{title:c(()=>[d("h2",EO,[d("span",null,v(g(p)("Payment")),1),r(pt,{status:n.order.payment_status,size:"small"},null,8,["status"])])]),_:1}),r(ae,null,{default:c(()=>{var L,V,N,Y,K,X,re;return[d("table",UO,[d("tbody",null,[d("tr",null,[d("td",null,v(g(p)("Subtotal")),1),d("td",null,[n.order.order_items.length>0?(f(),y("span",QO,v(n.uniqueItemsCount)+" "+v(g(li)("item","items",n.uniqueItemsCount)),1)):S("",!0)]),d("td",null,v(n.formatNumber(n.order.subtotal)),1)]),r(Gd,{order:n.order,shippingAttributes:n.shippingSettings,shouldEnableEditing:n.isEditingItem,"onUpdate:shipping":n.updateShipping,shippingMethodsProps:n.shippingMethods,otherShippingMethodsProps:n.otherShippingMethods},null,8,["order","shippingAttributes","shouldEnableEditing","onUpdate:shipping","shippingMethodsProps","otherShippingMethodsProps"]),n.order.order_items.length>0&&(n.isEditingItem||n.hasCoupon)?(f(),U(Kl,{key:0,order:n.order,couponsAttributes:n.coupons,hasCouponAttributes:n.hasCoupon,appliedCouponsAttributes:n.appliedCoupons,action:"edit_order",shouldManageCoupon:n.isEditingItem,"onUpdate:coupons":n.updateCoupons,ref:"reApplyCouponRef"},null,8,["order","couponsAttributes","hasCouponAttributes","appliedCouponsAttributes","shouldManageCoupon","onUpdate:coupons"])):S("",!0),n.hasCoupon?S("",!0):(f(),U(zl,{key:1,order:n.order,discountAttributes:n.discount,hasCoupon:n.hasCoupon,shouldEnableEditing:n.isEditingItem,"onUpdate:customDiscount":n.updateCustomDiscount},null,8,["order","discountAttributes","hasCoupon","shouldEnableEditing","onUpdate:customDiscount"])),n.order.tax_total?(f(),y("tr",DO,[d("td",null,v(g(p)("Tax"))+" "+v(parseInt(n.order.tax_behavior)==2?n.$t("(Included)"):n.$t("(Excluded)")),1),o[28]||(o[28]=d("td",null,null,-1)),d("td",null,v(n.formatNumber(n.order.tax_total)),1)])):S("",!0),n.order.shipping_tax?(f(),y("tr",MO,[d("td",null,v(g(p)("Shipping Tax"))+" "+v(parseInt(n.order.tax_behavior)==2?n.$t("(Included)"):n.$t("(Excluded)")),1),o[29]||(o[29]=d("td",null,null,-1)),d("td",null,v(n.formatNumber(n.order.shipping_tax)),1)])):S("",!0),d("tr",IO,[d("td",null,v(g(p)("Total")),1),o[30]||(o[30]=d("td",null,null,-1)),d("td",null,v(n.formatNumber(n.order.total_amount)),1)]),d("tr",TO,[d("td",null,v(g(p)("Total Paid")),1),o[31]||(o[31]=d("td",null,null,-1)),d("td",null,v(n.formatNumber((L=n.order)==null?void 0:L.total_paid)),1)]),((V=n.order)==null?void 0:V.total_refund)>0?(f(),y("tr",$O,[d("td",null,v(g(p)("Total Refund")),1),o[32]||(o[32]=d("td",null,null,-1)),d("td",null,"- "+v(n.formatNumber((N=n.order)==null?void 0:N.total_refund)),1)])):S("",!0),n.order.total_paid-((Y=n.order)==null?void 0:Y.total_refund)!=0?(f(),y("tr",OO,[d("td",null,v(g(p)("Net Payment")),1),o[33]||(o[33]=d("td",null,null,-1)),d("td",LO,v(n.getNetPayment()),1)])):S("",!0),n.order.total_amount-((K=n.order)==null?void 0:K.total_paid)>0?(f(),y("tr",VO,[d("td",null,v(g(p)("Total Due")),1),o[34]||(o[34]=d("td",null,null,-1)),d("td",RO,v(n.getTotalDue()),1)])):S("",!0),n.order.total_amount-(((X=n.order)==null?void 0:X.total_paid)-((re=n.order)==null?void 0:re.total_refund))<0?(f(),y("tr",HO,[d("td",null,[d("p",PO,[r(g(nv),{class:"w-6 text-amber-500 mr-2"}),O(" "+v(g(p)("Total Refund Owed")),1)])]),o[35]||(o[35]=d("td",null,null,-1)),d("td",NO,v(n.getTotalDue()),1)])):S("",!0)])])]}),_:1})]),_:1}),n.order.transactions&&n.order.transactions.length?ut((f(),U(oe,{key:0,"element-loading-text":"Cancelling in progress...",class:"overflow-hidden"},{default:c(()=>[r(de,{title:g(p)("Transaction Details"),border_bottom:"",title_size:"small"},{action:c(()=>{var L;return[n.order.total_amount-((L=n.order)==null?void 0:L.total_paid)>0&&n.order.status!=="canceled"&&n.markingOrderAsPaid===!1?(f(),U(w,{key:0,trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:n.handleCommand},{dropdown:c(()=>[r(b,null,{default:c(()=>[r(B,{command:"custom-payment-link"},{default:c(()=>[O(v(g(p)("Custom Payment Link"))+" ",1),r(u,{effect:"dark",content:g(p)("Due amount is remaining, Get a custom payment link to send to the customer."),placement:"top","popper-class":"fc-tooltip"},{default:c(()=>[r(_,null,{default:c(()=>[r(g(Sa))]),_:1})]),_:1},8,["content"])]),_:1}),r(B,{command:"mark-order-paid"},{default:c(()=>[O(v(g(p)("Mark order as paid")),1)]),_:1})]),_:1})]),default:c(()=>[r(A,{size:"small"},{default:c(()=>[O(v(g(p)("Collect Payments"))+" ",1),r(G,{name:"ChevronDown"})]),_:1}),r(G,{name:"More"})]),_:1},8,["onCommand"])):S("",!0)]}),_:1},8,["title"]),r(ae,{class:"p-0"},{default:c(()=>[r(Kd,{onReload:o[5]||(o[5]=L=>n.reloadOrder()),onTriggerRefundModal:n.triggerRefundModal,transactions:n.order.transactions,order_id:n.order.id},null,8,["onTriggerRefundModal","transactions","order_id"]),r(Pg,{onReload:o[6]||(o[6]=L=>n.reloadOrder()),transactions:n.order.transactions,order_id:n.order.id},null,8,["transactions","order_id"])]),_:1})]),_:1})),[[$,n.canceling_subscription]]):S("",!0),r(M,{title:g(p)("Mark as paid"),modelValue:n.transactionMedium,"onUpdate:modelValue":o[10]||(o[10]=L=>n.transactionMedium=L)},{footer:c(()=>[ut((f(),U(A,{plan:"",type:"primary",onClick:n.markOrderAsPaid,disabled:n.markingOrderAsPaid},{default:c(()=>[O(v(g(p)("Mark Paid")),1)]),_:1},8,["onClick","disabled"])),[[$,n.markingOrderAsPaid]])]),default:c(()=>[d("div",null,[r(E,{"label-position":"top"},{default:c(()=>[r(x,{"label-position":"top",label:g(p)("Payment method")},{default:c(()=>[r(F,{modelValue:n.otherData.payment_method,"onUpdate:modelValue":o[7]||(o[7]=L=>n.otherData.payment_method=L)},{default:c(()=>[(f(!0),y(P,null,j(n.paymentMethodOption,L=>(f(),U(k,{key:L.value,label:L.name,value:L.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),r(x,{"label-position":"top",label:g(p)("Vendor charge id")},{default:c(()=>[r(h,{modelValue:n.otherData.vendor_charge_id,"onUpdate:modelValue":o[8]||(o[8]=L=>n.otherData.vendor_charge_id=L)},null,8,["modelValue"])]),_:1},8,["label"]),r(x,{"label-position":"top",label:g(p)("Notes")},{default:c(()=>[r(h,{rows:2,type:"textarea",placeholder:g(p)("Please enter the payment note..."),modelValue:n.otherData.mark_paid_note,"onUpdate:modelValue":o[9]||(o[9]=L=>n.otherData.mark_paid_note=L)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1})])]),_:1},8,["title","modelValue"]),n.order.licenses?(f(),U(oe,{key:1,class:"overflow-hidden"},{default:c(()=>[r(de,{title:g(p)("Licenses"),title_size:"small"},null,8,["title"]),r(ae,{class:"px-0 pb-0"},{default:c(()=>[r(Jc,{licenses:n.order.licenses,columns:["product"]},null,8,["licenses"])]),_:1})]),_:1})):S("",!0),r(oe,{class:"overflow-hidden mb-0"},{default:c(()=>[r(de,{title:g(p)("Activity"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(Og,{onReload:n.reloadOrder,activities:n.order.activities||[],showManageActivity:n.showManageActivity},null,8,["onReload","activities","showManageActivity"])]),_:1})]),_:1})]),d("div",KO,[d("div",zO,[(f(!0),y(P,null,j(n.order.subscriptions,(L,V)=>(f(),U(C$,{key:L.id,subscription:L,order:n.order,orderId:t.order_id,index:V,onFetchOrder:o[11]||(o[11]=N=>n.$emit("fetch")),onReload:o[12]||(o[12]=N=>n.reloadOrder()),getOrderUrl:n.getOrderUrl},null,8,["subscription","order","orderId","index","getOrderUrl"]))),128)),n.order.customer?(f(),U(yl,{key:0,order:n.order,shouldEnableEditing:!0},null,8,["order"])):S("",!0),r(Nl,{orderId:n.order.id,note:n.order.note,shouldEnableEditing:!0},null,8,["orderId","note"]),r(bl,{"bind-to-id":n.order.id,"bind-to-type":"Order",selectedLabels:n.selectedLabels,shouldEnableEditing:!0,"onUpdate:updateLabel":()=>{}},null,8,["bind-to-id","selectedLabels"]),(Q=n.order)!=null&&Q.order_operation?(f(),U(Hg,{key:1,order_operation:(I=n.order)==null?void 0:I.order_operation},null,8,["order_operation"])):S("",!0),r(S$,{taxId:n.taxId},null,8,["taxId"])]),n.order?(f(),y("div",GO,[r(go,{filter:"fluent_cart_single_order_page","widgets-query":{order_id:n.order.uuid},data:{order:n.order}},null,8,["widgets-query","data"])])):S("",!0)])]),r(M,{modelValue:n.adjustQuantityModal,"onUpdate:modelValue":o[15]||(o[15]=L=>n.adjustQuantityModal=L),title:g(p)("Adjust Quantity"),width:"35%","align-center":"","append-to-body":!0,class:"fc-adjust-quantity-modal",onClose:o[16]||(o[16]=()=>{n.adjustQuantityModal=!1,n.adjustItem={},n.tmpAdjustedItem={}})},{footer:c(()=>[d("div",qO,[r(A,{onClick:o[13]||(o[13]=L=>n.adjustQuantityModal=!1),type:"info",soft:""},{default:c(()=>[O(v(g(p)("Cancel")),1)]),_:1}),r(A,{type:"primary",onClick:o[14]||(o[14]=L=>n.saveAdjustedProductQuantity(n.tmpAdjustedItem))},{default:c(()=>[O(v(g(p)("Done")),1)]),_:1})])]),default:c(()=>[d("div",jO,[d("div",YO,[o[36]||(o[36]=O(" Adjust the quantity for ",-1)),d("strong",null,v(n.adjustItem.title),1)]),d("div",WO,[d("label",null,v(g(p)("Quantity")),1),n.isEditingItem?(f(),U($g,{key:0,item:n.adjustItem,"onUpdate:value":n.updateQuantity},null,8,["item","onUpdate:value"])):S("",!0)])])]),_:1},8,["modelValue","title"]),r(Tg,{ref_key:"productItemModal",ref:e,order_id:t.order_id,searchQueryParent:n.searchQuery,orderParent:n.order,"onUpdate:searchQuery":n.updateSearchQuery},null,8,["order_id","searchQueryParent","orderParent","onUpdate:searchQuery"]),r(M,{"append-to-body":!0,width:"40%",modelValue:n.createProductModal,"onUpdate:modelValue":o[17]||(o[17]=L=>n.createProductModal=L),title:g(p)("Add New Product")},{default:c(()=>[n.createProductModal?(f(),y("div",XO,[r(Vl,{customModal:"order_modal","onUpdate:createProductModal":n.updateProductModal,onProcess_custom:n.processCustom},null,8,["onUpdate:createProductModal","onProcess_custom"])])):S("",!0)]),_:1},8,["modelValue","title"]),r(M,{"append-to-body":!0,modelValue:n.showRefundModal,"onUpdate:modelValue":o[19]||(o[19]=L=>n.showRefundModal=L),title:g(p)("Refund Transaction"),onClose:o[20]||(o[20]=()=>{n.changes_made=0,n.showRefundModal=!1,n.fetch()})},{default:c(()=>[ut(r(U5,{"element-loading-text":g(p)("Refund initiating on remote..."),order_id:t.order_id,order:n.order,showRefundModal:n.showRefundModal,onProcessing_refund:o[18]||(o[18]=L=>n.processing_refund=L),subscription:n.subscription,is_subscription:n.isSubscription,subscription_status:n.subscriptionStatus},null,8,["element-loading-text","order_id","order","showRefundModal","subscription","is_subscription","subscription_status"]),[[$,n.processing_refund]])]),_:1},8,["modelValue","title"]),n.loading?(f(),U(R,{key:0,animated:""},{default:c(()=>[r(D),r(D),r(D)]),_:1})):S("",!0),r(M,{modelValue:n.nextInvoiceModal,"onUpdate:modelValue":o[21]||(o[21]=L=>n.nextInvoiceModal=L),title:g(p)("Custom payment link")},{default:c(()=>[r(P5,{order_id:t.order_id,order:n.order,onReload:n.fetch},null,8,["order_id","order","onReload"])]),_:1},8,["modelValue","title"])])],64)):S("",!0)])):S("",!0)])):S("",!0)],64)}}}),eL={class:"fc-create-order-wrapper fc-layout-width"},tL={class:"single-page-header"},aL={class:"single-page-header-title-wrap"},sL={class:"single-page-body"},nL={class:"fc-create-order"},oL={class:"fc-create-order-main"},iL={class:"fc-browse-product-form-group pb-5 mx-5"},rL={key:0,class:"fc-table-wrap fc-table-transparent-header"},lL={class:"fc-product-info-card"},AL={class:"fc-product-info-media"},cL=["src","alt"],dL={class:"fc-product-info-details"},uL={class:"fc-product-info-name"},fL={class:"product-sub-name"},hL={class:"mt-1"},pL={key:0,class:"line-through mr-3"},mL={key:1},gL={key:0},_L={class:"fc-input-number-wrap"},vL={key:0},bL={key:0},yL={key:1},wL={class:"fc-table-border fc-table-order-details"},CL={key:0},BL={key:3},kL={class:"fc-create-order-aside"},xL={class:"fc-admin-sidebar"},FL={key:0},SL={name:"CreateOrder",components:{Box:Os(rv),Money:Os(iv),ShoppingCart:Os(ov),OrderBulkActions:Nd,Transaction:Kd,Badge:pt,IconButton:we,CopyToClipboard:$a,Notes:Nl,Coupon:Kl,CustomDiscount:zl,OrderCustomerInformation:yl,Shipping:Gd},data(){return{loading:!1,calculating:!1,customModal:!1,cartItems:{},discount:{},shippingSettings:{},customItem:{title:"",price:0,quantity:1,is_physical:"yes"},timeout:"",widgets:[],order:{applied_coupon:[],customer_id:"",customer:{id:null,full_name:"",email:"",phone:""},status:"processing",subtotal:0,manual_discount_total:0,shipping_tax:0,shipping_total:0,tax_total:0,total_amount:0,order_items:[],payment_status:"pending",payment_method:"offline_payment",shipping_status:"unshipped"},searching:!1,orderSettings:!1,orderAddModal:!1,availableProducts:[],selectedProducts:[],deletedItems:[],searchQuery:"",change_order_infos:!1,change_payment_infos:!1,changes_made:0,createProductModal:!1,coupons:[],appliedCoupons:[],hasCoupon:!1,selectedLabels:[],selectedCustomerCountry:"",shippingMethods:[],otherShippingMethods:[]}},watch:{order:{handler(){this.changes_made++},deep:!0}},computed:{beforeRouteLeave(t,e,a){this.redirectRouteName=t.name,this.changes_made?this.outerVisible=!0:a()}},methods:{getImageUrl(t,e){return t&&t!==null&&t!==void 0?t:e+"images/empty-image.svg"},getClass(t){return{"w-full":!0,"border border-solid border-gray-divider rounded":t&&t!==null&&t!==void 0}},resetUnsaved(){this.changes_made=0},updateCustomModal(t){this.customModal=t},updateProductModal(t){this.createProductModal=t},updateSearchQuery(t){this.searchQuery=t,this.calculateLine()},updateQuantity(t,e,a){parseInt(e)<0?this.handleError(`You have exceeded the stock limit! Current stock is :  ${e}`):a.quantity=t,a.updated_stock=e,this.calculateLine()},calculateLine(){return this.hasCoupon?this.$refs.reApplyCouponRef.reApplyCoupon():zd(this.order,this.hasCoupon)},deleteProduct(t,e){e.id&&this.deletedItems.push(e.id),this.order.order_items.splice(t,1),this.calculateLine()},processCustom(t){t.order_id=this.order_id,this.order.order_items.unshift(t),this.customModal=!1,this.calculateLine()},update(){delete this.order.customer.orders,this.loading=!0,ne.post("orders",{...this.order,discount:this.discount,shipping:this.shippingSettings,labels:this.selectedLabels,user_tz:ye.tz.guess(),trigger:"on_admin_create"}).then(t=>{q.success(t.message),setTimeout(()=>{this.$router.push({name:"view_order",params:{order_id:t==null?void 0:t.order_id}})},300)}).catch(t=>{var e,a;((e=t.data)==null?void 0:e.status_code)=="422"?q.validationErrors(t):q.error((a=t.data)==null?void 0:a.message)}).finally(()=>{this.loading=!1,this.changes_made=0})},reloadOrder(){return window.location.reload()},addProduct(){this.createProductModal=!this.createProductModal},onChangeLabel(t){this.selectedLabels=t},saveNoteModal(t){this.order.note=t},updateCustomDiscount(t){this.discount=t,this.changes_made++},updateCoupons(t,e,a){this.coupons=t,this.appliedCoupons=e,this.hasCoupon=a},updateShipping(t,e){var a;(a=this.order)==null||a.order_items.forEach((s,n)=>{s.shipping_charge=be.get(t,`${s.id}.shipping_charge`)}),this.order.shipping_total=e,this.changes_made++},isDisabled(t){var e;return((e=t==null?void 0:t.other_info)==null?void 0:e.payment_type)==="subscription"},fetchShippingMethods(){const t=[];this.order.order_items.length>0&&this.order.order_items.forEach(e=>{t.push({id:e.object_id,quantity:e.quantity,unit_price:e.unit_price,discount_total:e.discount_total})}),ne.get("orders/shipping_methods",{country_code:this.selectedCustomerCountry,order_items:t}).then(e=>{this.shippingMethods=e.shipping_methods,this.otherShippingMethods=e.other_shipping_methods}).finally(()=>{})}},mounted(){this.fetchShippingMethods(),window.onbeforeunload=()=>{if(this.changes_made>0)return!0}}},EL=Object.assign(SL,{setup(t){const e=T(),a=T(!0),s=()=>e.value.fetchBySearch(),n=()=>{s()};return(o,i)=>{const l=C("el-breadcrumb-item"),A=C("el-breadcrumb"),u=C("el-input"),h=C("el-button"),m=C("router-link"),_=C("el-table-column"),B=C("el-table"),b=C("el-dialog"),w=Ut("loading");return f(),y("div",eL,[r(uo,{isActive:o.changes_made>0?"is-active":"",onDiscard:o.reloadOrder,onSave:o.update,loading:o.loading},null,8,["isActive","onDiscard","onSave","loading"]),d("div",tL,[d("div",aL,[r(A,{"separator-icon":g(Ca)},{default:c(()=>[r(l,{to:{name:"orders"}},{default:c(()=>[O(v(o.$t("Orders")),1)]),_:1}),r(l,null,{default:c(()=>[O(v(o.$t("Create Order")),1)]),_:1})]),_:1},8,["separator-icon"])])]),d("div",sL,[d("div",nL,[d("div",oL,[r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{title:o.$t("Products"),title_size:"small",border_bottom:""},null,8,["title"]),r(ae,{class:"px-0 pb-0"},{default:c(()=>[d("div",iL,[r(u,{placeholder:o.$t("Search products..."),onKeyup:i[0]||(i[0]=k=>s()),modelValue:o.searchQuery,"onUpdate:modelValue":i[1]||(i[1]=k=>o.searchQuery=k)},{prefix:c(()=>[r(G,{name:"Search"})]),_:1},8,["placeholder","modelValue"]),r(h,{onClick:n,type:"info",soft:"",class:"el-button--x-small"},{default:c(()=>[O(v(o.$t("Browse")),1)]),_:1})]),o.order.order_items.length>0?(f(),y("div",rL,[ut((f(),U(B,{data:o.order.order_items,class:"fc-table w-full","row-key":"id","default-expand-all":"","element-loading-text":o.$t("Recalculating with product latest info...")},{default:c(()=>[r(_,{"min-width":"450",label:o.$t("Product")},{default:c(k=>{var F,x,E,M;return[d("div",lL,[d("div",AL,[r(m,{class:"link",to:{name:"product_edit",params:{product_id:k.row.post_id}}},{default:c(()=>[d("img",{src:o.getImageUrl(k.row.featured_media,o.appVars.asset_url),alt:k.row.title,class:le(o.getClass(k.row.featured_media))},null,10,cL)]),_:2},1032,["to"])]),d("div",dL,[d("div",uL,[r(m,{class:"link",to:{name:"product_edit",params:{product_id:k.row.post_id}}},{default:c(()=>[O(v(k.row.post_title)+" ",1),d("span",fL,"- "+v(k.row.title),1)]),_:2},1032,["to"])]),d("div",hL,[O(v(o.formatNumber(k.row.price))+" ",1),parseInt(k.row.unit_price)>parseInt(k.row.price)?(f(),y("span",pL,v(o.formatNumber(k.row.unit_price)),1)):S("",!0),k.row.payment_type==="subscription"&&((x=(F=k.row)==null?void 0:F.other_info)==null?void 0:x.manage_setup_fee)==="yes"?(f(),y("div",mL,[d("span",null,v(k.row.other_info.signup_fee_name)+" : "+v(o.formatNumber(k.row.other_info.signup_fee)),1),((M=(E=k.row)==null?void 0:E.other_info)==null?void 0:M.setup_fee_per_item)=="yes"?(f(),y("span",gL,[i[6]||(i[6]=d("span",null,"x",-1)),d("span",null,v(k.row.quantity),1)])):S("",!0)])):S("",!0)])])])]}),_:1},8,["label"]),r(_,{width:"120",label:o.$t("Quantity")},{default:c(k=>[d("div",_L,[r($g,{item:k.row,"onUpdate:value":o.updateQuantity,isDisabled:o.isDisabled(k.row),min:1},null,8,["item","onUpdate:value","isDisabled"])])]),_:1},8,["label"]),r(_,{width:120,label:o.$t("Total")},{default:c(k=>{var F,x,E,M;return[d("div",null,v(o.formatNumber(k.row.unit_price)),1),k.row.payment_type=="subscription"&&((x=(F=k.row)==null?void 0:F.other_info)==null?void 0:x.manage_setup_fee)=="yes"?(f(),y("div",vL,[i[7]||(i[7]=d("span",null,"+",-1)),((M=(E=k.row)==null?void 0:E.other_info)==null?void 0:M.setup_fee_per_item)=="yes"?(f(),y("span",bL,[d("span",null,v(o.formatNumber(k.row.other_info.signup_fee*k.row.quantity)),1)])):(f(),y("span",yL,v(o.formatNumber(k.row.other_info.signup_fee)),1))])):S("",!0)]}),_:1},8,["label"]),r(_,{width:50},{default:c(k=>[r(we,{bg:"transparent",border:"transparent",tag:"a",size:"x-small",onClick:Ke(F=>o.deleteProduct(k.$index,k.row),["prevent"])},{default:c(()=>[r(G,{name:"Delete"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","element-loading-text"])),[[w,o.calculating]])])):S("",!0)]),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(de,{border_bottom:"",title:o.$t("Payment"),title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[d("table",wL,[d("tbody",null,[d("tr",null,[d("td",null,v(o.$t("Subtotal")),1),d("td",null,[o.order.order_items.length>0?(f(),y("span",CL,v(o.order.order_items.length)+" "+v(o.order.order_items.length===1?o.$t("item"):o.$t("items")),1)):S("",!0)]),d("td",null,v(o.formatNumber(o.order.subtotal)),1)]),o.order.order_items.length>0&&!o.discount.value?(f(),U(Kl,{key:0,order:o.order,couponsAttributes:[],hasCouponAttributes:!1,appliedCouponsAttributes:[],action:"create_order",shouldManageCoupon:!0,"onUpdate:coupons":o.updateCoupons,ref:"reApplyCouponRef"},null,8,["order","onUpdate:coupons"])):S("",!0),o.hasCoupon?S("",!0):(f(),U(zl,{key:1,order:o.order,hasCoupon:o.hasCoupon,"onUpdate:customDiscount":o.updateCustomDiscount},null,8,["order","hasCoupon","onUpdate:customDiscount"])),S("",!0),o.order.tax_total?(f(),y("tr",BL,[d("td",null,v(o.$t("Estimated tax")),1),d("td",null,v(o.$t("Not Calculated")),1),d("td",null,v(o.formatNumber(o.order.tax_total)),1)])):S("",!0)]),d("tfoot",null,[d("tr",null,[d("td",null,v(o.$t("Total")),1),i[8]||(i[8]=d("td",null,null,-1)),d("td",null,v(o.formatNumber(o.order.total_amount)),1)])])])]),_:1})]),_:1})]),d("div",kL,[d("div",xL,[r(Nl,{note:o.order.note,onWhenNoteEditIsDone:i[2]||(i[2]=k=>{o.saveNoteModal(k)})},null,8,["note"]),r(yl,{order:o.order,onOnAddressSelected:i[3]||(i[3]=k=>{if(o.fetchShippingMethods(),k===null){o.selectedCustomerCountry="";return}o.selectedCustomerCountry=k.country,k.type==="shipping"?o.order.shipping_address_id=k.id:o.order.billing_address_id=k.id}),onOnAddressRemove:i[4]||(i[4]=()=>{o.selectedCustomerCountry="",o.fetchShippingMethods()})},null,8,["order"]),r(bl,{selectedLabels:o.selectedLabels,"onUpdate:updateLabel":o.onChangeLabel},null,8,["selectedLabels","onUpdate:updateLabel"])])])]),r(Tg,{ref_key:"productItemModal",ref:e,searchQueryParent:o.searchQuery,orderParent:o.order,"onUpdate:searchQuery":o.updateSearchQuery},null,8,["searchQueryParent","orderParent","onUpdate:searchQuery"]),r(b,{"append-to-body":!0,width:"40%",modelValue:o.createProductModal,"onUpdate:modelValue":i[5]||(i[5]=k=>o.createProductModal=k),title:o.$t("Add New Product")},{default:c(()=>[o.createProductModal?(f(),y("div",FL,[r(Vl,{customModal:"order_modal","onUpdate:createProductModal":o.updateProductModal,onProcess_custom:o.processCustom},null,8,["onUpdate:createProductModal","onProcess_custom"])])):S("",!0)]),_:1},8,["modelValue","title"])])])}}});class UL extends na{constructor(){super(...arguments);ee(this,"data",{form:Vd()})}get controllerKey(){return"Customer"}}function Ng(){return UL.init()}const QL={class:"setting-wrap"},DL={key:0,class:"bg-white rounded p-6 dark:bg-dark-700"},ML={class:"grid gap-3 mb-6"},IL={class:"grid gap-3 mb-6"},TL={class:"grid gap-3 mb-6"},$L={class:"grid gap-3"},OL={key:0,class:"form-section-save-action-top"},LL={key:0,class:"cmd block leading-none"},dr=Object.assign({name:"StoreSettings"},{__name:"StoreSettings",setup(t){const e=Ng(),{form:a}=e.data,s=bi(),n=T([]),o=T([]),i=T(!0),l=T(!1),A=T(!0),u=T({}),h=sa(),m=()=>{var F;l.value=!0;let k=a.values;Array.isArray(k.store_logo)&&k.store_logo.length>0&&(k.store_logo=(F=k.store_logo)==null?void 0:F[0]),k.settings_name=_.value,ne.post("settings/store",{...k}).then(x=>{q.success(p("Settings saved successfully")),_.value==="store_setup"&&setTimeout(()=>{window.location.reload()},300)}).catch(x=>{x.status_code=="422"?q.validationErrors(x):q.error(x.message),a.setValidationErrors(x),u.value=x}).finally(()=>{l.value=!1,A.value=!1,i.value=!1})},_=T(h.name);ke(()=>h.name,(k,F)=>{_.value=k,b()});const B=T(!1),b=()=>{i.value=!0,B.value=!1,ne.get("settings/store",{settings_name:_.value}).then(k=>{a.setSchema(k.fields).setDefaults(k.settings).initForm(),n.value=k.settings,o.value=k.fields,i.value=!1,A.value=!1,l.value=!1}).catch(k=>{B.value=!0,i.value=!1,A.value=!1,l.value=!1})},w=()=>{s.bind(["meta+s"],k=>{k.preventDefault(),m()})};return ke(()=>h.name,(k,F)=>{s.unbind("meta+s"),w()}),he(()=>{w(),b()}),sp(()=>{s.unbind("meta+s")}),(k,F)=>{const x=C("el-skeleton-item"),E=C("el-skeleton"),M=C("el-button"),D=C("el-form");return f(),y("div",QL,[B.value?(f(),U(oe,{key:1},{default:c(()=>[r(ae,null,{default:c(()=>F[1]||(F[1]=[d("p",null,"There is an error in the form fields. Please try reloading the page.",-1)])),_:1,__:[1]})]),_:1})):(f(),y(P,{key:0},[A.value?(f(),y("div",DL,[r(E,{loading:A.value,animated:""},{template:c(()=>[d("div",ML,[r(x,{variant:"p",class:"w-[20%]"}),r(x,{variant:"p"})]),d("div",IL,[r(x,{variant:"p",class:"w-[20%]"}),r(x,{variant:"p"})]),d("div",TL,[r(x,{variant:"p",class:"w-[20%]"}),r(x,{variant:"p"})]),d("div",$L,[r(x,{variant:"p",class:"w-[20%]"}),r(x,{variant:"p"})])]),_:1},8,["loading"])])):S("",!0),A.value?S("",!0):(f(),y(P,{key:1},[g(a).isReady?(f(),U(D,{key:0,class:"relative"},{default:c(()=>[i.value?S("",!0):(f(),y("div",OL,[g(h).name!=="addons"?(f(),U(M,{key:0,onClick:m,type:"primary",loading:l.value},{default:c(()=>[l.value?S("",!0):(f(),y("span",LL,"⌘s")),O(" "+v(l.value?g(p)("Saving"):g(p)("Save")),1)]),_:1},8,["loading"])):S("",!0)])),i.value?(f(),U(oe,{key:1},{default:c(()=>[r(ae,null,{default:c(()=>[r(E,{rows:5,animated:""},{default:c(()=>[r(x),r(x,{variant:"text"}),r(x,{variant:"text"})]),_:1})]),_:1})]),_:1})):S("",!0),i.value?S("",!0):(f(),U(Pl,{key:2,form:g(a),showSubmitButton:!0,onOnSubmitButtonClick:m,submitButtonText:g(p)("Save"),loading:l.value,onOnChange:F[0]||(F[0]=R=>{}),"validation-errors":u.value},null,8,["form","submitButtonText","loading","validation-errors"]))]),_:1})):S("",!0)],64))],64))])}}}),VL={};function RL(t,e){const a=C("router-view");return f(),y("div",null,[r(a)])}const HL=ve(VL,[["render",RL]]),PL={class:"setting-wrap"},NL={key:0,class:"fluent_cart_configure_integration_body"},KL={key:0,class:"fct-license-box-content"},zL=["href"],GL={class:"fct-license-box-content-details"},jL={class:"label"},YL={class:"license-key"},WL={class:"label"},qL={key:1,class:"w-full items-start"},XL={key:1,class:"fct-license-box-content"},JL={class:"fct-license-box-content-details"},ZL={key:0},eV={class:"label"},tV={class:"license-key"},aV={class:"label"},sV={key:2,class:"fct-license-box-content"},nV={key:0},oV=["href"],iV=["innerHTML"],rV={name:"licensing",props:["disabled"],components:{Lock:lv,Refresh:od,CircleCheck:wl},data(){return{loading:!0,verifying:!1,licenseData:{},licenseKey:"",showNewLicenseInput:!1,errorMessage:""}},computed:{purchaseLink(){return window.fluentCartAdminApp.purchase_fluent_cart_link}},methods:{getSettings(){this.errorMessage="",this.loading=!0,ne.get("settings/license",{verify:!0}).then(t=>{this.licenseData=t}).catch(t=>{q.error(t)}).finally(()=>{this.loading=!1})},verifyLicense(){if(!this.licenseKey){q.error(p("Please provide a license key")),this.errorMessage=p("Please provide a license key");return}this.verifying=!0,this.errorMessage="",ne.post("settings/license",{license_key:this.licenseKey}).then(t=>{this.licenseData=t}).catch(t=>{q.error(t)}).finally(()=>{this.verifying=!1})},deactivateLicense(){this.verifying=!0,ne.delete("settings/license").then(t=>{this.licenseData=t}).catch(t=>{q.error(t)}).finally(()=>{this.verifying=!1})},maskLicense(t){if(!t)return"";const e=t.slice(0,4),a=t.slice(-4),s="*".repeat(t.length-8);return`${e}${s}${a}`}},mounted(){this.disabled||this.getSettings()}},lV=Object.assign(rV,{setup(t){return(e,a)=>{const s=C("el-skeleton"),n=C("el-input"),o=C("el-button"),i=Ut("loading");return f(),y("div",PL,[r(oe,null,{default:c(()=>[r(de,{title:g(p)("Licensing"),border_bottom:""},null,8,["title"]),r(ae,null,{default:c(()=>[r(s,{loading:e.loading,animated:"",rows:6},null,8,["loading"]),d("div",null,[!t.disabled&&!e.loading?ut((f(),y("div",NL,[d("div",{class:le(["fluent_cart_license_box","fct_license_"+e.licenseData.status])},[e.licenseData.status=="expired"?(f(),y("div",KL,[e.showNewLicenseInput?(f(),y("div",qL,[d("h3",null,v(g(p)("Your License Key")),1),r(n,{modelValue:e.licenseKey,"onUpdate:modelValue":a[1]||(a[1]=l=>e.licenseKey=l),placeholder:g(p)("License Key")},null,8,["modelValue","placeholder"])])):(f(),y(P,{key:0},[r(G,{name:"GradientWarningCircle"}),d("h3",null,v(g(p)("Looks like your license key has been Expired!")),1),d("p",null,[O(v(g(p)("Have a new license Key?"))+" ",1),d("a",{onClick:a[0]||(a[0]=Ke(l=>e.showNewLicenseInput=!e.showNewLicenseInput,["prevent"])),href:"#"},v(g(p)("Click here")),1),a[7]||(a[7]=O()),e.licenseData.renew_url?(f(),y(P,{key:0},[a[6]||(a[6]=O("or ",-1)),d("a",{href:e.licenseData.renew_url,target:"_blank"},v(g(p)("Purchase a new license")),9,zL)],64)):S("",!0)]),d("div",GL,[d("p",null,[d("span",jL,v(g(p)("License Key")),1),d("span",YL,[O(v(e.maskLicense(e.licenseData.license_key))+" ",1),r($a,{text:e.licenseData.license_key,showMode:"basic_copy_btn",tooltipText:g(p)("Copy License")},null,8,["text","tooltipText"])])]),d("p",null,[d("span",WL,v(g(p)("Expired At")),1),O(" "+v(g(Js)(e.licenseData.expires,!0)),1)])])],64))])):e.licenseData.status=="valid"?(f(),y("div",XL,[r(G,{name:"GradientCheckCircle"}),d("h3",null,v(g(p)("Congratulations! Your license key is valid and activated")),1),d("p",null,[O(v(g(p)("Want to deactivate this license?"))+" ",1),d("a",{onClick:a[2]||(a[2]=Ke(l=>e.deactivateLicense(),["prevent"])),href:"#"},v(g(p)("Click here")),1)]),d("div",JL,[e.licenseData.license_key?(f(),y("p",ZL,[d("span",eV,v(g(p)("License Key")),1),d("span",tV,v(e.maskLicense(e.licenseData.license_key)),1)])):S("",!0),d("p",null,[d("span",aV,v(g(p)("Expires")),1),O(" "+v(e.licenseData.expires!=="lifetime"?g(Js)(e.licenseData.expires,!0):e.licenseData.expires),1)])])])):(f(),y("div",sV,[d("h3",null,v(g(p)("Please Provide a license key of"))+" WebmakerrPro ",1),r(n,{modelValue:e.licenseKey,"onUpdate:modelValue":a[3]||(a[3]=l=>e.licenseKey=l),placeholder:g(p)("License Key")},null,8,["modelValue","placeholder"]),e.showNewLicenseInput?S("",!0):(f(),y("p",nV,[O(v(g(p)("Don't have a license key?"))+" ",1),d("a",{target:"_blank",href:e.purchaseLink},[O(v(g(p)("Purchase one here"))+" ",1),r(G,{name:"External",class:"w-4 h-4"})],8,oV)]))])),d("p",{class:"fluent_cart_warning",innerHTML:e.errorMessage},null,8,iV),e.licenseData.status==="expired"&&e.showNewLicenseInput?(f(),U(o,{key:3,type:"primary",onClick:a[4]||(a[4]=l=>e.verifyLicense())},{default:c(()=>[r(G,{name:"Lock",class:"w-5 h-5"}),O(" "+v(g(p)("Click Here to Renew your License")),1)]),_:1})):["valid","expired"].includes(e.licenseData.status)?S("",!0):(f(),U(o,{key:4,type:"primary",onClick:a[5]||(a[5]=l=>e.verifyLicense())},{default:c(()=>[r(G,{name:"Lock",class:"w-5 h-5"}),O(" "+v(g(p)("Verify License")),1)]),_:1}))],2)])),[[i,e.verifying]]):S("",!0)])]),_:1})]),_:1})])}}}),AV={class:"fc-single-order-loader-wrap fc-layout-width"},cV={class:"single-page-header fc-page-loader-header flex items-start justify-between"},dV={class:"single-page-body"},uV={class:"fc-single-order"},fV={class:"fc-single-order-main"},hV={class:"fc-single-order-aside"},pV={class:"fc-admin-sidebar"},mV={__name:"SingleProductLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton");return f(),y("div",AV,[d("div",cV,[r(n,{animated:"",class:"flex flex-col items-start gap-2"},{template:c(()=>[r(s,{class:"max-w-180"}),r(s,{class:"max-w-[100px]"})]),_:1}),r(n,{animated:"",class:"flex gap-2 max-w-[100px]"},{template:c(()=>[r(s,{class:"w-2/4"}),r(s,{class:"w-2/4"})]),_:1})]),d("div",dV,[d("div",uV,[d("div",fV,[r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{border_bottom:"",title_size:"small",title:e.$t("Title")},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:5})]),_:1})]),_:1}),r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{border_bottom:"",title_size:"small",title:e.$t("Pricing")},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:5})]),_:1})]),_:1}),r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{border_bottom:"",title_size:"small",title:e.$t("Inventory Management")},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:6})]),_:1})]),_:1}),r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{border_bottom:"",title_size:"small",title:e.$t("Downloadable Asset(s)")},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:""},{template:c(()=>[r(s,{variant:"p"})]),_:1})]),_:1})]),_:1})]),d("div",hV,[d("div",pV,[r(oe,null,{default:c(()=>[r(de,{title:e.$t("Publishing"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:1})]),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(de,{title:e.$t("Media"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:""},{template:c(()=>[r(s,{variant:"image",class:"rounded w-full h-[138px] mb-2"}),r(s,{variant:"image",class:"rounded w-[90px] h-[90px]"})]),_:1})]),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(de,{title:e.$t("Group By"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:1})]),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(de,{title:e.$t("Product Organizer"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:"",rows:3})]),_:1})]),_:1})])])])])])}}},gV={class:"fc-product-route-wrap"},_V={__name:"ProductRoute",props:{product_id:{type:[String,Number],required:!0}},setup(t){const e=t,a=zo({show:!1,message:"",buttonText:"",route:""}),s=T(!1),n=T(!1),o=T(!1),i=sa(),l=T(!0),A=()=>{o.value=!0,a.show=!1,ne.get("products/"+e.product_id+"/pricing",{with:["product_menu"]}).then(_=>{s.value=_.product,s.value.variants=u(s.value.variants),n.value=_.taxonomies,s.value.post_date=ye.utc(s.value.post_date).local().format("YYYY-MM-DDTHH:mm:ssZ"),l.value&&jQuery("#fca_admin_menu_holder").append(_.product_menu),h(!0)}).catch(_=>{(_==null?void 0:_.code)==="fluent_cart_entity_not_found"?(a.show=!0,a.buttonText=be.get(_,"data.buttonText"),a.message=be.get(_,"data.message"),a.route=be.get(_,"data.route"),jQuery(".fc-admin-product-header").remove()):_.status_code=="422"?q.validationErrors(_):q.error(_.message)}).finally(()=>{o.value=!1})},u=_=>{let B={};return _.forEach((b,w)=>{b.item_price=b.item_price?st(b.item_price,!1):0,b.item_cost=b.item_cost?st(b.item_cost,!1):0,b.compare_price=b.compare_price?st(b.compare_price,!1):"",b.other_info&&(b.other_info.signup_fee=b.other_info.signup_fee?st(b.other_info.signup_fee,!1):0),b.rowId=w,B[b.id]=b}),_},h=(_=!1)=>{let B=jQuery(".fc-admin-product-menu"),b=i.name;B.length&&(B.find("li").removeClass("active-menu"),B.find(`li.fc_menu_${b}`).addClass("active-menu")),_&&s.value&&(jQuery("#wp-admin-bar-root-default .fct_view_link").remove(),jQuery("#wp-admin-bar-root-default").append('<li class="fct_view_link" id="wp-admin-bar-view"><a class="ab-item" href="'+s.value.guid+'" target="_blank">View Product</a></li>'))};return ke(()=>e.product_id,(_,B)=>{_!==B&&A()}),he(()=>{A(),h(),window.addEventListener("hashchange",h)}),ro(()=>{jQuery(".fc-admin-product-header").remove(),window.removeEventListener("hashchange",h)}),Yc("reload",()=>{l.value=!1,A()}),(_,B)=>{const b=C("router-view");return f(),y("div",gV,[g(i).name==="product_edit"&&o.value?(f(),U(mV,{key:0})):S("",!0),a.show?(f(),U(Cl,{key:1,"button-text":a.buttonText,message:a.message,route:a.route},null,8,["button-text","message","route"])):S("",!0),s.value&&a.show==!1?(f(),U(b,{key:2,product:s.value,taxonomies:n.value},null,8,["product","taxonomies"])):S("",!0)])}}};class vV extends lo{setupInitialData(){super.setupInitialData(),this.data.sorting.sortBy="ID"}getTabs(){return{all:p("All"),publish:p("Published"),draft:p("Draft"),physical:p("Physical"),digital:p("Digital"),subscribable:p("Subscribable")}}getToggleableColumns(){return[{label:p("Type"),value:"product_type"},{label:p("Variation"),value:"variation_type"},{label:p("Stock"),value:"stock_availability"},{label:p("Price"),value:"item_price"},{label:p("Status"),value:"post_status"},{label:p("Date"),value:"post_date"}]}getSortableColumns(){return[{label:p("Product ID"),value:"ID"},{label:p("Title"),value:"post_title"},{label:p("Created at"),value:"post_date"}]}getSearchHint(){return p("Search by Id, product title or variation title")}getFetchUrl(){return"products"}parseResponse(e){return e.products}getTableName(){return"product_table"}getAdvanceFilterOptions(){return be.get(window,"fluentCartAdminApp.filter_options.product_filter_options.advance")}getSearchGuideOptions(){return be.get(window,"fluentCartAdminApp.filter_options.product_filter_options.guide")}with(){return["detail","variants:post_id,available"]}}function Kg(t){return vV.init(t)}const bV={key:0,class:"fc-dummy-product-content"},yV={key:0,class:"title"},wV={class:"text"},CV={class:"fc-dummy-product-loading"},BV={class:"fc-loading-bars"},kV=["id"],xV={key:1,class:"fc-form-group"},FV={class:"required"},SV={class:"dialog-footer"},EV={__name:"CreateDummyProduct",props:{products:{}},emits:["onProductCreated"],setup(t,{emit:e}){const a=e,s=We().ctx,n=T(!1),o=T([]),i=T(null),l=T(0),A=T(!1),u=T(null),h=T(0),m=b=>{n.value=b},_=(b=0)=>{if(i.value===null){B();return}A.value=!0;const w=o.value[i.value];if(u.value=w,b>w.count-1){setTimeout(()=>{B(),n.value=!1,a("onProductCreated")},1e3);return}l.value=b,s.$post("products/create-dummy",{category:w.category,index:b}).then(k=>{h.value=parseFloat(((b+1)/w.count*100).toFixed(0)),_(b+1)}).catch(k=>{k.code===400?B():_(b+1),s.handleError(k)})},B=()=>{h.value=0,l.value=0,A.value=!1,u.value=null};return he(()=>{o.value=window.fluentCartAdminApp.dummy_product_info}),(b,w)=>{const k=C("el-button"),F=C("el-progress"),x=C("el-option"),E=C("el-select"),M=C("el-dialog");return f(),y(P,null,[r(k,{onClick:w[0]||(w[0]=D=>m(!0))},{default:c(()=>[r(G,{name:"Stars",class:"hidden lg:inline"}),O(" "+v(b.$t("Add Dummy Product")),1)]),_:1}),r(M,{modelValue:n.value,"onUpdate:modelValue":w[4]||(w[4]=D=>n.value=D),title:b.$t("Create Dummy Product"),"append-to-body":!0},vi({default:c(()=>[A.value?(f(),y("div",bV,[u.value!=null?(f(),y("div",yV,v(g(p)("Inserting %s of %s %s Product",l.value+1,u.value.count,u.value.title)),1)):S("",!0),d("div",wV,[O(v(b.$t("Can close the window - product will continue to insert."))+" ",1),d("div",CV,[d("div",BV,[(f(),y(P,null,j(8,D=>d("div",{key:D,class:"bar-block",id:`bar-block-${D+1}`},null,8,kV)),64))]),O(" "+v(b.$t("Uploading... %s%",h.value)),1)])]),r(F,{percentage:h.value,"striped-flow":"","stroke-width":6,striped:"","show-text":!1},null,8,["percentage"])])):(f(),y("div",xV,[d("label",FV,v(b.$t("Product Category")),1),r(E,{modelValue:i.value,"onUpdate:modelValue":w[1]||(w[1]=D=>i.value=D),clearable:"",placeholder:b.$t("Select a Product Category")},{default:c(()=>[(f(!0),y(P,null,j(o.value,(D,R)=>(f(),U(x,{key:R,label:D.title,value:R},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]))]),_:2},[A.value?void 0:{name:"footer",fn:c(()=>[d("div",SV,[r(k,{onClick:w[2]||(w[2]=D=>m(!1))},{default:c(()=>[O(v(b.$t("Cancel")),1)]),_:1}),r(k,{type:"primary",onClick:w[3]||(w[3]=()=>{_()}),disabled:!i.value},{default:c(()=>[O(v(b.$t("Create Products")),1)]),_:1},8,["disabled"])])]),key:"0"}]),1032,["modelValue","title"])],64)}}},UV={class:"table-cell"},QV={class:"fc-product-info-card w-full"},DV={class:"fc-product-info-media"},MV={class:"fc-product-info-details grow-0 shrink-0 basis-[calc(100%-52px)]",style:{overflow:"hidden"}},IV={class:"fc-product-info-name flex flex-col items-start gap-3"},TV={class:"table-cell"},$V={class:"table-cell"},OV={class:"table-cell"},LV={class:"table-cell"},VV={class:"table-cell"},RV={class:"table-cell"},HV={class:"table-cell"},PV={__name:"ProductsLoader",props:{nextPageCount:{type:Number,default:0},productTable:{type:Object,default:()=>({})}},setup(t){const e=t,a=Array.from({length:e.nextPageCount},(s,n)=>n+1);return(s,n)=>{const o=C("el-table-column"),i=C("el-skeleton-item"),l=C("el-table"),A=C("el-skeleton");return f(),U(A,{animated:""},{template:c(()=>[r(l,{data:g(a),class:"w-full compact-table responsive"},{empty:c(()=>n[0]||(n[0]=[])),default:c(()=>[S("",!0),r(o,{label:s.$t("Products"),width:"380"},{default:c(()=>[d("div",UV,[d("div",QV,[d("div",DV,[r(i,{varient:"image",class:"w-10 h-10.5 flex-none"})]),d("div",MV,[d("div",IV,[r(i,{varient:"p",class:"max-w-[190px]"}),r(i,{varient:"p",class:"max-w-[100px]"})])])])])]),_:1},8,["label"]),t.productTable.isColumnVisible("product_type")?(f(),U(o,{key:1,label:s.$t("Type"),width:"100"},{default:c(()=>[d("div",TV,[r(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("variation_type")?(f(),U(o,{key:2,label:s.$t("Variation"),width:"150"},{default:c(()=>[d("div",$V,[r(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("item_price")?(f(),U(o,{key:3,label:s.$t("Price"),width:"130"},{default:c(()=>[d("div",OV,[r(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("stock_availability")?(f(),U(o,{key:4,label:s.$t("Stock"),width:"100"},{default:c(()=>[d("div",LV,[r(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("post_status")?(f(),U(o,{key:5,label:s.$t("Status"),width:"130"},{default:c(()=>[d("div",VV,[r(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("post_date")?(f(),U(o,{key:6,label:s.$t("Created At"),width:"120"},{default:c(()=>[d("div",RV,[r(i,{varient:"p",class:"w-4/5"})])]),_:1},8,["label"])):S("",!0),r(o,{label:s.$t("Actions"),width:"80",align:"right"},{default:c(()=>[d("div",HV,[r(i,{varient:"p",class:"w-3/5"})])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})}}},NV={},KV={class:"px-4 py-3"},zV={class:"flex items-center justify-between mb-3"},GV={class:"grid grid-cols-3 gap-5 mt-5"};function jV(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),U(s,{animated:""},{template:c(()=>[d("div",KV,[d("div",zV,[r(a,{varient:"p",class:"w-1/2"}),r(a,{varient:"p",class:"w-[100px]"})]),d("div",GV,[(f(),y(P,null,j(3,n=>d("div",{key:n},[r(a,{varient:"p",class:"w-1/2"}),r(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const YV=ve(NV,[["render",jV]]),WV={class:"fc-product-action show-on-mobile absolute right-0 top-1"},qV={class:"more-btn pr-3"},XV={key:0},JV={key:1},ZV={key:0},eR={key:1},tR={key:0},aR={key:1},sR={key:0},nR={key:1},oR={class:"flex items-center gap-0.5"},iR={class:"fc-product-id hidden",title:"Product ID"},rR={class:"more-btn pr-3"},lR={__name:"ProductsTable",props:{productTable:{type:Object,required:!0}},emits:["delete"],setup(t,{emit:e}){const a=e,s=o=>{o.action==="delete"&&Gt(p("Are you sure you want to delete this product : %s ?",o.product.post_title),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{a("delete",o.product.ID)}).catch(i=>{console.log(i," handle product delete errors")})},n=o=>o.min_price===o.max_price?st(o.min_price,!0):`${st(o.min_price,!0)} - ${st(o.max_price,!0)}`;return(o,i)=>{const l=C("el-table-column"),A=C("router-link"),u=C("el-dropdown-item"),h=C("el-dropdown-menu"),m=C("el-dropdown"),_=C("el-tooltip"),B=C("el-table");return f(),U(B,{data:t.productTable.getTableData(),class:"w-full compact-table"},{empty:c(()=>[r(Tt,{icon:"Empty/ListView","has-dark":!0,text:t.productTable.emptyMessage},null,8,["text"])]),default:c(()=>[S("",!0),r(l,{label:g(p)("Products"),width:"380"},{default:c(b=>[r(St,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:b.row.ID}}},{default:c(()=>[r(Zc,{product:b.row,class:"fc-product-table-product-info"},null,8,["product"])]),_:2},1032,["to"]),d("div",WV,[r(m,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:c(()=>[r(h,null,{default:c(()=>[b.row.ID?(f(),U(u,{key:0,class:"item-link"},{default:c(()=>[r(A,{to:{name:"product_edit",params:{product_id:b.row.ID}}},{default:c(()=>[r(G,{name:"Edit"}),O(" "+v(g(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):S("",!0),r(u,{command:{action:"delete",product:b.row},class:"item-destructive"},{default:c(()=>[r(G,{name:"Delete"}),O(" "+v(g(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:c(()=>[d("span",qV,[r(G,{name:"More"})])]),_:2},1024)])]),_:1},8,["label"]),t.productTable.isColumnVisible("product_type")?(f(),U(l,{key:1,label:g(p)("Type"),width:"100"},{default:c(b=>[r(St,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:b.row.ID}}},{default:c(()=>[b.row.detail?(f(),y("span",XV,v(g(lt).headline(b.row.detail.fulfillment_type)),1)):(f(),y("span",JV,v("N/A")))]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("variation_type")?(f(),U(l,{key:2,label:g(p)("Variation"),width:"150"},{default:c(b=>[r(St,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:b.row.ID}}},{default:c(()=>[b.row.detail?(f(),y("span",ZV,v(g(lt).headline(b.row.detail.variation_type)),1)):(f(),y("span",eR,v("N/A")))]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("item_price")?(f(),U(l,{key:3,label:g(p)("Price"),width:"130"},{default:c(b=>[r(St,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:b.row.ID}}},{default:c(()=>[b.row.detail?(f(),y("span",tR,v(n(b.row.detail)),1)):(f(),y("span",aR,v(g(p)("Set Price")),1))]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("stock_availability")?(f(),U(l,{key:4,label:g(p)("Stock"),width:"100"},{default:c(b=>[r(St,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:b.row.ID}}},{default:c(()=>[b.row.detail?(f(),y("span",sR,[b.row.detail.manage_stock.toString()==="0"?(f(),y(P,{key:0},[O(v(g(p)("Unlimited")),1)],64)):(f(),y(P,{key:1},[O(v(g(be).sum(b.row.variants,"available")),1)],64))])):(f(),y("span",nR,v("")))]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("post_status")?(f(),U(l,{key:5,label:g(p)("Status"),width:"130"},{default:c(b=>[r(St,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:b.row.ID}}},{default:c(()=>[d("div",oR,[(f(),U(pt,{key:b.row.ID,status:b.row.post_status==="future"?"scheduled":b.row.post_status},null,8,["status"])),b.row.post_status==="future"?(f(),U(_,{key:0,effect:"dark",placement:"top","popper-class":"fc-label-hint-popover fc-tooltip","show-after":400,"hide-after":0},{content:c(()=>[O(v(g(p)("Publishes On: %s",g(Js)(b.row.post_date,!0))),1)]),default:c(()=>[r(G,{name:"InformationFill",class:"w-4 h-4 flex-none"})]),_:2},1024)):S("",!0)])]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),t.productTable.isColumnVisible("post_date")?(f(),U(l,{key:6,label:g(p)("Date"),width:"120"},{default:c(b=>[r(St,{class:"hover:no-underline",to:{name:"product_edit",params:{product_id:b.row.ID}}},{default:c(()=>[r(Ht,{"date-time":b.row.post_date,"with-time":!1},null,8,["date-time"])]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),r(l,{label:g(p)("Actions"),width:"80",align:"right"},{default:c(b=>[d("span",iR,"ID: "+v(b.row.ID),1),r(m,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:c(()=>[r(h,null,{default:c(()=>[b.row.ID?(f(),U(u,{key:0,class:"item-link"},{default:c(()=>[r(A,{to:{name:"product_edit",params:{product_id:b.row.ID}}},{default:c(()=>[r(G,{name:"Edit"}),O(" "+v(g(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):S("",!0),r(u,{command:{action:"delete",product:b.row},class:"item-destructive"},{default:c(()=>[r(G,{name:"Delete"}),O(" "+v(g(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:c(()=>[d("span",rR,[r(G,{name:"More"})])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])}}},AR={class:"fc-product-table-mobile-wrap"},cR={class:"fc-product-table-mobile-header"},dR={key:0,class:"fc-product-table-post-status-col"},uR={class:"flex items-center gap-1.5"},fR={class:"fc-product-action"},hR={class:"more-btn"},pR=["onClick"],mR={class:"fc-product-table-mobile-body-header"},gR={class:"fc-product-table-date-col"},_R={class:"invoice-no",title:"Product ID"},vR={key:0,class:"fc-product-table-price-col"},bR={key:0},yR={key:1},wR={class:"fc-product-table-product-col"},CR=["onClick"],BR={key:0,class:"fc-product-table-product-type"},kR={class:"title"},xR={key:0,class:"value"},FR={key:1,class:"value"},SR={key:1,class:"fc-product-table-variation-col"},ER={class:"title"},UR={key:0,class:"value"},QR={key:1,class:"value"},DR={key:2,class:"fc-product-table-stock-col"},MR={class:"title"},IR={key:0,class:"value"},TR={key:1},$R={__name:"ProductsTableMobile",props:{productTable:{type:Object,required:!0}},emits:["delete"],setup(t,{emit:e}){const a=e,s=o=>{o.action==="delete"&&Gt(p("Are you sure you want to delete this product : %s ?",o.product.post_title),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{a("delete",o.product.ID)}).catch(i=>{console.log(i," handle product delete errors")})},n=o=>o.min_price===o.max_price?st(o.min_price,!0):`${st(o.min_price,!0)} - ${st(o.max_price,!0)}`;return(o,i)=>{const l=C("el-tooltip"),A=C("router-link"),u=C("el-dropdown-item"),h=C("el-dropdown-menu"),m=C("el-dropdown");return f(),y("div",AR,[(f(!0),y(P,null,j(t.productTable.getTableData(),(_,B)=>(f(),y("div",{key:_.id,class:"fc-product-table-mobile-row"},[d("div",cR,[t.productTable.isColumnVisible("post_status")?(f(),y("div",dR,[d("div",uR,[(f(),U(pt,{key:_.ID,status:_.post_status,onClick:b=>o.$router.push({name:"product_edit",params:{product_id:_.ID}})},null,8,["status","onClick"])),_.post_status==="future"?(f(),U(l,{key:0,effect:"dark",placement:"top","popper-class":"fc-label-hint-popover fc-tooltip","show-after":400,"hide-after":0},{content:c(()=>[O(v(g(p)("Publishes On: %s",g(Js)(_.post_date,!0))),1)]),default:c(()=>[r(G,{name:"InformationFill",class:"w-4 h-4"})]),_:2},1024)):S("",!0)])])):S("",!0),d("div",fR,[r(m,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:c(()=>[r(h,null,{default:c(()=>[_.ID?(f(),U(u,{key:0,class:"item-link"},{default:c(()=>[r(A,{to:{name:"product_edit",params:{product_id:_.ID}}},{default:c(()=>[r(G,{name:"Edit"}),O(" "+v(g(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):S("",!0),r(u,{command:{action:"delete",product:_},class:"item-destructive"},{default:c(()=>[r(G,{name:"Delete"}),O(" "+v(g(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:c(()=>[d("span",hR,[r(G,{name:"More"})])]),_:2},1024)])]),d("div",{class:"fc-product-table-mobile-body",onClick:b=>o.$router.push({name:"product_edit",params:{product_id:_.ID}})},[d("div",mR,[d("div",gR,[t.productTable.isColumnVisible("post_date")?(f(),y(P,{key:0},[r(Ht,{class:"date","date-time":_.post_date,"with-time":!1},null,8,["date-time"]),i[0]||(i[0]=d("span",{class:"bullet"},"•",-1))],64)):S("",!0),d("span",_R,"#"+v(_.ID),1)]),t.productTable.isColumnVisible("item_price")?(f(),y("div",vR,[_.detail?(f(),y("span",bR,v(n(_.detail)),1)):(f(),y("span",yR,v(g(p)("Set Price")),1))])):S("",!0)]),d("div",wR,[r(Zc,{product:_},null,8,["product"])])],8,pR),d("div",{class:"fc-product-table-mobile-footer",onClick:b=>o.$router.push({name:"product_edit",params:{product_id:_.ID}})},[t.productTable.isColumnVisible("product_type")?(f(),y("div",BR,[d("div",kR,v(g(p)("Type")),1),_.detail?(f(),y("span",xR,v(g(lt).headline(_.detail.fulfillment_type)),1)):(f(),y("span",FR,v("N/A")))])):S("",!0),t.productTable.isColumnVisible("variation_type")?(f(),y("div",SR,[d("div",ER,v(g(p)("Variation")),1),_.detail?(f(),y("span",UR,v(g(lt).headline(_.detail.variation_type)),1)):(f(),y("span",QR,v("N/A")))])):S("",!0),t.productTable.isColumnVisible("stock_availability")?(f(),y("div",DR,[d("div",MR,v(g(p)("Stock")),1),_.detail?(f(),y("span",IR,[_.detail.manage_stock.toString()==="0"?(f(),y(P,{key:0},[O(v(g(p)("Unlimited")),1)],64)):(f(),y(P,{key:1},[O(v(g(be).sum(_.variants,"available")),1)],64))])):(f(),y("span",TR,v("")))])):S("",!0)],8,CR)]))),128))])}}},OR={class:"fc-all-products-page fc-layout-width"},LR={class:"fc-all-products-wrap"},VR={key:1},RR={__name:"AllProducts",setup(t){const e=Kg({instance:We()}),a=T(!1),s=T(!1),n=()=>{s.value=window.innerWidth<768},o=i=>{ne.delete(`products/${i}`).then(l=>{q.success(l),e.fetch()}).catch(l=>{q.error(l)})};return he(()=>{n(),window.addEventListener("resize",n)}),He(()=>{window.removeEventListener("resize",n)}),(i,l)=>{const A=C("el-button"),u=C("el-dialog");return f(),y("div",OR,[r(kn,{title:g(p)("Products")},{action:c(()=>[r(tt,{permission:"products/create"},{default:c(()=>[r(EV,{onOnProductCreated:l[0]||(l[0]=h=>g(e).fetch()),products:g(e).getTableData()},null,8,["products"]),r(A,{type:"primary",onClick:l[1]||(l[1]=()=>{a.value=!0})},{default:c(()=>[O(v(g(p)("Add Product")),1)]),_:1})]),_:1})]),_:1},8,["title"]),r(tt,{permission:"products/view"},{default:c(()=>[d("div",LR,[r(Ao,{table:g(e),classicTabStyle:!0,"has-mobile-slot":!0},{mobile:c(()=>[g(e).isLoading()?(f(),U(YV,{key:0})):S("",!0),r($R,{"product-table":g(e),onDelete:o},null,8,["product-table"])]),default:c(()=>[g(e).isLoading()?(f(),U(PV,{key:0,productTable:g(e),"next-page-count":g(e).nextPageCount},null,8,["productTable","next-page-count"])):(f(),y("div",VR,[r(lR,{"product-table":g(e),onDelete:o},null,8,["product-table"])]))]),_:1},8,["table"])])]),_:1}),r(tt,{permission:"products/create"},{default:c(()=>[r(u,{"append-to-body":!0,modelValue:a.value,"onUpdate:modelValue":l[2]||(l[2]=h=>a.value=h),title:g(p)("Add New Product")},{default:c(()=>[a.value?(f(),U(Vl,{key:0})):S("",!0)]),_:1},8,["modelValue","title"])]),_:1})])}}};class HR extends na{constructor(){super(...arguments);ee(this,"data",{options:{status:[{title:"Published",value:"published"},{title:"Draft",value:"draft"}],fulfilment:[{title:"Physical",value:"physical"},{title:"Digital",value:"digital"}],variation:[{title:"Simple",value:"simple"},{title:"Simple Variations",value:"simple_variations"}]},dummies:{productDetail:{variation_type:"simple",manage_stock:1,fulfillment_type:"physical",stock_availability:"in-stock"},variation:{variation_title:"",item_price:0,compare_price:0,serial_index:1,fulfillment_type:"",manage_stock:1,total_stock:100,available:100,committed:0,on_hold:0,stock_status:"in-stock"},variationDetail:{description:"",payment_type:"onetime",times:"",repeat_interval:"",billing_summary:"",manage_setup_fee:"no",signup_fee_name:"",signup_fee:"",setup_fee_per_item:"no"},variationImage:{id:"",url:"",title:""},gallery:{id:"",url:"",title:""},downloadableFile:{title:"",type:"",driver:"",file_name:"",file_path:"",file_url:"",settings:"",serial:1}}});ee(this,"ensureProductVariantIsArray",a=>{Array.isArray(a.variants)||(a.variants=[])})}getDummyVariation(a){var o;const s=a==null?void 0:a.variants,n={...this.data.dummies.variation};return n.serial_index=Array.isArray(s)?s.length+1:1,n.fulfillment_type=(o=a==null?void 0:a.detail)==null?void 0:o.fulfillment_type,n.other_info={...this.data.dummies.variationDetail},n.media=[],n}addVariationToProduct(a){this.ensureProductVariantIsArray(a),a.variants.push(this.getDummyVariation(a))}handleVariationChanged(a,s){s==="simple_variations"?this.addVariationToProduct(a):a.variants=[]}get downloadableFileSchema(){return{product_variation_id:[],title:"",type:"",driver:"",file_name:"",file_path:"",file_url:"",settings:{download_limit:"",download_expiry:"",bucket:""},serial:""}}addDummyDownloadableFiles(a){const s=a;Array.isArray(s.downloadable_files)||(s.downloadable_files=[]),s.downloadable_files.push(this.downloadableFileSchema)}}class PR{constructor(){ee(this,"confirmBox",_s.confirm);ee(this,"promptBox",_s.prompt)}confirm(e,a,s){return this.confirmBox(e,a,s)}ofDelete(e=null,a=null,s){return e===null&&(e=p("Are you sure you want to delete this?. This action is not recoverable")),a===null&&(a=p("Confirm Delete!")),s={confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),confirmButtonClass:"el-button--primary",type:"warning",...s??{}},this.confirm(e,a,s)}confirmWithInput(e,a,s){return this.promptBox(e,a,s)}confirmDeleteWithInput(e,a=null,s=null,n){a===null&&(a=p("Are you sure you want to delete this?. This action is not recoverable"));const o=p('You must type "%s" exactly to proceed',`<span >${e}</span>`);return a=`<label for=""><p>${a}</p>
          `},null,8,["title"])]),_:1},8,["modelValue"])]),d("div",zz,[d("label",null,v(B.$t("Discount Amount")),1),r(x,{modelValue:l.value.discount_amount,"onUpdate:modelValue":b[3]||(b[3]=D=>l.value.discount_amount=D),type:"number",min:"0",onInput:_},null,8,["modelValue"]),A.value.hasOwnProperty("discount_amount")?(f(),U(it,{key:0,"validation-errors":A.value,"field-key":"discount_amount"},null,8,["validation-errors"])):S("",!0)])])]),_:1},8,["modelValue","title"])],64)}}},Gz={__name:"UpgradePathsLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton"),o=C("el-table-column"),i=C("el-table");return f(),U(i,{data:[1,2,3,4,5]},{default:c(()=>[r(o,{label:g(p)("From Plan"),prop:"object_id",width:300},{default:c(()=>[r(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:c(()=>[r(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),r(o,{label:g(p)("To Plan"),width:200},{default:c(()=>[r(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:c(()=>[r(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),r(o,{label:g(p)("Discount Amount"),width:110},{default:c(()=>[r(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:c(()=>[r(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),r(o,{label:g(p)("Is Prorate"),width:100},{default:c(()=>[r(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:c(()=>[r(s,{varient:"p",class:"w-4/5"})]),_:1})]),_:1},8,["label"]),r(o,{width:100},{default:c(()=>[r(n,{animated:"",class:"flex items-center min-h-[28px]"},{template:c(()=>[r(s,{varient:"p",class:"w-3/5"})]),_:1})]),_:1})]),_:1})}}},jz={class:"fc-upgrade-paths-wrap fc-layout-width"},Yz={class:"grid gap-1"},Wz={class:"text-system-dark dark:text-gray-50"},qz={class:"text-xs text-system-mid dark:text-gray-300"},Xz={class:"flex gap-1 flex-wrap"},Jz={key:0},Zz={key:1},eG={class:"fc-btn-group sm"},tG={key:2,class:"fc-upgrade-paths-mobile"},aG={class:"from-plan"},sG={class:"title"},nG={class:"plan-title"},oG={key:0,class:"plan-billing-summary"},iG={class:"to-plan"},rG={class:"title"},lG={class:"discount-amount"},AG={class:"title"},cG={key:0},dG={key:1},uG={class:"is-prorate"},fG={class:"title"},hG={class:"path-actions"},pG={class:"title"},mG={class:"fc-btn-group sm mt-3"},gG={key:0,class:"py-6 text-center"},_G={key:1},vG={key:1,class:"border border-solid border-gray-divider mt-5 pt-5 border-x-0 border-b-0 dark:border-dark-400"},bG={__name:"UpgradePaths",props:{product:{type:Object,required:!0},product_id:{type:[String,Number],required:!0}},setup(t){var w,k;const e=t,a=T(!1),s=T(null);T([]),T({status:"yes",paths:{}});const n=(k=(w=window.fluentCartAdminApp)==null?void 0:w.app_config)==null?void 0:k.isProActive,o=T([]),i=J(()=>e.product.variants.filter(F=>{var E;return(((E=_.value[F.id])==null?void 0:E.length)||0)<m.value-1})),l=F=>{A()},A=async()=>{a.value=!0,ne.get(`products/${e.product_id}/upgrade-paths`).then(function(F){o.value=F.data,B()}).catch(function(F){console.log(F)}).finally(()=>{a.value=!1})},u=T({}),h=T({}),m=T(be.get(e.product,"variants",[]).length),_=T({}),B=()=>{e.product.variants.entries().forEach(([F,x])=>{u.value[x.id]=x.variation_title,h.value[x.id]=x.other_info.billing_summary}),_.value={},o.value.forEach(F=>{_.value.hasOwnProperty(F.object_id)?(_.value[F.object_id]=[..._.value[F.object_id].concat([...F.meta_value.to_variants])],_.value[F.object_id]=[...new Set(_.value[F.object_id])]):_.value[F.object_id]=[...F.meta_value.to_variants]})},b=F=>{ne.delete(`products/upgrade-path/${F}/delete`).then(function(x){A(),q.success(x.message)}).catch(function(x){})};return he(()=>{A();const F=document.querySelector("#fca_admin_menu_holder .fc-admin-product-header");F&&document.querySelector("#fluent_cart_plugin_app").prepend(F)}),(F,x)=>{const E=C("el-table-column"),M=C("el-tag"),D=C("el-table"),R=C("el-button");return f(),y(P,null,[d("div",jz,[r(g(oe),null,{default:c(()=>[r(g(de),{title:g(p)("Upgrade Paths")},null,8,["title"]),g(n)?(f(),y(P,{key:0},[r(g(ae),{class:"px-0 pb-0"},{default:c(()=>[a.value?(f(),U(Gz,{key:0})):S("",!0),a.value?S("",!0):(f(),U(D,{key:1,class:"hide-on-mobile",data:o.value},{empty:c(()=>[O(v(g(p)("Control available upgrade options and offer tailored discounts when moving between plans.")),1)]),default:c(()=>[r(E,{label:g(p)("From Plan"),prop:"object_id",width:300},{default:c($=>[d("div",Yz,[d("div",Wz,v(g(be).get(u.value,$.row.object_id,"")),1),d("div",qz,v(g(be).get(h.value,$.row.object_id,"")),1)])]),_:1},8,["label"]),r(E,{label:g(p)("To Plan"),width:200},{default:c($=>[d("div",Xz,[(f(!0),y(P,null,j(g(be).get($.row,"meta_value.to_variants",[]),Q=>(f(),y(P,{key:Q},[g(be).get(u.value,Q)?(f(),U(M,{key:0},{default:c(()=>[O(v(g(be).get(u.value,Q)),1)]),_:2},1024)):S("",!0)],64))),128))])]),_:1},8,["label"]),r(E,{label:g(p)("Discount Amount"),width:110},{default:c($=>[$.row.meta_value.discount_amount>0?(f(),y("span",Jz,v(g(be).get($.row,"meta_value.discount_amount","0")),1)):(f(),y("span",Zz,"--"))]),_:1},8,["label"]),r(E,{label:g(p)("Is Prorate"),width:100},{default:c($=>[O(v(g(be).get($.row,"meta_value.is_prorate","0")==="1"?"Yes":"No"),1)]),_:1},8,["label"]),r(E,{width:100},{default:c($=>[d("div",eG,[r(Vh,{pathId:$.row.id,preSelectedToVariants:g(be).get($.row,"meta_value.to_variants",[]),preSelectedIsProrate:g(be).get($.row,"meta_value.is_prorate","0"),preSelectedDiscountAmount:g(be).get($.row,"meta_value.discount_amount","0"),pathOptions:i.value,"all-variants":t.product.variants,existingUpgradePathMap:_.value,fromName:g(be).get(u.value,$.row.object_id,""),preSelectedFromVariant:$.row.object_id,onPathGenerated:l},null,8,["pathId","preSelectedToVariants","preSelectedIsProrate","preSelectedDiscountAmount","pathOptions","all-variants","existingUpgradePathMap","fromName","preSelectedFromVariant"]),r(we,{size:"x-small",tag:"button",outline:"",onClick:()=>b($.row.id)},{default:c(()=>[r(G,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])),a.value?S("",!0):(f(),y("div",tG,[(f(!0),y(P,null,j(o.value,($,Q)=>(f(),y("div",{class:"fc-upgrade-paths-mobile-row",key:Q},[d("div",aG,[d("div",sG,v(g(p)("From Plan"))+": ",1),d("div",null,[d("div",nG,v(g(be).get(u.value,$.object_id,"")),1),g(be).get(h.value,$.object_id,"")?(f(),y("div",oG,v(g(be).get(h.value,$.object_id,"")),1)):S("",!0)])]),d("div",iG,[d("div",rG,v(g(p)("To Plan"))+": ",1),(f(!0),y(P,null,j(g(be).get($,"meta_value.to_variants",[]),I=>(f(),y(P,{key:I},[g(be).get(u.value,I)?(f(),U(M,{key:0},{default:c(()=>[O(v(g(be).get(u.value,I)),1)]),_:2},1024)):S("",!0)],64))),128))]),d("div",lG,[d("div",AG,v(g(p)("Discount Amount"))+": ",1),$.meta_value.discount_amount>0?(f(),y("span",cG,v(g(be).get($,"meta_value.discount_amount","0")),1)):(f(),y("span",dG,"--"))]),d("div",uG,[d("div",fG,v(g(p)("Is Prorate"))+": ",1),d("span",null,v(g(be).get($,"meta_value.is_prorate","0")==="1"?"Yes":"No"),1)]),d("div",hG,[d("div",pG,v(g(p)("Actions"))+": ",1),d("div",mG,[r(Vh,{pathId:$.id,preSelectedToVariants:g(be).get($,"meta_value.to_variants",[]),preSelectedIsProrate:g(be).get($,"meta_value.is_prorate","0"),preSelectedDiscountAmount:g(be).get($,"meta_value.discount_amount","0"),pathOptions:i.value,"all-variants":t.product.variants,existingUpgradePathMap:_.value,fromName:g(be).get(u.value,$.object_id,""),preSelectedFromVariant:$.object_id,onPathGenerated:l},null,8,["pathId","preSelectedToVariants","preSelectedIsProrate","preSelectedDiscountAmount","pathOptions","all-variants","existingUpgradePathMap","fromName","preSelectedFromVariant"]),r(we,{size:"x-small",tag:"button",outline:"",onClick:()=>b($.id)},{default:c(()=>[r(G,{name:"Delete"})]),_:2},1032,["onClick"])])])]))),128)),o.value.length==0?(f(),y("div",gG,v(g(p)("No upgrade paths found.")),1)):S("",!0)]))]),_:1}),a.value?S("",!0):(f(),U(g(ld),{key:0},{default:c(()=>[i.value.length?(f(),U(R,{key:0,text:"",onClick:x[0]||(x[0]=()=>{var $;return($=s.value)==null?void 0:$.openModal()})},{default:c(()=>[r(G,{name:"Plus"}),O(" "+v(g(p)("Add Path")),1)]),_:1})):(f(),y("span",_G,v(g(p)("No more upgrade paths available")),1))]),_:1}))],64)):(f(),y("div",vG,[r(qc,{class:"py-7.5",title:g(p)("Get access to this feature by Upgrading to WebmakerrPro Pro"),text:g(p)("This feature is only available in WebmakerrPro Pro.")},null,8,["title","text"])]))]),_:1})]),r(Vz,{productId:t.product.ID,onPathGenerated:l,ref_key:"addModalRef",ref:s,pathOptions:i.value,"all-variants":t.product.variants,existingUpgradePathMap:_.value},null,8,["productId","pathOptions","all-variants","existingUpgradePathMap"])],64)}}},yG={name:"ProductIntegrations",props:["product","product_id"],components:{IconButton:we,Empty:Tt,DynamicIcon:G,CardFooter:ld,CardBody:ae,CardHeader:de,CardContainer:oe},data(){return{product_id:this.product_id,selectedIntegrationType:"",integrationLists:[],showIntegrationDialog:!1,feeds:[],available_integrations:{},all_module_config_url:{},totalActiveModules:0,loading:!1}},computed:{Str(){return lt},hasActiveModules(){return Object.values(this.available_integrations).some(t=>t.enabled)}},methods:{isEmpty:id,fetchIntegrations(){this.loading=!0,this.$get(`products/${this.product_id}/integrations`).then(t=>{this.available_integrations=t.available_integrations,this.feeds=t.feeds,this.all_module_config_url=t.all_module_config_url}).catch(t=>{this.handleError(t.message||"Failed to load integrations")}).finally(()=>{this.loading=!1})},add(t){let e=this.available_integrations[t];if(!e.enabled){this.$confirm(e.configure_message,e.configure_title,{confirmButtonText:e.configure_button_text,cancelButtonText:"Cancel",cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{window.location.href=e.global_configure_url});return}this.$router.push({name:"product_integration_feed_editor",params:{integration_id:0,integration_name:t}})},edit(t){this.$router.push({name:"product_integration_feed_editor",params:{integration_id:t.id,integration_name:t.provider}})},handleActive(t){let e={status:t.enabled,notification_id:t.id};this.$post(`products/${this.product_id}/integrations/feed/change-status`,e).then(a=>{this.handleSuccess(a.message)}).catch(a=>{this.handleError(a.responseJSON.data.message)})},remove(t,e){let a=e.$index,s={integration_id:t};this.$confirm("Are you sure you want to delete this integration?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",confirmButtonClass:"el-button--primary",cancelButtonClass:"el-button--info is-plain",type:"warning"}).then(()=>{this.$del(`products/${this.product_id}/integrations/${t}`,s).then(n=>{this.handleSuccess(n.message),this.feeds.splice(a,1)}).catch(n=>console.log(n))}).catch(()=>{})},handleSuccess(t){this.$notify({type:"success",message:t,offset:40})},handleError(t){this.$notify({type:"error",message:t,offset:40})}},mounted(){this.fetchIntegrations();const t=document.querySelector("#fca_admin_menu_holder .fc-admin-product-header");t&&document.querySelector("#fluent_cart_plugin_app").prepend(t)}},wG={class:"fc-integration-settings fc-layout-width"},CG={key:0,class:"integration-actions"},BG={key:0,class:"fc-empty-integration-wrap px-4 text-center mx-auto mb-5 md:max-w-[600px]"},kG={class:"text-sm"},xG={key:1,class:"fc-integrations-table-wrap"},FG={class:"fc-integration-logo-wrap"},SG=["src","alt"],EG={class:"text-xs text-gray-700"},UG=["onClick"],QG={class:"fc-event-triggers"},DG={class:"fc-event-triggers"},MG={class:"fc-btn-group sm"},IG={class:"fc-integration-table-footer"},TG=["href"],$G={target:"_blank",rel:"noopener",href:"https://docs.webmakerrpro.com"};function OG(t,e,a,s,n,o){const i=C("DynamicIcon"),l=C("el-button"),A=C("el-dropdown-item"),u=C("el-dropdown-menu"),h=C("el-dropdown"),m=C("CardHeader"),_=C("el-skeleton"),B=C("el-switch"),b=C("el-table-column"),w=C("el-tag"),k=C("el-popover"),F=C("IconButton"),x=C("el-tooltip"),E=C("Empty"),M=C("el-table"),D=C("CardBody"),R=C("CardContainer"),$=Ut("loading");return f(),y("div",wG,[r(R,null,{default:c(()=>[r(m,{title:t.$t("Product Integrations")},{action:c(()=>[o.hasActiveModules?(f(),y("div",CG,[r(h,{onCommand:o.add,trigger:"click","popper-class":"fc-dropdown"},{dropdown:c(()=>[r(u,null,{default:c(()=>[(f(!0),y(P,null,j(n.available_integrations,(Q,I)=>(f(),U(A,{key:I,command:I},{default:c(()=>[O(v(Q.title),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:c(()=>[r(l,{type:"info",plain:"",size:"small"},{default:c(()=>[O(v(t.$t("Add Integration"))+" ",1),r(i,{name:"ChevronDown"})]),_:1})]),_:1},8,["onCommand"])])):S("",!0)]),_:1},8,["title"]),r(D,{class:"px-0 pb-0 pt-4"},{default:c(()=>[r(_,{class:"px-5 pb-5",loading:n.loading,animated:"",rows:6},null,8,["loading"]),n.loading?S("",!0):(f(),y(P,{key:0},[o.hasActiveModules?(f(),y("div",xG,[ut((f(),U(M,{data:n.feeds},{empty:c(()=>[r(E,{icon:"Folder",text:t.$t("No Integrations Available.")},null,8,["text"])]),default:c(()=>[r(b,{label:t.$t("Status"),width:90},{default:c(Q=>[r(B,{"active-value":"yes","inactive-value":"no",onChange:I=>o.handleActive(Q.row),modelValue:Q.row.enabled,"onUpdate:modelValue":I=>Q.row.enabled=I},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),r(b,{width:160,label:t.$t("Integration")},{default:c(Q=>{var I,L;return[d("div",FG,[(I=n.available_integrations[Q.row.provider])!=null&&I.logo?(f(),y("img",{key:0,style:{"min-width":"24px"},class:"fc-integration-logo",src:n.available_integrations[Q.row.provider].logo,alt:Q.row.provider},null,8,SG)):S("",!0),d("span",EG,v(((L=n.available_integrations[Q.row.provider])==null?void 0:L.title)||Q.row.provider),1)])]}),_:1},8,["label"]),r(b,{"min-width":150,label:t.$t("Title")},{default:c(Q=>[d("a",{class:"fc-action-link-btn",onClick:Ke(I=>o.edit(Q.row),["prevent"]),href:"#"},v(Q.row.name),9,UG)]),_:1},8,["label"]),r(b,{"min-width":150,label:t.$t("Triggers")},{default:c(Q=>[d("div",QG,[(f(!0),y(P,null,j((Q.row.feed.event_trigger||[]).slice(0,2),(I,L)=>(f(),U(w,{key:I},{default:c(()=>[r(i,{name:"Trigger"}),O(" "+v(o.Str.headline(I)),1)]),_:2},1024))),128)),(Q.row.feed.event_trigger||[]).length>2?(f(),U(k,{key:0,placement:"bottom",width:"300",trigger:"hover"},{reference:c(()=>[r(w,{type:"info"},{default:c(()=>[O(" +"+v((Q.row.feed.event_trigger||[]).length-2),1)]),_:2},1024)]),default:c(()=>[d("div",DG,[(f(!0),y(P,null,j((Q.row.feed.event_trigger||[]).slice(2),(I,L)=>(f(),U(w,{key:I+L},{default:c(()=>[r(i,{name:"Trigger"}),O(" "+v(o.Str.headline(I)),1)]),_:2},1024))),128))])]),_:2},1024)):S("",!0)])]),_:1},8,["label"]),r(b,{width:90},{default:c(Q=>[d("div",MG,[r(x,{effect:"dark",content:t.$t("Edit"),placement:"top","popper-class":"fc-tooltip"},{default:c(()=>[r(F,{tag:"button",onClick:I=>o.edit(Q.row),size:"x-small",hover:"primary"},{default:c(()=>[r(i,{name:"Edit"})]),_:2},1032,["onClick"])]),_:2},1032,["content"]),r(x,{effect:"dark",content:t.$t("Delete"),placement:"top","popper-class":"fc-tooltip"},{default:c(()=>[r(F,{tag:"button",size:"x-small",onClick:I=>o.remove(Q.row.id,Q),hover:"danger"},{default:c(()=>[r(i,{name:"Delete"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])])]),_:1})]),_:1},8,["data"])),[[$,n.loading]])])):(f(),y("div",BG,[d("p",kG,v(t.$t("You don't have any integration module enabled. Please go to integration modules and enable and configured from available modules")),1),r(l,{tag:"a",type:"primary",href:n.all_module_config_url},{default:c(()=>[O(v(t.$t("Configure Modules")),1)]),_:1},8,["href"])])),d("div",IG,[d("a",{href:n.all_module_config_url},v(t.$t("Check Global Integration Settings")),9,TG),d("a",$G,v(t.$t("View Documentations")),1)])],64))]),_:1})]),_:1})])}const Rh=ve(yG,[["render",OG]]),LG={name:"SingleIntegration",props:["product","product_id","integration_id","integration_type"],components:{CardFooter:ld,CardBody:ae,CardHeader:de,CardContainer:oe},data(){return{integration_id:this.integration_id,product_id:this.product_id,integration_type:this.integration_type||"",saving:!1,formData:{values:{name:"",integrationName:this.integration_type||"",description:""},fields:{integrationName:{type:"select",label:"Integration Type",placeholder:"Select Integration",options:[]}}}}},methods:{saveIntegration(){if(!this.formData.values.name){this.$notify({type:"error",message:"Integration name is required",offset:40});return}this.saving=!0;const t=this.integration_id?`products/${this.product_id}/integrations/${this.integration_id}`:`products/${this.product_id}/integrations`,e=this.integration_id?"put":"post";this[`$${e}`](t,{integration:this.formData.values}).then(a=>{this.saving=!1,this.$notify({type:"success",message:a.message||"Integration saved successfully",offset:40}),this.$router.push({name:"ProductIntegrations",params:{product_id:this.product_id}})}).catch(a=>{console.log(a),this.saving=!1,this.$notify({type:"error",message:(a==null?void 0:a.message)||"Failed to save integration",offset:40})})},fetchIntegrationData(){if(!this.integration_id){this.fetchIntegrationType();return}this.$get(`products/${this.product_id}/integrations/${this.integration_id}`).then(t=>{t.integration&&(this.formData.values={...t.integration},this.integration_type=t.integration.integrationName,this.fetchIntegrationType())}).catch(t=>{this.$notify({type:"error",message:t.message||"Failed to load integration data",offset:40})})},fetchIntegrationType(){this.integration_type&&this.$get(`integration/settings?integration_name=${this.integration_type}`).then(t=>{t.settings_fields&&(this.formData.fields=t.settings_fields),Object.keys(this.formData.fields).forEach(e=>{this.formData.values[e]===void 0&&(this.formData.values[e]="")})}).catch(t=>{this.$notify({type:"error",message:t.message||"Failed to load integration fields",offset:40})})},compare(t,e,a){switch(e){case"=":return t===a;case"!=":return t!==a;default:return!0}},dependancyPass(t){if(t.dependency){const a=t.dependency.depends_on.split("/").reduce((s,n)=>s[n],this.formData.values);return this.compare(a,t.dependency.operator,t.dependency.value)}return!0}},mounted(){this.fetchIntegrationData()}},VG={class:"fc-integration-settings fc-layout-width"};function RG(t,e,a,s,n,o){const i=C("el-button"),l=C("CardHeader"),A=C("el-input"),u=C("el-form-item"),h=C("el-option"),m=C("el-select"),_=C("el-form"),B=C("CardBody"),b=C("CardContainer");return f(),y("div",VG,[r(b,null,{default:c(()=>[r(l,{border_bottom:"",title:n.integration_id?t.$t("Edit Integration"):t.$t("Add Integration")},{action:c(()=>[r(i,{onClick:o.saveIntegration,type:"primary",loading:n.saving},{default:c(()=>[O(v(t.$t("Save")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"]),r(B,null,{default:c(()=>[r(_,{"label-position":"top",model:n.formData.values,class:"integration-form"},{default:c(()=>[r(u,{label:t.$t("Integration Name"),required:""},{default:c(()=>[r(A,{modelValue:n.formData.values.name,"onUpdate:modelValue":e[0]||(e[0]=w=>n.formData.values.name=w),placeholder:"Enter a name for this integration"},null,8,["modelValue"])]),_:1},8,["label"]),n.integration_id?S("",!0):(f(),U(u,{key:0,label:t.$t("Integration Type")},{default:c(()=>[r(m,{modelValue:n.formData.values.integrationName,"onUpdate:modelValue":e[1]||(e[1]=w=>n.formData.values.integrationName=w),disabled:"",class:"fc-select"},{default:c(()=>[(f(!0),y(P,null,j(n.formData.fields.integrationName.options,w=>(f(),U(h,{key:w.value,label:w.label,value:w.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])),(f(!0),y(P,null,j(n.formData.fields,(w,k)=>(f(),y(P,{key:k},[k!=="integrationName"&&o.dependancyPass(w)?(f(),U(u,{key:0,label:w.label},{default:c(()=>[w.type==="text"?(f(),U(A,{key:0,modelValue:n.formData.values[k],"onUpdate:modelValue":F=>n.formData.values[k]=F,placeholder:w.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):w.type==="select"?(f(),U(m,{key:1,modelValue:n.formData.values[k],"onUpdate:modelValue":F=>n.formData.values[k]=F,placeholder:w.placeholder,class:"fc-select"},{default:c(()=>[(f(!0),y(P,null,j(w.options,F=>(f(),U(h,{key:F.value,label:F.label,value:F.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):w.type==="textarea"?(f(),U(A,{key:2,type:"textarea",modelValue:n.formData.values[k],"onUpdate:modelValue":F=>n.formData.values[k]=F,placeholder:w.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):S("",!0)]),_:2},1032,["label"])):S("",!0)],64))),128))]),_:1},8,["model"])]),_:1})]),_:1})])}const HG=ve(LG,[["render",RG],["__scopeId","data-v-fae3d6ca"]]),PG={class:"fluent-cart-admin-validation-error-wrapper `${fieldKey}`"},gs=Object.assign({name:"ValidationError"},{__name:"ValidationError",props:{validationErrors:Object,fieldKey:{type:String,default:""}},setup(t){return(e,a)=>(f(),y("div",PG,[(f(!0),y(P,null,j(t.validationErrors,(s,n)=>(f(),y("span",{class:"fluent-cart-admin-validation-error",key:s.toLowerCase().replace(/\s/g,"")},v(s),1))),128))]))}}),NG={class:"setting-wrap"},KG={key:0,class:"fc-all-notification-table-wrap"},zG={class:"m-0 mb-1"},GG={class:"m-0"},jG={class:"m-0"},YG={class:"fc-all-notification-actions flex items-center gap-3"},WG={class:"fc-btn-group sm"},qG={__name:"EmailNotificationSettings",setup(t){We().ctx;const e=T(!0),a=T([]);Ra(),sa();const s=()=>{e.value=!0,ne.get("email-notification").then(l=>{a.value=Object.values(l.data)}).catch(l=>{}).finally(()=>{e.value=!1})},n=(l,A)=>{ne.post("email-notification/enable-notification/"+A,{active:l}).then(u=>{q.success(u.message)}).catch(u=>{u.status_code=="422"?q.validationErrors(u):q.error(u.message)}).finally(()=>{})},o=()=>{e.value=!0,ne.post("email-notification/reset").then(l=>{a.value=Object.values(l.data),q.success(l.message)}).catch(l=>{l.status_code=="422"?q.validationErrors(l):q.error(l.message)}).finally(()=>{e.value=!1})},i=T(!1);return he(()=>{s()}),(l,A)=>{const u=C("el-dialog"),h=C("el-button"),m=C("el-popconfirm"),_=C("el-skeleton"),B=C("el-table-column"),b=C("el-switch"),w=C("el-tooltip"),k=C("el-table");return f(),y("div",NG,[r(u,{modelValue:i.value,"onUpdate:modelValue":A[0]||(A[0]=F=>i.value=F),title:g(p)("Coming Soon"),width:"300"},{default:c(()=>[d("span",null,v(g(p)("Editing this email will be available later")),1)]),_:1},8,["modelValue","title"]),r(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{title:g(p)("Email Notifications")},vi({_:2},[void 0]),1032,["title"]),r(ae,{class:"px-0 pb-0"},{default:c(()=>[r(_,{class:"px-5 pb-5",loading:e.value,rows:5,animated:""},null,8,["loading"]),e.value?S("",!0):(f(),y("div",KG,[r(k,{data:a.value},{empty:c(()=>[r(Tt,{icon:"Empty/EmailNotification","has-dark":!0,text:g(p)("No email notifications available! Please reactivate WebmakerrPro!")},null,8,["text"])]),default:c(()=>[r(B,{prop:"title",label:g(p)("Notification Name"),width:"250"},{default:c(F=>[d("h4",zG,v(F.row.title),1),d("p",GG,v(F.row.description),1)]),_:1},8,["label"]),r(B,{prop:"recipient",label:g(p)("Recipient"),width:"100"},{default:c(F=>[d("p",jG,v(g(lt).headline(F.row.recipient)),1)]),_:1},8,["label"]),r(B,{label:g(p)("Enabled"),width:"50"},{default:c(F=>[d("div",YG,[r(b,{onChange:x=>n(x,F.row.name),modelValue:F.row.settings.active,"onUpdate:modelValue":x=>F.row.settings.active=x,"active-value":"yes","inactive-value":"no"},null,8,["onChange","modelValue","onUpdate:modelValue"]),d("div",WG,[r(w,{effect:"dark",content:g(p)("Edit"),placement:"top","popper-class":"fc-tooltip"},{default:c(()=>[r(we,{to:{name:"email_notifications/edit",params:{name:F.row.name}},size:"x-small",hover:"primary"},{default:c(()=>[r(G,{name:"Edit"})]),_:2},1032,["to"])]),_:2},1032,["content"])])])]),_:1},8,["label"])]),_:1},8,["data"])]))]),_:1})]),_:1})])}}},XG={class:"setting-wrap fc-edit-email-notification-wrapper"},JG={class:"grid gap-5"},ZG={class:"mb-5 flex items-center justify-between"},ej={class:"capitalize"},tj={class:"setting-switcher"},aj={class:"setting-save-action"},sj={__name:"EditEmailNotification",props:{name:{type:String,required:!0}},setup(t){const e=t,a=T(!1),s=T(!1),n=T(e.name),o=T({title:"",description:"",event:"",name:"",recipient:"",smartcode_groups:[],template_path:"",is_async:!1,settings:{active:"",is_default_body:"yes",email_body:"",subject:""}}),i=T({}),l=T(!1),A=m=>{o.value.settings.subject+=m},u=()=>{a.value=!0,ne.get("email-notification/"+n.value).then(m=>{o.value=m.data,i.value=m.shortcodes}).catch(m=>{errors.status_code=="422"?q.validationErrors(errors):q.error(errors.message)}).finally(()=>{a.value=!1})},h=()=>{s.value=!0,ne.put("email-notification/"+n.value,o.value).then(m=>{q.success(m.message)}).catch(m=>{m.status_code=="422"?q.validationErrors(m):q.error(m.message)}).finally(()=>{s.value=!1})};return he(()=>{u()}),(m,_)=>{const B=C("el-skeleton-item"),b=C("el-skeleton"),w=C("el-breadcrumb-item"),k=C("el-breadcrumb"),F=C("el-switch"),x=C("el-input"),E=C("el-form-item"),M=C("el-radio-button"),D=C("el-radio-group"),R=C("el-form"),$=C("el-button");return f(),y("div",XG,[r(b,{loading:a.value,class:"bg-white rounded p-6 mb-7.5 dark:bg-dark-700",animated:""},{template:c(()=>[r(B,{variant:"h3",class:"w-[150px] mb-5"}),d("div",JG,[d("div",null,[r(B,{variant:"h3",class:"w-[50px] mb-3"}),r(B,{variant:"p"})]),d("div",null,[r(B,{variant:"h3",class:"w-[50px] mb-3"}),r(B,{variant:"p"})])])]),_:1},8,["loading"]),a.value?S("",!0):(f(),y(P,{key:0},[d("div",ZG,[r(k,{class:"mb-0","separator-icon":g(Ca)},{default:c(()=>[r(w,{to:{path:"/settings/email_notifications"}},{default:c(()=>[O(v(m.$t("Email Notifications")),1)]),_:1}),r(w,null,{default:c(()=>[d("span",ej,v(o.value.title),1)]),_:1})]),_:1},8,["separator-icon"]),d("div",tj,[r(F,{modelValue:o.value.settings.active,"onUpdate:modelValue":_[0]||(_[0]=Q=>o.value.settings.active=Q),"active-value":"yes","inactive-value":"no","active-text":g(p)("Enable this email notification!")},null,8,["modelValue","active-text"])])]),r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[r(R,{"label-position":"top"},{default:c(()=>[r(E,{label:g(p)("Email Subject")},{default:c(()=>[r(x,{modelValue:o.value.settings.subject,"onUpdate:modelValue":_[1]||(_[1]=Q=>o.value.settings.subject=Q),class:le({"is-focus":l.value}),onFocus:_[2]||(_[2]=Q=>l.value=!0),onBlur:_[3]||(_[3]=Q=>l.value=!1),label:g(p)("Email Subject")},{append:c(()=>[r(pp,{data:i.value,onCommand:A,btnType:"info",btnSize:"small",plain:"",placement:"bottom"},{default:c(()=>[O(v(g(p)("Add ShortCodes")),1)]),_:1},8,["data"])]),_:1},8,["modelValue","class","label"])]),_:1},8,["label"]),r(E,{label:g(p)("Email Body Type")},{default:c(()=>[r(D,{modelValue:o.value.settings.is_default_body,"onUpdate:modelValue":_[4]||(_[4]=Q=>o.value.settings.is_default_body=Q)},{default:c(()=>[r(M,{label:g(p)("Default Body"),value:"yes"},null,8,["label"]),r(M,{label:g(p)("Customized Body"),value:"no"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),o.value.settings.is_default_body==="no"?(f(),U(E,{key:0,label:g(p)("Email Body")},{default:c(()=>[r(co,{modelValue:o.value.settings.email_body,"onUpdate:modelValue":_[5]||(_[5]=Q=>o.value.settings.email_body=Q),"short-codes":i.value,emailTemplateEditor:!0,onUpdate:_[6]||(_[6]=Q=>{o.value.settings.email_body=Q})},null,8,["modelValue","short-codes"])]),_:1},8,["label"])):S("",!0)]),_:1})]),_:1})]),_:1})],64)),d("div",aj,[r($,{onClick:h,type:"primary",disabled:s.value,loading:s.value},{default:c(()=>[O(v(s.value?g(p)("Updating"):g(p)("Update")),1)]),_:1},8,["disabled","loading"])])])}}},nj={name:"StorageSettings",props:["settings"],components:{Badge:pt,CardBody:ae,CardHeader:de,CardContainer:oe},data(){return{loading:!1,availableDrivers:[]}},methods:{getBadgeTitle(t){return t===!0?"active":"inactive"},getLogo(t){return t},getStorageDrivers(){this.loading=!0,this.$get("settings/storage-drivers").then(t=>{this.availableDrivers=t.drivers}).catch(t=>{this.handleError(t)}).finally(()=>{this.loading=!1})}},mounted(){this.getStorageDrivers()}},oj={class:"setting-wrap"},ij={class:"storage-setting-list fc-content-card-list"},rj=["src","alt"],lj={class:"fc-content-card-list-head"},Aj={class:"title-wrap"},cj={class:"fc-content-card-list-content"},dj={class:"fc-content-card-list-action"};function uj(t,e,a,s,n,o){const i=C("CardHeader"),l=C("el-skeleton"),A=C("Badge"),u=C("el-button"),h=C("CardBody"),m=C("CardContainer");return f(),y("div",oj,[r(m,null,{default:c(()=>[r(i,{title:t.$t("Storage Drivers"),border_bottom:""},null,8,["title"]),r(h,null,{default:c(()=>[r(l,{loading:n.loading,animated:"",rows:6},null,8,["loading"]),d("div",ij,[(f(!0),y(P,null,j(n.availableDrivers,(_,B)=>(f(),y("div",{class:"fc-content-card-list-item",key:B},[d("div",{class:le(`fc-content-card-list-icon ${_.title.toLowerCase()}`)},[d("img",{src:o.getLogo(_.logo),alt:_.title},null,8,rj)],2),d("div",lj,[d("div",Aj,[d("h6",null,v(_.title),1)]),r(A,{size:"small",status:_.status?"active":"info","hide-icon":!0},{default:c(()=>[O(v(t.$t(o.getBadgeTitle(_.status))),1)]),_:2},1032,["status"])]),d("div",cj,[d("p",null,v(_.description),1)]),d("div",dj,[r(u,{size:"small",onClick:()=>t.$router.push({name:_.route})},{default:c(()=>[O(v(t.$t("Manage")),1)]),_:2},1032,["onClick"])])]))),128))])]),_:1})]),_:1})])}const fj=ve(nj,[["render",uj]]),hj={class:"single-page-header flex items-center justify-between"},pj={__name:"GlobalStorageComponents",setup(t){T({});const e=T({}),a=T(!1),s=T(!1);T(!1);const n=T("top"),o=T("");T([]);const i=T("");T(!1),T(!1),T(!1);const l=Vd(),A=T({}),u=sa(),h=xn(),m=()=>{s.value=!0,ne.get("settings/storage-drivers/"+i.value).then(w=>{s.value=!1,l.setSchema(w.fields).setDefaults(w.settings).initForm()})},_=()=>{let w=l.values;a.value=!0,ne.post("settings/storage-drivers",{settings:{...w},driver:i.value}).then(k=>{var F;e.value.is_active=(F=k.data)==null?void 0:F.is_active,q.success(k.message||p("Storage Settings updated!")),l.values=k.data,k.data.shouldReload&&m()}).catch(k=>{k.status_code=="422"?q.validationErrors(k):q.error(k.message)}).finally(()=>{a.value=!1})},B=()=>{i.value=u.name,o.value=`settings/storage/${u.name}`},b=()=>{let w="";return u.meta.title?w=u.meta.title+" Settings":w=u.name.charAt(0).toUpperCase()+u.name.slice(1).toLowerCase()+" Settings",w};return ke(u,(w,k)=>{B(),m(),b()}),h.onSave(()=>{_()}),he(()=>{B(),m(),window.outerWidth<500&&(n.value="top")}),(w,k)=>{const F=C("el-breadcrumb-item"),x=C("el-breadcrumb"),E=C("el-skeleton");return f(),y("div",{class:le(["setting-wrap",i.value])},[d("div",hj,[r(x,{class:"mb-0","separator-icon":g(Ca)},{default:c(()=>[r(F,{to:{name:"storage"}},{default:c(()=>[O(v(g(p)("Storage Drivers")),1)]),_:1}),g(lt).headline(i.value)?(f(),U(F,{key:0},{default:c(()=>[O(v(g(lt).headline(i.value)),1)]),_:1})):S("",!0)]),_:1},8,["separator-icon"])]),r(E,{loading:s.value,animated:"",rows:6},null,8,["loading"]),s.value?S("",!0):(f(),U(Pl,{key:0,form:g(l),showSubmitButton:!0,onOnSubmitButtonClick:_,submitButtonText:g(p)("Save"),loading:a.value,onOnChange:k[0]||(k[0]=M=>{}),"validation-errors":A.value},null,8,["form","submitButtonText","loading","validation-errors"]))],2)}}},mj=["innerHTML"],gj={class:"fc-select-template-wrap"},_j={class:"fc-select-template-wrap flex gap-2 flex-row"},vj={class:"setting-save-action"},bj={__name:"AddEmailNotification",setup(t){const e=We().ctx,a=T(),s=T(!0),n=T(!1),o=T({}),i=T(),l=T([{label:"After Order Created",value:"fluent_cart/order_created"},{label:"After Order Updated",value:"fluent_cart/order_updated"},{label:"After Payment Paid",value:"fluent_cart/order_paid"},{label:"After User Created",value:"fluent_cart/user_created"},{label:"After Refund made",value:"fluent_cart/order_refunded"}]),A=T({}),u=T([{label:"Admin Email",value:"{wp.admin_email}"},{label:"Customer Email",value:"{order.customer.email}"},{label:"User Email",value:"{user.user_email}"}]);T(!0);const h=T({}),m=T({});Ra(),sa();let _=null;const B=T([]),b=T([]),w=T({});xn().onSave(()=>{M(event)});const F=L=>{const V=L;e.$post("email-notification/getTemplate/",{template:V}).then(N=>{var Y;o.value.content=N.data.content,(Y=a.value)==null||Y.setContent(o.value.content)}).catch(N=>{}).finally(()=>{s.value=!1})},x=()=>{var L;(L=a.value)==null||L.setContent("")},E=()=>{s.value=!0,e.$get("email-notification/get-short-codes").then(L=>{A.value=L.data.shortcodes,h.value=L.data.email_templates,m.value=Object.keys(L.data.buttons).map(V=>({[V]:L.data.buttons[V]}))}).catch(L=>{}).finally(()=>{s.value=!1})},M=L=>{L.preventDefault(),w.value={},s.value=!0,e.$post("email-notification/create",o.value).then(V=>{e.handleSuccess(V)}).catch(V=>{V.status_code=="422"?(q.validationErrors(V),w.value=V.data):q.error(V.message)}).finally(()=>{s.value=!1})};T(!1);const D=()=>{n.value=!0,i.value=o.value.content};he(()=>{E()});const R=L=>{_=L},$=L=>{w.value&&w.value.hasOwnProperty(L)&&delete w.value[L]},Q=()=>{o.value.to=B.value},I=()=>{o.value.from=b.value};return(L,V)=>{const N=C("el-switch"),Y=C("el-dialog"),K=C("el-input"),X=C("el-form-item"),re=C("el-option"),ce=C("el-select"),Z=C("el-col"),H=C("el-row"),z=C("el-tooltip"),W=C("el-button"),ie=C("el-form");return f(),U(oe,null,{default:c(()=>[r(de,{title:o.value.title?o.value.title:"Add Notification",title_size:"small",border_bottom:"",icon:"Message"},{action:c(()=>[r(N,{"active-value":"yes","inactive-value":"no",modelValue:o.value.enabled,"onUpdate:modelValue":V[0]||(V[0]=te=>o.value.enabled=te),"active-text":o.value.enabled=="yes"?L.$t("Enabled"):L.$t("Enable")},null,8,["modelValue","active-text"])]),_:1},8,["title"]),r(ae,null,{default:c(()=>[r(Y,{modelValue:n.value,"onUpdate:modelValue":V[1]||(V[1]=te=>n.value=te),title:L.$t("Preview")},{default:c(()=>[d("div",{innerHTML:i.value},null,8,mj)]),_:1},8,["modelValue","title"]),r(ie,{"label-position":"top","require-asterisk-position":"right"},{default:c(()=>[r(X,{label:L.$t("Notification Name"),required:""},{default:c(()=>{var te,se;return[r(K,{modelValue:o.value.title,"onUpdate:modelValue":V[2]||(V[2]=pe=>o.value.title=pe),onFocus:V[3]||(V[3]=pe=>$("title"))},null,8,["modelValue"]),r(gs,{"validation-errors":(se=(te=w.value)==null?void 0:te.title)==null?void 0:se.required},null,8,["validation-errors"])]}),_:1},8,["label"]),r(X,{label:L.$t("Select notification event"),required:""},{default:c(()=>{var te,se;return[r(ce,{multiple:!0,modelValue:o.value.events,"onUpdate:modelValue":V[4]||(V[4]=pe=>o.value.events=pe),placeholder:L.$t("Select Events"),onFocus:V[5]||(V[5]=pe=>$("events")),clearable:""},{default:c(()=>[(f(!0),y(P,null,j(l.value,pe=>(f(),U(re,{key:pe.value,label:pe.label,value:pe.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),r(gs,{"validation-errors":(se=(te=w.value)==null?void 0:te.events)==null?void 0:se.required},null,8,["validation-errors"])]}),_:1},8,["label"]),r(H,{gutter:15},{default:c(()=>[r(Z,{lg:12},{default:c(()=>[r(X,{label:L.$t("Mail From:"),required:""},{default:c(()=>{var te,se;return[r(K,{modelValue:o.value.from,"onUpdate:modelValue":V[8]||(V[8]=pe=>o.value.from=pe),onFocus:V[9]||(V[9]=pe=>$("from")),placeholder:L.$t("Select a Field or Type Custom Value")},{append:c(()=>[r(ce,{modelValue:b.value,"onUpdate:modelValue":V[6]||(V[6]=pe=>b.value=pe),onChange:V[7]||(V[7]=pe=>I()),clearable:""},{default:c(()=>[(f(!0),y(P,null,j(u.value,pe=>(f(),U(re,{key:pe.value,label:pe.label,value:pe.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","placeholder"]),r(gs,{"validation-errors":(se=(te=w.value)==null?void 0:te.from)==null?void 0:se.required},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1}),r(Z,{lg:12},{default:c(()=>[r(X,{label:L.$t("Send Mail To:"),required:""},{default:c(()=>{var te,se;return[r(K,{modelValue:o.value.to,"onUpdate:modelValue":V[12]||(V[12]=pe=>o.value.to=pe),onFocus:V[13]||(V[13]=pe=>$("to"))},{append:c(()=>[r(ce,{modelValue:B.value,"onUpdate:modelValue":V[10]||(V[10]=pe=>B.value=pe),onChange:V[11]||(V[11]=pe=>Q()),clearable:""},{default:c(()=>[(f(!0),y(P,null,j(u.value,pe=>(f(),U(re,{key:pe.value,label:pe.label,value:pe.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),r(gs,{"validation-errors":(se=(te=w.value)==null?void 0:te.to)==null?void 0:se.required},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1})]),_:1}),r(X,{label:L.$t("Cc:")},{default:c(()=>[r(K,{modelValue:o.value.cc,"onUpdate:modelValue":V[14]||(V[14]=te=>o.value.cc=te)},null,8,["modelValue"])]),_:1},8,["label"]),r(X,{label:L.$t("Mail Subject:"),required:""},{default:c(()=>{var te,se;return[r(K,{modelValue:o.value.subject,"onUpdate:modelValue":V[15]||(V[15]=pe=>o.value.subject=pe),onFocus:V[16]||(V[16]=pe=>$("subject"))},null,8,["modelValue"]),r(gs,{"validation-errors":(se=(te=w.value)==null?void 0:te.subject)==null?void 0:se.required},null,8,["validation-errors"])]}),_:1},8,["label"]),d("div",null,[r(co,{ref_key:"wpEditor",ref:a,"short-codes":A.value,buttons:m.value,onOnEditorReady:R,onUpdate:V[19]||(V[19]=te=>{o.value.content=te}),modelValue:o.value.content,"onUpdate:modelValue":V[20]||(V[20]=te=>o.value.content=te)},{action:c(()=>[d("div",gj,[r(ce,{onChange:V[17]||(V[17]=te=>{var se;(se=a.value)==null||se.setContent(te)}),placeholder:L.$t("Select button"),clearable:""},{default:c(()=>[(f(!0),y(P,null,j(m.value,(te,se)=>(f(),U(re,{key:se,label:Object.keys(te)[0],value:Object.values(te)[0]},null,8,["label","value"]))),128))]),_:1},8,["placeholder"])]),d("div",_j,[r(ce,{onChange:V[18]||(V[18]=te=>{F(te)}),placeholder:L.$t("Select template"),clearable:""},{default:c(()=>[(f(!0),y(P,null,j(h.value,(te,se)=>(f(),U(re,{key:se,label:te.label,value:te.path},null,8,["label","value"]))),128))]),_:1},8,["placeholder"]),d("span",null,[r(z,{effect:"dark",content:L.$t("Reset Template"),placement:"top","popper-class":"fc-tooltip"},{default:c(()=>[r(we,{onClick:Ke(x,["prevent"]),tag:"button"},{default:c(()=>[r(G,{name:"Refresh"})]),_:1})]),_:1},8,["content"])])])]),preview_button:c(()=>[g(_)!==null?(f(),U(z,{key:0,effect:"dark",content:L.$t("Preview Template"),placement:"top","popper-class":"fc-tooltip"},{default:c(()=>[r(we,{onClick:Ke(D,["prevent"]),tag:"button"},{default:c(()=>[r(G,{name:"Eye"})]),_:1})]),_:1},8,["content"])):S("",!0)]),_:1},8,["short-codes","buttons","modelValue"])]),d("div",vj,[r(W,{onClick:M,type:"primary",disabled:s.value,loading:s.value},{default:c(()=>[O(v(L.$t("Save Notification")),1)]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1})}}};class yj extends lo{getTabs(){return{all:p("All"),success:p("Success"),warning:p("Warning"),error:p("Error"),failed:p("Failed"),info:p("Info"),api:p("API Only")}}getToggleableColumns(){return[{label:"Title",value:"title"},{label:"Content",value:"content"},{label:"Date",value:"date"},{label:"Actions",value:"actions"}]}getSortableColumns(){return[{label:p("ID"),value:"id"},{label:p("Title"),value:"title"},{label:p("Created At"),value:"created_at"}]}getSearchHint(){return p("Search by id, title, content or module.")}getFetchUrl(){return"activity"}parseResponse(e){return e.activities}getTableName(){return"log_table"}getAdvanceFilterOptions(){return null}getSearchGuideOptions(){return[]}}function wj(t){return yj.init(t)}const Cj={class:"fc-table-mobile-wrap fc-logs-table-mobile-wrap"},Bj={class:"fc-table-mobile-header"},kj={class:"fc-table-date-col"},xj={class:"mark-read-unread-wrap"},Fj=["onClick","title"],Sj=["onClick","title"],Ej=["title"],Uj={class:"fc-table-mobile-body"},Qj={key:0,class:"fc-table-title-col"},Dj={key:1,class:"fc-table-content-col"},Mj={class:"fc-table-mobile-footer"},Ij={class:"fc-table-mobile-footer-row"},Tj={class:"fc-table-status-col"},$j={class:"title"},Oj={class:"fc-table-module-col"},Lj={class:"title"},Vj={class:"value"},Rj={key:0,class:"fc-table-actions-col"},Hj={class:"title"},Pj={__name:"LogsTableMobile",props:{table:{type:Object}},emits:["changeStatus"],setup(t,{emit:e}){const a=e,s=(n,o)=>{a("changeStatus",n,o)};return(n,o)=>{const i=C("el-icon"),l=C("router-link");return f(),y("div",Cj,[(f(!0),y(P,null,j(t.table.getTableData(),(A,u)=>(f(),y("div",{key:A.id,class:"fc-table-mobile-row"},[d("div",Bj,[d("div",kj,[d("div",xj,[A.read_status!=="unread"?(f(),y("span",{key:0,onClick:h=>s(A,"unread"),title:g(p)("Mark as unread")},[r(i,null,{default:c(()=>[r(g(Tr))]),_:1})],8,Fj)):(f(),y("span",{key:1,onClick:h=>s(A,"read"),title:g(p)("Mark as read")},[r(i,null,{default:c(()=>[r(g(wl))]),_:1})],8,Sj))]),d("div",{title:g(p)("Logs ID: %s",A.id),class:"invoice-no"}," #"+v(A.id),9,Ej),t.table.isColumnVisible("date")?(f(),y(P,{key:0},[o[0]||(o[0]=d("span",{class:"bullet"},"•",-1)),r(Ht,{class:"date","date-time":A.created_at,"with-time":!0},null,8,["date-time"])],64)):S("",!0)])]),d("div",Uj,[t.table.isColumnVisible("title")?(f(),y("div",Qj,v(A.title),1)):S("",!0),t.table.isColumnVisible("content")?(f(),y("div",Dj,v(A.content),1)):S("",!0)]),d("div",Mj,[d("div",Ij,[d("div",Tj,[d("div",$j,v(g(p)("Status")),1),(f(),U(pt,{status:A.status,size:"small",key:A.id},null,8,["status"]))]),d("div",Oj,[d("div",Lj,v(g(p)("Module")),1),d("div",Vj,v(A.module_name),1)]),t.table.isColumnVisible("actions")?(f(),y("div",Rj,[d("div",Hj,v(g(p)("Actions")),1),r(l,{class:"value",to:{name:"view_order",params:{order_id:A.module_id}}},{default:c(()=>[O(v(g(p)("View Order")),1)]),_:2},1032,["to"])])):S("",!0)])])]))),128))])}}},Nj={},Kj={class:"px-4 py-3"},zj={class:"grid grid-cols-3 gap-5 mt-5"};function Gj(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),U(s,{animated:""},{template:c(()=>[d("div",Kj,[(f(),y(P,null,j(2,n=>d("div",{key:n,class:"flex items-center justify-between mb-3"},[r(a,{varient:"p",class:"w-1/2"}),r(a,{varient:"p",class:"w-[100px]"})])),64)),d("div",zj,[(f(),y(P,null,j(3,n=>d("div",{key:n},[r(a,{varient:"p",class:"w-1/2"}),r(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const jj=ve(Nj,[["render",Gj]]),Yj={class:"fc-all-logs-page fc-layout-width"},Wj={class:"inline-flex items-center gap-1"},qj=["onClick","title"],Xj=["onClick","title"],Jj={__name:"Logs",setup(t){const e=We().ctx,a=wj(),s=T([]),n=(o,i)=>{e.$put("activity/"+o.id+"/mark-read",{id:o.id,status:i}).then(l=>{s.value.find(A=>A.id===o.id).read_status=i,e.handleSuccess(l)}).catch(l=>{l.status_code=="422"?q.validationErrors(l):q.error(l.message)})};return a.onDataLoaded(function(){s.value=a.getTableData()}),(o,i)=>{const l=C("el-icon"),A=C("el-table-column"),u=C("el-button"),h=C("el-table"),m=Ut("loading");return f(),y("div",Yj,[r(kn,{title:o.$t("Logs")},null,8,["title"]),r(Ao,{table:g(a),classicTabStyle:!0,"has-mobile-slot":!0},{mobile:c(()=>[g(a).isLoading()?(f(),U(jj,{key:0})):S("",!0),g(a).isLoading()?S("",!0):(f(),U(Pj,{key:1,table:g(a),onChangeStatus:n},null,8,["table"]))]),default:c(()=>[ut((f(),y("div",null,[r(h,{class:"w-full",data:g(a).getTableData()},{empty:c(()=>[r(Tt,{icon:"Empty/ListView",text:o.$t("We could't find any logs matching your filter.")},null,8,["text"])]),default:c(()=>[r(A,{label:o.$t("ID"),width:100},{default:c(_=>[d("div",Wj,[_.row.read_status!=="unread"?(f(),y("span",{key:0,onClick:B=>n(_.row,"unread"),title:o.$t("Mark as unread"),class:"cursor-pointer"},[r(l,null,{default:c(()=>[r(g(Tr))]),_:1})],8,qj)):(f(),y("span",{key:1,onClick:B=>n(_.row,"read"),title:o.$t("Mark as read"),class:"cursor-pointer"},[r(l,null,{default:c(()=>[r(g(wl))]),_:1})],8,Xj)),O(" #"+v(_.row.id),1)])]),_:1},8,["label"]),g(a).isColumnVisible("date")?(f(),U(A,{key:0,label:o.$t("Date"),width:120},{default:c(_=>[r(Ht,{"date-time":_.row.created_at},null,8,["date-time"])]),_:1},8,["label"])):S("",!0),g(a).isColumnVisible("title")?(f(),U(A,{key:1,label:o.$t("Title"),width:200},{default:c(_=>[O(v(_.row.title),1)]),_:1},8,["label"])):S("",!0),g(a).isColumnVisible("content")?(f(),U(A,{key:2,label:o.$t("Content"),width:200},{default:c(_=>[O(v(_.row.content),1)]),_:1},8,["label"])):S("",!0),r(A,{label:o.$t("Status"),width:100},{default:c(_=>[(f(),U(pt,{status:_.row.status,size:"small",key:_.row.id},null,8,["status"]))]),_:1},8,["label"]),r(A,{label:o.$t("Module"),width:100},{default:c(_=>[O(v(_.row.module_name),1)]),_:1},8,["label"]),g(a).isColumnVisible("actions")?(f(),U(A,{key:3,label:o.$t("Actions"),width:100},{default:c(_=>[r(u,{tag:"router-link",class:"el-button--x-small",to:{name:"view_order",params:{order_id:_.row.module_id}}},{default:c(()=>[O(v(o.$t("View Order")),1)]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0)]),_:1},8,["data"])])),[[m,g(a).isLoading()]])]),_:1},8,["table"])])}}},Zj={class:"fc-report-nav-links-wrap"},eY={class:"fc-report-nav-links-toggle"},tY={__name:"ReportNavLinks",setup(t){const e=Ra(),a=sa(),s=T(null),n=T([]),o=T(null),i=T(null),l=T(!1),A=[{route:"reports_overview",label:p("Overview"),url:"/reports/overview"},{route:"reports_sales",label:p("Sales"),url:"/reports/sales"},{route:"reports_orders",label:p("Orders"),url:"/reports/orders"},{route:"reports_revenue",label:p("Revenue"),url:"/reports/revenue"},{route:"reports_refunds",label:p("Refunds"),url:"/reports/refunds"},{route:"reports_subscriptions",label:p("Subscriptions"),url:"/reports/subscriptions",child:[{route:"future_renewals",label:p("Future Renewals"),url:"/reports/subscriptions/future-renewals"}]},{route:"reports_products",label:p("Products"),url:"/reports/products"},{route:"reports_customer",label:p("Customers"),url:"/reports/customer"}],u=()=>{l.value=window.innerWidth<1025,h()},h=()=>{if(!s.value||!i.value)return;const w=A.findIndex(E=>E.route===a.name);if(w===-1)return;const k=n.value[w];if(!k)return;const F=i.value.getBoundingClientRect(),x=k.$el.getBoundingClientRect();l.value?(s.value.style.width=`${x.width}px`,s.value.style.height="3px",s.value.style.left=`${x.left-F.left}px`,s.value.style.top=`${x.top-F.top+x.height}px`):(s.value.style.width=`${x.width}px`,s.value.style.height="2px",s.value.style.left="0px",s.value.style.top="auto",s.value.style.transform=`translateX(${x.left-F.left}px)`)},m=()=>{i.value.classList.toggle("is-active"),h()},_=w=>{const k=a.path;return!!(w.child&&w.child.length&&w.child.some(x=>k===x.url||k.includes(x.url))||k===w.url||k.includes(w.url))},B=(w,k,F)=>a.path===w.url,b=w=>{e.push({name:w.route});const k=document.querySelector("#fc-report-body");k&&(k.scrollTop=0)};return ke(()=>a.name,()=>{h()},{immediate:!0}),he(()=>{o.value=document.querySelector(".fca_admin_menu_wrap"),u(),window.addEventListener("resize",h)}),(w,k)=>{const F=C("el-button");return f(),y("div",Zj,[d("div",eY,[r(F,{onClick:m},{default:c(()=>[r(G,{name:"LineChart",class:"icon"}),O(" "+v(g(p)("Reports")),1)]),_:1})]),d("div",{class:"fc-report-nav-links",ref_key:"reportNavLinks",ref:i},[d("div",{class:"fc-report-nav-links-overlay",onClick:m}),r(Ug,null,{default:c(()=>[r(Qg,{class:"is-open"},{default:c(()=>[(f(),y(P,null,j(A,(x,E)=>r(ll,{key:E,class:le({"tab-item-active":_(x)})},{default:c(()=>[r(Al,{onClick:M=>b(x)},{default:c(()=>[x.icon?(f(),U(G,{key:0,name:x.icon},null,8,["name"])):S("",!0),O(" "+v(x.label)+" ",1),r(G,{name:"ChevronRight",class:"tab-icon-right"})]),_:2},1032,["onClick"]),r(pa,{accordion:"",visible:_(x)&&x.child,class:"fc-settings-menu-child-wrap"},{default:c(()=>[(f(!0),y(P,null,j(x.child,(M,D)=>(f(),U(ll,{key:D,class:le({"tab-item-active":B(M,D,x)})},{default:c(()=>[r(Al,{onClick:R=>b(x)},{default:c(()=>[O(v(M.label),1)]),_:2},1032,["onClick"])]),_:2},1032,["class"]))),128))]),_:2},1032,["visible"])]),_:2},1032,["class"])),64))]),_:1})]),_:1})],512)])}}},aY={class:"fc-report-header-top"},sY={class:"fc-report-header-top-inner"},nY={__name:"ReportFilterHeader",props:{filterState:{type:[Object]}},setup(t){const e=sa();t.filterState;const s=T(null),n=T(0),o=()=>{const l=document.querySelector(".fca_admin_menu_wrap");if(l&&s.value){const A=l.offsetHeight;n.value=A+32,s.value.style.top=`${n.value}px`}},i=()=>{s.value&&(window.scrollY>0?s.value.classList.add("is-fixed"):s.value.classList.remove("is-fixed"))};return J(()=>!["reports_overview","reports_customer"].includes(e.name)),he(()=>{o(),window.addEventListener("scroll",i),window.addEventListener("resize",o)}),He(()=>{window.removeEventListener("scroll",i),window.removeEventListener("resize",o)}),(l,A)=>(f(),y("div",{class:"fc-report-header",ref_key:"reportHeaderWrap",ref:s},[d("div",aY,[d("div",sY,[r(tY)])])],512))}},oY=["title"],iY={__name:"RemoveButton",props:{filterKey:{type:String,required:!0},itemId:{type:[String,Number],default:null}},emits:["remove"],setup(t,{emit:e}){const a=t,s=e,n=()=>{s("remove",{filterKey:a.filterKey,itemId:a.itemId})};return(o,i)=>(f(),y("button",{class:"fc-applied-filter-remove",onClick:n,title:o.$t("Remove")},[r(G,{name:"Close"})],8,oY))}},rY={__name:"StatusFilter",props:{filterState:{type:[Object]},filterItem:{type:Object,required:!0},filterItemKey:{type:String,required:!0}},setup(t){const a=t.filterState;return(s,n)=>{const o=C("el-option"),i=C("el-select");return f(),U(i,{modelValue:g(a).data.selectedFilters[t.filterItemKey].value,"onUpdate:modelValue":n[0]||(n[0]=l=>g(a).data.selectedFilters[t.filterItemKey].value=l),placeholder:s.$t("Select Status"),filterable:"",onChange:g(a).applyFilterChange,"popper-class":"fc-dropdown-compact",size:"small"},{default:c(()=>[(f(!0),y(P,null,j(t.filterItem.options,l=>(f(),U(o,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","onChange"])}}},r_={__name:"DateRangeFilter",props:{modelValue:Array,placement:{type:String,default:"bottom-end"},showArrow:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},filterState:{type:[Object]}},emits:["update:modelValue","change"],setup(t,{emit:e}){const a=t,s=e,n=a.filterState,o=J({get:()=>a.modelValue,set:h=>s("update:modelValue",h)}),i=J(()=>window.fluentCartAdminApp.app_config.isProActive);function l(h){s("change",h)}function A(h){h&&me(()=>{const m=document.querySelectorAll(".el-picker-panel__shortcut");m.forEach(_=>{_.addEventListener("click",()=>{m.forEach(B=>B.classList.remove("active")),_.classList.add("active")})})})}function u(){n.data.dateRange=[ot.withTimezone(ye().subtract(1,"month").format("YYYY-MM-DD 00:00:00")),ot.withTimezone(ye().format("YYYY-MM-DD 23:59:59"))],s("change",n.data.dateRange)}return(h,m)=>{const _=C("el-date-picker");return f(),y("div",{class:le(`fc-date-range-filter ${t.clearable?"is-clearable":""}`)},[r(_,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=B=>o.value=B),type:"daterange","range-separator":"-","start-placeholder":h.$t("Start date"),"end-placeholder":h.$t("End date"),"unlink-panels":"",clearable:!1,shortcuts:g(hp),onChange:l,onVisibleChange:A,placement:t.placement,disabled:!i.value},null,8,["modelValue","start-placeholder","end-placeholder","shortcuts","placement","disabled"]),t.showArrow?(f(),U(G,{key:0,name:"ChevronDown",class:"fc-applied-filter-expand-icon"})):S("",!0),i.value&&t.clearable?(f(),U(G,{key:1,onClick:u,name:"CircleClose",class:"fc-applied-filter-clear-all"})):S("",!0)],2)}}},l_={__name:"CurrencyFilter",props:{modelValue:String,currencies:{type:Array,required:!0}},emits:["update:modelValue","change"],setup(t,{emit:e}){const a=t,s=e,n=J({get:()=>a.modelValue,set:i=>s("update:modelValue",i)}),o=i=>{s("change",i)};return(i,l)=>{const A=C("el-option"),u=C("el-select");return f(),U(u,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=h=>n.value=h),placeholder:i.$t("Select Currency"),filterable:"",onChange:o,"popper-class":"fc-dropdown-compact",size:"small"},{default:c(()=>[(f(!0),y(P,null,j(t.currencies,(h,m)=>(f(),U(A,{key:m,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])}}},lY={__name:"ResetFilters",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(f(),y("button",{onClick:n[0]||(n[0]=(...o)=>g(a).resetFilters&&g(a).resetFilters(...o)),class:"reset-filters-btn"},v(s.$t("Reset Filters")),1))}},AY={__name:"MultiselectFilter",props:{filterState:{type:[Object]},filterItem:{type:Object,required:!0},filterItemKey:{type:String,required:!0}},setup(t){const e=t,a=e.filterState,s=J({get:()=>{var n;return((n=a.data.selectedFilters[e.filterItemKey])==null?void 0:n.value)??[]},set:n=>{a.setMultiSelectChange(e.filterItemKey,n)}});return(n,o)=>{const i=C("el-option"),l=C("el-select");return f(),U(l,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=A=>s.value=A),placeholder:n.$t("Select Order Type"),multiple:"",filterable:"","popper-class":"fc-dropdown-compact fc-multi-select-filter",size:"small"},{default:c(()=>[(f(!0),y(P,null,j(t.filterItem.options,A=>(f(),U(i,{key:A.value,label:A.label,value:A},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])}}},cY={class:"fc-compare-to-filter"},dY={class:"fc-applied-filter-label"},uY={class:"fc-applied-filter-actions"},fY={class:"fc-compare-to-select"},hY={class:"fc-compare-to-date"},pY={__name:"CompareToFilter",props:{filterState:{type:[Object]}},emits:["selectChange","dateChange"],setup(t,{emit:e}){const a=t,s=e,n=a.filterState,o=J({get:()=>{var A;return((A=n.data.selectedFilters.compareType)==null?void 0:A.value)??n.data.compareType},set:A=>{n.setCompareTypeChange(A),s("selectChange",A)}}),i=J({get:()=>{var A;return((A=n.data.selectedFilters.compareDate)==null?void 0:A.value)??n.data.compareDate},set:A=>{n.setCompareDateChange(A),s("dateChange",A)}}),l=J(()=>window.fluentCartAdminApp.app_config.isProActive);return(A,u)=>{const h=C("el-option"),m=C("el-select"),_=C("el-date-picker");return f(),y("div",cY,[d("div",dY,v(g(p)("Compare to")),1),d("div",uY,[d("div",fY,[r(m,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=B=>o.value=B),"popper-class":"fc-dropdown-compact",disabled:!l.value},{default:c(()=>[r(h,{label:g(p)("Previous Period"),value:"previous_period"},null,8,["label"]),r(h,{label:g(p)("Previous Month"),value:"previous_month"},null,8,["label"]),r(h,{label:g(p)("Previous Quarter"),value:"previous_quarter"},null,8,["label"]),r(h,{label:g(p)("Previous Year"),value:"previous_year"},null,8,["label"]),r(h,{label:g(p)("Custom"),value:"custom"},null,8,["label"]),r(h,{label:g(p)("No Comparison"),value:"no_comparison"},null,8,["label"])]),_:1},8,["modelValue","disabled"])]),d("div",hY,[o.value==="custom"?(f(),U(_,{key:0,modelValue:i.value,"onUpdate:modelValue":u[1]||(u[1]=B=>i.value=B),type:"date",size:"small",placeholder:g(p)("Select Date")},null,8,["modelValue","placeholder"])):S("",!0)])])])}}},mY={style:{"flex-wrap":"wrap","row-gap":"4px",display:"flex","align-items":"center"}},gY={key:0},A_={__name:"TreeSelectFilter",props:{filterState:{type:Object,required:!0}},setup(t){const a=t.filterState,s=T([]),n=T([]),o=T(!1),i=We().ctx,l=_=>{const B=Pe.get("product_variations");if(B&&(s.value=B),s.value.length&&!_){n.value=[...s.value];return}if(_&&s.value.length){n.value=s.value.filter(b=>b.label.toLowerCase().includes(_.toLowerCase()));return}o.value=!0,i.$get("products/searchVariantByName",{name:_}).then(b=>{s.value=b,n.value=b,Pe.set("product_variations",b)}).catch(()=>{}).finally(()=>{o.value=!1})},A=(_,B)=>{const b=B.checkedNodes||[];a.setTreeSelectItem(b)},u=_=>{a.removeTreeSelectItem(_)},h=()=>{a.clearTreeSelect()},m=J(()=>{let _={},B={};n.value.forEach(w=>{_[w.label]=w.children,w.children.forEach(k=>{B[k.value]={productName:w.label,variationName:k.label}})});let b={};return a.data.variation_ids.forEach(w=>{if(B[w]){let k=B[w];b[k.productName]||(b[k.productName]=[]),b[k.productName].push(k.variationName)}else b.Unknown||(b.Unknown=[]),b.Unknown.push(w)}),Object.keys(b).forEach(w=>{var k;b[w].length===((k=_[w])==null?void 0:k.length)&&(b[w]=[])}),b});return he(()=>{const _=a.retrieveSavedReportFilters();_&&_.variation_ids&&(a.data.variation_ids=_.variation_ids),l()}),(_,B)=>{const b=C("el-tag"),w=C("el-tree-select");return f(),U(w,{placeholder:_.$t("Select Products"),modelValue:g(a).data.variation_ids,"onUpdate:modelValue":B[0]||(B[0]=k=>g(a).data.variation_ids=k),data:n.value,"filter-method":g(rd).debounce(l),filterable:"","show-checkbox":"",multiple:"",clearable:"",loading:o.value,onCheck:A,"popper-class":"fc-tooltip-long",onRemoveTag:u,onClear:h,size:"small"},{tag:c(()=>[d("div",mY,[(f(!0),y(P,null,j(m.value,(k,F)=>(f(),U(b,{style:{"margin-right":"4px"}},{default:c(()=>[O(v(F)+" ",1),k.length?(f(),y("span",gY," | "+v(k.join(", ")),1)):S("",!0)]),_:2},1024))),256))])]),_:1},8,["placeholder","modelValue","data","filter-method","loading"])}}},_Y={class:"fc-applied-filters-wrap"},vY={class:"fc-applied-filter-list"},bY={class:"fc-applied-filter fc-applied-filter-date"},yY={class:"fc-applied-filter-label"},wY={class:"fc-applied-filter-value"},CY={key:0,class:"fc-applied-filter fc-applied-filter-compare-to"},BY={class:"fc-applied-filter-label"},kY={class:"fc-applied-filter-value"},xY={class:"fc-applied-filter-clear-wrap"},FY={__name:"AppliedFilters",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState,s=sa(),n=({filterKey:A,itemId:u})=>{a.removeFilter(A,u)},o=A=>!(["dateRange","compareType","compareDate"].includes(A)||s.name==="reports_customer"),i=J(()=>["reports_revenue","reports_subscriptions","reports_products","reports_customer","reports_sales","reports_orders","reports_refunds"].includes(s.name)),l=J(()=>Object.keys(a.data.selectedFilters).filter(A=>!(A==="orderTypes"&&s.name==="reports_subscriptions")).reduce((A,u)=>(A[u]=a.data.selectedFilters[u],A),{}));return ke(a.data.dateRange,A=>{console.log("dateRange changed:",A)}),(A,u)=>(f(),y("div",_Y,[d("ul",vY,[d("li",bY,[d("div",yY,v(A.$t("Date:")),1),d("div",wY,[r(r_,{modelValue:g(a).data.dateRange,"onUpdate:modelValue":u[0]||(u[0]=h=>g(a).data.dateRange=h),placement:"bottom-start",reRenderDate:g(a).data.reRenderDate,showArrow:!0,size:"small",onChange:g(a).setDateRange,clearable:"",filterState:g(a)},null,8,["modelValue","reRenderDate","onChange","filterState"])])]),i.value?(f(),y("li",CY,[r(pY,{filterState:g(a)},null,8,["filterState"])])):S("",!0),Object.keys(l.value).length?(f(!0),y(P,{key:1},j(l.value,(h,m)=>(f(),y(P,{key:m},[o(m)?(f(),y("li",{key:0,class:le(`fc-applied-filter ${m==="variation_ids"?"fc-applied-filter-variation":""} ${m==="orderTypes"?"fc-applied-filter-order-types":""}`)},[d("div",BY,v(h.label)+":",1),d("div",kY,[h.type==="list"?(f(),U(rY,{key:0,"filter-state":g(a),"filter-item":h,"filter-item-key":m},null,8,["filter-state","filter-item","filter-item-key"])):S("",!0),h.type==="multi-list"?(f(),U(AY,{key:1,"filter-state":g(a),"filter-item":h,"filter-item-key":m},null,8,["filter-state","filter-item","filter-item-key"])):m==="variation_ids"?(f(),U(A_,{key:2,"filter-state":g(a)},null,8,["filter-state"])):m==="currency"?(f(),U(l_,{key:3,modelValue:g(a).data.currency,"onUpdate:modelValue":u[1]||(u[1]=_=>g(a).data.currency=_),currencies:g(a).currencies,onChange:_=>{g(a).setSelectChange(_,{...h,value:m})}},null,8,["modelValue","currencies","onChange"])):S("",!0)]),m!=="variation_ids"?(f(),U(iY,{key:0,filterKey:m,itemId:m==="variation_ids"?h.value[0].id:null,onRemove:n},null,8,["filterKey","itemId"])):S("",!0)],2)):S("",!0)],64))),128)):S("",!0),d("li",xY,[Object.keys(l.value).length?(f(),U(lY,{key:0,"filter-state":g(a)},null,8,["filter-state"])):S("",!0)])])]))}},SY={class:"fc-filter-dropdown-header"},EY={key:0,class:"fc-filter-back-wrapper"},UY={class:"fc-filter-active-label"},QY={key:1,class:"fc-filter-dropdown-search-input"},DY={__name:"FilterHeader",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>{const o=C("el-input");return f(),y("div",SY,[g(a).data.activeFilter!=null?(f(),y("div",EY,[d("button",{class:"fc-filter-back-button",onClick:n[0]||(n[0]=i=>g(a).selectActiveFilter(null))},[r(G,{name:"ArrowLeft"})]),d("span",UY,v(g(a).activeFilterOptions.label),1)])):(f(),y("div",QY,[r(o,{modelValue:g(a).data.searchQuery,"onUpdate:modelValue":n[1]||(n[1]=i=>g(a).data.searchQuery=i),placeholder:s.$t("Search Filter..."),clearable:""},null,8,["modelValue","placeholder"])]))])}}},MY={class:"fc-filter-dropdown-active-filter-list"},IY=["onClick"],TY={__name:"StatusList",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(f(),y("ul",MY,[(f(!0),y(P,null,j(g(a).activeFilterOptions.options,(o,i)=>(f(),y("li",{key:i,class:le(["fc-filter-active-option-item",{"is-selected":g(a).isFilterOptionSelected(o)}])},[d("div",{class:"fc-filter-dropdown-active-button",onClick:l=>g(a).selectFilterOption(o)},v(o.label),9,IY)],2))),128))]))}},$Y={class:"fc-filter-dropdown-active-filter-list is-multi-list"},OY=["onClick"],LY={__name:"MultiList",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(f(),y("ul",$Y,[(f(!0),y(P,null,j(g(a).activeFilterOptions.options,(o,i)=>(f(),y("li",{key:i,class:le(["fc-filter-active-option-item",{"is-selected":g(a).isFilterOptionSelectedMulti(o)}])},[d("div",{class:"fc-filter-dropdown-active-button",onClick:l=>g(a).selectFilterOptionMulti(o)},v(o.label),9,OY)],2))),128))]))}},VY={class:"fc-filter-dropdown-active-filter"},RY={__name:"SelectedFilters",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(f(),y("div",VY,[g(a).activeFilterOptions.type==="list"?(f(),U(TY,{key:0,"filter-state":g(a)},null,8,["filter-state"])):S("",!0),g(a).activeFilterOptions.type==="multi-list"?(f(),U(LY,{key:1,"filter-state":g(a)},null,8,["filter-state"])):S("",!0),g(a).activeFilterOptions.type==="date"?(f(),U(r_,{key:2,modelValue:g(a).data.dateRange,"onUpdate:modelValue":n[0]||(n[0]=o=>g(a).data.dateRange=o),onChange:g(a).setDateRange},null,8,["modelValue","onChange"])):S("",!0),g(a).activeFilterOptions.type==="currency"?(f(),U(l_,{key:3,modelValue:g(a).data.currency,"onUpdate:modelValue":n[1]||(n[1]=o=>g(a).data.currency=o),currencies:g(a).currencies,onChange:g(a).setSelectChange},null,8,["modelValue","currencies","onChange"])):S("",!0),g(a).activeFilterOptions.type==="tree-select"?(f(),U(A_,{key:4,"filter-state":g(a)},null,8,["filter-state"])):S("",!0)]))}},HY={class:"fc-filter-dropdown-list"},PY=["onClick"],NY={key:1,class:"fc-filter-dropdown-list-item filter-not-found"},KY={__name:"FilterOptionList",props:{filterState:{type:[Object]}},setup(t){const a=t.filterState;return(s,n)=>(f(),y("ul",HY,[g(a).visibleFilters.length?(f(!0),y(P,{key:0},j(g(a).visibleFilters,(o,i)=>(f(),y("li",{class:"fc-filter-dropdown-list-item",key:i},[d("div",{class:"fc-filter-dropdown-button",onClick:l=>g(a).selectActiveFilter(o)},[r(G,{name:o.icon},null,8,["name"]),O(" "+v(o.label),1)],8,PY)]))),128)):(f(),y("li",NY,v(g(a).data.searchQuery?g(p)("No filter found"):g(p)("All filters selected")),1))]))}},zY={key:0,class:"fc-filter-dropdown"},GY={class:"fc-filter-dropdown-body"},jY={key:1},YY={__name:"FilterDropdown",props:{filterState:{type:[Object]}},setup(t){var l,A;const e=t,a=T(null),s=e.filterState,n=(A=(l=window.fluentCartAdminApp)==null?void 0:l.app_config)==null?void 0:A.isProActive,o=[{label:p("Order Type"),icon:"AppsLine",type:"multi-list",value:"orderTypes",disableRoutes:["reports_customer","reports_subscriptions"],options:[{label:p("All"),value:"all"},{label:p("One time"),value:"payment"},{label:p("Subscription"),value:"subscription"},{label:p("Renewal"),value:"renewal"}]},{label:p("Subscription Type"),icon:"Reload",type:"list",value:"subscriptionType",disableRoutes:["reports_revenue","reports_products","reports_customer","reports_sales","reports_refunds","reports_orders","reports_sales"],options:[{label:p("Active"),value:"subscription"},{label:p("Renewal"),value:"renewal"},{label:p("Expired"),value:"expired"},{label:p("Canceled"),value:"canceled"}]},{label:p("Currency"),icon:"Currency",type:"currency",value:"currency",disableRoutes:["reports_products","reports_customer","reports_subscriptions"]},{label:p("Products"),icon:"ListView",type:"tree-select",value:"variation_ids",disableRoutes:["reports_customer"]}];s.setFilterOption(o);const i=u=>{const h=a.value,m=u.target,_=document.querySelectorAll(".el-picker-panel"),B=Array.from(_).some(b=>b.contains(m));h!=null&&h.contains(m)||B||(s.data.searchQuery="",s.dropdownOpen&&s.toggleDropdown())};return he(()=>{document.addEventListener("click",i)}),ro(()=>{document.removeEventListener("click",i)}),(u,h)=>(f(),y("div",{ref_key:"dropdownRef",ref:a,class:"fc-filter-dropdown-container",onClick:h[0]||(h[0]=Ke(()=>{},["stop"]))},[r(we,{class:"fc-filter-dropdown-toggle-button",size:"small",tag:"button",onClick:g(s).toggleDropdown},{default:c(()=>[r(G,{name:"Filter"})]),_:1},8,["onClick"]),r(vr,{name:"fade-scale","enter-active-class":"transition ease-out duration-200","leave-active-class":"transition ease-in duration-150","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:c(()=>[g(s).dropdownOpen?(f(),y("div",zY,[g(n)?(f(),y(P,{key:0},[r(DY,{"filter-state":g(s)},null,8,["filter-state"]),d("div",GY,[g(s).data.activeFilter!=null?(f(),U(RY,{key:0,"filter-state":g(s)},null,8,["filter-state"])):(f(),U(KY,{key:1,"filter-state":g(s)},null,8,["filter-state"]))])],64)):(f(),y("div",jY,[r(qc,{class:"py-7.5",title:g(p)("Upgrade to Pro for filtering"),text:g(p)("This feature is only available in WebmakerrPro Pro.")},null,8,["title","text"])]))])):S("",!0)]),_:1})],512))}},WY={class:"fc-reports-view"},qY={class:"fc-reports-view-inner"},XY={class:"fc-report-body fc-layout-width",id:"fc-report-body"},JY={key:0,class:"fc-report-filter-wrap"},ZY={key:1,class:"fc-report-filter-button"},eW={class:"fc-report-body-inner"},tW={__name:"ReportsView",setup(t){const e=Sg(),a=sa(),s=J(()=>zt.data);e.onFilterChanged(A=>{i(A)});const n=J(()=>!["reports_overview","reports_customer","future_renewals"].includes(a.name)),o=J(()=>["reports_overview","reports","future_renewals"].includes(a.name));J(()=>window.fluentCartAdminApp.app_config.isProActive);const i=A=>{Object.entries(A).forEach(([u,h])=>{let m=h.value;switch(h.type==="multi-list"&&(m=h.value.map(_=>_.value)),u){case"orderStatus":case"paymentStatus":case"currency":case"compareType":case"compareDate":case"subscriptionType":case"orderTypes":zt.data[u]=m;break;case"dateRange":zt.data.dateRange=h.value,zt.data.rangeKey=h.rangeKey;break;case"variation_ids":zt.data[u]=Array.isArray(h.value)?h.value.map(_=>_.id):[];break}}),zt.onFilterChange()},l=()=>{var u,h;const A=e.retrieveSavedFilters();A?(e.data.selectedFilters={...A},((h=(u=A.dateRange)==null?void 0:u.value)==null?void 0:h.length)===2&&(e.data.dateRange=[A.dateRange.value[0],A.dateRange.value[1]])):e.data.selectedFilters={}};return he(()=>{zt.fetchReportMeta(),l()}),ro(()=>{Pe.remove("product_variations")}),(A,u)=>{const h=C("router-view");return f(),y("div",WY,[d("div",qY,[r(nY,{filterState:g(e)},null,8,["filterState"]),d("div",XY,[!o.value||n.value?(f(),y("div",JY,[o.value?S("",!0):(f(),U(FY,{key:0,"filter-state":g(e)},null,8,["filter-state"])),!o.value&&n.value?(f(),y("div",ZY,[r(YY,{"filter-state":g(e)},null,8,["filter-state"])])):S("",!0)])):S("",!0),d("div",eW,[r(Pd),s.value.storeMode!==s.value.filterMode&&s.value.filterMode&&s.value.filterMode!==""?(f(),U(Xs,{key:0,class:"mb-5 alert-yellow",icon:"InformationFill",content:A.$t(`Your store is in ${s.value.storeMode} mode but you are watching data in ${s.value.filterMode} mode.`)},null,8,["content"])):S("",!0),r(h,null,{default:c(({Component:m})=>[(f(),U($s(m),{reportFilter:g(zt)},null,8,["reportFilter"]))]),_:1})])])])])}}},aW=ve(tW,[["__scopeId","data-v-7ef7df57"]]);class sW extends na{constructor(){super(...arguments);ee(this,"data",{summaryData:{net_revenue:0,order_count:0,subscription_renewal_count:0,new_customers:0,total_item_count:0,total_refunded_amount:0,total_refunded:0,average_order_net:0,average_order_items:0,average_customer_orders:0,average_customer_ltv:0},previousSummary:{},fluctuations:{net_revenue:0,order_count:0,new_customers:0,total_item_count:0,total_refunded_amount:0,total_refunded:0,subscrition_renewal:0},graphs:{netRevenueGraph:{},orderGraph:{},itemsSoldGraph:{},refundCountGraph:{},refundsGraph:{},newCustomerGraph:{},subscriptionRenewalGraph:{}},topSoldProducts:[],failedOrders:[],topSoldVariants:[],isBusy:{graphs:{netRevenueGraph:!1,orderGraph:!1,itemsSoldGraph:!1,refundCountGraph:!1,refundsGraph:!1,newCustomerGraph:!1,subscriptionRenewalGraph:!1},summaryData:!1,topSoldProductsAndFailedOrders:!1,topSoldVariants:!1,fluctuations:!1}})}get controllerKey(){return"DefaultReportController"}makeRequest(a,s,n,o){if(o&&o.startsWith("graphs.")){const l=o.split(".")[1];this.data.isBusy.graphs[l]=!0}else this.data.isBusy[o]=!0;let i;return typeof s=="object"?i=ne.get("reports/"+a,s):i=ne.get("reports/"+a),this.resolvePromiseResponse(i,n,o),i}resolvePromiseResponse(a,s=null,n=null){a.then(o=>{n==null||s==null?Object.assign(this.data,o):be.set(this.data,n,be.get(o,s))}).catch(o=>{console.log(o,"error")}).finally(()=>{if(n&&n.startsWith("graphs.")){const o=n.split(".")[1];this.data.isBusy.graphs[o]=!1}else this.data.isBusy[n]=!1})}getDefaultReport(a={}){return this.makeRequest("fetch-default-report",a,"summaryData","summaryData")}getDefaultReportFluctuations(a={}){return this.makeRequest("fetch-default-report-fluctuations",a,"fluctuations","fluctuations")}getDefaultReportGraphs(a={}){return this.makeRequest("fetch-default-report-graphs",a,"graphs."+a.params.graph,"graphs."+a.params.graph)}getTopSoldProducts(a={}){return this.makeRequest("fetch-top-sold-products",a,"topSoldProducts","topSoldProducts")}getFailedOrders(a={}){return this.makeRequest("fetch-failed-orders",a,"failedOrders","failedOrders")}getTopSoldVariants(a={}){return this.makeRequest("fetch-top-sold-variants",a,"topSoldVariants","topSoldVariants")}getSalesReport(a={}){return this.makeRequest("sales-report",a)}}const Ds=sW.init(),nW={__name:"lineChart",props:{xAxis:{type:Array,default:()=>[],required:!0},yAxis:{type:Array,default:()=>[],required:!0},lineColor:{type:String,default:"#42b983"},backgroundGradient:{type:Array,required:!0},chartTitle:{type:String,default:""},hasCurrency:{type:Boolean,default:!1}},setup(t){const e=t,a=T(null),s=(h,m,_,B)=>({name:h,type:m,data:_,smooth:!0,color:B,showSymbol:!0,areaStyle:{color:new jA(0,0,0,1,e.backgroundGradient.map(b=>({offset:b.offset,color:b.color})))}}),n=()=>{const h=[];return h.push(s("","line",e.yAxis,e.lineColor)),h},o=h=>{const m=h.split("-");if(m.length===3){const[_,B,b]=m;return`${Ya[parseInt(B)-1]} ${b}, ${_}`}else if(m.length===2){const[_,B]=m;return`${Ya[parseInt(B)-1]} ${_}`}else if(m.length===1){const[_]=m;return`${_}`}},i=J(()=>e.xAxis.map(h=>o(h)));let l=null;const A=()=>{if(a.value&&l==null){l=At(a.value);const h={title:{show:!1},tooltip:{trigger:"axis",valueFormatter:m=>e.hasCurrency?`${Fe.scaled(m)}`:m},grid:{show:!1,left:"10%",right:"10%",bottom:"80%"},xAxis:{type:"category",data:i.value,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{type:"value",axisLabel:{show:!1},splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},series:n()};l.setOption(h),window.addEventListener("resize",()=>{l.resize()})}},u=()=>{l&&l.setOption({xAxis:{data:e.xAxis},series:n()})};return ke(()=>[e.xAxis,e.yAxis],()=>{me(()=>{u()})}),he(()=>{me(()=>{A()})}),(h,m)=>(f(),y("div",{style:{height:"70px"},ref_key:"chartRef",ref:a},null,512))}},oW=ve(nW,[["__scopeId","data-v-ec84f2a8"]]);function c_(t){return Number(t)>0}function zs(t){return c_(t)?"text-red-500":""}function Ia(t,e=null){return(e!==null?e:c_(t))?`(${Fe.scaled(t)})`:Fe.scaled(t)}const iW={class:"cursor-pointer"},En={__name:"ReportSummary",props:{amount:{type:[Number,String],required:!0},placement:{type:String,default:"top"},title:{type:String,default:""}},setup(t){const e=t,a=J(()=>e.title?e.title+" "+e.amount:e.amount);return(s,n)=>{const o=C("el-tooltip");return f(),U(o,{effect:"dark",placement:t.placement,"popper-class":"fc-tooltip"},{content:c(()=>[d("span",null,v(a.value),1)]),default:c(()=>[d("span",iW,v(t.amount),1)]),_:1},8,["placement"])}}},an={__name:"Fluctuation",props:{fluctuation:{type:[String,Number],required:!0},isLiability:{type:Boolean,default:!1},placement:{type:String,default:"top"},amount:{type:[String,Number],required:!1},title:{type:String,default:""},hasCurrency:{type:Boolean,default:!0},isPercentage:{type:Boolean,default:!1},fluctuationSuffix:{type:String,default:""}},setup(t){const e=t,a=J(()=>$t(e.fluctuation)),s=J(()=>(e.hasCurrency?Fe.scaled:$t)(e.amount)),n=J(()=>(e.title?e.title:p("Previously"))+" "+s.value+(e.isPercentage?"%":"")),o=J(()=>{if(e.fluctuation===0)return"text-system-light";const l=e.fluctuation>0;return(e.isLiability?!l:l)?"text-success-500":"text-red-500"}),i=J(()=>e.fluctuation<0?"CaretDown":"CaretUp");return(l,A)=>{const u=C("el-tooltip");return t.fluctuation!==0?(f(),y("div",{key:0,class:le(["percentage",o.value])},[r(G,{class:"w-2",name:i.value},null,8,["name"]),r(u,{effect:"dark",placement:t.placement,"popper-class":"fc-tooltip"},{content:c(()=>[d("span",null,v(n.value),1)]),default:c(()=>[d("span",{class:le(["cursor-pointer",o.value])},[O(v(a.value)+"% ",1),t.fluctuationSuffix?(f(),y(P,{key:0},[O(v(t.fluctuationSuffix),1)],64)):S("",!0)],2)]),_:1},8,["placement"])],2)):S("",!0)}}},rW={class:"fc-report-result"},lW={key:0,class:"fc-report-result-content"},AW={key:1,class:"fc-report-result-content"},cW={class:"title flex items-center gap-1"},dW={class:"value"},uW={class:"inline-flex"},fW={key:2,class:"fc-report-result-chart"},hW={key:3,class:"fc-report-result-chart"},pW={__name:"SummaryCards",props:{defaultReport:{type:Object,required:!0}},setup(t){const e=t;J(()=>zt.currentCurrencySign);const a=(A,u)=>{const h=parseInt(A.replace("#",""),16),m=h>>16&255,_=h>>8&255,B=h&255;return`rgba(${m}, ${_}, ${B}, ${u})`},s=fe.colors.report,n=T([{title:p("Gross Sales"),key:"gross_sale",graph:"grossSaleGraph",lineColor:s.sea_green,backgroundGradient:[{offset:0,color:a(s.sea_green,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("The total sales you had in this period.")},{title:p("Refunds"),key:"total_refunded_amount",graph:"refundsGraph",lineColor:s.medium_slate_blue,backgroundGradient:[{offset:0,color:a(s.medium_slate_blue,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("Refunds made in this period. This is deducted from gross sales to calculate revenue."),liability:!0},{title:p("Revenue"),key:"net_revenue",graph:"netRevenueGraph",lineColor:s.royal_blue,backgroundGradient:[{offset:0,color:a(s.royal_blue,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("Gross sales less refunds, taxes, shipping, fees.")},{title:p("Orders"),key:"order_count",graph:"orderGraph",lineColor:s.medium_turquoise,backgroundGradient:[{offset:0,color:a(s.medium_turquoise,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("The total number of orders placed in this period.")},{title:p("Items"),key:"total_item_count",graph:"itemsSoldGraph",lineColor:s.deep_sky_blue,backgroundGradient:[{offset:0,color:a(s.deep_sky_blue,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("The total number of items sold in this period.")},{title:p("Total Refunds"),key:"total_refunded",graph:"refundCountGraph",lineColor:s.golden_rod,backgroundGradient:[{offset:0,color:a(s.golden_rod,.5)},{offset:1,color:"rgba(255, 255, 255, 0)"}],info:p("Total refunds count including partially refunds.")}]),o=J(()=>n.value.map(A=>({...A,value:e.defaultReport.summaryData[A.key]||0,fluctuation:e.defaultReport.fluctuations[A.key]||0,graph:e.defaultReport.data.graphs[A.graph]||{},dataBusy:e.defaultReport.data.isBusy.summaryData||!1,graphBusy:e.defaultReport.data.isBusy.graphs[A.graph]||!1,liability:A.liability||!1}))),i=A=>["net_revenue","total_refunded_amount","gross_sale"].includes(A),l=A=>i(A.key)?Ia(A.value,A.liability):$t(A.value);return(A,u)=>{const h=C("el-skeleton"),m=C("el-tooltip"),_=C("el-skeleton-item"),B=C("el-col"),b=C("el-row");return f(),U(tt,{permission:"reports/view"},{default:c(()=>[r(b,{gutter:16,class:"gap-y-4"},{default:c(()=>[(f(!0),y(P,null,j(o.value,(w,k)=>(f(),U(B,{lg:8,md:12,key:k},{default:c(()=>[r(Ll,{class:"fc-report-summary-card h-[100px]"},{default:c(()=>[d("div",rW,[w.dataBusy?(f(),y("div",lW,[r(h,{animated:"",rows:1})])):(f(),y("div",AW,[d("div",cW,[O(v(w.title)+" ",1),r(m,{"popper-class":"fc-tooltip",content:w.info,placement:"top"},{default:c(()=>[r(G,{class:"text-gray-500 w-4 cursor-pointer",name:"InformationFill"})]),_:2},1032,["content"])]),d("div",dW,[d("div",uW,[r(En,{amount:l(w),title:w.title},null,8,["amount","title"])]),r(an,{fluctuation:w.fluctuation,amount:t.defaultReport.data.previousSummary[w.key],"is-liability":w.liability,"has-currency":i(w.key)},null,8,["fluctuation","amount","is-liability","has-currency"])])])),w.graphBusy?(f(),y("div",fW,[r(h,{animated:"",class:"flex items-center justify-end"},{template:c(()=>[r(_,{variant:"circle",class:"w-12.5 h-12.5 flex-none"})]),_:1})])):S("",!0),!w.graphBusy&&Object.keys(w.graph).length>0?(f(),y("div",hW,[r(oW,{ref_for:!0,ref:"lineChart",xAxis:Object.keys(w.graph),yAxis:Object.values(w.graph),lineColor:w.lineColor,backgroundGradient:w.backgroundGradient,"has-currency":i(w.key)},null,8,["xAxis","yAxis","lineColor","backgroundGradient","has-currency"])])):S("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}};const mW={key:0,class:"fc-report-sold-product-list has-scroll"},gW={class:"list-left-content"},_W={class:"list-image"},vW=["src","alt"],bW=["src"],yW={class:"list-title"},wW={class:"list-title-inner"},CW={class:"list-id"},BW={class:"list-right-content"},kW={class:"list-value"},xW={class:"list-price"},FW={class:"inline-flex"},SW={__name:"TopSoldVariants",props:{defaultReport:{type:[Array,Object],required:!0}},setup(t){const e=Ds.data;return(a,s)=>{const n=C("router-link");return f(),U(tt,{permission:"reports/view"},{default:c(()=>[r(Ll,{class:"top-sold-variants","card-options":{heading:a.$t("Top Sold Variants")}},{default:c(()=>{var o,i;return[((i=(o=g(e))==null?void 0:o.topSoldVariants)==null?void 0:i.length)>0?(f(),y("ul",mW,[(f(!0),y(P,null,j(g(e).topSoldVariants,l=>(f(),y("li",{key:l.product_id},[r(n,{to:{name:"product_edit",params:{product_id:l.product_id}}},{default:c(()=>{var A;return[d("div",gW,[d("div",_W,[l.media_url!==null?(f(),y("img",{key:0,src:l.media_url,alt:(A=l.media)==null?void 0:A.title},null,8,vW)):(f(),y("img",{key:1,src:a.getPlaceholderImage(),alt:""},null,8,bW))]),d("div",yW,[d("div",wW,v(l.variation_name),1),d("div",CW,[d("strong",null,v(l.product_name),1)])])]),d("div",BW,[d("div",kW,v(l.quantity)+" "+v(a.$t(" Sold")),1),d("div",xW,[d("div",FW,v(g(Fe).scaled(l.total_amount)),1)])])]}),_:2},1032,["to"])]))),128))])):(f(),U(Tt,{key:1,icon:"Empty/ListView","has-dark":!0,text:a.$t("Currently there is no item!")},null,8,["text"]))]}),_:1},8,["card-options"])]),_:1})}}},EW={class:"fc-report-order-completion-time-wrap"},UW={class:"flex items-center gap-2"},QW={class:"fc-card-header-title is-small"},DW={class:"fc-btn-group sm"},MW={key:1,class:"py-6 text-center text-gray-400 text-sm h-[400px] flex items-center justify-center"},IW={__name:"Sources",props:{data:{type:Object,required:!0}},setup(t){const e=t,a=fe.colors,s=T(null),n=T(fe.isDark()),o=T({}),i=B=>{const b=["#F6B51E","#855EF8","#47C2FF"],w=["#E6A819","#693EE0","#35ADE9"];return(n.value?w:b)[B]},l=J(()=>{if(typeof e.data.onetime_count===void 0)return[];const B={onetime_count:p("Onetime Payments"),renewal_count:p("Renewals"),subscription_count:p("Subscriptions")},b=e.data.order_count,w=[];return Object.keys(B).forEach((k,F)=>{w.push({name:B[k],value:e.data[k]||0,percentage:b?(e.data[k]/b*100).toFixed(2):0,color:i(F),visible:o.value[B[k]]!==!1})}),w}),A=J(()=>l.value.filter(B=>o.value[B.name]!==!1).map((B,b)=>({value:B.value,name:B.name,itemStyle:{color:i(l.value.findIndex(w=>w.name===B.name))}})));let u=null;const h=()=>{s.value&&u===null&&(u=At(s.value),m())},m=()=>{if(!u)return;const B={title:{text:e.chartTitle??"",left:"center"},legend:{show:!1},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)",borderRadius:8,backgroundColor:n.value?"#38485a":"#ffffff",textStyle:{color:n.value?a.gray[25]:a.system.mid},borderColor:n.value?"#4a5a6b":"#c0c4ca",borderWidth:1},series:[{type:"pie",center:["50%","50%"],data:A.value,label:{show:!0,color:n.value?a.gray[25]:a.system.dark},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};u.setOption(B,{notMerge:!0,replaceMerge:["series"]})};ke([()=>l.value],()=>{me(m)},{deep:!0});const _=B=>{n.value=fe.isDark(),m()};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",_),me(h)}),He(()=>{window.removeEventListener("onWebmakerrProThemeChange",_)}),(B,b)=>(f(),y("div",EW,[r(oe,{id:"chartContainer"},{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",UW,[d("h5",QW,v(g(p)("Sources")),1)])]),action:c(()=>[d("div",DW,[r(Qt,{targetRef:s.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[l.value.length?(f(),y("div",{key:0,class:"fc-report-order-completion-time-chart",ref_key:"chartRef",ref:s},null,512)):(f(),y("div",MW,v(g(p)("No relevant data to plot the chart")),1))]),_:1})]),_:1})]))}},TW={class:"fc-default-report-page"},$W={class:"page-heading-wrap flex items-center justify-between"},OW={class:"page-title"},LW={__name:"DefaultReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=T(e.reportFilter),s=async n=>{n&&(await Ds.getSalesReport(n),await Ds.getTopSoldProducts(n),await Ds.getTopSoldVariants(n))};return he(()=>{a.value&&a.value.addListener("default-report",s)}),He(()=>{a.value&&a.value.removeListener("default-report")}),ke(()=>e.reportFilter,n=>{a.value&&a.value.removeListener("default-report"),a.value=n,a.value&&(a.value.addListener("default-report",s),s(a.value.applicableFilters))},{immediate:!0}),(n,o)=>{const i=C("el-col"),l=C("el-row");return f(),y("div",TW,[d("div",$W,[d("h1",OW,v(n.$t("Sales")),1)]),r(pW,{"default-report":g(Ds)},null,8,["default-report"]),r(l,{gutter:30,class:"gap-y-4 my-5"},{default:c(()=>[r(i,{lg:12},{default:c(()=>[r(Eg,{data:g(Ds).data.topSoldProducts},null,8,["data"])]),_:1}),r(i,{lg:12},{default:c(()=>[r(SW,{"default-report":g(Ds)},null,8,["default-report"])]),_:1}),S("",!0)]),_:1}),r(l,{gutter:30,class:"gap-y-4 my-5"},{default:c(()=>[r(i,{lg:12},{default:c(()=>[r(IW,{data:g(Ds).data.summaryData},null,8,["data"])]),_:1})]),_:1})])}}};class VW extends na{constructor(){super(...arguments);ee(this,"data",{order:["net_revenue","gross_sale","order_count","total_item_count","average_net","average_gross","average_order_items_count"],revenue:["Revenue","Gross Sales","Refund","Taxes","Shipping","Discount"],refund:["Total Refunds","Total Refunded Amount","Avg. Refunded Amount","Refund Rate","Total Paid"],product:["average_selling_price","units_sold","gross_sale","customer_count"]});ee(this,"storageKey","report-checkbox-filter");ee(this,"listeners",{})}beforeInit(){this.mergeWithStorage()}mergeWithStorage(){const a=Pe.get(this.storageKey);this.data.order=a.order??this.data.order,this.data.revenue=a.revenue??this.data.revenue,this.data.refund=a.refund??this.data.refund}addListener(a,s){this.listeners[a]=s}async onCheckBoxChange(a,s){const n=this.data[a];n.includes(s)?this.data[a]=n.filter(o=>o!==s):this.data[a].push(s),this.syncStorage();for(let o in this.listeners)this.listeners[o](this.applicableFilters)}syncStorage(){Pe.set(this.storageKey,this.applicableFilters.checkbox)}removeListener(a){delete this.listeners[a]}get applicableFilters(){return{checkbox:{order:this.data.order,revenue:this.data.revenue,refund:this.data.refund,product:this.data.product}}}}const rs=VW.init(),RW={class:"fc-revenue-line-chart-wrap"},HW={class:"flex items-center gap-2"},PW={class:"fc-card-header-title is-small"},NW={class:"fc-chart-select"},KW={class:"fc-btn-group sm"},zW={class:"chart-action-wrap"},GW={class:"chart-change-wrap"},jW={class:"chart-change"},YW={class:"text"},WW={class:"chart-change"},qW={class:"text"},XW={__name:"RevenueLineChart",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String}},emits:["filter-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T(yt.getChartType("revenue","revenue_chart")||"line"),o=T(!1),i=fe.colors.report,l=T(fe.isDark()),A=($,Q,I,L,V,N=!1)=>({name:$,type:Q,barMaxWidth:30,yAxisIndex:I,data:L,smooth:!1,color:V,hidden:N,lineStyle:{width:3},areaStyle:{opacity:.3,color:V},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:V,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Aa(V)},lineStyle:{color:V},areaStyle:{opacity:.3,color:V}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),u=T(a.appliedGroupKey);ke(()=>a.appliedGroupKey,$=>{u.value=$});const h=[{label:p("Default"),value:"default"},{label:p("Monthly"),value:"monthly"},{label:p("Yearly"),value:"yearly"}],m=e,_=()=>{m("filter-data",u.value)},B=J(()=>a.reportFilter.data.compareType!=="no_comparison"),b=J(()=>{let $=[{name:p("Current Revenue"),key:"net_revenue",type:n.value,color:l.value?i.dark_cyan_blue_16:i.light_gray,data:a.chartData.map(Q=>Q.net_revenue)}];return B.value&&$.push({name:p("Compare Revenue"),key:"net_revenue",type:n.value,color:l.value?i.dark_cyan_blue_36:i.light_gray_cyan_blue,data:a.compareData.map(Q=>({value:Q.net_revenue,date:Q.group})),hidden:!1}),$.map(Q=>A(Q.name,Q.type,0,Q.data,Q.color,Q.hidden))});let w=null;const k=()=>{s.value&&w==null&&(w=At(s.value),E())},F=J(()=>{const $=Sn(a.reportFilter.data.dateRange);return p("This report looks at the revenue you received ")+$}),x=J(()=>Ha(a.chartData.length)),E=()=>{const $=ks(a.chartData),Q={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:l.value?"#ffffff":"#000000"},selected:Object.fromEntries(b.value.map(I=>[I.name,!I.hidden]))},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?i.dark_cyan_blue_16:i.light_gray_blue}},alwaysShowContent:!1,valueFormatter:I=>`${Fe.scaled(I)}`},grid:{show:!1},xAxis:{type:"category",data:$,axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12,interval:x.value.interval},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12,formatter:I=>`${Fe.scaled(I)}`},splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}},series:b.value};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},M=()=>{o.value=!o.value,o.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):E()},D=$=>{yt.onChange("revenue","revenue_chart",$),n.value!==$&&(o.value=!1,n.value=$,E())};ke([()=>a.chartData,u],()=>{me(E)},{deep:!0}),ke(()=>rs.data.revenue,()=>{me(()=>{E()})},{deep:!0});const R=()=>{l.value=fe.isDark(),me(()=>{E()})};return He(()=>{window.removeEventListener("onWebmakerrProThemeChange",R,!1)}),he(()=>{window.addEventListener("onWebmakerrProThemeChange",R),me(()=>{k()})}),($,Q)=>{const I=C("el-tooltip"),L=C("el-option"),V=C("el-select");return f(),y("div",RW,[r(oe,{id:"chartContainer"},{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",HW,[d("h5",PW,v(g(p)("Revenue Chart")),1),r(I,{"popper-class":"fc-tooltip",content:F.value,placement:"top"},{default:c(()=>[r(G,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),action:c(()=>[d("div",NW,[r(V,{class:"el-select--x-small",modelValue:u.value,"onUpdate:modelValue":Q[0]||(Q[0]=N=>u.value=N),onChange:_},{default:c(()=>[(f(),y(P,null,j(h,N=>r(L,{key:N.value,label:g(p)(N.label),value:N.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),d("div",KW,[r(tn,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:D},null,8,["activeType"]),r(we,{tag:"button",size:"small",title:g(p)("Zoom Chart"),onClick:M,class:le(o.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:s.value},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[d("div",{class:"fc-chart-wrap fc-revenue-line-chart mt-3",ref_key:"chartRef",ref:s},null,512),d("div",zW,[d("div",GW,[d("div",jW,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",YW,v(g(p)("Data")),1)]),d("div",WW,[d("span",qW,v(g(p)("Timeline")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},JW={props:{data:{type:Array,required:!0},filename:{type:String,default:"data.csv"}},components:{DynamicIcon:G},methods:{exportCSV(){const e=(n=>{const o=u=>u.replace(/_/g," ").replace(/\b\w/g,h=>h.toUpperCase()),i=Object.keys(n[0]),A=[i.map(o).join(",")];return n.forEach(u=>{const h=i.map(m=>{let _=u[m];return typeof _=="object"&&(_=JSON.stringify(_)),typeof _=="string"&&(_=`"${_.replace(/"/g,'""')}"`),_});A.push(h.join(","))}),A.join(`
          </div>`,F+"</div>"}},grid:{height:"70%",top:"10%"},xAxis:{type:"category",data:_,axisLabel:{color:i.value?"#ffffff":"#000000",fontSize:12},splitArea:{show:!0}},yAxis:{type:"category",data:B,axisLabel:{color:i.value?"#ffffff":"#000000",fontSize:12},splitArea:{show:!0}},visualMap:{min:0,max:A.value,calculable:!0,orient:"horizontal",left:"center",bottom:"0%",inRange:{color:u.value}},series:[{name:p("Orders"),type:"heatmap",data:l.value,label:{show:!0},itemStyle:{borderColor:"#e0e0e0",borderWidth:1},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};s.setOption(b)};ke([l,A],()=>{me(()=>{h()})});const m=()=>{i.value=fe.isDark(),me(()=>{h()})};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",m),me(()=>{h(),window.addEventListener("resize",()=>s==null?void 0:s.resize())})}),ro(()=>{s&&(window.removeEventListener("resize",()=>s==null?void 0:s.resize()),window.removeEventListener("onWebmakerrProThemeChange",m,!1),s.dispose(),s=null)}),(_,B)=>{const b=C("el-empty");return f(),U(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{title:g(p)("Orders by day and hour"),title_size:"small",border_bottom:""},null,8,["title"]),r(ae,{class:"px-0 pb-0"},{empty:c(()=>[r(b,{text:g(p)("No data available")},null,8,["text"])]),default:c(()=>[d("div",{class:"fc-report-average-order-items-chart",ref_key:"chartRef",ref:a},null,512)]),_:1})]),_:1})}}},Hq={class:"fc-gross-sale-vs-net-revenue-wrap"},Pq={class:"flex items-center gap-2"},Nq={class:"fc-card-header-title is-small"},Kq={class:"fc-chart-select"},zq={class:"fc-btn-group sm"},Gq={class:"chart-action-wrap"},jq={class:"chart-change-wrap"},Yq={class:"chart-change"},Wq={class:"text"},qq={class:"chart-change"},Xq={class:"text"},Jq={__name:"OrderLineChart",props:{chartData:{type:Array,required:!0},reportFilter:{type:Object}},emits:["fetch-chart-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T("default"),o=T(yt.getChartType("order","order_chart")||"line"),i=T(!1),l=fe.colors.report,A=T(fe.isDark()),u=[{value:"default",label:p("Default")},{value:"monthly",label:p("Monthly")},{value:"yearly",label:p("Yearly")}],h=e,m=()=>{h("fetch-chart-data",n.value)},_=J(()=>[{title:p("Orders"),key:"order_count",color:A.value?l.dark_cyan_blue_16:l.light_gray,yAxisIndex:1,type:"bar"},{title:p("Gross Sales"),key:"gross_sale",color:A.value?l.blue_dark_mode:l.blue,yAxisIndex:0,type:"line"},{title:p("Revenue"),key:"net_revenue",color:A.value?l.purple_dark_mode:l.purple,yAxisIndex:0,type:"line"}].filter(({key:$})=>rs.data.order.includes($)).map(({title:$,key:Q,color:I,yAxisIndex:L,type:V})=>M($,V,L,a.chartData.map(N=>N[Q]),I))),B=J(()=>a.chartData.map($=>po($.group)));let b=null;const w=T(!0),k=()=>{s.value&&b===null&&(b=At(s.value),E(),b.on("legendselectchanged",$=>{w.value=$.selected.Orders}))},F=J(()=>{const $=Sn(a.reportFilter.data.dateRange);return p("This report looks at orders created ")+$}),x=J(()=>Ha(a.chartData.length)),E=()=>{const $={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:A.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:A.value?"#253241":"#ffffff",borderColor:A.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:A.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:A.value?l.dark_cyan_blue_16:l.light_gray_blue}},formatter:Q=>{let I=Q[0].axisValue;const L=A.value?"#ffffff":"#565865";return Q.forEach(function(V,N){const Y=N===0?V.value:Fe.scaled(V.value);I+=`<div>
          </div>`}),I}},xAxis:{type:"category",data:B.value,axisLabel:{color:A.value?"#ffffff":"#696778",fontSize:12,interval:x.value.interval},axisLine:{lineStyle:{type:"dashed",color:A.value?"#253241":"#D6DAE1"}}},yAxis:[{name:p("Sales"),type:"value",position:"left",axisLabel:{color:A.value?"#ffffff":"#696778",fontSize:12,formatter:Q=>`${Fe.scaled(Q)}`},splitLine:{show:!0,lineStyle:{color:A.value?"#253241":"#D6DAE1",type:"dashed"}},minInterval:500},{name:p("Orders"),type:"value",position:"right",axisLabel:{color:A.value?"#ffffff":"#696778",fontSize:12},splitLine:{show:!1,lineStyle:{color:A.value?"#253241":"#D6DAE1",type:"dashed"}},minInterval:20}],dataZoom:[],series:_.value};b.setOption($,{notMerge:!0,replaceMerge:["series"]})},M=($,Q,I,L,V)=>({name:$,type:Q,yAxisIndex:I,barMaxWidth:30,data:L,smooth:!1,color:V,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:V,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Aa(V)},lineStyle:{color:V},areaStyle:{opacity:.3,color:V}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),D=()=>{i.value=!i.value,i.value?b.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):E()};ke([()=>a.chartData,o],()=>{me(E)},{deep:!0}),ke(()=>rs.data.order,()=>{me(()=>{E()})},{deep:!0}),ke(w,()=>{if(!b)return;const Q=b.getOption().series.map(I=>I.type==="line"?{...I,areaStyle:w.value?void 0:{opacity:.3}}:I);me(()=>{b.setOption({series:Q})})});const R=()=>{A.value=fe.isDark(),me(()=>{E()})};return He(()=>{window.removeEventListener("onWebmakerrProThemeChange",R,!1)}),window.addEventListener("onWebmakerrProThemeChange",R),he(()=>{me(k)}),($,Q)=>{const I=C("el-tooltip"),L=C("el-option"),V=C("el-select");return f(),y("div",Hq,[r(oe,{id:"chartContainer"},{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",Pq,[d("h5",Nq,v(g(p)("Order Chart")),1),r(I,{"popper-class":"fc-tooltip",content:F.value,placement:"top"},{default:c(()=>[r(G,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),action:c(()=>[d("div",Kq,[r(V,{class:"el-select--x-small",modelValue:n.value,"onUpdate:modelValue":Q[0]||(Q[0]=N=>n.value=N),onChange:m},{default:c(()=>[(f(),y(P,null,j(u,N=>r(L,{key:N.value,label:N.label,value:N.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),d("div",zq,[r(we,{tag:"button",size:"small",title:g(p)("Zoom Chart"),onClick:D,class:le(i.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:s.value},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[d("div",{class:"fc-chart-wrap fc-order-line-chart",ref_key:"chartRef",ref:s},null,512),d("div",Gq,[d("div",jq,[d("div",Yq,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",Wq,v(g(p)("Data")),1)]),d("div",qq,[d("span",Xq,v(g(p)("Timeline")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},Zq={class:"fc-report-monthly-list"},eX={class:"list-left-content"},tX={class:"list-title"},aX={class:"list-right-content"},sX={class:"list-value"},nX={__name:"MonthlySummary",props:{orderReport:{type:Object,required:!0}},setup(t){const e=t,a=J(()=>zt.currentCurrencySign),s=[{title:p("Average Monthly Gross"),key:"monthly_gross",currencySign:a,hasCurrency:!0},{title:p("Average Monthly Revenue"),key:"monthly_net",currencySign:a,hasCurrency:!0},{title:p("Average Monthly Orders"),key:"monthly_orders"},{title:p("Average Monthly Items"),key:"monthly_items"}],n=J(()=>s.map(i=>({...i,value:e.orderReport.data.summary[i.key]||0,fluctuation:e.orderReport.data.fluctuations[i.key]||0,hasCurrency:i.hasCurrency||!1}))),o=i=>["monthly_net","monthly_gross"].includes(i.key)?Fe.scaled(i.value):$t(i.value);return(i,l)=>(f(),y("ul",Zq,[(f(!0),y(P,null,j(n.value,(A,u)=>(f(),y("li",{key:u},[d("div",eX,[d("div",tX,v(A.title),1)]),d("div",aX,[d("div",sX,[r(En,{amount:o(A),title:A.title},null,8,["amount","title"]),r(an,{fluctuation:A.fluctuation,amount:t.orderReport.data.previousSummary[A.key],"is-liability":!1,"has-currency":A.hasCurrency},null,8,["fluctuation","amount","has-currency"])])])]))),128))]))}},oX={class:"fc-report-result-content"},iX={class:"value"},rX={class:"inline-flex"},lX={class:"title"},AX={__name:"AverageResults",props:{orderReport:{type:Object,required:!0},reportFilter:{type:Object}},setup(t){const e=t,a=J(()=>e.reportFilter.currentCurrencySign),s=[{title:p("Taxes"),content:p("Total amount of taxes"),key:"tax_total",currencySign:a.value},{title:p("Shipping"),content:p("Total amount of shipping costs"),key:"shipping_total",currencySign:a.value}],n=J(()=>s.map(o=>({...o,value:e.orderReport.data.summary[o.key]||0,fluctuation:e.orderReport.data.fluctuations[o.key]||0})).filter(o=>o.value>0));return(o,i)=>{const l=C("el-tooltip");return f(),y("div",{class:"fc-report-avg-wrap mb-7.5",style:Ta(`--avg-grid-cols: ${n.value.length}`)},[(f(!0),y(P,null,j(n.value,A=>(f(),y("div",{class:"fc-report-result",key:A.title},[d("div",oX,[d("div",iX,[d("span",rX,v(g(Fe).scaled(A.value)),1),A.fluctuation!==0?(f(),y("div",{key:0,class:"percentage",style:Ta({color:A.fluctuation>0?"green":"red"})},[A.fluctuation>0?(f(),U(G,{key:0,class:"w-2",name:"CaretUp"})):S("",!0),A.fluctuation<0?(f(),U(G,{key:1,class:"w-2",name:"CaretDown"})):S("",!0),O(" "+v(g($t)(A.fluctuation))+"% ",1)],4)):S("",!0)]),d("div",lX,[O(v(A.title)+" ",1),A.content?(f(),U(l,{key:0,"popper-class":"fc-tooltip",content:A.content,placement:"top"},{default:c(()=>[r(G,{name:"InformationFill",class:"w-4"})]),_:2},1032,["content"])):S("",!0)])])]))),128))],4)}}},cX={class:"flex items-center gap-2"},dX={class:"fc-card-header-title is-small"},uX={class:"fc-btn-group sm"},fX={class:"inline-flex"},hX={class:"inline-flex"},pX={class:"inline-flex"},mX={class:"inline-flex"},gX={__name:"NewVsReturningCustomer",props:{tableData:{type:Object,required:!0},reportFilter:{type:Object}},setup(t){const e=t;T("number");const a=T(!1),s=J(()=>{if(a.value===!0){const o=["customer_count","order_count","net_sales","average_net","gross_sales","average_gross"],i={customer_type:"New"},l={customer_type:"Returning"};return o.forEach(A=>{const u=parseFloat(e.tableData[0][A]),h=parseFloat(e.tableData[1][A]),m=u+h;i[A]=u*100/m,l[A]=h*100/m}),[i,l]}return e.tableData});J(()=>e.reportFilter.currentCurrencySign),he(()=>{});const n=o=>`${parseFloat(o).toFixed(2)}%`;return(o,i)=>{const l=C("el-tooltip"),A=C("el-checkbox"),u=C("el-table-column"),h=C("el-empty"),m=C("el-table");return f(),U(oe,{class:"overflow-hidden",id:"chartContainer"},{default:c(()=>[r(de,{title_size:"small"},{title:c(()=>[d("div",cX,[d("h5",dX,v(g(p)("New vs. Returning Customers")),1),r(l,{"popper-class":"fc-tooltip",content:g(p)("Returning customers are those who first ordered before this period."),placement:"top"},{default:c(()=>[r(G,{name:"InformationFill",class:"text-gray-500 w-4 h-4 cursor-pointer"})]),_:1},8,["content"])])]),action:c(()=>[d("div",uX,[r(A,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=_=>a.value=_),onChange:o.selectGroupKey},{default:c(()=>[O(v(g(p)("Show Percentages")),1)]),_:1},8,["modelValue","onChange"]),r(xi,{data:s.value,filename:"order_report.csv"},null,8,["data"])])]),_:1}),r(ae,{class:"px-0 pb-0"},{default:c(()=>[r(m,{data:s.value,border:""},{empty:c(()=>[r(h,{text:g(p)("No data available")},null,8,["text"])]),default:c(()=>[r(u,{prop:"customer_type",label:g(p)("Type"),"min-width":"90"},{default:c(_=>[O(v(_.row.customer_type),1)]),_:1},8,["label"]),r(u,{prop:"customer_count",label:g(p)("Customer Count"),"min-width":"120"},{default:c(_=>[O(v(a.value?n(_.row.customer_count):_.row.customer_count),1)]),_:1},8,["label"]),r(u,{prop:"order_count",label:g(p)("Order Count"),"min-width":"150"},{default:c(_=>[O(v(a.value?n(_.row.order_count):_.row.order_count),1)]),_:1},8,["label"]),r(u,{prop:"gross_sales",label:g(p)("Gross Sales"),"min-width":"150"},{default:c(_=>[d("div",fX,v(a.value?n(_.row.gross_sales):g(Fe).scaled(_.row.gross_sales)),1)]),_:1},8,["label"]),r(u,{prop:"average_gross",label:g(p)("Average Gross Sales"),"min-width":"150"},{default:c(_=>[d("div",hX,v(a.value?n(_.row.average_gross):g(Fe).scaled(_.row.average_gross)),1)]),_:1},8,["label"]),r(u,{prop:"net_sales",label:g(p)("Revenue"),"min-width":"150"},{default:c(_=>[d("div",pX,v(a.value?n(_.row.net_sales):g(Fe).scaled(_.row.net_sales)),1)]),_:1},8,["label"]),r(u,{prop:"average_net",label:g(p)("Average Revenue"),"min-width":"150"},{default:c(_=>[d("div",mX,v(a.value?n(_.row.average_net):g(Fe).scaled(_.row.average_net)),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})}}},_X=ve(gX,[["__scopeId","data-v-043df764"]]),vX={class:"w-[240px] fc-btn-group gap-1.5"},bX={class:"capitalize"},yX={class:"capitalize"},wX={class:"inline-flex"},CX={class:"inline-flex"},BX={class:"inline-flex"},kX={class:"inline-flex"},xX={__name:"OrderGroupedBy",props:{reportFilter:{type:Object}},setup(t){const a=t.reportFilter,s=T("billing_country"),n=a.applicableFilters;J(()=>a.currentCurrencySign);const o=()=>{nt.getOrderByGroup({params:{...n.params,groupKey:s.value}})},i=[{label:p("Billing Country"),value:"billing_country"},{label:p("Shipping Country"),value:"shipping_country"},{label:p("Payment Method"),value:"payment_method_title"}];return he(()=>{o()}),(l,A)=>{const u=C("el-option"),h=C("el-select"),m=C("el-table-column"),_=C("el-empty"),B=C("el-table");return f(),U(oe,{class:"overflow-hidden",id:"chartContainer"},{default:c(()=>[r(de,{title:`${g(p)("Orders grouped by")}`,title_size:"small"},{action:c(()=>[d("div",vX,[r(h,{class:"el-select--x-small",modelValue:s.value,"onUpdate:modelValue":A[0]||(A[0]=b=>s.value=b),onChange:o,placeholder:g(p)("Select Group")},{default:c(()=>[(f(),y(P,null,j(i,b=>r(u,{key:b.value,label:b.label,value:b.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),r(xi,{data:g(nt).data.orderByGroup,filename:"order_grouped_by.csv",class:"m-0"},null,8,["data"])])]),_:1},8,["title"]),r(ae,{class:"px-0 pb-0"},{default:c(()=>[r(B,{data:g(nt).data.orderByGroup,border:"",class:"max-h-[350px] overflow-y-auto"},{empty:c(()=>[r(_,{text:g(p)("No data available")},null,8,["text"])]),default:c(()=>[s.value==="payment_method_title"?(f(),U(m,{key:0,prop:"payment_method_title",label:"Payment Method Title","min-width":"150"},{default:c(b=>[O(v(b.row.payment_method_title),1)]),_:1})):S("",!0),s.value==="shipping_country"?(f(),U(m,{key:1,prop:"shipping_country",label:g(p)("Country"),"min-width":"150"},{default:c(b=>[d("span",bX,v(g(_i)(b.row.shipping_country)),1)]),_:1},8,["label"])):S("",!0),s.value==="billing_country"?(f(),U(m,{key:2,prop:"billing_country",label:g(p)("Billing Country"),"min-width":"150"},{default:c(b=>[d("span",yX,v(g(_i)(b.row.billing_country)),1)]),_:1},8,["label"])):S("",!0),r(m,{prop:"orders",label:g(p)("Orders"),"min-width":"150"},{default:c(b=>[O(v(b.row.orders),1)]),_:1},8,["label"]),r(m,{prop:"gross_sale",label:g(p)("Gross Sales"),"min-width":"150"},{default:c(b=>[d("div",wX,v(g(Fe).scaled(b.row.gross_sale)),1)]),_:1},8,["label"]),r(m,{prop:"average_order_gross",label:g(p)("Average Gross Sales"),"min-width":"150"},{default:c(b=>[d("div",CX,v(g(Fe).scaled(b.row.average_order_gross)),1)]),_:1},8,["label"]),r(m,{prop:"net_sale",label:g(p)("Revenue"),"min-width":"150"},{default:c(b=>[d("div",BX,v(g(Fe).scaled(b.row.net_sale)),1)]),_:1},8,["label"]),r(m,{prop:"average_order_net",label:g(p)("Average Revenue"),"min-width":"150"},{default:c(b=>[d("div",kX,v(g(Fe).scaled(b.row.average_order_net)),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})}}},FX={class:"fc-report-spend-by-day-wrap"},SX={class:"flex items-center gap-2"},EX={class:"fc-card-header-title is-small"},UX={class:"fc-btn-group sm"},QX={class:"chart-action-wrap"},DX={class:"chart-change-wrap"},MX={class:"chart-change"},IX={class:"text"},TX={class:"chart-change"},$X={class:"text"},OX={__name:"GrossSaleByDay",props:{reportFilter:{type:Object},chartRef:{},chartData:{type:Array,required:!0}},setup(t){const e=t,a=T(null);let s=null;T(yt.getChartType("order","gross_sale_by_day_chart")||"line");const n=T(!1),o=J(()=>{const b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return[...e.chartData].sort((k,F)=>k.day-F.day).map(k=>b[k.day-1])}),i=fe.colors.report,l=T(fe.isDark()),A=J(()=>[u("Gross Sale","line",0,e.chartData.map(b=>b.gross_sale),l.value?i.blue_dark_mode:i.blue),u("Orders","bar",1,e.chartData.map(b=>b.order_count),l.value?i.dark_cyan_blue_16:i.light_gray)]),u=(b,w,k,F,x)=>({name:b,type:w,barMaxWidth:30,yAxisIndex:k,data:F,smooth:!1,color:x,showSymbol:!0,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:x,borderRadius:[4,4,0,0]},yAxisIndex:k,emphasis:{scale:2,itemStyle:{color:Aa(x)},lineStyle:{color:x},areaStyle:{opacity:.3,color:x}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),h=()=>{const b={title:{text:e.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?i.dark_cyan_blue_16:i.light_gray_blue}},formatter:w=>{let k=w[0].name;return w.forEach(F=>{const x=F.seriesName==="Gross Sale"?`${Fe.scaled(F.value)}`:F.value,E=l.value?"#ffffff":"#565865";k+=`<div>
          </div>`}),k}},grid:{left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:o.value,axisLabel:{color:l.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",name:"Gross Sale",axisLabel:{color:l.value?"#FFFFFF":"#696778",fontSize:12,formatter:w=>`${Fe.scaled(w)}`},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",name:"Orders",position:"right",axisLabel:{color:l.value?"#FFFFFF":"#696778",fontSize:12},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}}],dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:A.value};s.setOption(b)},m=()=>{a.value&&!s&&(s=At(a.value),h())},_=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};ke(()=>[nt.data.grossSaleByDay],()=>{me(()=>{h()})},{deep:!0});const B=()=>{l.value=fe.isDark(),me(()=>{h()})};return he(()=>{me(()=>{m(),e.reportFilter.addListener("spend-by-day",m),window.addEventListener("onWebmakerrProThemeChange",B)})}),He(()=>{s&&(s.dispose(),window.removeEventListener("onWebmakerrProThemeChange",B,!1),e.reportFilter.removeListener("spend-by-day",m,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(b,w)=>{const k=C("el-tooltip");return f(),y("div",FX,[r(oe,{id:"chartContainer"},{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",SX,[d("h5",EX,v(g(p)("Spend by day")),1),r(k,{"popper-class":"fc-tooltip",content:g(p)("Gross sales grouped by the days of the week."),placement:"top"},{default:c(()=>[r(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:c(()=>[d("div",UX,[r(we,{tag:"button",size:"x-small",title:b.$t("Zoom Chart"),onClick:_,class:le(n.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[t.chartData?(f(),y("div",{key:0,class:"fc-report-spend-by-day-chart",ref_key:"chartRef",ref:a},null,512)):S("",!0),d("div",QX,[d("div",DX,[d("div",MX,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",IX,v(b.$t("Gross Sale")),1)]),d("div",TX,[d("span",$X,v(b.$t("Days of the week")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},LX={class:"fc-report-item-count-distribution-wrap"},VX={class:"flex items-center gap-2"},RX={class:"fc-card-header-title is-small"},HX={class:"fc-btn-group sm"},PX={class:"chart-action-wrap"},NX={class:"chart-change-wrap"},KX={class:"chart-change"},zX={class:"text"},GX={class:"chart-change"},jX={class:"text"},YX={__name:"ItemCountDistribution",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(t){const e=t,a=T(null);T(e.chartData.length<=1?"bar":yt.getChartType("order","item_count_distribtion_chart")||"bar");const s=T(!1);J(()=>{const b=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return[...e.chartData].sort((k,F)=>k.day-F.day).map(k=>b[k.day-1])});const n=fe.colors,o=T(fe.isDark()),i=()=>{s.value=!s.value,s.value?h.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):h.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})},l=J(()=>o.value?n.blue[500]+"52":n.blue[300]),A=J(()=>[{name:p("Orders"),type:"bar",barMaxWidth:30,data:e.chartData.map(b=>b.order_count),smooth:!1,color:l.value,showSymbol:!0,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:l.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:o.value?n.blue[800]:n.blue[400]},lineStyle:{color:l.value},areaStyle:{opacity:.3,color:l.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),u=J(()=>({title:{text:e.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:o.value?"#253241":"#ffffff",borderColor:o.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:o.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:o.value?n.report.dark_cyan_blue_16:n.report.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:e.chartData.map(b=>b.item_count),axisLabel:{color:o.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:o.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",name:p("Orders"),axisLabel:{formatter:"{value}",color:o.value?"#FFFFFF":"#696778",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:[],series:A.value}));let h=null;const m=()=>{a.value&&h==null&&(h=At(a.value),h.setOption(u.value),window.addEventListener("resize",()=>{h.resize()}))},_=()=>{h&&h.setOption(u.value)};ke(()=>e.chartData,()=>{h&&h.setOption(u.value)});const B=()=>{o.value=fe.isDark(),me(()=>{_()})};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",B,!1),me(()=>{m()})}),He(()=>{h&&(h.dispose(),window.removeEventListener("onWebmakerrProThemeChange",B,!1),window.removeEventListener("resize",()=>{h.resize()}))}),(b,w)=>{const k=C("el-tooltip");return f(),y("div",LX,[r(oe,{id:"chartContainer"},{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",VX,[d("h5",RX,v(g(p)("Item count distribution")),1),r(k,{"popper-class":"fc-tooltip",content:g(p)("Grouping the orders by the number of items in each order."),placement:"top"},{default:c(()=>[r(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:c(()=>[d("div",HX,[r(we,{tag:"button",size:"x-small",title:b.$t("Zoom Chart"),onClick:i,class:le(s.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[d("div",{class:"fc-report-item-count-distribution-chart",ref_key:"chartRef",ref:a},null,512),d("div",PX,[d("div",NX,[d("div",KX,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",zX,v(b.$t("Order Count")),1)]),d("div",GX,[d("span",jX,v(b.$t("Item Count")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},WX={class:"fc-report-spend-by-hour-wrap"},qX={class:"flex items-center gap-2"},XX={class:"fc-card-header-title is-small"},JX={class:"fc-btn-group sm"},ZX={class:"chart-action-wrap"},eJ={class:"chart-change-wrap"},tJ={class:"chart-change"},aJ={class:"text"},sJ={class:"chart-change"},nJ={class:"text"},oJ={__name:"GrossSaleByHour",props:{chartData:{type:Array,required:!0},chartTitle:{type:String,default:""}},setup(t){const e=t,a=T(null);let s=null;T(yt.getChartType("order","gross_sale_by_hour_chart")||"line");const n=T(!1),o=J(()=>e.chartData.map(b=>b.hour)),i=fe.colors.report,l=T(fe.isDark()),A=(b,w,k,F,x)=>({name:b,type:w,barMaxWidth:30,data:k,smooth:!1,color:F,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:F,borderRadius:[4,4,0,0]},yAxisIndex:x,emphasis:{scale:2,itemStyle:{color:Aa(F)},lineStyle:{color:F},areaStyle:{opacity:.3,color:F}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),u=J(()=>[{name:p("Gross Sale"),type:"line",yAxisIndex:0,data:e.chartData.map(b=>b.gross_sale),color:l.value?i.purple_dark_mode:i.purple},{name:p("Orders"),type:"bar",yAxisIndex:1,data:e.chartData.map(b=>b.order_count),color:l.value?i.dark_cyan_blue_16:i.light_gray}].map(b=>A(b.name,b.type,b.data,b.color,b.yAxisIndex))),h=()=>{const b={title:{text:e.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?i.dark_cyan_blue_16:i.light_gray_blue}},formatter:w=>{let k=w[0].name;return w.forEach(F=>{const x=F.seriesName==="Gross Sale"?`${Fe.scaled(F.value)}`:F.value,E=l.value?"#ffffff":"#565865";k+=`<div>
          </div>`}),k}},grid:{left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:o.value,axisLabel:{color:l.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}},axisTick:{alignWithLabel:!0}},yAxis:[{type:"value",name:p("Gross Sale"),axisLabel:{color:l.value?"#FFFFFF":"#696778",fontSize:12,formatter:w=>`${Fe.formatScaled(w)}`},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",name:p("Orders"),position:"right",axisLabel:{color:l.value?"#FFFFFF":"#696778",fontSize:12},min:0,max:"dataMax",splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}}],dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:u.value};s.setOption(b)},m=()=>{a.value&&!s&&(s=At(a.value),h())},_=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};ke(()=>e.chartData,()=>{me(()=>h())});const B=()=>{l.value=fe.isDark(),me(()=>{h()})};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",B,!1),me(()=>m())}),He(()=>{s&&(s.dispose(),window.removeEventListener("onWebmakerrProThemeChange",B,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(b,w)=>{const k=C("el-tooltip");return f(),y("div",WX,[r(oe,null,{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",qX,[d("h5",XX,v(g(p)("Spend by hour ")),1),r(k,{"popper-class":"fc-tooltip",content:g(p)("Gross Sales grouped by the hours of the day."),placement:"top"},{default:c(()=>[r(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:c(()=>[d("div",JX,[r(we,{tag:"button",size:"x-small",title:b.$t("Zoom Chart"),onClick:_,class:le(n.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[t.chartData?(f(),y("div",{key:0,class:"fc-report-spend-by-hour-chart",ref_key:"chartRef",ref:a},null,512)):S("",!0),d("div",ZX,[d("div",eJ,[d("div",tJ,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",aJ,v(b.$t("Gross Sale")),1)]),d("div",sJ,[d("span",nJ,v(b.$t("Hour")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},iJ={class:"fc-report-order-completion-time-wrap"},rJ={class:"flex items-center gap-2"},lJ={class:"fc-card-header-title is-small"},AJ={class:"fc-btn-group sm"},cJ={key:1,class:"py-6 text-center text-gray-400 text-sm h-[400px] flex items-center justify-center"},dJ={class:"chart-action-wrap"},uJ={class:"chart-change-wrap"},fJ={class:"chart-change"},hJ={class:"text"},pJ={class:"chart-change"},mJ={class:"text"},gJ={__name:"OrderCompletionTime",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(t){const e=t,a=T(null);let s=null;T(yt.getChartType("order","order_completion_time_chart")||"bar");const n=T(!1),o=J(()=>e.chartData.map(b=>b.hour)),i=fe.colors,l=T(fe.isDark()),A=J(()=>l.value?i.blue[500]+"52":i.blue[300]),u=J(()=>[{name:p("Orders"),type:"bar",barMaxWidth:30,data:e.chartData.map(b=>b.orders),smooth:!1,color:A.value,showSymbol:!0,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:A.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:l.value?i.blue[800]:i.blue[400]},lineStyle:{color:A.value},areaStyle:{opacity:.3,color:A.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),h=()=>{const b={title:{text:"",left:"center"},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?i.report.dark_cyan_blue_16:i.report.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:o.value,axisLabel:{color:l.value?"#FFFFFF":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",color:l.value?"#FFFFFF":"#696778",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:u.value};s.setOption(b)},m=()=>{a.value&&!s&&(s=At(a.value),h())},_=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};ke(()=>e.chartData,()=>{me(()=>h())});const B=()=>{l.value=fe.isDark(),me(()=>{h()})};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",B,!1),me(()=>m())}),He(()=>{s&&(s.dispose(),window.removeEventListener("onWebmakerrProThemeChange",B,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(b,w)=>{const k=C("el-tooltip");return f(),y("div",iJ,[r(oe,{id:"chartContainer"},{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",rJ,[d("h5",lJ,v(g(p)("Time between an order's created & completed date")),1),r(k,{"popper-class":"fc-tooltip",content:g(p)("Orders grouped by based on their completion time in Hours."),placement:"top"},{default:c(()=>[r(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:c(()=>[d("div",AJ,[r(we,{tag:"button",size:"x-small",title:b.$t("Zoom Chart"),onClick:_,class:le(n.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[t.chartData?(f(),y("div",{key:0,class:"fc-report-order-completion-time-chart",ref_key:"chartRef",ref:a},null,512)):(f(),y("div",cJ,v(g(p)("No relevant data to plot the chart")),1)),d("div",dJ,[d("div",uJ,[d("div",fJ,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",hJ,v(g(p)("Order Count")),1)]),d("div",pJ,[d("span",mJ,v(g(p)("Hours")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},_J={class:"fc-report-order-value-distribution-wrap"},vJ={class:"flex items-center gap-2"},bJ={class:"fc-card-header-title is-small"},yJ={class:"fc-btn-group sm"},wJ={class:"chart-action-wrap"},CJ={class:"chart-change-wrap"},BJ={class:"chart-change"},kJ={class:"text"},xJ={class:"chart-change"},FJ={class:"text"},SJ={__name:"OrderValueDistribution",props:{chartData:{type:Object,required:!0},chartRef:{}},setup(t){const e=t,a=T(null);let s=null;T(yt.getChartType("order","order_value_distribution_chart")||"bar");const n=T(!1),o=J(()=>Object.keys(e.chartData)),i=fe.colors,l=T(fe.isDark()),A=J(()=>l.value?i.blue[500]+"52":i.blue[300]),u=J(()=>[{name:p("Orders"),type:"bar",barMaxWidth:30,data:Object.values(e.chartData),smooth:!1,color:A.value,showSymbol:!0,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:A.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:l.value?i.blue[800]:i.blue[400]},lineStyle:{color:A.value},areaStyle:{opacity:.3,color:A.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),h=J(()=>({title:{text:e.chartTitle,left:"center"},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?i.report.dark_cyan_blue_16:i.report.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:o.value,axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",name:p("Orders"),axisLabel:{formatter:"{value}",color:l.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:u.value})),m=()=>{a.value&&s===null?(s=At(a.value),s.setOption(h.value),window.addEventListener("resize",()=>{s.resize()})):s&&s.setOption(h.value)},_=()=>{s&&s.setOption(h.value)},B=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};ke(()=>e.chartData,()=>{s&&s.setOption(h.value)});const b=()=>{l.value=fe.isDark(),me(()=>{_()})};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",b,!1),me(()=>{m()})}),He(()=>{s&&(s.dispose(),window.removeEventListener("onWebmakerrProThemeChange",b,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(w,k)=>{const F=C("el-tooltip");return f(),y("div",_J,[r(oe,{id:"chartContainer"},{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",vJ,[d("h5",bJ,v(g(p)("Order value distribution")),1),r(F,{"popper-class":"fc-tooltip",content:g(p)("Orders grouped by based on their order value in different ranges."),placement:"top"},{default:c(()=>[r(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:c(()=>[d("div",yJ,[r(we,{tag:"button",size:"x-small",title:w.$t("Zoom Chart"),onClick:B,class:le(n.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[t.chartData?(f(),y("div",{key:0,class:"fc-report-order-value-distribution-chart",ref_key:"chartRef",ref:a},null,512)):S("",!0),d("div",wJ,[d("div",CJ,[d("div",BJ,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",kJ,v(w.$t("Order Count")),1)]),d("div",xJ,[d("span",FJ,v(w.$t("Order Value Ranges")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},EJ={class:"fc-report-average-order-gross-wrap"},UJ={class:"flex items-center gap-2"},QJ={class:"fc-card-header-title is-small"},DJ={class:"fc-btn-group sm"},MJ={class:"chart-action-wrap"},IJ={class:"chart-change-wrap"},TJ={class:"chart-change"},$J={class:"text"},OJ={class:"chart-change"},LJ={class:"text"},VJ={__name:"AverageOrderGross",props:{chartData:{type:Array,required:!0}},setup(t){const e=t,a=T(null);let s=null;T("line");const n=T(!1),o=fe.colors.report,i=T(fe.isDark()),l=J(()=>i.value?o.blue_dark_mode:o.blue),A=J(()=>[{name:p("Average Order Gross"),type:"line",barMaxWidth:30,data:e.chartData.map(b=>b.average_order_gross),smooth:!1,color:l.value,showSymbol:!0,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:l.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:Aa(l.value)},lineStyle:{color:l.value},areaStyle:{opacity:.3,color:l.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),u=J(()=>Ha(e.chartData.length)),h=()=>{const b=ks(e.chartData),w={title:{text:"",left:"center"},tooltip:{trigger:"axis",backgroundColor:i.value?"#253241":"#ffffff",borderColor:i.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:i.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:i.value?o.dark_cyan_blue_16:o.light_gray_cyan_blue}},valueFormatter:k=>Fe.scaled(k)},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:b,axisLabel:{color:i.value?"#ffffff":"#000000",fontSize:12,interval:u.value.interval},axisLine:{lineStyle:{type:"dashed",color:i.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",color:i.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:A.value};s.setOption(w)},m=()=>{a.value&&!s&&(s=At(a.value),h())},_=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};ke(()=>e.chartData,()=>{me(()=>h())});const B=()=>{i.value=fe.isDark(),me(()=>{h()})};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",B,!1),me(()=>m())}),He(()=>{s&&(s.dispose(),window.removeEventListener("onWebmakerrProThemeChange",B,!1),window.removeEventListener("resize",()=>{s.resize()}))}),(b,w)=>{const k=C("el-tooltip"),F=C("el-empty");return f(),y("div",EJ,[r(oe,{id:"chartContainer"},{default:c(()=>[r(de,{border_bottom:"",title_size:"small"},{title:c(()=>[d("div",UJ,[d("h5",QJ,v(g(p)("Average Order Gross ")),1),r(k,{"popper-class":"fc-tooltip",content:g(p)("Average Order Gross grouped by date period."),placement:"top"},{default:c(()=>[r(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:c(()=>[d("div",DJ,[r(we,{tag:"button",size:"x-small",title:b.$t("Zoom Chart"),onClick:_,class:le(n.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[t.chartData?(f(),y(P,{key:0},[d("div",{class:"fc-report-average-order-gross-chart",ref_key:"chartRef",ref:a},null,512),d("div",MJ,[d("div",IJ,[d("div",TJ,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",$J,v(b.$t("Average Order Gross")),1)]),d("div",OJ,[d("span",LJ,v(b.$t("Timeline")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])],64)):(f(),U(F,{key:1}))]),_:1})]),_:1})])}}},RJ={class:"fc-report-average-order-items-wrap"},HJ={class:"flex items-center gap-2"},PJ={class:"fc-card-header-title is-small"},NJ={class:"fc-btn-group sm"},KJ={class:"chart-action-wrap"},zJ={class:"chart-change-wrap"},GJ={class:"chart-change"},jJ={class:"text"},YJ={class:"chart-change"},WJ={class:"text"},qJ={__name:"AverageOrderItems",props:{chartData:{type:Array,required:!0},chartRef:{}},setup(t){const e=t,a=T(null);let s=null;T(yt.getChartType("order","avg_order_items_chart")||"line");const n=T(!1),o=fe.colors.report,i=T(fe.isDark()),l=J(()=>i.value?o.purple_dark_mode:o.purple),A=J(()=>[{name:p("Average Order Items"),type:"line",barMaxWidth:30,data:Array.isArray(e.chartData)?e.chartData.map(w=>w.average_order_items_count):[],smooth:!1,color:l.value,showSymbol:!0,symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:l.value,borderRadius:[4,4,0,0]},yAxisIndex:0,emphasis:{scale:2,itemStyle:{color:Aa(l.value)},lineStyle:{color:l.value},areaStyle:{opacity:.3,color:l.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}]),u=J(()=>Ha(e.chartData.length)),h=J(()=>{const w=ks(e.chartData);return{title:{text:"",left:"center"},tooltip:{trigger:"axis",backgroundColor:i.value?"#253241":"#ffffff",borderColor:i.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:i.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:i.value?o.dark_cyan_blue_16:o.light_gray_cyan_blue}}},grid:{show:!1,left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:w,axisLabel:{color:i.value?"#FFFFFF":"#696778",fontSize:12,interval:u.value.interval},axisLine:{lineStyle:{type:"dashed",color:i.value?"#253241":"#D6DAE1"}}},yAxis:{name:"Order Items",type:"value",axisLabel:{formatter:"{value}",color:i.value?"#FFFFFF":"#696778",fontSize:12},splitLine:{show:!1},min:0,max:"dataMax",splitNumber:5},dataZoom:n.value?[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]:[],series:A.value}}),m=()=>{a.value&&s===null?(s=At(a.value),s.setOption(h.value),window.addEventListener("resize",()=>{s==null||s.resize()})):s&&s.setOption(h.value)},_=()=>{s&&s.setOption(h.value)},B=()=>{n.value=!n.value,n.value?s.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100}]}):s.setOption({dataZoom:[]},{replaceMerge:["dataZoom"]})};ke(()=>e.chartData,()=>{s&&s.setOption(h.value)});const b=()=>{i.value=fe.isDark(),me(()=>{_()})};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",b),me(()=>{m(),window.addEventListener("resize",()=>s==null?void 0:s.resize())})}),He(()=>{window.removeEventListener("onWebmakerrProThemeChange",b,!1),s&&(window.removeEventListener("resize",()=>{s.resize()}),s.dispose(),s=null)}),(w,k)=>{const F=C("el-tooltip");return f(),y("div",RJ,[r(oe,null,{default:c(()=>[r(de,{border_bottom:"",title_size:"small"},{title:c(()=>[d("div",HJ,[d("h5",PJ,v(g(p)("Average Order Items ")),1),r(F,{"popper-class":"fc-tooltip",content:g(p)("Average Order Items grouped by date period."),placement:"top"},{default:c(()=>[r(G,{name:"InformationFill",class:"w-4 cursor-pointer"})]),_:1},8,["content"])])]),action:c(()=>[d("div",NJ,[r(we,{tag:"button",size:"x-small",title:w.$t("Zoom Chart"),onClick:B,class:le(n.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[d("div",{class:"fc-report-average-order-items-chart",ref_key:"chartRef",ref:a},null,512),d("div",KJ,[d("div",zJ,[d("div",GJ,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",jJ,v(w.$t("Average Order Items")),1)]),d("div",YJ,[d("span",WJ,v(w.$t("Timeline")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},XJ={class:"fc-order-report-page"},JJ={class:"page-heading-wrap flex items-center justify-between"},ZJ={class:"page-title"},eZ={__name:"OrderReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const a=t.reportFilter,s=o=>{o&&(nt.getOrderChartData({params:{...o.params,groupKey:""}}),nt.getNewVsReturningCustomer(o),nt.getReportByDayAndHour(o),nt.getItemCountDistribution(o),nt.getOrderCompletionTime(o),nt.getOrderValueDistribution(o))},n=o=>{const i=a.applicableFilters;i&&nt.getOrderChartData({params:{...i.params,groupKey:o}})};return he(()=>{a.addListener("order-report",s),s(a.applicableFilters),a.value}),He(()=>{a.removeListener("order-report",s,!1),a.value}),(o,i)=>{const l=C("el-col"),A=C("el-row");return f(),U(tt,{permission:"reports/view"},{default:c(()=>[d("div",XJ,[d("div",JJ,[d("h1",ZJ,v(o.$t("Orders")),1)]),r(Vq,{orderReport:g(nt),reportFilter:g(a)},null,8,["orderReport","reportFilter"]),r(Jq,{chartData:g(nt).data.orderChartData,reportFilter:g(a),onFetchChartData:n},null,8,["chartData","reportFilter"]),r(nX,{orderReport:g(nt)},null,8,["orderReport"]),g(nt).data.summary.tax_total||g(nt).data.summary.shipping_total?(f(),U(AX,{key:0,orderReport:g(nt),reportFilter:g(a)},null,8,["orderReport","reportFilter"])):S("",!0),r(_X,{tableData:g(nt).data.newVsReturning,reportFilter:g(a)},null,8,["tableData","reportFilter"]),r(xX,{tableData:g(nt).data.orderByGroup,reportFilter:g(a)},null,8,["tableData","reportFilter"]),r(Rq,{chartData:g(nt).data.orderByDayAndHour},null,8,["chartData"]),r(A,{gutter:30},{default:c(()=>[r(l,{lg:12},{default:c(()=>[r(OX,{reportFilter:g(a),ref:"chartRef",chartData:g(nt).data.grossSaleByDay},null,8,["reportFilter","chartData"])]),_:1}),r(l,{lg:12},{default:c(()=>[r(oJ,{chartData:g(nt).data.grossSaleByHour},null,8,["chartData"])]),_:1}),r(l,{lg:12},{default:c(()=>[r(YX,{ref:"chartRef",chartData:g(nt).data.itemCountDistribution},null,8,["chartData"])]),_:1}),r(l,{lg:12},{default:c(()=>[r(SJ,{chartData:g(nt).data.orderValueDistribution},null,8,["chartData"])]),_:1}),r(l,{lg:12},{default:c(()=>[r(VJ,{chartData:g(nt).data.orderChartData},null,8,["chartData"])]),_:1}),r(l,{lg:12},{default:c(()=>[r(qJ,{chartData:g(nt).data.orderChartData},null,8,["chartData"])]),_:1}),r(l,{lg:12},{default:c(()=>[r(gJ,{chartData:g(nt).data.orderCompletionTime},null,8,["chartData"])]),_:1})]),_:1})])]),_:1})}}},tZ={class:"fc-gross-sale-vs-net-revenue-wrap"},aZ={class:"flex items-center gap-2"},sZ={class:"fc-card-header-title is-small"},nZ={class:"fc-chart-select"},oZ={class:"fc-btn-group sm"},iZ={class:"chart-action-wrap"},rZ={class:"chart-change-wrap"},lZ={class:"chart-change"},AZ={class:"text"},cZ={class:"chart-change"},dZ={class:"text"},uZ={__name:"RefundLineChart",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!1},reportFilter:{type:Object}},emits:["fetch-chart-data"],setup(t,{emit:e}){const a=t,s=fe.colors.report,n=T(fe.isDark()),o=T(null),i=T("default"),l=T(yt.getChartType("refund","refund_chart")||"line"),A=T(!1);J(()=>a.reportFilter.currentCurrencySign);const u=[{label:p("Default"),value:"default"},{label:p("Monthly"),value:"monthly"},{label:p("Yearly"),value:"yearly"}],h=e,m=()=>{h("fetch-chart-data",i.value)},_=J(()=>a.reportFilter.data.compareType!=="no_comparison"),B=($,Q,I,L,V,N=!0)=>({name:$,type:Q,barMaxWidth:30,data:I,smooth:!1,color:L,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:L,borderRadius:[4,4,0,0]},yAxisIndex:V,emphasis:{scale:2,itemStyle:{color:Aa(L)},lineStyle:{color:L},areaStyle:{opacity:.3,color:L}},animation:N,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),b=J(()=>{let $=[{name:p("Refunded Amount"),key:"refunded_amount",type:"line",color:n.value?s.blue_dark_mode:s.blue,yAxisIndex:0,data:a.chartData.map(Q=>Q.refunded_amount),animation:!1},{name:p("Total Refunds"),key:"refund_count",type:"bar",color:n.value?s.dark_cyan_blue_16:s.light_gray,yAxisIndex:1,data:a.chartData.map(Q=>Q.refund_count),animation:!1}];return _.value&&$.push({name:p("Previous Refunded Amount"),key:"refunded_amount_compare",type:"line",color:n.value?s.purple_dark_mode:s.purple,yAxisIndex:0,data:a.compareData.map(Q=>Q.refunded_amount),animation:!1},{name:p("Previous Total Refunds"),key:"refund_count_compare",type:"bar",color:n.value?s.dark_cyan_blue_36:s.light_gray_cyan_blue,yAxisIndex:1,data:a.compareData.map(Q=>Q.refund_count),animation:!0}),$.map(Q=>B(Q.name,Q.type,Q.data,Q.color,Q.yAxisIndex,Q.animation))});let w=null;const k=T(!0),F=()=>{o.value&&w==null&&(w=At(o.value),M(),w.on("legendselectchanged",$=>{k.value=$.selected["Total Refunds"]||$.selected["Previous Total Refunds"]}))},x=J(()=>{const $=Sn(a.reportFilter.data.dateRange);return p("This report looks at refunds made for successful orders created ")+$}),E=J(()=>Ha(a.chartData.length)),M=()=>{const $=ks(a.chartData),Q={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:n.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:n.value?"#253241":"#ffffff",borderColor:n.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:n.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:n.value?s.dark_cyan_blue_16:s.light_gray_blue}},formatter:I=>{let L=I[0].name;return I.forEach(V=>{const N=[0,2].includes(V.seriesIndex)?`${Fe.scaled(V.value)}`:V.value,Y=n.value?"#ffffff":"#565865";L+=`<div>
          </div>`}),L}},xAxis:{type:"category",data:$,axisLabel:{color:n.value?"#ffffff":"#000000",fontSize:12,interval:E.value.interval},axisLine:{lineStyle:{type:"dashed",color:n.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:n.value?"#ffffff":"#000000",fontSize:12,formatter:I=>`${Fe.scaled(I)}`},splitLine:{show:!0,lineStyle:{color:n.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",position:"right",axisLabel:{color:n.value?"#253241":"#D6DAE1",fontSize:12},splitLine:{show:!1}}],series:b.value,animation:!0,animationThreshold:2e3,animationDurationUpdate:300,animationEasingUpdate:"cubicInOut"};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},D=()=>{A.value=!A.value,A.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):M()};ke([()=>a.chartData,l],()=>{me(M)},{deep:!0}),ke(()=>rs.data.refund,()=>{me(()=>{M()})},{deep:!0}),ke(k,()=>{if(!w)return;const Q=w.getOption().series.map(I=>I.type==="line"?{...I,areaStyle:k.value?void 0:{opacity:.3}}:I);me(()=>{w.setOption({series:Q})})});const R=()=>{n.value=fe.isDark(),me(()=>{M()})};return He(()=>{window.removeEventListener("onWebmakerrProThemeChange",R,!1)}),he(()=>{window.addEventListener("onWebmakerrProThemeChange",R),me(F)}),($,Q)=>{const I=C("el-tooltip"),L=C("el-option"),V=C("el-select");return f(),y("div",tZ,[r(oe,{id:"chartContainer"},{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",aZ,[d("h5",sZ,v(g(p)("Refunds Chart")),1),r(I,{"popper-class":"fc-tooltip",content:x.value,placement:"top"},{default:c(()=>[r(G,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),action:c(()=>[d("div",nZ,[r(V,{class:"el-select--x-small",modelValue:i.value,"onUpdate:modelValue":Q[0]||(Q[0]=N=>i.value=N),onChange:m},{default:c(()=>[(f(),y(P,null,j(u,N=>r(L,{key:N.value,label:$.$t(N.label),value:N.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),d("div",oZ,[r(we,{tag:"button",size:"small",title:$.$t("Zoom Chart"),onClick:D,class:le(A.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:o.value},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0"},{default:c(()=>[d("div",{class:"fc-chart-wrap fc-refund-line-chart",ref_key:"chartRef",ref:o},null,512),d("div",iZ,[d("div",rZ,[d("div",lZ,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",AZ,v($.$t("Data")),1)]),d("div",cZ,[d("span",dZ,v($.$t("Timeline")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}};class fZ extends na{constructor(){super(...arguments);ee(this,"data",{refundData:[],previousMetrics:[],summary:{},previousSummary:{},fluctuations:{},chartData:[],weeksBetweenRefund:[],isBusy:!1})}get controllerKey(){return"RefundReportController"}makeRequest(a,s,n,o){this.data.isBusy=!0,typeof s!="object"&&(s={});const i=ne.get(`reports/${a}`,s);return this.resolvePromiseResponse(i,n,o),i}resolvePromiseResponse(a,s=null,n=null){a.then(o=>{n==null||s==null?Object.assign(this.data,o):this.data[n]=o[s]}).catch(o=>{console.log(o,"error")}).finally(()=>{this.data.isBusy=!1})}getRefundChartData(a={}){return this.makeRequest("refund-chart",a)}getWeeksBetweenRefund(a={}){return this.makeRequest("weeks-between-refund",a,"data","weeksBetweenRefund")}getRefundSummary(a={}){return this.makeRequest("refund-summary",a,"summaryData","summaryData")}getRefundDataByGroup(a={}){return this.makeRequest("refund-data-by-group",a,"data","refundData")}getRefundReportFluctuations(a={}){return this.makeRequest("refund-report-fluctuations",a,"data","fluctuations")}}const Vt=fZ.init(),hZ={class:"fc-report-order-summary summary-col-4"},pZ={class:"summary-item-inner"},mZ={class:"value"},gZ={class:"inner-value"},_Z={class:"title"},vZ={__name:"Summary",setup(t){const e=J(()=>[{title:p("Refunds"),value:Vt.data.summary.refund_count,key:"refund_count",percentage:Vt.data.fluctuations.refund_count,info:p("Total refunds count including partially refunds."),no_currency:!0},{title:p("Refunded"),value:Vt.data.summary.refunded_amount,key:"refunded_amount",percentage:Vt.data.fluctuations.refunded_amount,info:p("Total Refunded Amount")},{title:p("Avgerage Amount"),value:Vt.data.summary.average_refunded_amount,key:"average_refunded_amount",percentage:Vt.data.fluctuations.average_refunded_amount,info:p("Total Refunded Amount / Total Refund count")},{title:p("Refund Rate"),value:Vt.data.summary.refund_rate,key:"refund_rate",percentage:Vt.data.fluctuations.refund_rate,info:p("Total Refunded Amount / Total Order Amount"),no_currency:!0,is_percentage:!0}]);return(a,s)=>{const n=C("el-tooltip");return f(),y("div",hZ,[(f(!0),y(P,null,j(e.value,(o,i)=>(f(),y("div",{class:"summary-item",key:i},[d("div",pZ,[d("div",mZ,[d("div",gZ,[d("span",null,v(o.no_currency?g($t)(o.value):g(Fe).scaled(o.value))+v(o.is_percentage?"%":""),1)]),r(an,{fluctuation:o.percentage,amount:g(Vt).data.previousSummary[o.key],"is-liability":!0,"has-currency":!o.no_currency,"is-percentage":o.is_percentage},null,8,["fluctuation","amount","has-currency","is-percentage"])]),d("div",_Z,[O(v(o.title)+" ",1),r(n,{content:o.info,placement:"top","popper-class":"fc-tooltip"},{default:c(()=>[r(G,{class:"text-gray-500 w-4 flex-shrink-0",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))])}}},bZ={class:"fc-report-refund-weeks-between-an-order-wrap"},yZ={class:"fc-btn-group sm"},wZ={class:"chart-action-wrap"},CZ={class:"chart-change-wrap"},BZ={class:"chart-change"},kZ={class:"text"},xZ={class:"chart-change"},FZ={class:"text"},SZ={__name:"WeeksBetweenRefundChart",props:{chartData:{type:Array,required:!0},chartTitle:{type:String,default:""}},setup(t){const e=t,a=T(null),s=T("bar");let n=null;const o=fe.colors.report,i=T(fe.isDark()),l=J(()=>i.value?o.dark_cyan_blue_16:o.light_gray),A=J(()=>[{name:p("Refund Count"),type:s.value,data:e.chartData.map(b=>b.occurrence),smooth:!0,color:l.value,showSymbol:!1,itemStyle:{borderRadius:[4,4,0,0]},emphasis:{itemStyle:{color:Aa(l.value)}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}]),u=J(()=>Ha(e.chartData.length)),h=()=>({title:{text:e.chartTitle,left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:i.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:i.value?"#253241":"#ffffff",borderColor:i.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:i.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:i.value?o.dark_cyan_blue_16:o.light_gray_blue}}},xAxis:{type:"category",data:e.chartData.map(b=>b.weekBetween),axisLabel:{color:i.value?"#ffffff":"#000000",fontSize:12,interval:u.value.interval,formatter:b=>b>1?`${b} weeks`:`${b} week`},axisLine:{lineStyle:{type:"dashed",color:i.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{formatter:"{value}",color:i.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:i.value?"#253241":"#D6DAE1"}}},series:A.value}),m=()=>{a.value&&n===null?(n=At(a.value),n.setOption(h()),window.addEventListener("resize",()=>{n.resize()})):n&&n.setOption(h())};ke(()=>e.chartData,()=>{n&&n.setOption(h())});const _=()=>{i.value=fe.isDark(),me(()=>{B()})};He(()=>{window.removeEventListener("onWebmakerrProThemeChange",_,!1)});const B=b=>{n.setOption(h(),!0)};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",_),me(()=>{m()})}),(b,w)=>(f(),y("div",bZ,[r(oe,null,{default:c(()=>[r(de,{title:g(p)("Weeks between an order's created date and refund date"),title_size:"small",border_bottom:""},{action:c(()=>[d("div",yZ,[r(Qt,{targetRef:a.value,size:"x-small"},null,8,["targetRef"])])]),_:1},8,["title"]),r(ae,{class:"px-0"},{default:c(()=>[d("div",{class:"fc-chart-wrap fc-refund-weeks-between-an-order-chart",ref_key:"chartRef",ref:a},null,512),d("div",wZ,[d("div",CZ,[d("div",BZ,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",kZ,v(g(p)("Refund Count")),1)]),d("div",xZ,[d("span",FZ,v(g(p)("Weeks")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})]))}},EZ={class:"fc-btn-group sm w-[240px] gap-2"},UZ={key:0},QZ={key:1},DZ={class:"inline-flex"},MZ={class:"inline-flex"},IZ={__name:"RefundTable",props:{tableData:{type:Array,required:!0},currencySign:{type:String}},emits:["group-data"],setup(t,{emit:e}){const a=e;T([]);const s=T([{label:p("Billing Country"),value:"billing_country"},{label:p("Shipping Country"),value:"shipping_country"},{label:p("Payment Method Title"),value:"payment_method_title"}]),n=T("billing_country"),o=J(()=>{var l;return((l=s.value.find(A=>A.value===n.value))==null?void 0:l.label)||""}),i=()=>{a("group-data",n.value)};return(l,A)=>{const u=C("el-option"),h=C("el-select"),m=C("el-table-column"),_=C("el-empty"),B=C("el-table");return f(),U(oe,{class:"overflow-hidden"},{default:c(()=>[r(de,{title:g(p)("Refunds Grouped By"),title_size:"small"},{action:c(()=>[d("div",EZ,[r(h,{modelValue:n.value,"onUpdate:modelValue":A[0]||(A[0]=b=>n.value=b),onChange:i,class:"el-select--x-small",placeholder:g(p)("Select Group")},{default:c(()=>[(f(!0),y(P,null,j(s.value,b=>(f(),U(u,{key:b.value,label:g(p)(b.label),value:b.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),r(xi,{data:t.tableData,filename:"refund.csv",class:"!ml-0"},null,8,["data"])])]),_:1},8,["title"]),r(ae,{class:"px-0 pb-0"},{default:c(()=>[r(B,{data:t.tableData,height:"330"},{empty:c(()=>[r(_,{text:"No data available"})]),default:c(()=>[r(m,{prop:n.value,label:g(p)(o.value),"min-width":"150"},{default:c(b=>[n.value!=="payment_method_type"&&n.value!=="payment_method_title"?(f(),y("span",UZ,v(g(_i)(b.row[n.value])),1)):(f(),y("span",QZ,v(b.row[n.value]),1))]),_:1},8,["prop","label"]),r(m,{prop:"refunds",label:g(p)("Refunds"),"min-width":"150"},{default:c(b=>[O(v(b.row.totalRefunded),1)]),_:1},8,["label"]),r(m,{prop:"refunded_amount",label:g(p)("Refunded Amount"),"min-width":"150"},{default:c(b=>[d("div",DZ,v(g(Fe).scaled(b.row.totalRefundedAmount.total)),1)]),_:1},8,["label"]),r(m,{prop:"average_refund",label:g(p)("Average Refund"),"min-width":"150"},{default:c(b=>[d("div",MZ,v(g(Fe).scaled(b.row.totalRefundedAmount.average)),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})}}},TZ={class:"fc-refund-report-page"},$Z={class:"page-heading-wrap flex items-center justify-between"},OZ={class:"page-title"},LZ={__name:"RefundReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const a=t.reportFilter,s=l=>{Vt.getRefundChartData({params:{...l.params,groupKey:"default"}}),Vt.getWeeksBetweenRefund(l),n(l)},n=l=>{Vt.getRefundDataByGroup({params:{...l.params,groupKey:"billing_country"}})},o=l=>{const A=a.applicableFilters;Vt.getRefundDataByGroup({params:{...A.params,groupKey:l}})},i=l=>{const A=a.applicableFilters;A&&Vt.getRefundChartData({params:{...A.params,groupKey:l}})};return he(()=>{a.addListener("refund-report",s),s(a.applicableFilters)}),He(()=>{a.removeListener("refund-report")}),(l,A)=>(f(),U(tt,{permission:"reports/view"},{default:c(()=>[d("div",TZ,[d("div",$Z,[d("h1",OZ,v(l.$t("Refunds")),1)]),r(vZ),r(uZ,{ref:"refundChart",chartData:g(Vt).data.chartData,compareData:g(Vt).data.previousMetrics,reportFilter:g(a),onFetchChartData:i},null,8,["chartData","compareData","reportFilter"]),r(SZ,{chartData:g(Vt).data.weeksBetweenRefund},null,8,["chartData"]),r(IZ,{tableData:g(Vt).data.refundData,currencySign:g(a).currentCurrencySign,onGroupData:o},null,8,["tableData","currencySign"])])]),_:1}))}},VZ={class:"fc-gross-sale-vs-net-revenue-wrap"},RZ={class:"fc-chart-select"},HZ={class:"fc-btn-group sm"},PZ={class:"chart-action-wrap"},NZ={class:"chart-change-wrap"},KZ={class:"chart-change"},zZ={class:"text"},GZ={class:"chart-change"},jZ={class:"text"},YZ={__name:"RetentionChart",props:{chartData:{type:Object,required:!0},reportFilter:{type:Object}},emits:["fetch-custom-chart-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T(yt.getChartType("subscription","retention_chart")||"line"),o=T(!1),i=T(null);T([]);const l=fe.colors.report,A=T(fe.isDark()),u=(M,D,R,$)=>({name:M,type:D,barMaxWidth:30,data:R,smooth:!1,color:$,lineStyle:{width:3},areaStyle:{opacity:.3,color:$},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:$,borderRadius:[4,4,0,0]},emphasis:{scale:3,itemStyle:{color:Aa($)},lineStyle:{color:$},areaStyle:{opacity:.3,color:$}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}),h=J(()=>Object.keys(a.chartData).map(D=>D.startsWith("day_")?p("%s Days",D.replace("day_","")):D==="more_than_year"?p("More than Year"):D)),m=J(()=>Object.keys(a.chartData).map(D=>a.chartData[D]||0)),_=J(()=>[u(p("Customers"),n.value,m.value,A.value?l.dark_cyan_blue_16:l.light_gray)]);let B=null;const b=()=>{s.value&&B==null&&(B=At(s.value),w())},w=()=>{const M={title:{text:a.chartTitle??"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:A.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:A.value?"#253241":"#ffffff",borderColor:A.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:A.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:A.value?l.dark_cyan_blue_16:l.light_gray_blue}}},xAxis:{type:"category",data:h.value,axisLabel:{color:A.value?"#ffffff":"#565865",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:A.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:A.value?"#ffffff":"#565865",fontSize:12},splitLine:{show:!0,lineStyle:{color:A.value?"#253241":"#D6DAE1",type:"dashed"}}}],series:_.value};B.setOption(M,{notMerge:!0,replaceMerge:["series"]})},k=M=>{yt.onChange("subscription","retention_chart",M),n.value!==M&&(o.value=!1,n.value=M,w())},F=e,x=()=>{F("fetch-custom-chart-data",i.value)};ke(()=>a.chartData,()=>{me(w)},{deep:!0}),ke(()=>rs.data.refund,()=>{me(w)},{deep:!0});const E=()=>{A.value=fe.isDark(),me(()=>{w()})};return He(()=>{window.removeEventListener("onWebmakerrProThemeChange",E,!1)}),he(()=>{window.addEventListener("onWebmakerrProThemeChange",E),me(b)}),(M,D)=>{const R=C("el-input");return f(),y("div",VZ,[r(oe,{id:"chartContainer"},{default:c(()=>[r(de,{title:g(p)("Retention Chart"),title_size:"small",border_bottom:""},{action:c(()=>[d("div",RZ,[r(R,{type:"text",modelValue:i.value,"onUpdate:modelValue":D[0]||(D[0]=$=>i.value=$),placeholder:g(p)("Enter custom days"),class:"el-input--x-small",onKeyup:ja(x,["enter"])},null,8,["modelValue","placeholder"])]),d("div",HZ,[r(tn,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:k},null,8,["activeType"]),r(Qt,{targetRef:s.value},null,8,["targetRef"])])]),_:1},8,["title"]),r(ae,{class:"px-0"},{default:c(()=>[d("div",{class:"fc-chart-wrap fc-refund-line-chart",ref_key:"chartRef",ref:s},null,512),d("div",PZ,[d("div",NZ,[d("div",KZ,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",zZ,v(g(p)("Data")),1)]),d("div",GZ,[d("span",jZ,v(g(p)("Timeline")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},WZ={class:"fc-revenue-line-chart-wrap"},qZ={class:"flex items-center gap-2"},XZ={class:"fc-card-header-title is-small"},JZ={class:"w-[270px] fc-btn-group sm gap-1.5 lg:gap-0"},ZZ={class:"chart-action-wrap"},eee={class:"chart-change-wrap"},tee={class:"chart-change"},aee={class:"text"},see={class:"chart-change"},nee={class:"text"},oee={__name:"SubscriptionChartNew",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String}},emits:["filter-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T(yt.getChartType("subscription","subscription_chart")||"line"),o=T(!1),i=fe.colors.report,l=T(fe.isDark()),A=($,Q,I,L,V)=>({name:$,type:Q,barMaxWidth:30,yAxisIndex:I,data:L,smooth:!1,color:V,lineStyle:{width:3},areaStyle:{opacity:.3,color:V},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:V,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Aa(V)},lineStyle:{color:V},areaStyle:{opacity:.3,color:V}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),u=T(a.appliedGroupKey);ke(()=>a.appliedGroupKey,$=>{u.value=$});const h=[{label:"Default",value:"default"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}],m=e,_=()=>{m("filter-data",u.value)},B=J(()=>a.reportFilter.data.compareType!=="no_comparison"),b=J(()=>{let $=[{name:p("Current Range"),key:"count",type:n.value,color:l.value?i.dark_cyan_blue_16:i.light_gray,data:a.chartData.map(Q=>Q.count)}];return B.value&&$.push({name:p("Compare Range"),key:"count",type:n.value,color:l.value?i.dark_cyan_blue_36:i.light_gray_cyan_blue,data:a.compareData.map(Q=>({value:Q.count,date:Q.group}))}),$.map(Q=>A(Q.name,Q.type,0,Q.data,Q.color))});let w=null;const k=()=>{s.value&&w==null&&(w=At(s.value),E())},F=J(()=>{const $=Sn(a.reportFilter.data.dateRange);return p("This report looks at the subscription you received ")+$}),x=J(()=>Ha(a.chartData.length)),E=()=>{const $=ks(a.chartData),Q={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:l.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?i.dark_cyan_blue_16:i.light_gray_blue}},alwaysShowContent:!1,formatter:I=>{let L="";return I.forEach(function(V,N){const Y=N===0?V.name:po(V.data.date),K=N===0?V.value:V.data.value,X=I.length>1&&N===0;X&&(L+='<div style="margin-bottom: 10px">'),L+=`<div>${Y}</div>`,L+=`<div>
          </div>`,X&&(L+="</div>")}),L}},grid:{show:!1},xAxis:{type:"category",data:$,axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12,interval:x.value.interval},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}},series:b.value};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},M=()=>{o.value=!o.value,o.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):E()},D=$=>{yt.onChange("subscription","subscription_chart",$),n.value!==$&&(o.value=!1,n.value=$,E())};ke([()=>a.chartData,u],()=>{me(E)},{deep:!0}),ke(()=>rs.data.revenue,()=>{me(()=>{E()})},{deep:!0});const R=()=>{l.value=fe.isDark(),me(()=>{E()})};return He(()=>{window.removeEventListener("onWebmakerrProThemeChange",R,!1)}),he(()=>{window.addEventListener("onWebmakerrProThemeChange",R),me(()=>{k()})}),($,Q)=>{const I=C("el-tooltip"),L=C("el-option"),V=C("el-select");return f(),y("div",WZ,[r(oe,null,{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",qZ,[d("h4",XZ,v(g(p)("Subscription Chart")),1),r(I,{"popper-class":"fc-tooltip",content:F.value,placement:"top"},{default:c(()=>[r(G,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),action:c(()=>[d("div",JZ,[r(V,{class:"el-select--x-small",modelValue:u.value,"onUpdate:modelValue":Q[0]||(Q[0]=N=>u.value=N),onChange:_},{default:c(()=>[(f(),y(P,null,j(h,N=>r(L,{key:N.value,label:g(p)(N.label),value:N.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),r(tn,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:D},null,8,["activeType"]),r(we,{tag:"button",size:"small",title:g(p)("Zoom Chart"),onClick:M,class:le(o.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:s.value},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[d("div",{class:"fc-chart-wrap fc-revenue-line-chart mt-3",ref_key:"chartRef",ref:s},null,512),d("div",ZZ,[d("div",eee,[d("div",tee,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",aee,v(g(p)("Data")),1)]),d("div",see,[d("span",nee,v(g(p)("Timeline")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}};class iee extends na{constructor(){super(...arguments);ee(this,"data",{overviews:[],fluctuations:[],chartData:[],productList:[],customerList:[],revenueChurnRateNet:{title:p("Revenue Churn Rate"),isCurrency:!1,value:0},netNewMrr:{title:p("Net New MRR"),isCurrency:!0,value:0},isBusy:{overviews:!1,fluctuations:!1,chartData:!1,productList:!1,customerList:!1,revenueChurnRateNet:!0,netNewMrr:!0},currentMetrics:[],previousMetrics:[]})}get controllerKey(){return"SubscriptionReportController"}get revenueChurnRateNet(){return this.data.revenueChurnRateNet}get netNewMrr(){return this.data.netNewMrr}makeRequest(a,s,n,o){typeof s!="object"&&(s={}),this.data.isBusy[o]=!0;const i=ne.get(`reports/${a}`,s);return this.resolvePromiseResponse(i,n,o),i}resolvePromiseResponse(a,s=null,n=null){a.then(o=>{n==null||s==null||(this.data[n]=o[s]),this.data.isBusy[n]=!1}).catch(o=>{console.log(o,"error")}).finally(()=>{this.data.isBusy[n]=!1})}getSubscriptionReportFluctuations(a={}){return this.makeRequest("getSubscriptionReportFluctuations",a,"fluctuations","fluctuations")}getSubscriptionReportFluctuations(a={}){return this.makeRequest("get-subscription-fluctuations",a,"fluctuations","fluctuations")}getRetentionChart(a={}){return this.makeRequest("retention-chart",a,"chartData","chartData")}listSubscriptionsByProduct(a={}){return this.makeRequest("list-subscription-by-product",a,"productList","productList")}listSubscriptionsByCustomer(a={}){return this.makeRequest("list-subscription-by-customer",a,"customerList","customerList")}getSubscriptionOverview(a={}){return this.makeRequest("get-subscription-overview",a,"overviews","overviews").then(s=>{this.getRevenueChurnRateNet(a),this.getNetNewMrr(a)}).finally(()=>{})}getRevenueChurnRateNet(a={}){this.data.isBusy.revenueChurnRateNet=!0,ne.get("reports/get-subscription-overview/revenue-churn-rate-net",a).then(s=>{this.data.revenueChurnRateNet=s.data}).finally(()=>{this.data.isBusy.revenueChurnRateNet=!1})}getNetNewMrr(a={}){this.data.isBusy.netNewMrr=!0,ne.get("reports/get-subscription-overview/net-new-mrr",a).then(s=>{this.data.netNewMrr=s.data}).finally(()=>{this.data.isBusy.netNewMrr=!1})}}const Eo=iee.init(),ree={class:"grid grid-cols-4 gap-5 bg-white rounded p-4 dark:bg-dark-700 mb-7.5"},lee={__name:"SummaryLoader",props:{loading:{type:Boolean,default:!1}},setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton");return f(),U(n,{loading:"loading",animated:""},{template:c(()=>[d("div",ree,[(f(),y(P,null,j(4,o=>d("div",{key:o},[r(s,{class:"h-4"}),r(s,{class:"w-[140px]"})])),64))])]),_:1})}}},Aee={key:1,class:"fc-report-order-summary summary-col-4"},cee={class:"summary-item-inner"},dee={class:"value"},uee={class:"inner-value"},fee={class:"title"},hee={__name:"Summary",props:{summaryData:{type:Object,required:!0},fluctuations:{type:Object,required:!0},reportFilter:{type:Object},subscriptionReport:{type:Object}},setup(t){const e=t;J(()=>{var n;return((n=e.reportFilter)==null?void 0:n.currentCurrencySign)||""});const a=[{title:p("Future Installments"),key:"future_installments",info:p("The total amount expected from future installments."),hasCurrency:!0}],s=J(()=>!e.summaryData||!e.fluctuations?[]:a.map(n=>({...n,title:n.title,value:e.summaryData[n.key]||0,fluctuation:e.fluctuations[n.key]||0,hasCurrency:n.hasCurrency})));return(n,o)=>{const i=C("el-tooltip");return t.subscriptionReport.data.isBusy.overviews?(f(),U(lee,{key:0,loading:t.subscriptionReport.data.isBusy.overviews},null,8,["loading"])):(f(),y("div",Aee,[(f(!0),y(P,null,j(s.value,(l,A)=>(f(),y("div",{class:"summary-item",key:A},[d("div",cee,[d("div",dee,[d("div",uee,[r(En,{amount:g(Fe).scaled(l.value),title:l.title},null,8,["amount","title"])])]),d("div",fee,[O(v(l.title)+" ",1),r(i,{content:l.info,placement:"top","popper-class":"fc-tooltip",effect:"dark"},{default:c(()=>[r(G,{class:"text-gray-500 w-4 h-4 cursor-help",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))]))}}},pee={class:"chart-action-wrap"},mee={class:"chart-change-wrap"},gee={class:"chart-change"},_ee={class:"text"},vee={class:"chart-change"},bee={class:"text"},yee={__name:"LineChart",props:{chartData:{type:Array,required:!0},chartTitle:{type:String,default:""},formatValuePercentage:{type:Boolean,default:!1},amountFormat:{type:Boolean,default:!1},chartType:{type:String},zoomIsActive:{type:Boolean,default:!1}},setup(t,{expose:e}){const a=t,s=T(null),n=T(a.chartData);e({chartRef:s}),ke(()=>a.chartData,F=>{n.value=F},{deep:!0});const o=fe.colors.report,i=T(fe.isDark()),l=J(()=>({textColor:i.value?"#ffffff":"#000000",borderColor:i.value?"#4a5a6b":"#c0c4ca",splitLineColor:i.value?"#253241":"#D6DAE1",bgColor:i.value?"#2d3748":"#ffffff"})),A=J(()=>i.value?o.dark_cyan_blue_16:o.light_gray),u=J(()=>n.value.map(F=>po(F.label))),h=J(()=>[{name:a.chartTitle,type:a.chartType,data:n.value.map(F=>F.value),smooth:!1,color:A.value,lineStyle:{width:3},barMaxWidth:30,areaStyle:{opacity:.3,color:A.value},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:A.value,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Aa(A.value)},lineStyle:{color:A.value},areaStyle:{opacity:.3,color:A.value}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,legendHoverLink:!1}]);let m=null;const _=()=>{s.value&&!m&&(m=At(s.value),b())},B=J(()=>Ha(a.chartData.length)),b=()=>{const F={legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:i.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:i.value?"#253241":"#ffffff",borderColor:i.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:i.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:i.value?o.dark_cyan_blue_16:o.light_gray_blue}}},xAxis:{type:"category",data:u.value,axisLabel:{color:l.value.textColor,fontSize:12,interval:B.value.interval},axisLine:{lineStyle:{type:"dashed",color:l.value.splitLineColor}}},yAxis:{type:"value",axisLabel:{color:l.value.textColor,fontSize:12},splitLine:{show:!0,lineStyle:{color:l.value.splitLineColor,type:"dashed"}}},series:h.value};m.setOption(F,{notMerge:!0,replaceMerge:["series"]})},w=F=>{F?m.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):b()};ke([()=>n.value,()=>a.chartType,()=>fe.isDark()],()=>{me(b)},{deep:!0}),ke(()=>a.zoomIsActive,F=>{w(F)});const k=()=>{i.value=fe.isDark(),me(()=>{b()})};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",k),me(_)}),He(()=>{window.removeEventListener("onWebmakerrProThemeChange",k,!1)}),(F,x)=>(f(),y(P,null,[d("div",{class:"fc-chart-wrap",ref_key:"chartRef",ref:s},null,512),d("div",pee,[d("div",mee,[d("div",gee,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",_ee,v(F.$t("Data")),1)]),d("div",vee,[d("span",bee,v(F.$t("Timeline")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])],64))}},wee={class:"fc-daily-signup-chart-wrap"},Cee={class:"fc-btn-group sm gap-2 lg:gap-0"},Bee={__name:"DailySignupChart",props:{reportFilter:{type:Object,required:!1}},setup(t){const e=t,a=T(yt.getChartType("subscription","daily_signups_chart")||"line"),s=T([]),n=T(""),o=T(!1),i=A=>{ne.get("reports/daily-signups",{params:{...A}}).then(u=>{s.value=u.signups,s.value.forEach(h=>{h.label=h.trend_date})})},l=A=>{yt.onChange("subscription","daily_signups_chart",A),a.value!==A&&(a.value=A)};return he(()=>{i(e.reportFilter.applicableFilters.params),e.reportFilter.addListener("daily-signup-chart",A=>{i(A.params)})}),(A,u)=>(f(),y("div",wee,[r(oe,null,{default:c(()=>[r(de,{title:g(p)("Daily Signups"),title_size:"small",border_bottom:""},{action:c(()=>[d("div",Cee,[r(tn,{activeType:a.value,types:{line:"LineChart",bar:"BarChart"},onChange:l},null,8,["activeType"]),n.value?(f(),U(Qt,{key:0,targetRef:n.value.chartRef},null,8,["targetRef"])):S("",!0)])]),_:1},8,["title"]),r(ae,null,{default:c(()=>[r(yee,{chartData:s.value,"chart-title":g(p)("Signups"),chartType:a.value,zoomIsActive:o.value,ref_key:"lineChartRef",ref:n},null,8,["chartData","chart-title","chartType","zoomIsActive"])]),_:1})]),_:1})]))}};const kee={name:"Comparison",props:{currentMetrics:{type:Array},previousMetrics:{type:Array},reportFilter:{type:Object},hasComparison:{type:Boolean}},components:{CardContainer:oe,CardHeader:de,CardBody:ae},data(){return{}},computed:{currencySign(){return this.reportFilter.currentCurrencySign},comparisonData(){const t=[];return this.hasComparison?(this.currentMetrics.forEach((e,a)=>{if(a<this.previousMetrics.length){const s=this.previousMetrics[a],n=e.count,o=s.count,i=o?((n-o)/o*100).toFixed(2):"n/a";t.push({group:`${this.formatDate(e.group)} vs ${this.formatDate(s.group)}`,count:$t(n),previous_count:$t(o),percent_change:i})}}),t):this.currentMetrics}},methods:{translate:p,getPercentageClass(t){return t>0?"text-success-500":t<0?"text-red-500":"text-system-light"},formatDate(t){const e=t.split("-");if(e.length===3){const[a,s,n]=e;return`${Ya[parseInt(s)-1]} ${n}, ${a}`}else if(e.length===2){const[a,s]=e;return`${Ya[parseInt(s)-1]} ${a}`}else if(e.length===1){const[a]=e;return`${a}`}}}},xee={class:"fc-revenue-comparison"},Fee={class:"inline-flex"},See={class:"inline-flex"};function Eee(t,e,a,s,n,o){const i=C("CardHeader"),l=C("el-table-column"),A=C("el-table"),u=C("CardBody"),h=C("CardContainer");return f(),y("div",xee,[r(h,{class:"overflow-hidden"},{default:c(()=>[r(i,{title:o.translate("Subscription Comparison"),title_size:"small"},null,8,["title"]),r(u,{class:"px-0 pb-0"},{default:c(()=>[r(A,{data:o.comparisonData,class:"w-full",maxHeight:"390"},{default:c(()=>[r(l,{label:"Date"},{default:c(m=>[O(v(m.row.group),1)]),_:1}),r(l,{label:o.translate("Current Range")},{default:c(m=>[d("div",Fee,v(m.row.count),1)]),_:1},8,["label"]),a.hasComparison?(f(),y(P,{key:0},[r(l,{label:o.translate("Compare Range")},{default:c(m=>[d("div",See,v(m.row.previous_count),1)]),_:1},8,["label"]),r(l,{label:o.translate("Change")+" (%)"},{default:c(m=>[d("span",{class:le(o.getPercentageClass(m.row.percent_change))},v(m.row.percent_change),3)]),_:1},8,["label"])],64)):S("",!0)]),_:1},8,["data"])]),_:1})]),_:1})])}const Uee=ve(kee,[["render",Eee]]),Qee={class:"fc-refund-report-page"},Dee={class:"page-heading-wrap flex items-center justify-between"},Mee={class:"page-title"};const Iee={__name:"SubscriptionReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=T({summary:{},fluctuations:{},currentMetrics:[],compareMetrics:[]}),s=e.reportFilter,n=T("default"),o=J(()=>s.currentCurrencySign);s.applicableFilters;const i=T(""),l=T(""),A=J(()=>{var F;const w=((F=Eo.data)==null?void 0:F.productList)||[],k=i.value.toLowerCase();return w.filter(x=>x.product_name.toLowerCase().includes(k))}),u=J(()=>{var F;const w=((F=Eo.data)==null?void 0:F.customerList)||[],k=l.value.toLowerCase();return w.filter(x=>x.customer_name.toLowerCase().includes(k)||x.email.toLowerCase().includes(k))}),h=w=>{m(w),B(w)},m=(w,k="default")=>{ne.get("reports/subscription-chart",{params:{...w.params,groupKey:k}}).then(F=>{a.value=F})},_=w=>{n.value!==w&&(n.value=w,m(s.applicableFilters.params,w))},B=(w,k=null)=>{Eo.getRetentionChart({params:{...w.params,customDays:k}})},b=w=>{B(s.applicableFilters,w)};return he(()=>{s.addListener("subscription-report",w=>{h(w)}),h(s.applicableFilters)}),He(()=>{s.removeListener("subscription-report")}),(w,k)=>{const F=C("el-col"),x=C("el-row"),E=C("el-input"),M=C("el-table-column"),D=C("el-empty"),R=C("el-table");return f(),U(tt,{permission:"reports/view"},{default:c(()=>[d("div",Qee,[d("div",Dee,[d("h1",Mee,v(g(p)("Subscriptions")),1)]),r(hee,{summaryData:a.value.summary,fluctuations:a.value.fluctuations,subscriptionReport:g(Eo),reportFilter:g(s)},null,8,["summaryData","fluctuations","subscriptionReport","reportFilter"]),r(oee,{ref:"subscriptionChart",chartData:a.value.currentMetrics,compareData:a.value.compareMetrics,reportFilter:g(s),appliedGroupKey:n.value,onFilterData:_},null,8,["chartData","compareData","reportFilter","appliedGroupKey"]),r(Uee,{class:"my-7.5",currentMetrics:a.value.currentMetrics,previousMetrics:a.value.compareMetrics,hasComparison:e.reportFilter.data.compareType!=="no_comparison",reportFilter:g(s)},null,8,["currentMetrics","previousMetrics","hasComparison","reportFilter"]),r(x,{gutter:30},{default:c(()=>[r(F,{lg:12},{default:c(()=>[r(YZ,{ref:"subscriptionChart",chartData:g(Eo).data.chartData,onFetchCustomChartData:b},null,8,["chartData"])]),_:1}),r(F,{lg:12},{default:c(()=>[r(Bee,{reportFilter:g(s)},null,8,["reportFilter"])]),_:1})]),_:1}),S("",!0),S("",!0),S("",!0),S("",!0)])]),_:1})}}},Tee={class:"fc-refund-report-page"},$ee={class:"page-heading-wrap inline-flex gap-1 items-center"},Oee={class:"page-title"},Lee={class:"fc-report-order-summary summary-col-12"},Vee={class:"summary-item-inner"},Ree={class:"value"},Hee={class:"inner-value"},Pee={class:"title"},Nee={class:"fc-revenue-line-chart-wrap"},Kee={class:"flex items-center gap-2"},zee={class:"fc-card-header-title is-small"},Gee={class:"fc-btn-group sm"},jee={class:"chart-action-wrap"},Yee={class:"chart-change-wrap"},Wee={class:"chart-change"},qee={class:"text"},Xee={class:"chart-change"},Jee={class:"text"},Zee={__name:"FutureRenewalsReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const a=t.reportFilter,s=T(!1),n=fe.colors.report,o=T(fe.isDark()),i=T(null);let l=null;const A=T({totalProjected:0,totalRenewals:0,projections:[],period:{start:null,end:null},groupBy:"monthly"}),u=(E,M="monthly")=>{ne.get("reports/future-renewals",{params:{...E.params,groupKey:M}}).then(D=>{A.value=D})},h=(E,M,D,R,$)=>({name:E,type:M,barMaxWidth:30,yAxisIndex:D,data:R,smooth:!1,color:$,lineStyle:{width:3},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:$,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Aa($)},lineStyle:{color:$}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),m=()=>{i.value&&l==null&&(l=At(i.value),_())},_=()=>{const E=ks(A.value.projections),M={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:o.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:o.value?"#253241":"#ffffff",borderColor:o.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:o.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:o.value?n.dark_cyan_blue_16:n.light_gray_blue}},formatter:D=>{let R=D[0].name;return D.forEach(($,Q)=>{const I=Q===0?`${Fe.formatScaled($.value)}`:$t($.value),L=o.value?"#ffffff":"#565865";R+=`<div>
                    </div>`}),R}},grid:{show:!1},xAxis:{type:"category",data:E,axisLabel:{color:o.value?"#ffffff":"#000000",fontSize:12,interval:F.value.interval},axisLine:{lineStyle:{type:"dashed",color:o.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",axisLabel:{color:o.value?"#ffffff":"#000000",fontSize:12,formatter:D=>`${Fe.formatScaled(D)}`},splitLine:{show:!0,lineStyle:{color:o.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",axisLabel:{color:o.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!1}}],series:k.value};l.setOption(M,{notMerge:!0,replaceMerge:["series"]})},B=()=>{s.value=!s.value,s.value?l.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):_()},b=()=>{o.value=fe.isDark(),me(()=>{_()})},w=J(()=>{const E=Sn(A.value.period);return p("This report is calculated by looking at active subscriptions and extrapolating their renewals over time, to estimate future renewal revenue ")+E}),k=J(()=>[{name:p("Revenue"),key:"count",type:"line",color:o.value?n.blue_dark_mode:n.blue,data:A.value.projections.map(M=>M.projected_amount)},{name:p("Count"),key:"count",type:"bar",color:o.value?n.dark_cyan_blue_16:n.light_gray,data:A.value.projections.map(M=>M.renewals_count)}].map((M,D)=>h(M.name,M.type,D,M.data,M.color))),F=J(()=>Ha(A.value.projections.length)),x=J(()=>[{title:p("Renewal Revenue"),value:Fe.formatScaled(A.value.totalProjected),key:"renewal_revenue"},{title:p("Renewals"),value:$t(A.value.totalRenewals),key:"renewals_count",no_currency:!0}]);return ke([()=>A.value],()=>{me(_)},{deep:!0}),he(()=>{u(a.applicableFilters),me(()=>{m()}),window.addEventListener("onWebmakerrProThemeChange",b)}),He(()=>{window.removeEventListener("onWebmakerrProThemeChange",b,!1)}),(E,M)=>(f(),U(tt,{permission:"reports/view"},{default:c(()=>[d("div",Tee,[d("div",$ee,[d("h1",Oee,v(g(p)("Subscription Future Revenue")),1)])]),r(oe,null,{default:c(()=>[r(ae,{class:"p-3"},{default:c(()=>[O(v(w.value),1)]),_:1})]),_:1}),d("div",Lee,[(f(!0),y(P,null,j(x.value,(D,R)=>(f(),y("div",{class:"summary-item",key:R},[d("div",Vee,[d("div",Ree,[d("div",Hee,[d("span",null,v(D.value),1)])]),d("div",Pee,v(D.title),1)])]))),128))]),d("div",Nee,[r(oe,null,{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",Kee,[d("h4",zee,v(g(p)("Upcoming Renewal Revenue")),1)])]),action:c(()=>[d("div",Gee,[r(we,{tag:"button",size:"small",title:E.$t("Zoom Chart"),onClick:B,class:le(s.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:i.value},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[d("div",{class:"fc-chart-wrap fc-revenue-line-chart mt-3",ref_key:"chartRef",ref:i},null,512),d("div",jee,[d("div",Yee,[d("div",Wee,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",qee,v(g(p)("Data")),1)]),d("div",Xee,[d("span",Jee,v(g(p)("Timeline")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])]),_:1}))}},ete={class:"fc-report-order-summary"},tte={class:"summary-item-inner"},ate={class:"value"},ste={class:"inner-value"},nte={class:"title"},ote={__name:"Summary",props:{reportFilter:{type:Object},customerReport:{type:Object}},setup(t){const e=t,a=[{title:p("Customer Growth"),key:"customer_count"}],s=J(()=>a.map(n=>({key:n.key,title:n.title,value:e.customerReport.summary[n.key],fluctuation:e.customerReport.fluctuations[n.key]})));return(n,o)=>(f(),y("div",ete,[(f(!0),y(P,null,j(s.value,(i,l)=>(f(),y("div",{class:"summary-item",key:l},[d("div",tte,[d("div",ate,[d("div",ste,v(g($t)(i.value)),1),r(an,{fluctuation:i.fluctuation,"has-currency":!1,amount:e.customerReport.previousSummary[i.key]},null,8,["fluctuation","amount"])]),d("div",nte,v(i.title),1)])]))),128))]))}},ite={class:"fc-revenue-line-chart-wrap"},rte={class:"flex items-center gap-2"},lte={class:"fc-card-header-title is-small"},Ate={class:"w-[270px] fc-btn-group sm gap-1.5 lg:gap-0"},cte={class:"chart-action-wrap"},dte={class:"chart-change-wrap"},ute={class:"chart-change"},fte={class:"text"},hte={class:"chart-change"},pte={class:"text"},mte={__name:"CustomerReportChart",props:{chartData:{type:Array,required:!0},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String}},emits:["filter-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T(yt.getChartType("revenue","revenue_chart")||"line"),o=T(!1),i=fe.colors.report,l=T(fe.isDark()),A=($,Q,I,L,V)=>({name:$,type:Q,barMaxWidth:30,yAxisIndex:I,data:L,smooth:!1,color:V,lineStyle:{width:3},areaStyle:{opacity:.3,color:V},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:V,borderRadius:[4,4,0,0]},emphasis:{scale:3,itemStyle:{color:Aa(V)},lineStyle:{color:V},areaStyle:{opacity:.3,color:V}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),u=T(a.appliedGroupKey);ke(()=>a.appliedGroupKey,$=>{u.value=$});const h=[{label:"Default",value:"default"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}],m=e,_=()=>{m("filter-data",u.value)},B=J(()=>a.reportFilter.data.compareType!=="no_comparison"),b=J(()=>{var Q;let $=[{name:p("Current Range"),key:"customer_count",type:n.value,color:l.value?i.dark_cyan_blue_16:i.light_gray,data:a.chartData.map(I=>I.customer_count)}];return B.value&&$.push({name:p("Compare Range"),key:"customer_count",type:n.value,color:l.value?i.dark_cyan_blue_36:i.light_gray_cyan_blue,data:(Q=a.compareData)==null?void 0:Q.map(I=>({value:I.customer_count,date:I.group}))}),$.map(I=>A(I.name,I.type,0,I.data,I.color))});let w=null;const k=()=>{s.value&&w==null&&(w=At(s.value),E())},F=J(()=>{const $=Sn(a.reportFilter.data.dateRange);return p("Customers that first ordered ")+$}),x=J(()=>Ha(a.chartData.length)),E=()=>{const $=ks(a.chartData),Q={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:l.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?i.dark_cyan_blue_16:i.light_gray_blue}},alwaysShowContent:!1,formatter:I=>{let L="";const V=l.value?"#ffffff":"#565865";return I.forEach(function(N,Y){const K=Y===0?N.name:po(N.data.date),X=Y===0?N.value:N.data.value,re=I.length>1&&Y===0;re&&(L+='<div style="margin-bottom: 10px">'),L+=`<div>${K}</div>`,L+=`<div>
          </div>`,re&&(L+="</div>")}),L}},grid:{show:!1},xAxis:{type:"category",data:$,axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12,interval:x.value.interval},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}},series:b.value};w.setOption(Q,{notMerge:!0,replaceMerge:["series"]})},M=()=>{o.value=!o.value,o.value?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):E()},D=$=>{yt.onChange("revenue","revenue_chart",$),n.value!==$&&(o.value=!1,n.value=$,E())};ke([()=>a.chartData,u],()=>{me(E)},{deep:!0}),ke(()=>rs.data.revenue,()=>{me(()=>{E()})},{deep:!0});const R=()=>{l.value=fe.isDark(),me(()=>{E()})};return He(()=>{window.removeEventListener("onWebmakerrProThemeChange",R,!1)}),he(()=>{window.addEventListener("onWebmakerrProThemeChange",R),me(()=>{k()})}),($,Q)=>{const I=C("el-tooltip"),L=C("el-option"),V=C("el-select");return f(),y("div",ite,[r(oe,null,{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",rte,[d("h5",lte,v(g(p)("New Customers")),1),r(I,{"popper-class":"fc-tooltip",content:F.value,placement:"top"},{default:c(()=>[r(G,{class:"text-gray-500 w-4 h-4 cursor-help",name:"InformationFill"})]),_:1},8,["content"])])]),action:c(()=>[d("div",Ate,[r(V,{class:"el-select--x-small",modelValue:u.value,"onUpdate:modelValue":Q[0]||(Q[0]=N=>u.value=N),onChange:_},{default:c(()=>[(f(),y(P,null,j(h,N=>r(L,{key:N.value,label:g(p)(N.label),value:N.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),r(tn,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:D},null,8,["activeType"]),r(we,{tag:"button",size:"small",title:g(p)("Zoom Chart"),onClick:M,class:le(o.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:s.value},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0 pt-0"},{default:c(()=>[d("div",{class:"fc-chart-wrap fc-revenue-line-chart mt-3",ref_key:"chartRef",ref:s},null,512),d("div",cte,[d("div",dte,[d("div",ute,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",fte,v(g(p)("Data")),1)]),d("div",hte,[d("span",pte,v(g(p)("Timeline")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},gte={name:"Comparison",props:{currentMetrics:{type:Array},previousMetrics:{type:Array},reportFilter:{type:Object},hasComparison:{type:Boolean}},components:{CardContainer:oe,CardHeader:de,CardBody:ae},data(){return{}},computed:{currencySign(){return this.reportFilter.currentCurrencySign},comparisonData(){const t=[];return this.hasComparison?(this.currentMetrics.forEach((e,a)=>{var s;if(a<((s=this.previousMetrics)==null?void 0:s.length)){const n=this.previousMetrics[a],o=e.customer_count,i=n.customer_count,l=i?((o-i)/i*100).toFixed(2):"n/a";t.push({group:`${this.formatDate(e.group)} vs ${this.formatDate(n.group)}`,count:o,previous_count:i,percent_change:l})}}),t):this.currentMetrics}},methods:{translate:p,getPercentageClass(t){return t>0?"text-success-500":t<0?"text-red-500":"text-system-light"},formatDate(t){const e=t.split("-");if(e.length===3){const[a,s,n]=e;return`${Ya[parseInt(s)-1]} ${n}, ${a}`}else if(e.length===2){const[a,s]=e;return`${Ya[parseInt(s)-1]} ${a}`}else if(e.length===1){const[a]=e;return`${a}`}}}},_te={class:"fc-revenue-comparison"},vte={class:"inline-flex"},bte={class:"inline-flex"};function yte(t,e,a,s,n,o){const i=C("CardHeader"),l=C("el-table-column"),A=C("el-table"),u=C("CardBody"),h=C("CardContainer");return f(),y("div",_te,[r(h,{class:"overflow-hidden"},{default:c(()=>[r(i,{title:o.translate("Comparison"),title_size:"small"},null,8,["title"]),r(u,{class:"px-0 pb-0"},{default:c(()=>[r(A,{data:o.comparisonData,class:"w-full",maxHeight:"390"},{default:c(()=>[r(l,{label:"Date"},{default:c(m=>[O(v(m.row.group),1)]),_:1}),r(l,{label:o.translate("Current Range")},{default:c(m=>[d("div",vte,v(m.row.count),1)]),_:1},8,["label"]),a.hasComparison?(f(),y(P,{key:0},[r(l,{label:o.translate("Compare Range")},{default:c(m=>[d("div",bte,v(m.row.previous_count),1)]),_:1},8,["label"]),r(l,{label:o.translate("Change")+" (%)"},{default:c(m=>[d("span",{class:le(o.getPercentageClass(m.row.percent_change))},v(m.row.percent_change),3)]),_:1},8,["label"])],64)):S("",!0)]),_:1},8,["data"])]),_:1})]),_:1})])}const wte=ve(gte,[["render",yte]]),Cte={class:"fc-customer-report-page"},Bte={class:"page-heading-wrap flex items-center justify-between"},kte={class:"page-title"},xte={__name:"CustomerReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=T({summary:{},previousSummary:{},fluctuations:{},currentMetrics:[],previousMetrics:[]}),s=T("default"),n=e.reportFilter,o=n.applicableFilters.params,i=(A,u="default")=>{ne.get("reports/customer-report",{params:{...A,groupKey:u}}).then(h=>{a.value=h})},l=A=>{s.value!==A&&(s.value=A,i(o,A))};return he(()=>{i(o),e.reportFilter.addListener("customer-report",A=>{i(A.params,s.value)})}),(A,u)=>(f(),U(tt,{permission:"reports/view"},{default:c(()=>[d("div",Cte,[d("div",Bte,[d("h1",kte,v(A.$t("Customers")),1)]),r(ote,{reportFilter:g(n),customerReport:a.value},null,8,["reportFilter","customerReport"]),r(mte,{chartData:a.value.currentMetrics,compareData:a.value.previousMetrics,reportFilter:g(n),appliedGroupKey:s.value,onFilterData:l},null,8,["chartData","compareData","reportFilter","appliedGroupKey"]),r(wte,{class:"my-7.5",currentMetrics:a.value.currentMetrics,previousMetrics:a.value.previousMetrics,hasComparison:e.reportFilter.data.compareType!=="no_comparison",reportFilter:g(n)},null,8,["currentMetrics","previousMetrics","hasComparison","reportFilter"])])]),_:1}))}},Fte={class:"fc-revenue-line-chart-wrap"},Ste={class:"flex items-center gap-2"},Ete={class:"fc-card-header-title is-small"},Ute={class:"fc-chart-select"},Qte={class:"fc-btn-group sm"},Dte={class:"chart-action-wrap"},Mte={class:"chart-change-wrap"},Ite={class:"chart-change"},Tte={class:"text"},$te={class:"chart-change"},Ote={class:"text"},Lte={__name:"ProductReportChart",props:{chartData:{type:Array,required:!0,default:()=>[]},compareData:{type:Array,required:!0},reportFilter:{type:Object},appliedGroupKey:{type:String}},emits:["filter-data"],setup(t,{emit:e}){const a=t,s=T(null),n=T(yt.getChartType("product","product_chart")||"bar"),o=T(!1),i=fe.colors.report,l=T(fe.isDark()),A=(Q,I,L,V,N)=>({name:Q,type:I,barMaxWidth:30,yAxisIndex:L,data:V,smooth:!1,color:N,lineStyle:{width:3},areaStyle:{opacity:.3,color:N},symbol:"circle",showSymbol:!0,symbolSize:8,itemStyle:{color:N,borderRadius:[4,4,0,0]},emphasis:{scale:2,itemStyle:{color:Aa(N)},lineStyle:{color:N},areaStyle:{opacity:.3,color:N}},animation:!0,animationEasing:"cubicOut",animationDuration:800,animationDelay:0,barGap:"-100%",legendHoverLink:!1}),u=T("default"),h=[{label:"Default",value:"default"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"}],m=e,_=()=>{m("filter-data",u.value)},B=J(()=>a.reportFilter.data.compareType!=="no_comparison"),b=J(()=>{let Q=[{name:p("Current Range"),key:"units_sold",type:n.value,color:l.value?i.dark_cyan_blue_16:i.light_gray,data:a.chartData.map(I=>I.units_sold)}];return B.value&&Q.push({name:p("Compare Range"),key:"units_sold",type:n.value,color:l.value?i.dark_cyan_blue_36:i.light_gray_cyan_blue,data:a.compareData.map(I=>({value:I.units_sold,date:I.group}))}),Q.map(I=>A(I.name,I.type,0,I.data,I.color))});let w=null;const k=()=>{s.value&&w==null&&(w=At(s.value),E())},F=J(()=>{const Q=Sn(a.reportFilter.data.dateRange);return p("This report looks at the units sold ")+Q}),x=J(()=>Ha(a.chartData.length)),E=()=>{if(!w)return;const Q=ks(a.chartData),I={title:{text:"",left:"center"},legend:{show:!0,itemGap:20,itemWidth:10,itemHeight:10,textStyle:{color:l.value?"#ffffff":"#000000"}},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?i.dark_cyan_blue_16:i.light_gray_blue}},formatter:L=>{let V="";const N=l.value?"#ffffff":"#565865";return L.forEach(function(Y,K){const X=K===0?Y.name:po(Y.data.date),re=K===0?Y.value:Y.data.value,ce=L.length>1&&K===0;ce&&(V+='<div style="margin-bottom: 10px">'),V+=`<div>${X}</div>`,V+=`<div>
          </div>`,ce&&(V+="</div>")}),V}},grid:{show:!1},xAxis:{type:"category",data:Q,splitNumber:x.value.splitNumber,axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12,interval:x.value.interval},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",axisLabel:{color:l.value?"#ffffff":"#000000",fontSize:12},splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}},series:b.value};w.setOption(I,{notMerge:!0,replaceMerge:["series"]})},M=()=>{o.value=!o.value,o.value&&w?w.setOption({dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"95%",start:1,end:100},{type:"inside",xAxisIndex:[0],start:1,end:100},{type:"inside",yAxisIndex:[0],start:1,end:100}]}):w&&E()},D=Q=>{yt.onChange("revenue","revenue_chart",Q),n.value!==Q&&(o.value=!1,n.value=Q,E())};ke([()=>a.chartData,u],()=>{me(()=>{E()})},{deep:!0}),ke(()=>rs.data.product,()=>{me(()=>{E()})},{deep:!0});const R=()=>{w&&w.resize()},$=()=>{l.value=fe.isDark(),me(()=>{E()})};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",$),window.addEventListener("resize",R),setTimeout(()=>{k()},100)}),He(()=>{window.removeEventListener("onWebmakerrProThemeChange",$,!1),window.removeEventListener("resize",R),w&&(w.dispose(),w=null)}),(Q,I)=>{const L=C("el-tooltip"),V=C("el-option"),N=C("el-select");return f(),y("div",Fte,[r(oe,{id:"chartContainer"},{default:c(()=>[r(de,{title_size:"small",border_bottom:""},{title:c(()=>[d("div",Ste,[d("h5",Ete,v(g(p)("Product Report Chart")),1),r(L,{"popper-class":"fc-tooltip",content:F.value,placement:"top"},{default:c(()=>[r(G,{class:"text-gray-500 w-4 h-4 cursor-pointer",name:"InformationFill"})]),_:1},8,["content"])])]),action:c(()=>[d("div",Ute,[r(N,{class:"el-select--x-small",modelValue:u.value,"onUpdate:modelValue":I[0]||(I[0]=Y=>u.value=Y),onChange:_},{default:c(()=>[(f(),y(P,null,j(h,Y=>r(V,{key:Y.value,label:g(p)(Y.label),value:Y.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),d("div",Qte,[r(tn,{activeType:n.value,types:{line:"LineChart",bar:"BarChart"},onChange:D},null,8,["activeType"]),r(we,{tag:"button",size:"small",title:g(p)("Zoom Chart"),onClick:M,class:le(o.value?"primary":"")},{default:c(()=>[r(G,{name:"SearchAdd"})]),_:1},8,["title","class"]),r(Qt,{targetRef:s.value},null,8,["targetRef"])])]),_:1}),r(ae,{class:"px-0"},{default:c(()=>[d("div",{class:"fc-chart-wrap fc-revenue-line-chart",ref_key:"chartRef",ref:s},null,512),d("div",Dte,[d("div",Mte,[d("div",Ite,[r(G,{name:"ArrowUp",class:"arrow-up"}),d("span",Tte,v(g(p)("Data")),1)]),d("div",$te,[d("span",Ote,v(g(p)("Timeline")),1),r(G,{name:"ArrowRight",class:"arrow-right"})])])])]),_:1})]),_:1})])}}},Vte=ve(Lte,[["__scopeId","data-v-da9707eb"]]);class Rte extends na{constructor(){super(...arguments);ee(this,"data",{summary:{},previousSummary:{},fluctuations:{},isBusy:!1,currentMetrics:[],previousMetrics:[],chartData:[]})}get controllerKey(){return"ProductReportController"}makeRequest(a,s,n,o){this.data.isBusy=!0,typeof s!="object"&&(s={});const i=ne.get(`reports/${a}`,s);return this.resolvePromiseResponse(i,n,o),i}resolvePromiseResponse(a,s=null,n=null){a.then(o=>{n==null||s==null?Object.assign(this.data,o):this.data[n]=o[s]}).catch(o=>{console.log(o,"error")}).finally(()=>{this.data.isBusy=!1})}getReportData(a={}){return this.makeRequest("net-revenue",a,"data","revenueReport")}getReportByGroup(a={}){return this.makeRequest("net-revenue-by-group",a,"data","netRevenueByGroup")}getProductReportData(a={}){return this.makeRequest("product-report",a)}getSummary(a={}){return this.makeRequest("product-report-summary",a)}}const Zn=Rte.init(),Hte={class:"fc-report-order-summary summary-col-4"},Pte={class:"summary-item-inner"},Nte={class:"value"},Kte={class:"inner-value"},zte={class:"title"},Gte={__name:"Summary",props:{reportFilter:{type:Object}},setup(t){t.reportFilter;const a=[{title:"Units Sold",key:"units_sold",info:p("The total number of units sold in this period.")},{title:"Gross Sale",key:"gross_sale",hasCurrency:!0,info:p("The total sales you had in this period.")},{title:"Refunds",key:"total_refunds",hasCurrency:!0,liability:!0,info:p("Refunds made in this period. This is deducted from gross sales to calculate revenue.")},{title:"Revenue",key:"net_sale",hasCurrency:!0,info:p("Gross sales less refunds, taxes, shipping, fees.")}],s=J(()=>a.map(i=>({key:i.key,title:i.title,value:Zn.data.summary[i.key]||0,fluctuation:Zn.data.fluctuations[i.key]||0,info:i.info,liability:i.liability||!1,hasCurrency:i.hasCurrency||!1}))),n=J(()=>a.filter(i=>i.hasCurrency).map(i=>i.key)),o=i=>n.value.includes(i.key)?Ia(i.value,i.liability):$t(i.value);return(i,l)=>{const A=C("el-tooltip");return f(),y("div",Hte,[(f(!0),y(P,null,j(s.value,(u,h)=>(f(),y("div",{class:"summary-item",key:h},[d("div",Pte,[d("div",Nte,[d("div",Kte,[r(En,{amount:o(u),title:u.title},null,8,["amount","title"])]),r(an,{fluctuation:u.fluctuation,amount:g(Zn).data.previousSummary[u.key],"is-liability":u.liability,"has-currency":u.hasCurrency},null,8,["fluctuation","amount","is-liability","has-currency"])]),d("div",zte,[O(v(g(p)(u.title))+" ",1),r(A,{content:u.info,placement:"top","popper-class":"fc-tooltip",effect:"dark"},{default:c(()=>[r(G,{class:"text-gray-500 w-4 flex-shrink-0",name:"InformationFill"})]),_:2},1032,["content"])])])]))),128))])}}},jte={class:"fc-product-performance-chart"},Yte={class:"mb-6 flex flex-col sm:flex-row gap-6 items-start sm:items-center"},Wte={class:"flex items-center gap-3 flex-wrap"},qte={class:"selector-group"},Xte={class:"vs-pill inline-flex items-center justify-center px-2 h-6 bg-gray-100 rounded-[12px] font-xs font-medium text-uppercase dark:bg-primary-500"},Jte={class:"selector-group"},Zte={key:0,class:"comparison-mode ml-auto inline-flex items-center h-6 px-2.5 bg-gray-50 rounded-[12px] dark:bg-primary-500"},eae={class:"text-xs font-medium text-gray-500"},tae={key:1,class:"comparison-mode ml-auto inline-flex items-center h-6 px-2.5 bg-gray-50 rounded-[12px] dark:bg-primary-500"},aae={class:"text-xs font-medium text-gray-500"},sae={key:0,class:"comparison-results"},nae={class:"legend flex items-center gap-4 mb-4"},oae={class:"flex items-center"},iae={class:"text-xs text-gray-600"},rae={class:"flex items-center"},lae={class:"text-xs text-gray-600"},Aae={class:"comparison-table"},cae={class:"w-full"},dae={class:"sticky top-0 z-10 bg-gray-50 dark:bg-primary-500"},uae={class:"w-[50%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},fae={class:"w-[40%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},hae={class:"w-[10%] text-right font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},pae={class:"py-3 product-name font-medium max-w-[200px] truncate text-sm text-system-dark dark:text-gray-50"},mae={class:"py-3"},gae={class:"dual-bar-container"},_ae={class:"bar-label"},vae={class:"dual-bar-wrapper"},bae=["onMouseenter"],yae=["onMouseenter"],wae={class:"py-3 text-right"},Cae={key:0},Bae={colspan:"3",class:"py-4 text-center text-gray-500"},kae={class:"text-sm"},xae={key:1,class:"current-period-data"},Fae={class:"legend flex items-center gap-4 mb-4"},Sae={class:"flex items-center"},Eae={class:"text-xs text-gray-600"},Uae={class:"current-period-table"},Qae={class:"w-full"},Dae={class:"sticky top-0 z-10 bg-gray-50 dark:bg-primary-500"},Mae={class:"w-[50%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},Iae={class:"w-[50%] text-left font-medium text-system-dark border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400 px-2.5 py-2 text-uppercase dark:text-gray-50"},Tae={class:"py-3 product-name font-medium max-w-[200px] truncate text-sm text-system-dark dark:text-gray-50"},$ae={class:"py-3"},Oae={class:"single-bar-container"},Lae=["onMouseenter"],Vae={class:"single-bar-wrapper"},Rae=["onMouseenter"],Hae={key:0},Pae={colspan:"2",class:"py-4 text-center text-gray-500"},Nae={class:"text-sm"},Kae={key:2,class:"no-comparison-message"},zae={class:"flex flex-col items-center justify-center text-center py-8"},Gae={class:"text-gray-500 text-sm"},jae={__name:"ProductTopChart",props:{reportFilter:{type:Object,required:!0}},setup(t){R_(H=>({"6227af70":a.value?"#1C2732":"#F9FAFB","53f6d4a2":L.value,b27a89ee:V.value,"4a603ed2":N.value}));const e=t,a=T(fe.isDark());he(()=>{n(),e.reportFilter.addListener("product-top-chart",()=>{n()}),window.addEventListener("onWebmakerrProThemeChange",function(){a.value=fe.isDark()})}),T({});const s=T({}),n=()=>{const H=e.reportFilter.applicableFilters;ne.get("reports/product-performance",H).then(z=>{s.value=z.productPerformance,m(),k(!0)})},o=T(""),i=T(""),l=T(""),A=T(""),u=H=>H.sort((z,W)=>ye(z.value).diff(ye(W.value))),h=T([]),m=()=>{const H=new Set;Object.keys(s.value).forEach(z=>{const W=z.split("-")[0];H.add(W)}),h.value=Array.from(H).sort()},_=H=>{if(!H)return[];const z=[];return Object.keys(s.value).forEach(W=>{W.startsWith(H)&&z.push({value:W,label:ye(W).format("MMMM")})}),u(z)},B=J(()=>{if(!o.value||!l.value)return!1;const H=!!i.value,z=!!A.value;return!H&&!z?o.value!==l.value:H&&z?i.value!==A.value:!0}),b=J(()=>i.value?ye(i.value).format("MMM YYYY"):o.value),w=J(()=>A.value?ye(A.value).format("MMM YYYY"):l.value),k=(H=!1)=>{const z=h.value;if(z.length){if(!o.value||H){o.value=z[0];const W=_(o.value);W.length&&(i.value=W[0].value)}if(!l.value||H){l.value=z[z.length-1];const W=_(l.value);W.length&&(A.value=W[W.length-1].value)}}},F=H=>s.value[H]||[],x=H=>{const z={};Object.entries(s.value).forEach(([ie,te])=>{ie.startsWith(H)&&te.forEach(se=>{z[se.name]||(z[se.variation_id]={...se,value:0}),z[se.variation_id].value+=se.value})});const W=[];return Object.values(z).forEach(ie=>{W.push(ie)}),W},E=(H,z)=>z?F(z):(x(H),x(H)),M=J(()=>o.value?[...E(o.value,i.value)].sort((z,W)=>W.value-z.value):[]),D=J(()=>M.value.length?Math.max(...M.value.map(H=>H.value))*1.1:100),R=H=>H===0||D.value===0?0:H/D.value*100,$=J(()=>{if(!B.value)return[];const H=E(o.value,i.value),z=E(l.value,A.value),W=new Set;return H.forEach(se=>W.add(se.variation_id)),z.forEach(se=>W.add(se.variation_id)),Array.from(W).map(se=>{const pe=H.find(Qe=>Qe.variation_id===se),Se=(pe==null?void 0:pe.value)||0,$e=z.find(Qe=>Qe.variation_id===se),Ue=($e==null?void 0:$e.value)||0;let Te=0;return Se>0?Te=(Ue-Se)/Se*100:Ue>0&&(Te=100),{name:(pe==null?void 0:pe.name)||($e==null?void 0:$e.name)||"",post_title:(pe==null?void 0:pe.post_title)||($e==null?void 0:$e.post_title)||"",primaryValue:Se,comparisonValue:Ue,growthRate:parseFloat(Te.toFixed(1))}}).sort((se,pe)=>Math.abs(pe.growthRate)-Math.abs(se.growthRate))}),Q=(H,z)=>{if(H===0&&z===0)return{primaryWidth:0,comparisonWidth:0};const W=H+z,ie=H/W*100,te=z/W*100;return{primaryWidth:ie,comparisonWidth:te}},I=H=>H>0?"positive":H<0?"negative":"neutral",L=J(()=>a.value?fe.colors.report.dark_cyan_blue_16:fe.colors.report.light_gray),V=J(()=>a.value?fe.colors.report.dark_cyan_blue_36:fe.colors.report.light_gray_cyan_blue),N=J(()=>a.value?"#ffffff":fe.colors.system.mid),Y=(H,z)=>`${H} ${li("unit","units",H)} sold in ${z}`,K=T(!1),X=T(""),re=T(null);function ce(H,z){re.value=H.currentTarget,X.value=z,setTimeout(()=>{K.value=!0},150)}function Z(){K.value=!1}return(H,z)=>{const W=C("el-option"),ie=C("el-select"),te=C("el-tooltip");return f(),y("div",jte,[r(oe,null,{default:c(()=>[r(de,{title:g(p)("Product Performance Comparison"),title_size:"small",border_bottom:""},null,8,["title"]),r(ae,{class:"pt-6"},{default:c(()=>[d("div",Yte,[d("div",Wte,[d("div",qte,[r(ie,{modelValue:o.value,"onUpdate:modelValue":z[0]||(z[0]=se=>o.value=se),placeholder:g(p)("Year"),size:"small",class:"year-select","popper-class":"minimal-select"},{default:c(()=>[(f(!0),y(P,null,j(h.value,se=>(f(),U(W,{key:se,label:se,value:se},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),r(ie,{modelValue:i.value,"onUpdate:modelValue":z[1]||(z[1]=se=>i.value=se),placeholder:g(p)("Month"),size:"small",clearable:"",class:"month-select",disabled:!o.value,"popper-class":"minimal-select"},{default:c(()=>[(f(!0),y(P,null,j(_(o.value),se=>(f(),U(W,{key:se.value,label:se.label,value:se.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),d("div",Xte,v(g(p)("vs")),1),d("div",Jte,[r(ie,{modelValue:l.value,"onUpdate:modelValue":z[2]||(z[2]=se=>l.value=se),placeholder:g(p)("Year"),size:"small",class:"year-select","popper-class":"minimal-select"},{default:c(()=>[(f(!0),y(P,null,j(h.value,se=>(f(),U(W,{key:se,label:se,value:se},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),r(ie,{modelValue:A.value,"onUpdate:modelValue":z[3]||(z[3]=se=>A.value=se),placeholder:g(p)("Month"),size:"small",clearable:"",class:"month-select",disabled:!l.value,"popper-class":"minimal-select"},{default:c(()=>[(f(!0),y(P,null,j(_(l.value),se=>(f(),U(W,{key:se.value,label:se.label,value:se.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])])]),B.value?(f(),y("div",Zte,[d("span",eae,v(g(p)("Comparing %s with %s",b.value,w.value)),1)])):o.value?(f(),y("div",tae,[d("span",aae,v(g(p)("Viewing %s",b.value)),1)])):S("",!0)]),B.value?(f(),y("div",sae,[d("div",nae,[d("div",oae,[z[5]||(z[5]=d("div",{class:"w-3 h-3 primary-legend rounded-sm mr-1.5"},null,-1)),d("span",iae,v(b.value),1)]),d("div",rae,[z[6]||(z[6]=d("div",{class:"w-3 h-3 comparison-legend rounded-sm mr-1.5"},null,-1)),d("span",lae,v(w.value),1)])]),d("div",Aae,[d("table",cae,[d("thead",dae,[d("tr",null,[d("th",uae,v(g(p)("Product")),1),d("th",fae,v(g(p)("Sales")),1),d("th",hae,v(g(p)("Change")),1)])]),d("tbody",null,[(f(!0),y(P,null,j($.value,(se,pe)=>(f(),y("tr",{key:pe,class:"product-row border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400"},[d("td",pae,[O(v(se.post_title)+" ",1),z[7]||(z[7]=d("br",null,null,-1)),O(" "+v(se.name),1)]),d("td",mae,[d("div",gae,[d("span",_ae,v(se.primaryValue)+v(" vs "+se.comparisonValue)+" "+v(g(p)("Units")),1),d("div",vae,[d("div",{class:"dual-bar-segment primary-segment",style:Ta({width:`${Q(se.primaryValue,se.comparisonValue).primaryWidth}%`}),onMouseenter:Se=>ce(Se,Y(se.primaryValue,b.value)),onMouseleave:Z},null,44,bae),d("div",{class:"dual-bar-segment comparison-segment",style:Ta({width:`${Q(se.primaryValue,se.comparisonValue).comparisonWidth}%`}),onMouseenter:Se=>ce(Se,Y(se.comparisonValue,w.value)),onMouseleave:Z},null,44,yae)])])]),d("td",wae,[d("div",{class:le(["growth-pill",I(se.growthRate)])},v(se.growthRate>0?"+":"")+v(se.growthRate)+"% ",3)])]))),128)),$.value.length===0?(f(),y("tr",Cae,[d("td",Bae,[d("span",kae,v(g(p)("No comparison data available")),1)])])):S("",!0)])])])])):o.value&&M.value.length>0?(f(),y("div",xae,[d("div",Fae,[d("div",Sae,[z[8]||(z[8]=d("div",{class:"w-3 h-3 primary-legend rounded-sm mr-1.5"},null,-1)),d("span",Eae,v(b.value),1)])]),d("div",Uae,[d("table",Qae,[d("thead",Dae,[d("tr",null,[d("th",Mae,v(g(p)("Product")),1),d("th",Iae,v(g(p)("Sales")),1)])]),d("tbody",null,[(f(!0),y(P,null,j(M.value,(se,pe)=>(f(),y("tr",{key:pe,class:"product-row border-0 border-b-[1px] border-solid border-gray-divider dark:border-dark-400"},[d("td",Tae,[O(v(se.post_title)+" ",1),z[9]||(z[9]=d("br",null,null,-1)),O(" "+v(se.name),1)]),d("td",$ae,[d("div",Oae,[d("span",{class:"bar-label",onMouseenter:Se=>ce(Se,Y(se.value,w.value)),onMouseleave:Z},v(se.value)+" "+v(g(li)("Unit","Units",se.value)),41,Lae),d("div",Vae,[d("div",{class:"single-bar-segment",style:Ta({width:`${R(se.value)}%`}),onMouseenter:Se=>ce(Se,Y(se.value,w.value)),onMouseleave:Z},null,44,Rae)])])])]))),128)),M.value.length===0?(f(),y("tr",Hae,[d("td",Pae,[d("span",Nae,v(g(p)("No data available for this period")),1)])])):S("",!0)])])])])):(f(),y("div",Kae,[d("div",zae,[z[10]||(z[10]=d("svg",{class:"w-10 h-10 text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),d("p",Gae,v(g(p)("Please select a time period to view sales data")),1)])])),r(te,{ref:"sharedTooltip","popper-class":"fc-tooltip",visible:K.value,"onUpdate:visible":z[4]||(z[4]=se=>K.value=se),content:X.value,"virtual-ref":re.value,"virtual-triggering":"",placement:"top"},null,8,["visible","content","virtual-ref"])]),_:1})]),_:1})])}}},Yae=ve(jae,[["__scopeId","data-v-02be076d"]]),Wae={class:"fc-revenue-report-page"},qae={class:"page-heading-wrap flex items-center justify-between"},Xae={class:"page-title"},Jae={__name:"ProductReport",props:{reportFilter:{type:Object,required:!0}},setup(t){const e=t,a=l=>{Zn.getProductReportData({params:{...l.params,groupKey:i.value}})},s=l=>{i.value!==l&&(i.value=l,a(o))},n=e.reportFilter,o=n.applicableFilters,i=T("default");return he(()=>{n.addListener("product-report",a),a(o)}),He(()=>{n.removeListener("product-report",!1)}),(l,A)=>(f(),U(tt,{permission:"reports/view"},{default:c(()=>[d("div",Wae,[d("div",qae,[d("h1",Xae,v(l.$t("Products")),1)]),r(Gte,{reportFilter:g(n)},null,8,["reportFilter"]),r(Vte,{chartData:g(Zn).data.currentMetrics,compareData:g(Zn).data.previousMetrics,appliedGroupKey:i.value,reportFilter:e.reportFilter,onFilterData:s},null,8,["chartData","compareData","appliedGroupKey","reportFilter"]),r(Yae,{reportFilter:g(n)},null,8,["reportFilter"])])]),_:1}))}},Zae={class:"fc-overview-chart-wrap"},ese={key:0,class:"error-message",style:{color:"red",padding:"10px"}},tse={__name:"OverviewChart",props:{data:{type:Object,required:!0},dataKey:{type:String,required:!0},labelSet:{type:String,default:"monthly"},dateRange:{type:Boolean,default:!1},barMaxWidth:{type:Number,default:30},isEmpty:{type:Boolean,default:!1}},setup(t){const e=t,a=T(null),s=T(null),n=T("bar"),o=T(null),i=fe.colors,l=T(fe.isDark()),A=J(()=>l.value?i.blue[500]+"52":i.blue[300]),u={current:p("Current"),prev:p("Previous"),yoy_growth:p("YoY Growth")},h=J(()=>{try{return Object.keys(e.data).map(x=>({label:x,value:e.data[x][e.dataKey]||0}))}catch(F){return o.value=`Error processing data: ${F.message}`,[]}}),m=J(()=>h.value.length?e.dateRange?h.value.map(F=>{try{const[x,E]=F.label.split("-");return new Date(x,E-1).toLocaleString("default",{month:"short",year:"numeric"})}catch{return F.label}}):h.value.map(F=>F.label):[]),_=J(()=>h.value.length?[{title:u[e.dataKey]||e.dataKey,data:h.value.map(x=>x.value),color:A.value,yAxisIndex:0}].map(({title:x,data:E,color:M,yAxisIndex:D})=>k(x,n.value,E,M,D)):[]);let B=null;const b=()=>{if(a.value&&B===null)try{B=At(a.value),w()}catch(F){o.value=`Error initializing chart: ${F.message}`}},w=()=>{if(!B)return;if(o.value){console.error(o.value);return}l.value=fe.isDark();const F={title:{text:"",left:"center"},legend:{show:!1,top:"5%",icon:"circle",itemWidth:8,itemHeight:8,itemGap:30,textStyle:{color:l.value?"#ffffff":"#696778"}},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?i.report.dark_cyan_blue_16:i.report.light_gray_cyan_blue}},formatter:x=>{let E=x[0].name;const M=l.value?"#ffffff":"#565865";return x.forEach(D=>{const R=Fe.formatScaled(D.value);E+=`<div>
          </div>`}),E}},xAxis:{type:"category",data:m.value,axisLabel:{color:l.value?"#ffffff":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",position:"left",axisLabel:{color:l.value?"#ffffff":"#696778",fontSize:12,formatter:x=>`${Fe.formatScaled(x)}`},splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}}],series:_.value};try{B.setOption(F,{notMerge:!0,replaceMerge:["series"]})}catch(x){o.value=`Error updating chart: ${x.message}`,console.error(o.value)}},k=(F,x,E,M,D)=>({name:F,type:x,barMaxWidth:e.barMaxWidth,areaStyle:x==="line"?{}:void 0,data:E,smooth:!0,color:M,lineStyle:{width:2},yAxisIndex:D,emphasis:{itemStyle:{color:l.value?i.blue[800]:i.blue[400]}}});return ke([()=>e.data,()=>e.dataKey,()=>e.labelSet,n],()=>{me(w)},{deep:!0}),He(()=>{window.removeEventListener("onWebmakerrProThemeChange",w,!1),B&&(B.dispose(),B=null)}),he(()=>{window.addEventListener("onWebmakerrProThemeChange",w),me(b)}),(F,x)=>(f(),y("div",Zae,[r(oe,{id:"chartContainer",ref_key:"cardRef",ref:s},{default:c(()=>[r(ae,{class:"p-0"},{default:c(()=>[o.value?(f(),y("div",ese,v(o.value),1)):S("",!0),t.isEmpty?(f(),U(Tt,{key:2,icon:"Empty/ListView","has-dark":!0,text:g(p)("Currently there is no data!"),class:"fc-report-empty-state"},null,8,["text"])):(f(),y("div",{key:1,class:"fc-chart-wrap fc-overview-chart",ref_key:"chartRef",ref:a,style:{height:"400px"}},null,512))]),_:1})]),_:1},512)]))}},mr=ve(tse,[["__scopeId","data-v-6d058f7b"]]),ase={class:"fc-gross-volume-chart-wrap"},sse={key:0,class:"error-message",style:{color:"red",padding:"10px"}},nse={__name:"GrossVolumeChart",props:{data:{type:Object,required:!0},title:{type:String,default:""},currentKey:{type:String,default:"current"},prevKey:{type:String,default:"prev"},labelKey:{type:String,default:"yoy_growth"},isDate:{type:Boolean,default:!1},barMaxWidth:{type:Number,default:30}},setup(t){const e=t,a=T(null),s=T(null),n=T("bar"),o=T(null),i=fe.colors,l=T(fe.isDark()),A={current:p("Current"),prev:p("Previous"),prev_year:p("Previous"),yoy_growth:p("YoY Growth")},u=J(()=>{if(!e.data||typeof e.data!="object")return o.value="Invalid or missing data prop",[];try{return Object.keys(e.data).map(x=>{const E=e.data[x];return{label:x,current:E[e.currentKey]?parseInt(E[e.currentKey]):0,prev:E[e.prevKey]?parseInt(E[e.prevKey]):0,growth:E[e.labelKey]?parseFloat(E[e.labelKey]):0}})}catch(F){return o.value=`Error processing data: ${F.message}`,[]}}),h=J(()=>u.value.length?u.value.map(F=>{if(e.isDate)try{const[x,E]=F.label.split("-");return new Date(x,E-1).toLocaleString("default",{month:"short",year:"numeric"})}catch{return F.label}else return F.label}):[]),m=J(()=>u.value.length?[{title:A[e.currentKey]||e.currentKey,dataKey:"current",type:"line",color:l.value?i.report.blue_dark_mode:i.report.blue},{title:A[e.prevKey]||e.prevKey,dataKey:"prev",type:"bar",color:l.value?i.blue[500]+"52":i.blue[300]}].map(({title:F,dataKey:x,type:E,color:M})=>k(F,E,u.value.map(D=>D[x]),M)):[]),_=J(()=>u.value.length?u.value.map(x=>x.growth):[]);let B=null;const b=()=>{if(a.value&&B===null)try{B=At(a.value),w()}catch(F){o.value=`Error initializing chart: ${F.message}`}},w=()=>{if(!B)return;if(o.value){console.error(o.value);return}l.value=fe.isDark();const F={legend:{show:!1,top:"5%",icon:"circle",itemWidth:8,itemHeight:8,itemGap:30,textStyle:{color:l.value?"#ffffff":"#696778"}},tooltip:{trigger:"axis",backgroundColor:l.value?"#253241":"#ffffff",borderColor:l.value?"#2C3C4E":"#c0c4ca",borderWidth:1,textStyle:{color:l.value?"#ffffff":"#565865"},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:l.value?i.report.dark_cyan_blue_16:i.report.light_gray_cyan_blue}},formatter:x=>{let E=x[0].name;const M=l.value?"#ffffff":"#565865",D=_.value[x[0].dataIndex];x.push({marker:'<span style="display:inline-block; width:10px; height:10px; border-radius:50%; background-color:#FFA500; margin-right:5px;"></span>',seriesName:p("YoY Growth"),value:isNaN(D)?"N/A":D.toFixed(2)+"%"});const R=l.value?i.report.dark_cyan_blue_16:i.report.light_gray_blue;return x.forEach(function($,Q){const I=Q===x.length-1,L=I?$.value:Fe.formatScaled($.value);I?E+=`<div style="border-top: 1px solid ${R}; margin-top: 5px; padding-top: 5px;">`:E+="<div>",E+=`
          </div>`}),E}},xAxis:{type:"category",data:h.value,axisLabel:{color:l.value?"#ffffff":"#696778",fontSize:12},axisLine:{lineStyle:{type:"dashed",color:l.value?"#253241":"#D6DAE1"}}},yAxis:[{type:"value",position:"left",name:p("Volume (%s)",Fe.currencySign),axisLabel:{color:l.value?"#ffffff":"#696778",fontSize:12,formatter:x=>Fe.formatScaled(x)},splitLine:{show:!0,lineStyle:{color:l.value?"#253241":"#D6DAE1",type:"dashed"}}},{type:"value",position:"right",name:"YoY Growth (%)",axisLabel:{color:l.value?"#ffffff":"#696778",fontSize:12,formatter:"{value}%"},splitLine:{show:!1},min:Math.min(..._.value.filter(x=>!isNaN(x)),0)-5,max:Math.max(..._.value.filter(x=>!isNaN(x)),0)+5}],series:m.value};try{B.setOption(F,{notMerge:!0,replaceMerge:["series"]})}catch(x){o.value=`Error updating chart: ${x.message}`,console.error(o.value)}},k=(F,x,E,M,D=0)=>({name:F,type:x,barMaxWidth:e.barMaxWidth,areaStyle:x==="line"?null:void 0,data:E,smooth:x==="line",color:M,lineStyle:x==="line"?{width:2}:void 0,yAxisIndex:D,emphasis:{scale:2,itemStyle:{color:l.value?i.blue[800]:i.blue[400]}}});return ke([()=>e.data,n],()=>{me(w)},{deep:!0}),He(()=>{window.removeEventListener("onWebmakerrProThemeChange",w,!1),B&&(B.dispose(),B=null)}),he(()=>{window.addEventListener("onWebmakerrProThemeChange",w),me(b)}),(F,x)=>(f(),y("div",ase,[r(oe,{id:"chartContainer",ref_key:"cardRef",ref:s},{default:c(()=>[r(de,{title:g(p)(t.title),title_size:"small",border_bottom:""},{action:c(()=>x[0]||(x[0]=[])),_:1},8,["title"]),r(ae,{class:"p-0"},{default:c(()=>[o.value?(f(),y("div",sse,v(o.value),1)):S("",!0),d("div",{class:"fc-chart-wrap fc-gross-volume-chart",ref_key:"chartRef",ref:a,style:{height:"400px"}},null,512)]),_:1})]),_:1},512)]))}},Hh=ve(nse,[["__scopeId","data-v-bdb46773"]]),ose={class:"fc-country-volume-chart-wrap"},ise={class:"fc-btn-group sm"},rse={__name:"CountryVolumeChart",props:{data:{type:Object,required:!0},title:{type:String,default:""}},setup(t){const e=t,a=T(null),s=T(null);let n=null;const o=T("bar");T("");const i=T(fe.isDark()),l=J(()=>[i.value?"#032647":"#3e9df6",i.value?"#04315b":"#1589f4",i.value?"#053c70":"#0a73d5",i.value?"#064784":"#0968c1",i.value?"#075298":"#085dad"]),A=fe.colors,u=J(()=>{const b=e.data.by_month||{};return Object.keys(b).sort().map(k=>{const F=b[k],x=Object.values(F).reduce((M,D)=>M+D,0),E=Object.entries(F).sort((M,D)=>M[1]-D[1]).reduce((M,[D,R])=>({...M,[D]:R}),{});return{label:k,countries:E,total:x}})}),h=J(()=>u.value.length?u.value.map(b=>{try{const[w,k]=b.label.split("-");return ye(new Date(w,k-1)).format("MMM YYYY")}catch{return b.label}}):[]),m=J(()=>{const b=e.data.by_month||{},w=Object.keys(b).sort(),k=new Set;return Object.values(b).forEach(F=>{Object.keys(F).forEach(x=>k.add(x))}),Array.from(k).reverse().map(F=>{let x;const E=u.value.map((M,D)=>{const R=b[w[D]],Q=Object.entries(R).sort((V,N)=>N[1]-V[1]).map(([V])=>V).indexOf(F),I=M.countries[F]||0,L=Q<5?Q:4;return!x&&L>=0&&(x=l.value[L]||l.value[4]),{value:I/100,label:{show:I>0,position:"inside",formatter:F,color:(i.value,"#fff"),fontSize:10,fontWeight:"bold"}}});return{name:F,type:o.value,stack:"total",data:E,itemStyle:{color:x},lineStyle:{color:x}}})}),_=()=>{if(!a.value)return;n=At(a.value);const b={backgroundColor:"transparent",tooltip:{trigger:"axis",backgroundColor:i.value?"#253241":"#ffffff",textStyle:{color:i.value?A.gray[25]:A.system.mid},borderColor:i.value?"#2C3C4E":"#c0c4ca",axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:i.value?A.report.dark_cyan_blue_16:A.report.light_gray_cyan_blue}},borderWidth:1,formatter:w=>{let k=w[0].axisValue;const F=i.value?"#ffffff":"#565865",x=u.value[w[0].dataIndex].total;w=w.sort((M,D)=>D.value-M.value).filter(M=>M.value>0),w.push({marker:'<span style="display:inline-block; width:10px; height:10px; border-radius:50%; background-color:#FFA500; margin-right:5px;"></span>',seriesName:p("Total"),value:x/100});const E=i.value?A.report.dark_cyan_blue_16:A.report.light_gray_blue;return w.forEach(function(M,D){const R=D===w.length-1;if(!R&&M.value===0)return;const $=Fe.scaled(M.value);R?k+=`<div style="border-top: 1px solid ${E}; margin-top: 5px; padding-top: 5px;">`:k+="<div>",k+=`
          </div>`}),k}},xAxis:{type:"category",data:h.value,axisLabel:{color:i.value?"#ffffff":"#696778",fontSize:12},axisLine:{lineStyle:{color:i.value?"#253241":"#D6DAE1"}}},yAxis:{type:"value",position:"left",name:p("Volume (%s)",Fe.currencySign),axisLabel:{color:i.value?"#ffffff":"#696778",fontSize:12,formatter:w=>Fe.formatScaled(w*100)},splitLine:{show:!0,lineStyle:{color:i.value?"#253241":"#D6DAE1",type:"dashed"}}},series:m.value};n.setOption(b)},B=()=>{i.value=fe.isDark(),me(()=>{_()})};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",B),me(_)}),ke(()=>i.value,()=>{n&&(n.dispose(),_())}),ke(()=>e.data,()=>{n&&_()}),(b,w)=>(f(),y("div",ose,[r(oe,{id:"chartContainer",ref_key:"cardRef",ref:s},{default:c(()=>[r(de,{title:t.title,title_size:"small",border_bottom:""},{action:c(()=>[d("div",ise,[r(wv,{targetRef:a.value},null,8,["targetRef"])])]),_:1},8,["title"]),r(ae,{class:"p-0"},{default:c(()=>[d("div",{class:"fc-chart-wrap fc-country-volume-chart",ref_key:"chartRef",ref:a,style:{height:"400px"}},null,512)]),_:1})]),_:1},512)]))}},Ph=ve(rse,[["__scopeId","data-v-9b3fa0d5"]]),lse={class:"fc-card-header-title is-small"},Nh={__name:"CountryNetChart",props:{data:{type:Object,required:!0},title:{type:String,default:""}},setup(t){const e=t,a=fe.colors.report,s=T(fe.isDark()),n=T(null),o=T("line"),i=T(e.data),l=J(()=>({textColor:s.value?"#ffffff":"#696778",borderColor:s.value?"#2C3C4E":"#c0c4ca",splitLineColor:s.value?"#253241":"#D6DAE1",bgColor:s.value?"#2d3748":"#ffffff"})),A=J(()=>Object.keys(i.value)),u=J(()=>[{name:p("Current"),type:o.value,data:Object.values(i.value),smooth:!0,color:s.value?a.purple_dark_mode:a.purple,lineStyle:{width:2},barMaxWidth:30}]);let h=null;const m=()=>{n.value&&!h&&(h=At(n.value),_())},_=()=>{const b={legend:{show:!1},tooltip:{trigger:"axis",backgroundColor:l.value.bgColor,borderColor:l.value.borderColor,borderWidth:1,textStyle:{color:l.value.textColor},axisPointer:{type:"line",lineStyle:{type:"solid",width:2,color:s.value?a.dark_cyan_blue_16:a.light_gray_blue}},formatter:w=>{let k=w[0].name;const F=s.value?"#ffffff":"#565865";return w.forEach(x=>{const E=Fe.formatScaled(x.value);k+=`<div>
          </div>`}),k}},xAxis:{type:"category",data:A.value,axisLabel:{color:l.value.textColor,fontSize:12},axisLine:{lineStyle:{type:"dashed",color:l.value.splitLineColor}}},yAxis:{type:"value",axisLabel:{color:l.value.textColor,fontSize:12,formatter:w=>Fe.formatScaled(w)},splitLine:{show:!0,lineStyle:{color:l.value.splitLineColor,type:"dashed"}}},series:u.value};h.setOption(b,{notMerge:!0,replaceMerge:["series"]})};ke([()=>i.value,o,()=>s.value],()=>{me(_)},{deep:!0});const B=()=>{s.value=fe.isDark(),me(()=>{_()})};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",B,!1),me(m)}),(b,w)=>(f(),U(oe,null,{default:c(()=>[t.title!==""?(f(),U(de,{key:0,border_bottom:!0},{title:c(()=>[d("h3",lse,v(t.title),1)]),_:1})):S("",!0),r(ae,null,{default:c(()=>[d("div",{class:"fc-chart-wrap h-[350px]",ref_key:"SubscriptionCountTrendChartRef",ref:n},null,512)]),_:1})]),_:1}))}},Ase={class:"fc-overview-report-loader-wrap"},cse={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},dse={class:"fc-card-header-title is-small"},use={class:"flex gap-2 mt-1"},fse={class:"py-6"},hse={class:"grid grid-cols-1"},pse={class:"fc-card-header-title is-small"},mse={class:"py-6"},gse={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},_se={class:"fc-card-header-title is-small"},vse={class:"flex gap-2 mt-1"},bse={class:"py-6"},yse={class:"grid grid-cols-1"},wse={class:"fc-card-header-title is-small"},Cse={class:"py-6"},Bse={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},kse={class:"fc-card-header-title is-small"},xse={class:"py-6"},Fse={__name:"OverviewLoading",setup(t){const e=[{title:p("Gross Summary"),key:"gross_summary"},{title:p("Gross Revenue Quarterly"),key:"net_summary"}],a=[{title:p("Net Revenue"),key:"net_revenue"},{title:p("Net Revenue Quarterly"),key:"net_revenue_quarterly"}],s=[{title:p("Top Country Gross Volume"),key:"top_country_gross"},{title:p("Top Country Net Volume"),key:"top_country_net"}],n=[{title:p("Top Countries Gross Revenue"),key:"top_country_revenue"},{title:p("Top Countries Net Revenue"),key:"top_country_net_revenue"}];return(o,i)=>{const l=C("el-skeleton-item"),A=C("el-skeleton");return f(),y("div",Ase,[d("div",cse,[(f(),y(P,null,j(e,(u,h)=>d("div",{key:h},[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[r(de,{border_bottom:!0},{title:c(()=>[d("h3",dse,v(u.title),1),d("div",use,[r(A,{animated:""},{template:c(()=>[r(l,{variant:"p",class:"w-[100px]"})]),_:1})])]),_:2},1024),d("div",fse,[r(A,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))]),d("div",hse,[(f(),y(P,null,j(2,u=>d("div",{key:u},[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[r(A,{animated:""},{template:c(()=>[r(l,{variant:"p",class:"w-2/3"})]),_:1}),r(de,{border_bottom:!0},{title:c(()=>[d("h2",pse,v(g(p)("Gross Volume Breakdown")),1)]),_:1}),d("div",mse,[r(A,{animated:"",rows:7})])]),_:1})]),_:1})])),64))]),d("div",gse,[(f(),y(P,null,j(a,(u,h)=>d("div",{key:h},[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[r(de,{border_bottom:!0},{title:c(()=>[d("h3",_se,v(u.title),1),d("div",vse,[r(A,{animated:""},{template:c(()=>[r(l,{variant:"p",class:"w-[100px]"})]),_:1})])]),_:2},1024),d("div",bse,[r(A,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))]),d("div",yse,[(f(),y(P,null,j(s,(u,h)=>d("div",{key:h},[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[r(de,{border_bottom:!0},{title:c(()=>[d("h2",wse,v(u.title),1)]),_:2},1024),d("div",Cse,[r(A,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))]),d("div",Bse,[(f(),y(P,null,j(n,(u,h)=>d("div",{key:h},[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[r(de,{border_bottom:!0},{title:c(()=>[d("h3",kse,v(u.title),1)]),_:2},1024),d("div",xse,[r(A,{animated:"",rows:7})])]),_:2},1024)]),_:2},1024)])),64))])])}}},Sse={class:"overview-summary-report-inline"},Ese={class:"inner-value"},Use={__name:"Summary",props:{title:{type:String,required:!0},current:{type:[String,Number],required:!0},previous:{type:[String,Number],required:!0},fluctuation:{type:[String,Number],required:!0}},setup(t){return(e,a)=>(f(),y("div",Sse,[d("div",Ese,[r(En,{amount:g(Fe).formatScaled(t.current),title:g(p)(t.title)},null,8,["amount","title"])]),r(an,{fluctuation:t.fluctuation,amount:t.previous/100,fluctuationSuffix:g(p)("YoY")},null,8,["fluctuation","amount","fluctuationSuffix"])]))}},gr=ve(Use,[["__scopeId","data-v-291e1d1c"]]),Qse={class:"report-overview-page"},Dse={class:"page-heading-wrap flex items-center justify-between"},Mse={class:"page-title"},Ise={class:"flex items-center justify-start gap-1 mb-2 text-xs text-system-mid dark:text-system-light"},Tse={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},$se={class:"fc-card-header-title is-small"},Ose={class:"fc-card-header-title is-small"},Lse={class:"grid grid-cols-1"},Vse=["innerHTML"],Rse=["innerHTML"],Hse={class:"report-overview-col-2 grid gap-x-7.5 grid-cols-2"},Pse={class:"fc-card-header-title is-small"},Nse={class:"fc-card-header-title is-small"},Kse={class:"grid gap-4 grid-cols-1"},zse={class:"grid gap-4 grid-cols-1"},Gse={class:"report-overview-col-2 grid gap-7.5 grid-cols-2"},jse={__name:"Overview",setup(t){const e=T({}),a=T(!0),s=T({gross_revenue_quarterly:{},net_revenue_quarterly:{}}),n=()=>{ne.get("reports/overview").then(l=>{e.value=l.data,o()}).catch(l=>{console.error(l,"error")}).finally(()=>{a.value=!1})},o=()=>{s.value.gross_revenue_quarterly=i(e.value.gross_revenue_quarterly,"current","prev_year"),s.value.net_revenue_quarterly=i(e.value.net_revenue_quarterly,"current","prev_year")},i=(l,A="current",u="prev")=>{const h=be.sum(l,"*."+A),m=be.sum(l,"*."+u),_=m===0?100:(h-m)/m*100;return m===0?{value:parseFloat(_.toFixed(2)),prev:m,current:h===0?0:100}:{value:parseFloat(_.toFixed(2)),prev:m,current:h}};return J(()=>{var l,A;return((l=e.value.gross_summary)==null?void 0:l.yoy_growth)<0?"danger":((A=e.value.gross_summary)==null?void 0:A.yoy_growth)===null?"warning":"success"}),he(()=>{n()}),(l,A)=>(f(),y("div",Qse,[d("div",Dse,[d("h1",Mse,v(g(p)("Overview")),1)]),d("div",Ise,[r(G,{name:"InformationFill",class:"w-4 h-4 text-system-light"}),O(" "+v(g(p)("Last 12 Months")),1)]),a.value?(f(),U(Fse,{key:0})):(f(),y(P,{key:1},[d("div",Tse,[d("div",null,[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[r(de,{border_bottom:!0},{title:c(()=>[d("h3",$se,v(g(p)("Gross Summary")),1),r(gr,{title:"Gross Summary",current:e.value.gross_summary.total,previous:e.value.gross_summary.total_prev,fluctuation:e.value.gross_summary.yoy_growth},null,8,["current","previous","fluctuation"])]),_:1}),r(mr,{data:e.value.gross_revenue,dataKey:"current","date-range":"","is-empty":!e.value.gross_summary.total},null,8,["data","is-empty"])]),_:1})]),_:1})]),d("div",null,[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[r(de,{border_bottom:!0},{title:c(()=>[d("h3",Ose,v(g(p)("Gross Revenue Quarterly")),1),r(gr,{title:"Gross Revenue Quarterly",current:s.value.gross_revenue_quarterly.current,previous:s.value.gross_revenue_quarterly.prev,fluctuation:s.value.gross_revenue_quarterly.value},null,8,["current","previous","fluctuation"])]),_:1}),r(mr,{data:e.value.gross_revenue_quarterly,dataKey:"current","bar-max-width":80,"is-empty":!s.value.gross_revenue_quarterly.current},null,8,["data","is-empty"])]),_:1})]),_:1})])]),d("div",Lse,[d("div",null,[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[d("div",{class:"mb-3",innerHTML:g(Fe).generateVolumeSummary(e.value.gross_revenue,!0)},null,8,Vse),r(Hh,{title:"Gross Volume Breakdown",data:e.value.gross_revenue,dataKey:"current","is-date":""},null,8,["data"])]),_:1})]),_:1})]),d("div",null,[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[d("div",{class:"mb-3",innerHTML:g(Fe).generateVolumeSummary(e.value.gross_revenue_quarterly)},null,8,Rse),r(Hh,{title:g(p)("Gross Revenue Breakdown"),data:e.value.gross_revenue_quarterly,dataKey:"current",prevKey:"prev_year",labelKey:"yy_growth","bar-max-width":80},null,8,["title","data"])]),_:1})]),_:1})])]),d("div",Hse,[d("div",null,[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[r(de,{border_bottom:!0},{title:c(()=>[d("h3",Pse,v(g(p)("Net Revenue")),1),r(gr,{title:"Net Revenue",current:e.value.net_summary.total,previous:e.value.net_summary.total_prev,fluctuation:e.value.net_summary.yoy_growth},null,8,["current","previous","fluctuation"])]),_:1}),r(mr,{data:e.value.net_revenue,dataKey:"current","date-range":""},null,8,["data"])]),_:1})]),_:1})]),d("div",null,[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[r(de,{border_bottom:!0},{title:c(()=>[d("h3",Nse,v(g(p)("Net Revenue Quarterly")),1),r(gr,{title:"Net Revenue Quarterly",current:s.value.net_revenue_quarterly.current,previous:s.value.net_revenue_quarterly.prev,fluctuation:s.value.net_revenue_quarterly.value},null,8,["current","previous","fluctuation"])]),_:1}),r(mr,{data:e.value.net_revenue_quarterly,dataKey:"current","bar-max-width":80},null,8,["data"])]),_:1})]),_:1})])]),d("div",Kse,[d("div",null,[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[r(Ph,{data:e.value.top_country_gross,title:g(p)("Top Country Gross Volume")},null,8,["data","title"])]),_:1})]),_:1})])]),d("div",zse,[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>[r(Ph,{data:e.value.top_country_net,title:g(p)("Top Country Net Volume")},null,8,["data","title"])]),_:1})]),_:1})]),d("div",Gse,[r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>{var u;return[r(Nh,{data:(u=e.value.top_country_gross)==null?void 0:u.by_countries,title:g(p)("Top Countries Gross Revenue")},null,8,["data","title"])]}),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(ae,null,{default:c(()=>{var u;return[r(Nh,{data:(u=e.value.top_country_net)==null?void 0:u.by_countries,title:g(p)("Top Countries Net Revenue")},null,8,["data","title"])]}),_:1})]),_:1})])],64))]))}},Yse={class:"setting-wrap"},Wse={key:0,class:"bg-white rounded p-6 dark:bg-dark-700"},qse={class:"grid gap-3 mb-6"},Xse={class:"grid gap-3 mb-6"},Jse={class:"grid gap-3 mb-6"},Zse={class:"grid gap-3"},ene=Object.assign({name:"StoreSettings"},{__name:"AddonSettings",setup(t){const e=Ng(),{form:a}=e.data,s=xn(),n=We().ctx,o=T([]),i=T([]),l=T(!0),A=T(!1),u=T(!0),h=T({}),m=T(!1),_=()=>{A.value=!0;let b=a.values;n.$post("settings/modules",{...b}).then(w=>{n.handleSuccess(p("Settings saved successfully")),setTimeout(()=>{window.location.reload()},300)}).catch(w=>{if(w&&w.message)return n.handleError(w);h.value=w}).finally(()=>{A.value=!1,u.value=!1,l.value=!1})},B=()=>{l.value=!0,n.$get("settings/modules",{}).then(b=>{var F,x;a.setSchema(b.fields).setDefaults(b.settings).initForm(),o.value=b.settings,i.value=b.fields,u.value=!1,A.value=!1;const w=((x=(F=b.fields)==null?void 0:F.modules_settings)==null?void 0:x.schema)||[];let k=!1;Array.isArray(w)?k=w.length>0:k=Object.keys(w).length>0,m.value=k}).finally(()=>{l.value=!1})};return he(()=>{B()}),s.onSave(_),(b,w)=>{const k=C("el-skeleton-item"),F=C("el-skeleton"),x=C("el-form");return f(),y("div",Yse,[u.value?(f(),y("div",Wse,[r(F,{loading:u.value,animated:""},{template:c(()=>[d("div",qse,[r(k,{variant:"p",class:"w-[20%]"}),r(k,{variant:"p"})]),d("div",Xse,[r(k,{variant:"p",class:"w-[20%]"}),r(k,{variant:"p"})]),d("div",Jse,[r(k,{variant:"p",class:"w-[20%]"}),r(k,{variant:"p"})]),d("div",Zse,[r(k,{variant:"p",class:"w-[20%]"}),r(k,{variant:"p"})])]),_:1},8,["loading"])])):S("",!0),u.value?S("",!0):(f(),y(P,{key:1},[g(a).isReady?(f(),U(x,{key:0},{default:c(()=>[m.value?(f(),U(Pl,{key:0,form:g(a),showSubmitButton:!0,onOnSubmitButtonClick:_,submitButtonText:g(p)("Save Settings"),loading:A.value,onOnChange:w[0]||(w[0]=E=>{}),"validation-errors":h.value},null,8,["form","submitButtonText","loading","validation-errors"])):(f(),U(oe,{key:1},{default:c(()=>[r(de,{title:g(p)("Features & addon"),border_bottom:""},null,8,["title"]),r(ae,null,{default:c(()=>[r(Tt,{class:"fc-addon-empty-state",icon:"Empty/Integrations",text:g(p)("No module settings found.")},null,8,["text"])]),_:1})]),_:1}))]),_:1})):S("",!0)],64))])}}}),tne={class:"form-note"},ane={class:"form-note"},sne={class:"form-note"},nne={class:"form-note"},one={class:"el-form-item__label"},ine={class:"h-[297px] w-full relative"},rne={class:"mt-2 mb-2"},lne={class:"form-note"},Ane={class:"fc-powered-by-email-footer-checkbox mb-4 pb-4 border-[1px] border-l-0 border-t-0 border-r-0 border-solid border-gray-outline dark:border-dark-400"},cne={class:"setting-html-wrapper"},dne={class:"setting-label"},une={class:"form-note"},fne={class:"setting-fields-inner w-full"},hne={__name:"MailingSettingsLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton"),o=C("el-form-item"),i=C("el-col"),l=C("el-row");return f(),U(ae,null,{default:c(()=>[r(l,{gutter:15},{default:c(()=>[r(i,{lg:12},{default:c(()=>[r(o,{label:g(p)("From Name"),"label-position":"top"},{default:c(()=>[r(n,{animated:"",class:"h-9 gap-2"},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"})]),_:1}),a[0]||(a[0]=d("br",null,null,-1)),d("div",null,[d("div",tne,[d("p",null,v(g(p)("Name that will be used to send emails")),1)])])]),_:1,__:[0]},8,["label"])]),_:1}),r(i,{lg:12},{default:c(()=>[r(o,{label:g(p)("From Email"),"label-position":"top"},{default:c(()=>[r(n,{animated:"",class:"h-9"},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"})]),_:1}),d("div",null,[d("div",ane,[d("p",null,v(g(p)(`Provide Valid Email Address email as per your domain/SMTP settings. This
receive it.`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),r(l,{gutter:15},{default:c(()=>[r(i,null,{default:c(()=>[d("div",one,v(g(p)("Email Footer")),1),d("div",ine,[r(n,{animated:"",rows:7})]),d("div",rne,[d("div",lne,[d("p",null,v(g(p)(`This email footer will be used for all emails sent from WebmakerrPro, It's highly recommended to use your business name and address in the footer for
compliance.`)),1)])]),d("div",Ane,[r(n,{animated:"",class:"h-5"},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"})]),_:1})])]),_:1})]),_:1}),r(l,{gutter:15},{default:c(()=>[r(i,null,{default:c(()=>[r(o,null,{default:c(()=>[r(l,{gutter:15,class:"w-full"},{default:c(()=>[r(i,{lg:12},{default:c(()=>[d("div",cne,[d("span",dne,v(g(p)("Admin Email Address")),1),d("div",une,[d("p",null,v(g(p)("WebmakerrPro will send admin notification to this email address.")),1)])])]),_:1}),r(i,{lg:12},{default:c(()=>[d("div",fne,[r(n,{animated:"",class:"h-9"},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},pne={class:"setting-wrap"},mne={class:"form-note"},gne={class:"form-note"},_ne={class:"form-note"},vne={class:"form-note"},bne={class:"el-form-item__label"},yne={class:"mt-2 mb-2"},wne={class:"form-note"},Cne={class:"fc-powered-by-email-footer-checkbox mb-4 pb-4 border-[1px] border-l-0 border-t-0 border-r-0 border-solid border-gray-outline dark:border-dark-400"},Bne={class:"setting-html-wrapper"},kne={class:"setting-label"},xne={class:"form-note"},Fne={class:"setting-fields-inner w-full"},Sne={class:"setting-save-action"},Ene={__name:"MailingSettings",setup(t){var A,u;const e=T({from_name:"",from_email:"",reply_to_name:"",reply_to_email:"",email_footer:"",show_email_footer:"yes",admin_email:"{{wp.admin_email}}"}),a=(u=(A=window.fluentCartAdminApp)==null?void 0:A.app_config)==null?void 0:u.isProActive,s=T(!1),n=T({}),o=T({}),i=()=>{s.value=!0,ne.get("email-notification/get-settings").then(h=>{var m,_,B,b,w,k,F;e.value={from_name:(m=h.data)==null?void 0:m.from_name,from_email:(_=h.data)==null?void 0:_.from_email,reply_to_name:(B=h.data)==null?void 0:B.reply_to_name,reply_to_email:(b=h.data)==null?void 0:b.reply_to_email,email_footer:(w=h.data)==null?void 0:w.email_footer,admin_email:(k=h.data)==null?void 0:k.admin_email,show_email_footer:((F=h.data)==null?void 0:F.show_email_footer)||"yes"},o.value=h.shortcodes}).catch(h=>{}).finally(()=>{s.value=!1})},l=()=>{s.value=!0,n.value={},ne.post("email-notification/save-settings",e.value).then(h=>{q.success(h.message)}).catch(h=>{h.message?q.error(h.message):(q.error(p("Please Fill up all the fields")),n.value=h)}).finally(()=>{s.value=!1})};return he(()=>{i()}),(h,m)=>{const _=C("el-input"),B=C("el-form-item"),b=C("el-col"),w=C("el-row"),k=C("el-checkbox"),F=C("el-button");return f(),y("div",pne,[r(oe,null,{default:c(()=>[r(de,{title:g(p)("Mailing Settings"),text:g(p)("Set your from name, email, and email footer. These configurations will be used to send emails from %s.","WebmakerrPro"),border_bottom:""},null,8,["title","text"]),s.value?(f(),U(hne,{key:0})):(f(),U(ae,{key:1},{default:c(()=>[r(w,{gutter:15},{default:c(()=>[r(b,{lg:12},{default:c(()=>[r(B,{label:g(p)("From Name"),"label-position":"top"},{default:c(()=>[r(_,{modelValue:e.value.from_name,"onUpdate:modelValue":m[0]||(m[0]=x=>e.value.from_name=x)},null,8,["modelValue"]),m[9]||(m[9]=d("br",null,null,-1)),d("div",null,[r(gs,{"validation-errors":n.value.from_name||{},"field-key":"from_name"},null,8,["validation-errors"]),d("div",mne,[d("p",null,v(g(p)("Name that will be used to send emails")),1)])])]),_:1,__:[9]},8,["label"])]),_:1}),r(b,{lg:12},{default:c(()=>[r(B,{label:g(p)("From Email"),"label-position":"top"},{default:c(()=>[r(_,{modelValue:e.value.from_email,"onUpdate:modelValue":m[1]||(m[1]=x=>e.value.from_email=x)},null,8,["modelValue"]),d("div",null,[r(gs,{"validation-errors":n.value.from_email||{},"field-key":"from_name"},null,8,["validation-errors"]),d("div",gne,[d("p",null,v(g(p)(`Provide Valid Email Address email as per your domain/SMTP settings. This
receive it.`)),1)])])]),_:1},8,["label"])]),_:1})]),_:1}),r(w,{gutter:15},{default:c(()=>[r(b,null,{default:c(()=>[d("div",bne,v(g(p)("Email Footer")),1),r(co,{"short-codes":o.value,modelValue:e.value.email_footer,"onUpdate:modelValue":m[4]||(m[4]=x=>e.value.email_footer=x),onUpdate:m[5]||(m[5]=x=>{e.value.email_footer=x})},null,8,["short-codes","modelValue"]),d("div",yne,[r(gs,{"validation-errors":n.value.email_footer||{},"field-key":"email_footer"},null,8,["validation-errors"]),d("div",wne,[d("p",null,v(g(p)(`This email footer will be used for all emails sent from WebmakerrPro, It's highly recommended to use your business name and address in the footer for
compliance.`)),1)])]),d("div",Cne,[r(k,{modelValue:e.value.show_email_footer,"onUpdate:modelValue":m[6]||(m[6]=x=>e.value.show_email_footer=x),"true-value":"yes","false-value":"no",disabled:!g(a)},{default:c(()=>[O(v(g(p)("Enable powered by WebmakerrPro in the email footer")),1)]),_:1},8,["modelValue","disabled"])])]),_:1})]),_:1}),r(w,{gutter:15},{default:c(()=>[r(b,null,{default:c(()=>[r(B,null,{default:c(()=>[r(w,{gutter:15,class:"w-full"},{default:c(()=>[r(b,{lg:12},{default:c(()=>[d("div",Bne,[d("span",kne,v(g(p)("Admin Email Address")),1),d("div",xne,[d("p",null,v(g(p)("WebmakerrPro will send admin notification to this email address.")),1)])])]),_:1}),r(b,{lg:12},{default:c(()=>[d("div",Fne,[r(_,{modelValue:e.value.admin_email,"onUpdate:modelValue":m[7]||(m[7]=x=>e.value.admin_email=x)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),d("div",Sne,[r(F,{type:"primary",onClick:m[8]||(m[8]=x=>l()),loading:s.value},{default:c(()=>[O(v(s.value?g(p)("Saving"):g(p)("Save")),1)]),_:1},8,["loading"])])])}}},Une={};function Qne(t,e){const a=C("router-view");return f(),y("div",null,[r(a)])}const Dne=ve(Une,[["render",Qne]]),Mne={},Ine={class:"fc-setting-form-row"},Tne={class:"w-[300px]"},$ne={class:"flex-grow flex-shrink flex-basis-0 self-center"},One={class:"fc-setting-form-row"},Lne={class:"w-[300px]"},Vne={class:"flex-grow flex-shrink flex-basis-0 self-center"},Rne={class:"fc-setting-form-row"},Hne={class:"w-[300px]"},Pne={class:"flex-grow flex-shrink flex-basis-0 self-center"};function Nne(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),y("div",null,[d("div",Ine,[d("div",Tne,[r(s,{animated:"",class:"max-w-[70%]"},{template:c(()=>[r(a,{variant:"p",class:"w-full h-4"})]),_:1}),r(s,{animated:"",class:"max-w-[80%]"},{template:c(()=>[r(a,{variant:"p",class:"w-full h-4"}),r(a,{variant:"p",class:"w-1/2 h-4"})]),_:1})]),d("div",$ne,[r(s,{animated:""},{template:c(()=>[r(a,{variant:"p",class:"w-full h-4"})]),_:1})])]),d("div",One,[d("div",Lne,[r(s,{animated:"",class:"max-w-[60%]"},{template:c(()=>[r(a,{variant:"p",class:"w-full h-4"})]),_:1}),r(s,{animated:"",class:"max-w-full"},{template:c(()=>[r(a,{variant:"p",class:"w-full h-4"})]),_:1})]),d("div",Vne,[r(s,{animated:""},{template:c(()=>[r(a,{variant:"p",class:"w-full h-4"})]),_:1})])]),d("div",Rne,[d("div",Hne,[r(s,{animated:"",class:"max-w-[50%]"},{template:c(()=>[r(a,{variant:"p",class:"w-full h-4"})]),_:1}),r(s,{animated:"",class:"max-w-full"},{template:c(()=>[r(a,{variant:"p",class:"w-full h-4"})]),_:1})]),d("div",Pne,[r(s,{animated:""},{template:c(()=>[r(a,{variant:"p",class:"w-full h-4"})]),_:1})])])])}const Kne=ve(Mne,[["render",Nne]]),zne={},Gne={class:"fc-tax-classes-content flex-1"},jne={class:"fc-tax-classes-actions"};function Yne(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),y(P,null,j(5,n=>d("div",{key:n,class:"fc-tax-classes h-[73px]"},[d("div",Gne,[r(s,{animated:"",class:"max-w-[400px]"},{template:c(()=>[r(a,{variant:"p",class:"w-full h-4"})]),_:1}),r(s,{animated:"",class:"max-w-[300px]"},{template:c(()=>[r(a,{variant:"p",class:"w-3/4 h-4"})]),_:1})]),d("div",jne,[r(s,{animated:""},{template:c(()=>[r(a,{variant:"p",class:"w-[80px] h-4"})]),_:1})])])),64)}const Wne=ve(zne,[["render",Yne]]),qne={key:0,class:"setting-wrap"},Xne={class:"fc-all-tax-classes-page"},Jne={key:0,class:"fc-tax-classes-wrap"},Zne={key:1,class:"fc-tax-classes-wrap"},eoe={class:"fc-tax-classes-content"},toe={class:"fc-tax-classes-title"},aoe={class:"heading"},soe={key:0,class:"fc-tax-classes-categories"},noe={key:0,class:"fc-tax-classes-category fc-tax-classes-more"},ooe={class:"fc-tax-classes-desc"},ioe={class:"fc-tax-classes-actions"},roe={class:"form-hint"},loe={key:0},Aoe={__name:"TaxClasses",props:{tax_settings_changed:{type:Boolean,default:!1},enable_tax:{type:String,default:"no"},categories_external:{type:Array,default:()=>[]}},setup(t){const e=T([]),a=T(!1),s=T(!1),n=T(!1),o=T({id:0,title:"",description:"",categories:[],priority:10}),i=t;ke(()=>i.tax_settings_changed,M=>{M&&h()});const l=T({}),A=T([]),u=T(!1),h=()=>{a.value=!0,ne.get("tax/classes").then(M=>{e.value=M.tax_classes}).catch(M=>{M&&(M!=null&&M.message)&&q.error(M),console.error("Error fetching tax classes:",M)}).finally(()=>{a.value=!1})},m=()=>{_(),s.value=!0},_=()=>{o.value={id:0,title:"",description:"",categories:[],priority:10}},B=()=>{if(n.value=!0,!o.value.title)return n.value=!1,q.error(p("Title is required"));ne.post("tax/classes",o.value).then(M=>{q.success(M.message),h(),s.value=!1,_(),l.value={}}).catch(M=>{M&&(M!=null&&M.message)?q.error(M==null?void 0:M.message):l.value=M}).finally(()=>{n.value=!1})},b=()=>{if(n.value=!0,!o.value.title)return n.value=!1,q.error(p("Title is required"));ne.put("tax/classes/"+o.value.id,{title:o.value.title,description:o.value.description,categories:o.value.categories,priority:o.value.priority}).then(M=>{q.success(M.message),h(),s.value=!1,l.value={}}).catch(M=>{M&&(M!=null&&M.message)?q.error(M==null?void 0:M.message):l.value=M}).finally(()=>{n.value=!1})},w=M=>{M.action==="delete"&&Gt(p("Are you sure you want to delete this tax class?"),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{k(M.taxClass.id)}).catch(()=>{})},k=M=>{ne.delete("tax/classes/"+M).then(D=>{q.success(D.message),h()}).catch(D=>{D&&(D!=null&&D.message)?q.error(D==null?void 0:D.message):l.value=D}).finally(()=>{})},F=M=>{var D,R;o.value={id:M.id,title:M.title,description:M.description,categories:((D=M.meta)==null?void 0:D.categories)??[],priority:((R=M.meta)==null?void 0:R.priority)??0},s.value=!0},x=()=>{if(i.categories_external&&i.categories_external.length){A.value=i.categories_external.map(M=>({...M,value:parseInt(M.value??M.term_id)}));return}A.value.length>0||(u.value=!0,ne.get("products/fetch-term").then(M=>{let D=M.taxonomies["product-categories"].terms;A.value=D.map(R=>({...R,value:parseInt(R.value)}))}).catch(M=>{console.error("Error fetching product categories:",M)}).finally(()=>{u.value=!1}))},E=M=>{var D;return((D=A.value.find(R=>R.value==M))==null?void 0:D.label)||M};return he(()=>{h(),x()}),(M,D)=>{const R=C("el-button"),$=C("el-dropdown-item"),Q=C("el-dropdown-menu"),I=C("el-dropdown"),L=C("el-input"),V=C("el-form-item"),N=C("el-col"),Y=C("el-input-number"),K=C("el-row"),X=C("el-option"),re=C("el-select"),ce=C("el-form"),Z=C("el-dialog"),H=Ut("loading");return i.enable_tax==="yes"&&e.value.length>0?(f(),y("div",qne,[d("div",Xne,[r(oe,null,{default:c(()=>[r(de,{title:g(p)("Existing Tax Classes"),text:g(p)("Define categories to group products with similar tax treatment.")},{action:c(()=>[r(R,{type:"default",onClick:m},{default:c(()=>[O(v(g(p)("Add Tax Class")),1)]),_:1})]),_:1},8,["title","text"]),r(ae,null,{default:c(()=>[a.value?(f(),y("div",Jne,[r(Wne)])):(f(),y("div",Zne,[(f(!0),y(P,null,j(e.value,(z,W)=>(f(),y("div",{key:W,class:"fc-tax-classes"},[d("div",eoe,[d("h4",toe,[d("span",aoe,v(z.title),1),z.categories&&z.categories.length>0?(f(),y("span",soe,[(f(!0),y(P,null,j(z.categories.slice(0,2),(ie,te)=>(f(),y("span",{key:te,class:"fc-tax-classes-category"},v(E(ie)),1))),128)),z.categories.length>2?(f(),y("span",noe," +"+v(z.categories.length-2),1)):S("",!0)])):S("",!0)]),d("p",ooe,v(z.description),1)]),d("div",ioe,[r(we,{size:"small",tag:"span",onClick:ie=>F(z)},{default:c(()=>[r(G,{name:"Edit",class:"w-4 h-4"})]),_:2},1032,["onClick"]),["standard","reduced","zero"].includes(z.slug)?S("",!0):(f(),U(I,{key:0,trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:w},{dropdown:c(()=>[r(Q,null,{default:c(()=>[r($,{command:{action:"delete",taxClass:z},class:"item-destructive"},{default:c(()=>[r(G,{name:"Delete"}),O(" "+v(g(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:c(()=>[r(we,{size:"small",tag:"span"},{default:c(()=>[r(G,{name:"More",class:"w-4 h-4"})]),_:1})]),_:2},1024))])]))),128))]))]),_:1})]),_:1})]),r(Z,{modelValue:s.value,"onUpdate:modelValue":D[5]||(D[5]=z=>s.value=z),title:g(p)("Add Tax Class"),width:"500px","append-to-body":"",class:"fluent-cart-admin-pages"},{footer:c(()=>[r(R,{onClick:D[4]||(D[4]=z=>s.value=!1)},{default:c(()=>[O(v(g(p)("Cancel")),1)]),_:1}),o.value.id>0?(f(),U(R,{key:0,type:"primary",onClick:b,loading:n.value},{default:c(()=>[O(v(n.value?g(p)("Updating"):g(p)("Update")),1)]),_:1},8,["loading"])):(f(),U(R,{key:1,type:"primary",onClick:B,loading:n.value},{default:c(()=>[O(v(n.value?g(p)("Creating"):g(p)("Create")),1)]),_:1},8,["loading"]))]),default:c(()=>[r(ce,{"label-position":"top",model:o.value},{default:c(()=>[r(K,{gutter:20},{default:c(()=>[r(N,{span:16},{default:c(()=>[r(V,{label:g(p)("Tax Class Name")},{default:c(()=>[r(L,{modelValue:o.value.title,"onUpdate:modelValue":D[0]||(D[0]=z=>o.value.title=z),placeholder:g(p)("Enter Tax Class Name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),r(N,{span:8},{default:c(()=>[r(V,{label:g(p)("Priority")},{label:c(()=>[r(Xe,{title:g(p)("Priority"),content:g(p)("Higher numbers have higher priority (0-10). Tax classes with higher priority will be applied first.")},null,8,["title","content"])]),default:c(()=>[r(Y,{modelValue:o.value.priority,"onUpdate:modelValue":D[1]||(D[1]=z=>o.value.priority=z),min:0,max:10,placeholder:g(p)("Enter priority (0-10)"),"controls-position":"right",class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),r(V,{label:g(p)("Product Category")},{default:c(()=>[ut((f(),U(re,{modelValue:o.value.categories,"onUpdate:modelValue":D[2]||(D[2]=z=>o.value.categories=z),filterable:"",multiple:"",placeholder:g(p)("Select Product Category")},{default:c(()=>[(f(!0),y(P,null,j(A.value,(z,W)=>(f(),U(X,{key:W,label:z.label,value:z.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])),[[H,u.value]]),d("div",roe,[d("p",null,v(g(p)("Select the product categories that this tax class will be applied to.")),1)])]),_:1},8,["label"]),r(V,{label:g(p)("Description")},{default:c(()=>[r(L,{type:"textarea",rows:"3",modelValue:o.value.description,"onUpdate:modelValue":D[3]||(D[3]=z=>o.value.description=z),placeholder:g(p)("Enter Tax Class Description")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),l.value?(f(),y("div",loe,[(f(!0),y(P,null,j(l.value,(z,W)=>(f(),y("p",{class:"text-red-500 m-0",key:W},v(z.required||z.max||z.unique),1))),128))])):S("",!0)]),_:1},8,["modelValue","title"])])):S("",!0)}}},coe={name:"TaxConfigurations ",components:{TaxConfigurationsLoader:Kne,Animation:pa,CardContainer:oe,CardBody:ae,CardHeader:de,LabelHint:Xe,TaxClasses:Aoe},data(){return{settings:{enable_tax:"no",tax_inclusion:"included",tax_calculation_basis:"shipping",tax_rounding:"item",eu_vat_settings:{require_vat_number:"no",local_reverse_charge:"no",vat_reverse_excluded_categories:[]}},tax_settings_changed:!1,saving:!1,loading:!1,categories:[],fetchingCategories:!1}},methods:{translate:p,saveSettings(){this.saving=!0,this.$post("tax/configuration/settings",{settings:this.settings}).then(t=>{this.handleSuccess(t.message),this.tax_settings_changed=!0}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message),this.saving=!1}).finally(()=>{this.saving=!1})},getSettings(){this.loading=!0,this.$get("tax/configuration/settings").then(t=>{if(this.settings=t.settings,this.settings.eu_vat_settings||(this.settings.eu_vat_settings={}),!Array.isArray(this.settings.eu_vat_settings.vat_reverse_excluded_categories))this.$set(this.settings.eu_vat_settings,"vat_reverse_excluded_categories",[]);else{let e=this.settings.eu_vat_settings.vat_reverse_excluded_categories.map(a=>a.toString());this.settings.eu_vat_settings.vat_reverse_excluded_categories=e}}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)}).finally(()=>{this.loading=!1})},fetchCategories(){this.categories.length>0||(this.fetchingCategories=!0,this.$get("products/fetch-term").then(t=>{this.categories=t.taxonomies["product-categories"].terms||[]}).catch(()=>{}).finally(()=>{this.fetchingCategories=!1}))}},mounted(){this.getSettings(),this.fetchCategories()}},doe={class:"setting-wrap"},uoe={key:0,class:"setting-save-action"},foe={class:"fc-setting-form-row"},hoe={class:"fc-setting-form-content flex gap-3.5 flex-1"},poe={class:"fc-inline-tip"},moe={class:"fc-setting-form-row"},goe={class:"fc-setting-form-content"},_oe={class:"fc-inline-tip"},voe={class:"fc-setting-form-fields self-center"},boe={class:"fc-setting-form-row"},yoe={class:"fc-setting-form-content"},woe={class:"fc-inline-tip"},Coe={class:"fc-setting-form-fields self-center"},Boe={class:"fc-setting-form-row"},koe={class:"fc-setting-form-content"},xoe={class:"fc-inline-tip"},Foe={class:"fc-setting-form-fields self-center"},Soe={class:"fc-setting-form-row"},Eoe={class:"fc-setting-form-content"},Uoe={class:"fc-inline-tip"},Qoe={class:"fc-setting-form-content flex gap-3.5 flex-1"},Doe={class:"fc-inline-tip"},Moe={key:0,class:"fc-setting-form-content flex gap-3.5 flex-1"},Ioe={class:"fc-inline-tip"},Toe={key:1,class:"fc-setting-form-row mt-6"},$oe={class:"fc-setting-form-content"},Ooe={class:"fc-inline-tip"},Loe={class:"fc-setting-form-fields"},Voe={class:"p-6"},Roe={key:0,class:"setting-save-action"};function Hoe(t,e,a,s,n,o){const i=C("el-button"),l=C("CardHeader"),A=C("el-switch"),u=C("LabelHint"),h=C("TaxConfigurationsLoader"),m=C("el-radio"),_=C("el-radio-group"),B=C("el-option"),b=C("el-select"),w=C("el-input"),k=C("Animation"),F=C("CardBody"),x=C("CardContainer"),E=C("TaxClasses"),M=Ut("loading");return f(),y("div",doe,[r(x,null,{default:c(()=>[r(l,{title:o.translate("Tax Configuration"),text:o.translate("Configure your tax settings.")},{action:c(()=>[n.loading?S("",!0):(f(),y("div",uoe,[r(i,{loading:n.saving,type:"primary",onClick:o.saveSettings},{default:c(()=>[O(v(n.saving?o.translate("Saving"):o.translate("Save"))+" "+v(o.translate("Settings")),1)]),_:1},8,["loading","onClick"])]))]),_:1},8,["title","text"]),r(F,null,{default:c(()=>[d("div",foe,[d("div",hoe,[r(A,{modelValue:n.settings.enable_tax,"onUpdate:modelValue":e[0]||(e[0]=D=>n.settings.enable_tax=D),"active-value":"yes","inactive-value":"no"},null,8,["modelValue"]),d("div",null,[r(u,{title:"Enable Tax"}),d("p",poe,v(o.translate("Key-value pairs sent with the request for context like auth or content type")),1)])])]),n.loading?(f(),U(h,{key:0})):S("",!0),r(k,{visible:!n.loading&&n.settings.enable_tax==="yes",accordion:""},{default:c(()=>{var D,R;return[d("div",moe,[d("div",goe,[r(u,{title:"Prices entered with tax"}),d("p",_oe,v(o.translate("Choose whether product prices are entered including or excluding tax.")),1)]),d("div",voe,[r(_,{modelValue:n.settings.tax_inclusion,"onUpdate:modelValue":e[1]||(e[1]=$=>n.settings.tax_inclusion=$)},{default:c(()=>[r(m,{value:"included"},{default:c(()=>[O(v(o.translate("Included")),1)]),_:1}),r(m,{value:"excluded"},{default:c(()=>[O(v(o.translate("Excluded")),1)]),_:1})]),_:1},8,["modelValue"])])]),d("div",boe,[d("div",yoe,[r(u,{title:"Calculate Tax Based On"}),d("p",woe,v(o.translate("Determine the location used for tax calculations.")),1)]),d("div",Coe,[r(b,{modelValue:n.settings.tax_calculation_basis,"onUpdate:modelValue":e[2]||(e[2]=$=>n.settings.tax_calculation_basis=$),clearable:""},{default:c(()=>[r(B,{value:"shipping",label:"Customer Shipping Address"}),r(B,{value:"billing",label:"Customer Billing Address"}),r(B,{value:"store",label:"Store Location"})]),_:1},8,["modelValue"])])]),d("div",Boe,[d("div",koe,[r(u,{title:"Price Suffix"}),d("p",xoe,v(o.translate("Will be shown on the product price.")),1)]),d("div",Foe,[r(w,{modelValue:n.settings.price_suffix,"onUpdate:modelValue":e[3]||(e[3]=$=>n.settings.price_suffix=$),placeholder:"e.g. (incl. tax)"},null,8,["modelValue"])])]),d("div",Soe,[d("div",Eoe,[r(u,{title:"EU VAT Settings"}),d("p",Uoe,v(o.translate("Determine the location used for tax calculations.")),1)])]),d("div",Qoe,[r(A,{modelValue:n.settings.eu_vat_settings.require_vat_number,"onUpdate:modelValue":e[4]||(e[4]=$=>n.settings.eu_vat_settings.require_vat_number=$),"active-value":"yes","inactive-value":"no"},null,8,["modelValue"]),d("div",null,[r(u,{title:"Enable EU VAT Number"}),d("p",Doe,v(o.translate("If enabled, all customer’s in the EU will be able to enter a EU VAT number when checking out.")),1)])]),((D=n.settings.eu_vat_settings)==null?void 0:D.require_vat_number)==="yes"?(f(),y("div",Moe,[r(A,{modelValue:n.settings.eu_vat_settings.local_reverse_charge,"onUpdate:modelValue":e[5]||(e[5]=$=>n.settings.eu_vat_settings.local_reverse_charge=$),"active-value":"yes","inactive-value":"no"},null,8,["modelValue"]),d("div",null,[r(u,{title:"Local Reverse Charge"}),d("p",Ioe,v(o.translate("If enabled, apply reverse charge when applicable even when customers are in your home country.")),1)])])):S("",!0),((R=n.settings.eu_vat_settings)==null?void 0:R.require_vat_number)==="yes"?(f(),y("div",Toe,[d("div",$oe,[r(u,{title:"Exclude Categories from VAT reverse"}),d("p",Ooe,v(o.translate("Select product categories that should NOT get VAT reverse charge !")),1)]),e[7]||(e[7]=d("br",null,null,-1)),d("div",Loe,[ut((f(),U(b,{modelValue:n.settings.eu_vat_settings.vat_reverse_excluded_categories,"onUpdate:modelValue":e[6]||(e[6]=$=>n.settings.eu_vat_settings.vat_reverse_excluded_categories=$),filterable:"",multiple:"",clearable:"",placeholder:o.translate("Select Product Categories"),class:"w-full"},{default:c(()=>[(f(!0),y(P,null,j(n.categories,$=>(f(),U(B,{key:$.value||$.term_id,label:$.label||$.name,value:$.value||$.term_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])),[[M,n.fetchingCategories]])])])):S("",!0)]}),_:1},8,["visible"])]),_:1}),d("div",Voe,[n.loading?S("",!0):(f(),y("div",Roe,[r(i,{loading:n.saving,type:"primary",onClick:o.saveSettings},{default:c(()=>[O(v(n.saving?o.translate("Saving"):o.translate("Save"))+" "+v(o.translate("Settings")),1)]),_:1},8,["loading","onClick"])]))])]),_:1}),r(E,{tax_settings_changed:n.tax_settings_changed,enable_tax:n.settings.enable_tax,categories_external:n.categories},null,8,["tax_settings_changed","enable_tax","categories_external"])])}const Poe=ve(coe,[["render",Hoe]]),Noe={class:"fc-tax-rates-wrap-loader"},Vc={__name:"TaxRatesLoader",setup(t){const e=T(Array.from({length:6},()=>`${Math.floor(Math.random()*21)+120}px`));return(a,s)=>{const n=C("el-skeleton-item"),o=C("el-skeleton");return f(),y("div",Noe,[(f(!0),y(P,null,j(e.value,(i,l)=>(f(),y("div",{key:l,class:"flex items-center justify-between border-[1px] border-solid border-gray-divider dark:border-dark-400 rounded h-12 pr-4 pl-6 mb-4"},[r(o,{animated:"",style:Ta({width:i}),class:"h-4"},{template:c(()=>[r(n,{variant:"p",class:"h-4"})]),_:2},1032,["style"]),r(o,{animated:"",class:"w-[100px] h-4"},{template:c(()=>[r(n,{variant:"p",class:"h-4"})]),_:1})]))),128))])}}},Koe={class:"fc-tax-configuration-country-wrap"},zoe={class:"dialog-header"},Goe={class:"dialog-title m-0 mb-1"},joe={class:"m-0"},Yoe={class:"fc-tax-rates-configuration-country-view"},Woe={key:1,class:"fc-tax-rates-wrap"},qoe={key:0,class:"m-0 mb-2"},Xoe={class:"font-medium"},Joe={key:0},Zoe={class:"fc-tax-rates-title"},eie={class:"total-countries"},tie={key:0,class:"fc-tax-rates-countries"},aie={class:"fc-tax-rates-country-name"},sie=["src"],nie={class:"fc-tax-rates-country-actions"},oie={class:"fc-tax-rates-country-rate"},iie={key:1},rie={class:"p-2 float-right"},lie={key:0,class:"p-2 float-right"},Aie={class:"dialog-footer"},jl={__name:"TaxConfigurationCountryModal",props:{onlyEU:{type:Boolean,default:!1}},emits:["refresh"],setup(t,{emit:e}){const a=t,s=T(!1),n=T([]),o=T(!1),i=T([]),l=T([]),A=T(!1),u=T(""),h=()=>{s.value=!0},m=e,_=()=>{o.value=!0,ne.get("tax/configuration/rates").then(E=>{i.value=E.tax_rates}).catch(E=>{console.error("Error fetching tax rates:",E)}).finally(()=>{o.value=!1})},B=()=>{_()},b=()=>{l.value=[]},w=E=>{l.value.includes(E)?l.value=l.value.filter(M=>M!==E):l.value.push(E)},k=()=>{l.value.length===0?Gt(p("If you don't select any country, all countries will be available for tax calculation. Are you sure you want to proceed?"),p("Yes, Proceed!"),{confirmButtonText:p("Yes, Proceed!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{F()}).catch(()=>{}):F()},F=()=>{A.value=!0,ne.post("tax/configuration/countries",{countries:l.value}).then(E=>{q.success(E.message),s.value=!1,m("refresh")}).catch(E=>{console.error("Failed to save config",E)}).finally(()=>{A.value=!1})},x=J(()=>{const E=u.value.toLowerCase();let M=Object.values(i.value||{});return a.onlyEU&&(M=M.filter(D=>D.group_code==="EU")),E?M.map(D=>{const R=D.countries.filter($=>$.country_name.toLowerCase().includes(E)||$.country_code.toLowerCase().includes(E));return{...D,countries:R,total_countries:R.length}}).filter(D=>D.countries.length>0):M});return(E,M)=>{const D=C("el-button"),R=C("el-input"),$=C("el-checkbox"),Q=C("router-link"),I=C("el-collapse-item"),L=C("el-collapse"),V=C("el-dialog");return f(),y("div",Koe,[r(D,{type:"primary",link:"",onClick:h},{default:c(()=>[O(v(g(p)("Configure Countries")),1)]),_:1}),r(V,{modelValue:s.value,"onUpdate:modelValue":M[3]||(M[3]=N=>s.value=N),width:"800px","append-to-body":"",class:"fluent-cart-admin-pages",onOpen:B,onClose:b,"modal-class":"fc-tax-rates-configuration-country-modal"},{header:c(()=>[d("div",zoe,[d("h3",Goe,v(g(p)("Tax Configuration Countries")),1),d("p",joe,v(g(p)("Select the countries you want to configure tax rates for.")),1)])]),footer:c(()=>[d("div",Aie,[r(D,{onClick:M[2]||(M[2]=N=>s.value=!1),type:"info",soft:""},{default:c(()=>[O(v(g(p)("Cancel")),1)]),_:1}),r(D,{type:"primary",onClick:k,loading:A.value,disabled:A.value},{default:c(()=>[O(v(A.value?g(p)("Saving"):g(p)("Save")),1)]),_:1},8,["loading","disabled"])])]),default:c(()=>[d("div",Yoe,[o.value?(f(),U(Vc,{key:0})):(f(),y("div",Woe,[r(R,{modelValue:u.value,"onUpdate:modelValue":M[0]||(M[0]=N=>u.value=N),placeholder:g(p)("Search country..."),clearable:"",class:"mb-3"},null,8,["modelValue","placeholder"]),l.value.length>0?(f(),y("div",qoe,[d("span",Xoe,v(g(p)("Selected Countries: ")),1),(f(!0),y(P,null,j(l.value,(N,Y)=>(f(),y("span",{key:N},[O(v(N),1),Y<l.value.length-1?(f(),y("span",Joe,", ")):S("",!0)]))),128))])):S("",!0),r(L,{modelValue:n.value,"onUpdate:modelValue":M[1]||(M[1]=N=>n.value=N),accordion:"","expand-icon-position":"left"},{default:c(()=>[(f(!0),y(P,null,j(x.value,(N,Y)=>(f(),U(I,{key:Y,name:Y},{title:c(()=>[d("span",Zoe,[O(v(N.group_name)+" ",1),d("span",eie,v(N.total_countries)+" "+v(g(p)(" Countries")),1)])]),default:c(()=>[t.onlyEU||N.group_code!=="EU"?(f(),y("div",tie,[(f(!0),y(P,null,j(N.countries,(K,X)=>(f(),y("div",{key:X,class:"fc-tax-rates-country"},[d("div",aie,[d("img",{class:"w-[22px] block",src:"https://flagcdn.com/w40/"+K.country_code.toLowerCase()+".png",alt:"US flag"},null,8,sie),O(" "+v(K.country_name),1)]),d("div",nie,[d("div",oie,v(g(p)("%s rates",K.total_rates)),1),r($,{"model-value":l.value.includes(K.country_code),onChange:re=>w(K.country_code)},{default:c(()=>[O(v(g(p)("Select")),1)]),_:2},1032,["model-value","onChange"])])]))),128))])):(f(),y("div",iie,[d("div",rie,[M[4]||(M[4]=O(" Configure all European Union countries VAT Settings. ",-1)),N.group_code==="EU"?(f(),y("div",lie,[r(Q,{to:"/settings/tax_settings/eu"},{default:c(()=>[O(v(g(p)("Configure EU VAT Settings")),1)]),_:1})])):S("",!0)])]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]))])]),_:1},8,["modelValue"])])}}},cie={class:"setting-wrap"},die={class:"fc-all-tax-classes-page"},uie={key:1,class:"fc-tax-rates-wrap"},fie={class:"fc-tax-rates-title"},hie={class:"total-countries"},pie={class:"fc-tax-rates-countries"},mie={class:"fc-tax-rates-country-name"},gie=["src","alt"],_ie={class:"fc-tax-rates-country-actions"},vie={class:"fc-tax-rates-country-rate"},bie={key:1,class:"fc-tax-rates-add-country-form-wrap"},yie={class:"dialog-footer"},wie={__name:"TaxRates",setup(t){const e=T([]),a=T([]),s=T(!1),n=T(!1),o=T({country:"",class_id:""}),i=T([]),l=T(!1),A=T(!1),u=T([]),h=()=>{s.value=!0,ne.get("tax/rates").then(x=>{a.value=x.tax_rates,a.value=a.value.filter(E=>E.group_code!=="EU")}).catch(x=>{console.error("Error fetching tax rates:",x)}).finally(()=>{s.value=!1})},m=()=>{B(),w()},_=()=>{n.value=!1},B=()=>{l.value=!0,ne.get("address-info/countries").then(x=>{i.value=x.data}).catch(x=>{console.error("Error fetching countries:",x)}).finally(()=>{l.value=!1})},b=()=>{if(!o.value.country){q.error(p("Please select a country"));return}let x=o.value.country;typeof x=="string"&&(o.value.country=[x]),ne.post("tax/configuration/countries",{countries:x}).then(E=>{q.success(E.message),h(),n.value=!1}).catch(E=>{console.error("Failed to add country",E)})},w=()=>{A.value=!0,ne.get("tax/classes").then(x=>{u.value=x.tax_classes}).catch(x=>{console.error("Error fetching tax classes:",x)}).finally(()=>{A.value=!1})},k=x=>{ne.delete("tax/country/"+x).then(E=>{q.success(E.message),h()}).catch(E=>{console.error("Failed to delete country",E)})},F=x=>{x.action==="delete"&&Gt(p("Are you sure you want to delete this tax rate?"),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{k(x.country_code)}).catch(()=>{})};return he(()=>{h()}),(x,E)=>{const M=C("el-button"),D=C("el-dropdown-item"),R=C("el-dropdown-menu"),$=C("el-dropdown"),Q=C("el-collapse-item"),I=C("el-collapse"),L=C("el-option"),V=C("el-select"),N=C("el-form-item"),Y=C("el-form"),K=C("el-dialog");return f(),y("div",cie,[d("div",die,[r(oe,null,{default:c(()=>[r(de,{title:g(p)("Existing Tax Rates"),text:g(p)("Manage tax rates for different locations and tax classes")},{action:c(()=>[r(jl,{onRefresh:h})]),_:1},8,["title","text"]),r(ae,null,{default:c(()=>[s.value?(f(),U(Vc,{key:0})):(f(),y("div",uie,[r(I,{modelValue:e.value,"onUpdate:modelValue":E[0]||(E[0]=X=>e.value=X),accordion:"","expand-icon-position":"left"},{default:c(()=>[(f(!0),y(P,null,j(a.value,(X,re)=>(f(),U(Q,{name:re},{title:c(()=>[d("span",fie,[O(v(X.group_name)+" ",1),d("span",hie,v(X.total_countries)+" "+v(g(p)(" Countries")),1)])]),default:c(()=>[d("div",pie,[(f(!0),y(P,null,j(X.countries,(ce,Z)=>(f(),y("div",{key:Z,class:"fc-tax-rates-country"},[d("div",mie,[d("img",{class:"w-[22px] block",src:"https://flagcdn.com/w40/"+ce.country_code.toLowerCase()+".png",alt:ce.country_code},null,8,gie),O(" "+v(ce.country_name),1)]),d("div",_ie,[d("div",vie,v(g(p)("%s %s",g(li)("Rate","Rates",ce.total_rates),ce.total_rates)),1),r(M,{type:"info",soft:"",plain:"",size:"small",onClick:H=>x.$router.push({name:"tax-rates-country-single",params:{country:ce.country_code,group:X.group_code}})},{default:c(()=>[O(v(g(p)("View")),1)]),_:2},1032,["onClick"]),r($,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:F},{dropdown:c(()=>[r(R,null,{default:c(()=>[r(D,{command:{action:"delete",country_code:ce.country_code},class:"item-destructive"},{default:c(()=>[r(G,{name:"Delete"}),O(" "+v(g(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:c(()=>[r(we,{size:"small",tag:"span",class:"cursor-pointer"},{default:c(()=>[r(G,{name:"More",class:"w-4 h-4"})]),_:1})]),_:2},1024)])]))),128))])]),_:2},1032,["name"]))),256))]),_:1},8,["modelValue"]),r(M,{type:"info",soft:"",plain:"",size:"small",onClick:E[1]||(E[1]=X=>n.value=!0),class:"fc-tax-rates-country-add"},{default:c(()=>[r(G,{name:"Plus",class:"w-5 h-5 items-center justify-center"}),O(" "+v(g(p)("Add Country")),1)]),_:1})]))]),_:1})]),_:1})]),r(K,{modelValue:n.value,"onUpdate:modelValue":E[5]||(E[5]=X=>n.value=X),title:g(p)("Add Country"),width:"500px","append-to-body":"",class:"fluent-cart-admin-pages","modal-class":"fc-tax-rates-add-country-modal",onOpen:m,onClose:_},{default:c(()=>[s.value?(f(),U(Vc,{key:0})):(f(),y("div",bie,[r(Y,{"label-position":"top",model:o.value},{default:c(()=>[r(N,{label:g(p)("Country")},{default:c(()=>[r(V,{modelValue:o.value.country,"onUpdate:modelValue":E[2]||(E[2]=X=>o.value.country=X),filterable:"",loading:l.value,placeholder:g(p)("Select Country")},{default:c(()=>[(f(!0),y(P,null,j(i.value,X=>(f(),U(L,{key:X.value,label:X.name,value:X.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","placeholder"])]),_:1},8,["label"]),S("",!0)]),_:1},8,["model"]),d("div",yie,[r(M,{onClick:E[4]||(E[4]=X=>n.value=!1)},{default:c(()=>[O(v(g(p)("Cancel")),1)]),_:1}),r(M,{type:"primary",onClick:b},{default:c(()=>[O(v(g(p)("Add")),1)]),_:1})])]))]),_:1},8,["modelValue","title"])])}}},Cie={class:"fc-tax-rates-country-modal-actions"},Bie={__name:"CountryTaxRatesLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton"),o=C("el-table-column"),i=C("el-table");return f(),U(i,{data:[1,2,3,4,5]},{default:c(()=>[r(o,{label:g(p)("Tax Label"),width:"150"},{default:c(()=>[r(n,{animated:""},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),r(o,{label:g(p)("City"),width:"100"},{default:c(()=>[r(n,{animated:""},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),r(o,{label:g(p)("State")},{default:c(()=>[r(n,{animated:""},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),r(o,{label:g(p)("Postcode")},{default:c(()=>[r(n,{animated:""},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),r(o,{label:g(p)("Rate (%)")},{default:c(()=>[r(n,{animated:""},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),r(o,{label:g(p)("Tax Class"),width:"130"},{default:c(()=>[r(n,{animated:""},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),r(o,{label:g(p)("Compound"),width:"100"},{default:c(()=>[r(n,{animated:"",class:"flex items-center justify-center"},{template:c(()=>[r(s,{variant:"p",class:"w-1/2 h-4"})]),_:1})]),_:1},8,["label"]),r(o,{label:g(p)("Priority"),width:"100"},{default:c(()=>[r(n,{animated:""},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"})]),_:1})]),_:1},8,["label"]),r(o,{label:g(p)("Shipping")},{default:c(()=>[r(n,{animated:"",class:"flex items-center justify-center"},{template:c(()=>[r(s,{variant:"p",class:"w-1/2 h-4"})]),_:1})]),_:1},8,["label"]),r(o,null,{default:c(()=>[d("div",Cie,[r(n,{animated:""},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"})]),_:1})])]),_:1})]),_:1})}}},kie={class:"setting-wrap"},xie={class:"fc-single-tax-rates-country-single-page"},Fie={class:"fc-single-tax-rates-country-single"},Sie={class:"single-page-header flex items-center justify-between"},Eie={class:"form-help-text text-xs font-normal mt-1"},Uie={class:"form-help-text text-xs font-normal mt-1"},Qie={class:"fc-tax-rates-country-view"},Die={key:1},Mie={key:1},Iie={key:2},Tie={key:1},$ie={key:1},Oie={key:1},Lie={key:1},Vie={key:1},Rie={class:"fc-tax-rates-country-modal-actions"},Hie={class:"fc-tax-rates-country-add"},Pie={class:"fc-tax-rates-country-view"},Nie={class:"fc-tax-rates-country-modal-actions"},Kh={__name:"TaxRatesCountrySingle",props:{country:{type:String},group:{type:String}},setup(t){var ce;const e=t,a=T([]),s=T([]),n=T(!1),o=T(!1),i=T([]),l=T([]),A=T(!1),u=T({tax_id:""}),h=T([]),m=T(""),_=T(((ce=window.fluentCartAdminApp.country_tax_titles)==null?void 0:ce[e.country])||"Tax"),B=T(!1),b=T([]),w=T({id:"",tax_rate:""}),k=()=>{B.value=!0},F=Z=>{B.value=!0,w.value={id:Z.id,tax_rate:Z.for_shipping}},x=Z=>{ne.delete("tax/rates/country/override/"+Z.id).then(H=>{q.success(H.message),D()})},E=()=>{ne.post("tax/rates/country/override",{id:w.value.id,override_tax_rate:w.value.tax_rate}).then(Z=>{q.success(Z.message),B.value=!1,w.value={id:"",tax_rate:""},D()}).catch(Z=>{console.error("Failed to save tax override",Z)})},M=()=>{a.value.push({id:"",state:"",postcode:"",rate:"",tax_class:{id:"",title:""},is_compound:"0",priority:"1",for_shipping:null,isEditing:!0,isNew:!0})},D=()=>{n.value=!0,ne.get("tax/rates/country/rates/"+e.country).then(Z=>{var H;a.value=Z.tax_rates,s.value=Z.tax_rates.filter(z=>z.for_shipping!==null),l.value=Z.settings?(H=Z.settings)==null?void 0:H.hidden:[],b.value=Z.tax_rates.map(z=>({name:z.name,value:z.id}))}).catch(Z=>{console.error("Error fetching tax rates:",Z)}).finally(()=>{n.value=!1})},R=Z=>{Z&&ne.delete("tax/country/rate/"+Z).then(H=>{q.success(H.message),D()}).catch(H=>{H&&(H!=null&&H.message)&&q.error(H.message),console.error("Failed to delete row",H)}).finally(()=>{})},$=Z=>{Z.action==="delete"&&Gt(p("Are you sure you want to delete this tax rate?"),p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{R(Z.taxClass.id)}).catch(()=>{})},Q=(Z,H)=>{var z;ne.put("tax/country/rate/"+Z.id,{state:Z.state,postcode:Z.postcode,rate:Z.rate,is_compound:Z.is_compound,priority:Z.priority,for_shipping:Z.for_shipping,class_id:(z=Z.tax_class)==null?void 0:z.id,group:e.group,city:Z.city,name:Z.name,country:e.country}).then(W=>{q.success(W.message),a.value[H]={...W.tax_rate,isEditing:!1,isNew:!1}}).catch(W=>{W.status_code=="422"?q.validationErrors(W):q.error(W.message)})},I=(Z,H)=>{ne.post("tax/country/rate",{country:e.country,state:Z.state,postcode:Z.postcode,rate:Z.rate,is_compound:Z.is_compound,priority:Z.priority,for_shipping:Z.for_shipping,class_id:Z.tax_class.id,group:e.group,name:Z.name}).then(z=>{q.success(z.message),D(),a.value[H]={...z.tax_rate,isEditing:!1,isNew:!1}}).catch(z=>{z.status_code=="422"?q.validationErrors(z):q.error(z.message),console.error("Failed to save row",error)})},L=(Z,H)=>{Z.isNew?I(Z,H):Q(Z,H)},V=()=>{o.value=!0,ne.get("tax/classes").then(Z=>{i.value=Z.tax_classes}).catch(Z=>{var z,W;let H=(z=Z.data)!=null&&z.message?(W=Z.data)==null?void 0:W.message:"Failed to fetch tax classes";q.error(H)}).finally(()=>{o.value=!1})},N=(Z,H)=>{Z.isNew?a.value.splice(H,1):Z.isEditing=!1},Y=Z=>!l.value.includes(Z),K=()=>{A.value=!0,ne.post("tax/country-tax-id/"+e.country,{tax_id:u.value.tax_id}).then(Z=>{q.success(Z.message)}).catch(Z=>{var z,W;let H=(z=Z.data)!=null&&z.message?(W=Z.data)==null?void 0:W.message:"Failed to save tax id";q.error(H)}).finally(()=>{A.value=!1})},X=()=>{A.value=!0,ne.get("tax/country-tax-id/"+e.country).then(Z=>{u.value=Z.tax_data}).catch(Z=>{var H,z;Z&&((H=Z==null?void 0:Z.data)!=null&&H.message)&&q.error((z=Z.data)==null?void 0:z.message)}).finally(()=>{A.value=!1})},re=()=>{ne.get("address-info/get-country-info",{country_code:e.country}).then(Z=>{h.value=Z.states,m.value=Z.country_name}).catch(Z=>{console.error("Error fetching country info:",Z)}).finally(()=>{})};return he(()=>{V(),D(),X(),re()}),(Z,H)=>{const z=C("el-breadcrumb-item"),W=C("el-breadcrumb"),ie=C("el-skeleton-item"),te=C("el-skeleton"),se=C("el-form-item"),pe=C("el-form"),Se=C("el-input"),$e=C("el-button"),Ue=C("el-table-column"),Te=C("el-option"),Qe=C("el-select"),Ee=C("el-switch"),Ze=C("el-input-number"),mt=C("el-dropdown-item"),Ge=C("el-dropdown-menu"),ue=C("el-dropdown"),ge=C("el-table"),Oe=C("el-dialog");return f(),y("div",kie,[d("div",xie,[d("div",Fie,[d("div",Sie,[r(W,{class:"mb-0","separator-icon":g(Ca)},{default:c(()=>[t.group==="EU"?(f(),U(z,{key:0,to:{name:"eu"}},{default:c(()=>[O(v(g(p)("EU VAT Settings")),1)]),_:1})):(f(),U(z,{key:1,to:{name:"tax_rates"}},{default:c(()=>[O(v(g(p)("Existing Tax Rates")),1)]),_:1})),r(z,null,{default:c(()=>[O(v(_.value)+" Rates ",1)]),_:1}),r(z,null,{default:c(()=>[O(v(m.value||t.country),1)]),_:1})]),_:1},8,["separator-icon"])]),r(oe,null,{default:c(()=>[A.value?(f(),U(ae,{key:0},{default:c(()=>[r(pe,{"label-position":"top",model:u.value.tax_id},{default:c(()=>[r(se,{label:_.value+" ID"},{default:c(()=>[r(te,{animated:""},{template:c(()=>[r(ie,{variant:"p",class:"w-full h-4"})]),_:1}),d("div",Eie,v(_.value)+" "+v(g(p)(" id is used to identify the tax rate in the system.")),1)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})):(f(),U(ae,{key:1},{default:c(()=>[r(pe,{"label-position":"top",model:u.value.tax_id},{default:c(()=>[r(se,{label:_.value+" ID"},{default:c(()=>[r(Se,{modelValue:u.value.tax_id,"onUpdate:modelValue":H[0]||(H[0]=Ae=>u.value.tax_id=Ae),size:"small"},null,8,["modelValue"]),d("div",Uie,v(_.value)+" "+v(g(p)(" id is used to identify the tax rate in the system.")),1)]),_:1},8,["label"]),r($e,{type:"primary",onClick:K},{default:c(()=>[O(v(g(p)("Save")),1)]),_:1})]),_:1},8,["model"])]),_:1}))]),_:1}),r(oe,null,{default:c(()=>[r(de,{title:g(p)("Regional settings"),text:g(p)("Regions you're collecting in")},null,8,["title","text"]),r(ae,null,{default:c(()=>[d("div",Qie,[n.value?(f(),U(Bie,{key:0})):(f(),U(ge,{key:1,data:a.value},{default:c(()=>[r(Ue,{label:g(p)("Tax Label"),width:"150"},{default:c(({row:Ae})=>[Ae.isEditing?(f(),U(Se,{key:0,modelValue:Ae.name,"onUpdate:modelValue":xe=>Ae.name=xe,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(f(),y("span",Die,v(Ae.name||"-"),1))]),_:1},8,["label"]),Y("city")?(f(),U(Ue,{key:0,label:g(p)("City"),width:"100"},{default:c(({row:Ae})=>[Ae.isEditing?(f(),U(Se,{key:0,modelValue:Ae.city,"onUpdate:modelValue":xe=>Ae.city=xe,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(f(),y("span",Mie,v(Ae.city||"-"),1))]),_:1},8,["label"])):S("",!0),Y("state")?(f(),U(Ue,{key:1,label:g(p)("State"),width:"120"},{default:c(({row:Ae})=>[Ae.isEditing&&h.value.length>0?(f(),U(Qe,{key:0,modelValue:Ae.state,"onUpdate:modelValue":xe=>Ae.state=xe,size:"small",filterable:""},{default:c(()=>[(f(!0),y(P,null,j(h.value,xe=>(f(),U(Te,{key:xe.value,label:xe.name,value:xe.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):S("",!0),Ae.isEditing&&h.value.length===0?(f(),U(Se,{key:1,modelValue:Ae.state,"onUpdate:modelValue":xe=>Ae.state=xe,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):Ae.isEditing?S("",!0):(f(),y("span",Iie,v(Ae.formatted_state||"-"),1))]),_:1},8,["label"])):S("",!0),Y("zip")?(f(),U(Ue,{key:2,label:g(p)("Postcode")},{default:c(({row:Ae})=>[Ae.isEditing?(f(),U(Se,{key:0,modelValue:Ae.postcode,"onUpdate:modelValue":xe=>Ae.postcode=xe,size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(f(),y("span",Tie,v(Ae.postcode||"-"),1))]),_:1},8,["label"])):S("",!0),r(Ue,{label:g(p)("Rate (%)")},{default:c(({row:Ae})=>[Ae.isEditing?(f(),U(Se,{key:0,modelValue:Ae.rate,"onUpdate:modelValue":xe=>Ae.rate=xe,size:"small",type:"number"},null,8,["modelValue","onUpdate:modelValue"])):(f(),y("span",$ie,v(Ae.rate||"-"),1))]),_:1},8,["label"]),r(Ue,{label:g(p)("Tax Class"),width:"130"},{default:c(({row:Ae})=>{var xe;return[Ae.isEditing?(f(),U(Qe,{key:0,modelValue:Ae.tax_class.id,"onUpdate:modelValue":Ve=>Ae.tax_class.id=Ve,size:"small",filterable:"",placement:"bottom"},{default:c(()=>[(f(!0),y(P,null,j(i.value,Ve=>(f(),U(Te,{key:Ve.id,label:Ve.title,value:Ve.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(f(),y("span",Oie,v(((xe=Ae.tax_class)==null?void 0:xe.title)||"-"),1))]}),_:1},8,["label"]),r(Ue,{label:g(p)("Compound"),width:"100"},{default:c(({row:Ae})=>[Ae.isEditing?(f(),U(Ee,{key:0,modelValue:Ae.is_compound,"onUpdate:modelValue":xe=>Ae.is_compound=xe,"active-value":"1","inactive-value":"0"},null,8,["modelValue","onUpdate:modelValue"])):(f(),y("span",Lie,v(Ae.is_compound>0?g(p)("Yes"):g(p)("No")),1))]),_:1},8,["label"]),r(Ue,{label:g(p)("Priority"),width:"100"},{default:c(({row:Ae})=>[Ae.isEditing?(f(),U(Ze,{key:0,modelValue:Ae.priority,"onUpdate:modelValue":xe=>Ae.priority=xe,size:"small",min:1},null,8,["modelValue","onUpdate:modelValue"])):(f(),y("span",Vie,v(Ae.priority),1))]),_:1},8,["label"]),r(Ue,{fixed:"right",width:"100",label:"Actions"},{default:c(({row:Ae,$index:xe})=>[d("div",Rie,[Ae.isEditing?(f(),y(P,{key:0},[r(we,{size:"small",tag:"span",onClick:Ve=>L(Ae,xe),class:"text-green-500"},{default:c(()=>[r(G,{name:"Check"})]),_:2},1032,["onClick"]),r(we,{size:"small",tag:"span",onClick:Ve=>N(Ae,xe),class:"text-red-500"},{default:c(()=>[r(G,{name:"Close"})]),_:2},1032,["onClick"])],64)):(f(),y(P,{key:1},[r(we,{size:"small",tag:"span",onClick:()=>{Ae.isEditing=!0}},{default:c(()=>[r(G,{name:"Edit"})]),_:2},1032,["onClick"]),r(ue,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:$},{dropdown:c(()=>[r(Ge,null,{default:c(()=>[r(mt,{command:{action:"delete",taxClass:Ae},class:"item-destructive"},{default:c(()=>[r(G,{name:"Delete"}),O(" "+v(g(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:c(()=>[r(we,{size:"small",tag:"span"},{default:c(()=>[r(G,{name:"More",class:"w-4 h-4"})]),_:1})]),_:2},1024)],64))])]),_:1})]),_:1},8,["data"])),d("div",Hie,[r($e,{type:"info",soft:"",plain:"",size:"small",onClick:M},{default:c(()=>[r(G,{name:"Plus",class:"w-5 h-5 items-center justify-center"}),O(" "+v(g(p)("Add New Rate")),1)]),_:1})])])]),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(de,{title:g(p)("Shipping Tax Overrides")+" ("+t.country+")",text:g(p)("You can specify shipping tax rates.")},{action:c(()=>[r($e,{type:"primary",onClick:k},{default:c(()=>H[4]||(H[4]=[O("Add Tax Override",-1)])),_:1,__:[4]})]),_:1},8,["title","text"]),r(ae,null,{default:c(()=>[d("div",Pie,[r(ge,{data:s.value},{default:c(()=>[r(Ue,{label:g(p)("Tax Label")},{default:c(({row:Ae})=>[O(v(Ae.name),1)]),_:1},8,["label"]),r(Ue,{label:g(p)("Shipping Tax Rate (%)")},{default:c(({row:Ae})=>[O(v(Ae.for_shipping),1)]),_:1},8,["label"]),r(Ue,{label:g(p)("Actions"),width:"100"},{default:c(({row:Ae})=>[d("div",Nie,[r(we,{size:"small",tag:"span",onClick:xe=>F(Ae)},{default:c(()=>[r(G,{name:"Edit"})]),_:2},1032,["onClick"]),r(we,{size:"small",tag:"span",onClick:xe=>x(Ae)},{default:c(()=>[r(G,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1},8,["label"])]),_:1},8,["data"])])]),_:1})]),_:1}),r(Oe,{modelValue:B.value,"onUpdate:modelValue":H[3]||(H[3]=Ae=>B.value=Ae),title:g(p)("Add Tax Override")},{default:c(()=>[r(pe,{"label-position":"top",model:w.value},{default:c(()=>[r(se,{label:g(p)("Regions")},{default:c(()=>[r(Qe,{modelValue:w.value.id,"onUpdate:modelValue":H[1]||(H[1]=Ae=>w.value.id=Ae),size:"small"},{default:c(()=>[(f(!0),y(P,null,j(b.value,Ae=>(f(),U(Te,{key:Ae.value,label:Ae.name,value:Ae.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),r(se,{label:g(p)("Tax Rate (%)")},{default:c(()=>[r(Se,{modelValue:w.value.tax_rate,"onUpdate:modelValue":H[2]||(H[2]=Ae=>w.value.tax_rate=Ae),size:"small"},null,8,["modelValue"])]),_:1},8,["label"]),r($e,{type:"primary",onClick:E},{default:c(()=>[O(v(g(p)("Save")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])])])}}};class Kie extends lo{getTabs(){return{all:p("All"),filed:p("Filed"),not_filed:p("Not Filed")}}getToggleableColumns(){return[{label:"ID",value:"id"},{label:"Order ID",value:"order_id"},{label:"Zip Code",value:"postcode"},{label:"Tax Rate",value:"rate"},{label:"Filed",value:"filed_at"}]}getSortableColumns(){return[{label:p("ID"),value:"id"},{label:p("Tax Country"),value:"country"}]}getSearchHint(){return p("Search by id, title, content or module.")}getFetchUrl(){return"taxes"}parseResponse(e){return e.taxes}getTableName(){return"taxes_table"}getAdvanceFilterOptions(){return be.get(window,"fluentCartAdminApp.filter_options.tax_filter_options.advance")}getSearchGuideOptions(){return[]}with(){return["tax_rate"]}scopes(){return["validOrder"]}}function zie(t){return Kie.init(t)}const Gie=t=>t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),jie=t=>{const e=Object.keys(t[0]),s=[e.map(Gie).join(",")];return t.forEach(n=>{const o=e.map(i=>{let l=n[i];return typeof l=="object"&&(l=JSON.stringify(l)),typeof l=="string"&&(l=`"${l.replace(/"/g,'""')}"`),l});s.push(o.join(","))}),s.join(`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!o&&!!s.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=F,u.ParserHandle=w,u.NetworkStreamer=m,u.FileStreamer=_,u.StringStreamer=B,u.ReadableStreamStreamer=b,s.jQuery&&((n=s.jQuery).fn.parse=function(Q){var I=Q.config||{},L=[];return this.each(function(Y){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var K=0;K<this.files.length;K++)L.push({file:this.files[K],inputElem:this,instanceConfig:n.extend({},I)})}),V(),this;function V(){if(L.length===0)$(Q.complete)&&Q.complete();else{var Y,K,X,re,ce=L[0];if($(Q.before)){var Z=Q.before(ce.file,ce.inputElem);if(typeof Z=="object"){if(Z.action==="abort")return Y="AbortError",K=ce.file,X=ce.inputElem,re=Z.reason,void($(Q.error)&&Q.error({name:Y},K,X,re));if(Z.action==="skip")return void N();typeof Z.config=="object"&&(ce.instanceConfig=n.extend(ce.instanceConfig,Z.config))}else if(Z==="skip")return void N()}var H=ce.instanceConfig.complete;ce.instanceConfig.complete=function(z){$(H)&&H(z,ce.file,ce.inputElem),N()},u.parse(ce.file,ce.instanceConfig)}}function N(){L.splice(0,1),V()}}),i&&(s.onmessage=function(Q){Q=Q.data,u.WORKER_ID===void 0&&Q&&(u.WORKER_ID=Q.workerId),typeof Q.input=="string"?s.postMessage({workerId:u.WORKER_ID,results:u.parse(Q.input,Q.config),finished:!0}):(s.File&&Q.input instanceof File||Q.input instanceof Object)&&(Q=u.parse(Q.input,Q.config))&&s.postMessage({workerId:u.WORKER_ID,results:Q,finished:!0})}),(m.prototype=Object.create(h.prototype)).constructor=m,(_.prototype=Object.create(h.prototype)).constructor=_,(B.prototype=Object.create(B.prototype)).constructor=B,(b.prototype=Object.create(h.prototype)).constructor=b,u})}(Mr)),Mr.exports}_Ae();const vAe={class:"setting-wrap"},bAe={class:"fc-all-tax-classes-page"},yAe={class:"fc-tax-rates-wrap"},wAe={class:"p-4 bg-gray-50 rounded-lg"},CAe={key:0,class:"p-4 bg-gray-50 rounded-lg"},BAe={class:"text-sm font-medium text-gray-700 flex items-center gap-1 mb-3"},kAe={key:0},xAe={key:0},FAe={key:0},SAe={class:"rounded-md p-4 border border-solid border-gray-divider bg-white"},EAe={key:0,src:"https://flagcdn.com/w40/eu.png",alt:"EU Flag",class:"w-6 rounded-sm mr-2"},UAe={class:"mt-3 pl-10"},QAe={class:"font-medium"},DAe={key:0},MAe={class:"mt-3 flex justify-end gap-2"},IAe={class:"rounded-md p-4 border border-solid border-gray-divider bg-white mt-4"},TAe={class:"p-4"},$Ae={key:0,class:"text-center py-4"},OAe={key:1},LAe={class:"flex items-center justify-between w-full pr-4"},VAe={class:"flex items-center gap-2"},RAe=["src","alt"],HAe={class:"font-medium"},PAe={class:"text-sm text-gray-600"},NAe={class:"p-3 bg-gray-50 rounded"},KAe={key:0,class:"space-y-2"},zAe={class:"flex items-center gap-2"},GAe={class:"text-sm font-medium"},jAe={key:0,class:"text-xs text-gray-500"},YAe={class:"text-sm font-medium text-blue-600"},WAe={key:1,class:"text-sm text-gray-500 text-center py-2"},qAe={key:2,class:"text-gray-500 text-center py-4"},XAe={class:"rounded-md p-6 border border-solid border-gray-divider bg-white mt-4"},JAe={class:"flex items-start justify-between mb-6"},ZAe={class:"flex-shrink-0"},ece={key:0},tce={class:"flex items-center gap-2"},ace=["src","alt"],sce={class:"fc-tax-rates-country-modal-actions flex items-center gap-2"},nce={key:1,class:"text-sm text-gray-500 text-center py-4"},oce={key:0,class:"rounded-md p-4 border border-solid border-gray-divider bg-white mt-4"},ice={class:"flex items-center justify-between mb-3"},rce={key:0},lce={class:"flex items-center gap-2"},Ace=["src","alt"],cce={key:0},dce={key:0},uce={key:1},fce={class:"fc-tax-rates-country-modal-actions flex items-center gap-2"},hce={key:1,class:"text-sm text-gray-500 text-center py-4"},pce={key:1,class:"rounded-md p-4 border border-solid border-gray-divider bg-white"},mce={class:"ml-3 text-gray-600"},gce={class:"mt-3 pl-10"},_ce={class:"font-medium"},vce={key:0},bce={class:"mt-3 flex justify-end gap-2"},yce={key:2,class:"rounded-md p-4 border border-solid border-gray-divider bg-white"},wce={class:"ml-3 text-xs text-gray-600"},Cce={class:"mt-3 flex justify-end gap-2"},Bce={key:1},kce={class:"rounded-md p-4 mb-2 border border-solid border-gray-divider bg-white"},xce={class:"rounded-md p-4 mb-2 border border-solid border-gray-divider bg-white"},Fce={class:"rounded-md p-4 mb-2 border border-solid border-gray-divider bg-white"},Sce={class:"mt-3 flex justify-end"},Ece={key:1,class:"mt-4"},Uce={class:"flex items-center mb-3"},Qce={class:"ml-3 text-sm text-gray-700"},Dce={class:"flex justify-end gap-2 mt-3"},Mce={key:2,class:"mt-4"},Ice={class:"flex items-center mb-3"},Tce={key:0,class:"mt-3 p-2 text-xs text-gray-600"},$ce={key:1,class:"mt-3 text-xs text-gray-600"},Oce={key:2,class:"mt-4 border border-gray-200 rounded"},Lce={class:"divide-y"},Vce=["onClick"],Rce={class:"flex items-center gap-2"},Hce=["src"],Pce={class:"text-gray-800"},Nce={class:"flex items-center gap-2"},Kce={class:"text-xs text-gray-600"},zce={label:"EUVatSettings",data(){return{showInlineConfig:!1,upcomingFeature:!1,showSelectionEditor:!1,ossOverrides:[],activeCollapse:!1,activeCountryCollapse:[],ossCountryRates:[],ossCountryRatesLoading:!1,showAddOssTaxOverrideModal:!1,ossProvinces:[],ossTaxOverrideForm:{country_code:"",tax_classes:[]},selectedCountryTaxClasses:[],selectedMethod:"",countryWiseVatSettings:{},settings:{},countryWiseEUvatForm:{registration_country:"",vat_number:""},crossBorderForm:{method:"",oss_country:"",oss_vat:"",home_country:"",home_vat:""},crossBorderRules:{},countries:fluentCartAdminApp.eu_vat_county_options,euRatesSummary:{totalCountries:0,totalRates:0},euRatesLoading:!1,euCountries:[],shippingOverrides:[],taxOverrides:[],overrideModalTitle:"Add OSS Tax Override",overrideMode:"tax"}},methods:{fetchEuTaxRates(){this.euRatesLoading=!0,ne.get("tax/configuration/settings/eu-vat/rates").then(t=>{const a=Object.values((t==null?void 0:t.tax_rates)||{}).find(s=>s.group_code==="EU");if(a){const s=(a.countries||[]).length,n=(a.countries||[]).reduce((o,i)=>o+(i.total_rates||0),0);this.euRatesSummary={totalCountries:s,totalRates:n},this.euCountries=a.countries||[],this.filterCountriesByShippingOverrides()}else this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).catch(()=>{this.euRatesSummary={totalCountries:0,totalRates:0},this.euCountries=[],this.shippingOverrides=[],this.taxOverrides=[]}).finally(()=>{this.euRatesLoading=!1})},filterCountriesByShippingOverrides(){this.shippingOverrides=this.euCountries.filter(t=>t.rates&&t.rates.some(e=>e.for_shipping>0)),this.taxOverrides=this.euCountries.filter(t=>!t.rates||!t.rates.some(e=>e.for_shipping>0))},changeRegistration(){Gt("Are you sure you want to change the registration? This will reset the current registration and you will need to configure it again.","Confirm Change!",{confirmButtonText:"Yes, Change!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.resetRegistration()})},resetRegistration(){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"},reset_registration:"yes"}).then(t=>{this.handleSuccess(t.message),this.getTaxSettings(),this.showSelectionEditor=!0}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},fetchOssOverrides(){},fetchOssCountryRates(){this.ossCountryRatesLoading=!0,this.$get("tax/configuration/rates",{}).then(t=>{var e,a;this.ossCountryRates=((a=(e=t==null?void 0:t.tax_rates)==null?void 0:e.EU)==null?void 0:a.countries)??[]}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)}).finally(()=>{this.ossCountryRatesLoading=!1})},handleCollapseChange(t){t.includes("1")&&this.ossCountryRates.length===0&&this.fetchOssCountryRates()},refreshSettings(){this.getTaxSettings(),this.fetchEuTaxRates()},manageCountryTaxRates(t){this.$router.push({name:"eu_country_tax_rates",params:{country:t,group:"EU"}})},getTaxSettings(){this.$get("tax/configuration/settings").then(t=>{var a;this.settings=t.settings;const e=((a=this.settings)==null?void 0:a.eu_vat_settings)||{};this.crossBorderForm.method=(e==null?void 0:e.method)||"",this.crossBorderForm.oss_country=(e==null?void 0:e.oss_country)||"",this.crossBorderForm.oss_vat=(e==null?void 0:e.oss_vat)||"",this.crossBorderForm.home_country=(e==null?void 0:e.home_country)||"",this.crossBorderForm.home_vat=(e==null?void 0:e.home_vat)||"",this.countryWiseVatSettings=(e==null?void 0:e.country_wise_vat)||{},["oss","home","specific"].includes(this.crossBorderForm.method)?(this.selectedMethod=this.crossBorderForm.method,this.crossBorderForm.method==="oss"&&this.fetchOssOverrides()):Object.keys(this.countryWiseVatSettings||{}).length>0?this.selectedMethod="specific":this.selectedMethod=""}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},handleContinueSelection(){if(this.selectedMethod==="specific"){this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:{method:"specific"}}).then(t=>{this.getTaxSettings(),this.showInlineConfig=!0,this.fetchEuTaxRates(),this.handleSuccess(t.message)}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)});return}if(this.selectedMethod==="oss"||this.selectedMethod==="home"){this.crossBorderForm.method=this.selectedMethod,this.showInlineConfig=!0;return}},proceedWithCurrentSelection(){if(this.selectedMethod==="specific"){this.showInlineConfig=!0;return}(this.selectedMethod==="oss"||this.selectedMethod==="home")&&(this.crossBorderForm.method=this.selectedMethod,this.showInlineConfig=!0)},cancelInlineConfig(){this.showInlineConfig=!1},handleCollectCrossBorder(){this.$refs.crossBorderFormRef.validate(t=>{t&&this.$post("tax/configuration/settings/eu-vat",{action:"euCrossBorderSettings",eu_vat_settings:this.crossBorderForm}).then(e=>{this.getTaxSettings(),this.showInlineConfig=!1,this.showSelectionEditor=!1,this.handleSuccess(e.message)}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})})},saveCountryWiseVatSettings(){this.$post("tax/configuration/settings/eu-vat",{action:"countryWiseEUvat",country_wise_vat_settings:this.countryWiseEUvatForm}).then(t=>{this.getTaxSettings(),this.handleSuccess(t.message),this.showInlineConfig=!1,this.showSelectionEditor=!1}).catch(t=>{var e;this.handleError((e=t==null?void 0:t.data)==null?void 0:e.message)})},deleteCountryTaxRate(t){Gt("Are you sure you want to delete this tax rate?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$del("tax/country/"+t).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},addNewOssTaxOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add custom rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},addShippingOverride(){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[]},editOssTaxOverride(t){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Edit Custom Rate",this.overrideMode="tax",this.ossTaxOverrideForm={country_code:t.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],t.country_code&&this.onCountryChange(t.country_code)},editOssShippingTaxOverride(t){this.showAddOssTaxOverrideModal=!0,this.overrideModalTitle="Add Shipping Override",this.overrideMode="shipping",this.ossTaxOverrideForm={country_code:t.country_code||"",tax_classes:[]},this.selectedCountryTaxClasses=[],t.country_code&&this.onShippingCountryChange(t.country_code)},onCountryChange(t){if(!t){this.selectedCountryTaxClasses=[];return}if(this.overrideMode=="shipping")this.onShippingCountryChange(t);else{this.ossTaxOverrideForm.country_code=t;const e=this.ossCountryRates.find(s=>s.country_code===t);if(!e||!e.rates){this.selectedCountryTaxClasses=[];return}const a=this.euCountries.find(s=>s.country_code===t);this.selectedCountryTaxClasses=e.rates.map(s=>{let n="";if(a&&a.rates){const o=a.rates.find(i=>i.name===s.type);o&&(n=o.rate||"")}return{type:s.type,rate:s.rate,state:s.state,override_rate:n,enabled:!1}})}},onShippingCountryChange(t){this.ossTaxOverrideForm.country_code=t;const e=this.ossCountryRates.find(s=>s.country_code===t);if(!e||!e.rates){this.selectedCountryTaxClasses=[];return}const a=this.shippingOverrides.find(s=>s.country_code===t);this.selectedCountryTaxClasses=e.rates.map(s=>{let n="";if(a&&a.rates){const o=a.rates.find(i=>i.name===s.type);o&&(n=o.for_shipping||"")}return{type:s.type,rate:s.rate,state:s.state,for_shipping:n,enabled:!1}})},deleteOssTaxOverride(t){Gt("Are you sure you want to delete this tax override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{ne.delete("tax/configuration/settings/eu-vat/oss/override",{country:t.country_code,state:t.state}).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},deleteOssShippingOverride(t){Gt("Are you sure you want to delete this shipping override?","Confirm Delete!",{confirmButtonText:"Yes, Delete!",cancelButtonText:"Cancel",type:"warning"}).then(()=>{ne.delete("tax/configuration/settings/eu-vat/oss/shipping-override",{country:t.country_code,state:t.state}).then(e=>{this.handleSuccess(e.message),this.fetchEuTaxRates()}).catch(e=>{var a;console.error("Delete error:",e),this.handleError((a=e==null?void 0:e.data)==null?void 0:a.message)})}).catch(()=>{})},saveOssTaxOverride(){if(this.overrideMode=="shipping")this.saveOssShippingOverride();else{const t=this.selectedCountryTaxClasses.filter(a=>a.override_rate!=="").map(a=>({type:a.type,rate:parseFloat(a.override_rate)}));if(t.length===0){this.handleError("Please enable at least one tax class override");return}ne.post("tax/configuration/settings/eu-vat/oss/override",{country_code:this.ossTaxOverrideForm.country_code,overrides:t}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})}},saveOssShippingOverride(){const t=this.selectedCountryTaxClasses.filter(a=>a.for_shipping!=="").map(a=>({type:a.type,for_shipping:parseInt(a.for_shipping),rate:a.rate}));if(t.length===0){this.handleError("Please enable at least one tax class override");return}ne.post("tax/configuration/settings/eu-vat/oss/shipping-override",{country_code:this.ossTaxOverrideForm.country_code,overrides:t}).then(a=>{this.handleSuccess(a.message),this.showAddOssTaxOverrideModal=!1,this.ossTaxOverrideForm={country_code:"",tax_classes:[]},this.selectedCountryTaxClasses=[],this.fetchEuTaxRates()}).catch(a=>{var s;this.handleError((s=a==null?void 0:a.data)==null?void 0:s.message)})}},computed:{hasExistingSelection(){var a,s,n,o,i,l;const t=((s=(a=this.settings)==null?void 0:a.eu_vat_settings)==null?void 0:s.method)==="oss"||((o=(n=this.settings)==null?void 0:n.eu_vat_settings)==null?void 0:o.method)==="home"||((l=(i=this.settings)==null?void 0:i.eu_vat_settings)==null?void 0:l.method)==="specific",e=Object.keys(this.countryWiseVatSettings||{}).length>0;return t||e},crossBorderSummary(){var i;const t=((i=this.settings)==null?void 0:i.eu_vat_settings)||{},e=t.method;if(!e)return null;const a=e==="oss"?t.oss_country:t.home_country,s=e==="oss"?t.oss_vat:t.home_vat,n=e==="oss"?"OSS":"Home Registration";let o=a;if(a&&Array.isArray(this.countries)){const l=this.countries.find(A=>A.value===a);l&&(o=l.label)}return{methodLabel:n,country:o||"—",vat:s||""}},configuredSpecificCountriesCount(){const t=Object.keys(this.countryWiseVatSettings||{});return t.length?t.length:Array.isArray(this.euCountries)&&this.euCountries.length?this.euCountries.filter(e=>(e.total_rates||0)>0).length:0},selectedCountryName(){if(!this.ossTaxOverrideForm.country_code)return"";const t=this.euCountries.find(e=>e.country_code===this.ossTaxOverrideForm.country_code);return t?t.country_name:""},hasValidOverrides(){return this.selectedCountryTaxClasses.some(t=>t.override_rate!=="")}},created(){this.crossBorderRules={method:[{required:!0,message:"Select a cross-border registration type",trigger:"change"}],oss_country:[{validator:(t,e,a)=>{this.crossBorderForm.method==="oss"&&!e?a(new Error("Select country of OSS registration")):a()},trigger:"change"}],home_country:[{validator:(t,e,a)=>{this.crossBorderForm.method==="home"&&!e?a(new Error("Select home country of registration")):a()},trigger:"change"}]}},mounted(){this.getTaxSettings(),this.fetchEuTaxRates(),this.fetchOssCountryRates()}},Gce=Object.assign(zce,{__name:"EUVatSettingsOld",setup(t){return(e,a)=>{const s=C("InfoFilled"),n=C("el-icon"),o=C("el-tooltip"),i=C("el-button"),l=C("el-collapse-item"),A=C("el-collapse"),u=C("el-table-column"),h=C("el-table"),m=C("el-radio"),_=C("el-radio-group"),B=C("el-option"),b=C("el-select"),w=C("el-form-item"),k=C("el-col"),F=C("el-input"),x=C("el-row"),E=C("el-form"),M=C("el-card");return f(),y("div",vAe,[d("div",bAe,[r(oe,null,{default:c(()=>[r(de,{title:g(p)("Tax Settings / EU"),text:g(p)("")},null,8,["title","text"]),r(ae,null,{default:c(()=>[d("div",yAe,[a[42]||(a[42]=d("div",null,[d("p",{class:"text-gray-500 text-sm"}," VAT collection ")],-1)),d("div",wAe,[e.showInlineConfig?S("",!0):(f(),y("div",CAe,[d("div",BAe,[e.hasExistingSelection?S("",!0):(f(),y("p",kAe,"Choose how you collect VAT in the EU")),r(o,{content:"Select a collection method, then continue to configure it",placement:"top"},{default:c(()=>[r(n,null,{default:c(()=>[r(s)]),_:1})]),_:1}),e.hasExistingSelection&&!e.showSelectionEditor?(f(),U(i,{key:1,type:"primary",link:"",class:"ml-auto",onClick:e.changeRegistration,plain:""},{default:c(()=>a[9]||(a[9]=[O("Change Registration",-1)])),_:1,__:[9]},8,["onClick"])):S("",!0)]),e.hasExistingSelection&&!e.showSelectionEditor?(f(),y("div",xAe,[e.selectedMethod==="oss"?(f(),y("div",FAe,[d("div",SAe,[e.selectedMethod==="oss"||e.selectedMethod==="home"?(f(),y("img",EAe)):S("",!0),a[11]||(a[11]=d("span",{class:"text-gray-800 font-medium"}," Using One-Stop Shop (OSS) registration ",-1)),d("div",UAe,[d("span",QAe,v(e.crossBorderSummary.methodLabel)+":",1),O(" "+v(e.crossBorderSummary.country)+" ",1),e.crossBorderSummary.vat?(f(),y("span",DAe," - VAT "+v(e.crossBorderSummary.vat),1)):S("",!0)]),d("div",MAe,[r(i,{type:"primary",link:"",onClick:e.proceedWithCurrentSelection},{default:c(()=>a[10]||(a[10]=[O("Edit",-1)])),_:1,__:[10]},8,["onClick"])])]),d("div",IAe,[d("div",null,[a[13]||(a[13]=d("h3",{class:"mt-3"},"country rates",-1)),r(A,{modelValue:e.activeCollapse,"onUpdate:modelValue":a[1]||(a[1]=D=>e.activeCollapse=D),onChange:e.handleCollapseChange},{default:c(()=>[r(l,{title:"Collecting in 27 regions",name:"1"},{default:c(()=>[d("div",TAe,[e.ossCountryRatesLoading?(f(),y("div",$Ae,[r(n,{class:"is-loading"},{default:c(()=>[r(g($r))]),_:1}),a[12]||(a[12]=d("span",{class:"ml-2"},"Loading EU tax rates...",-1))])):e.ossCountryRates.length>0?(f(),y("div",OAe,[r(A,{modelValue:e.activeCountryCollapse,"onUpdate:modelValue":a[0]||(a[0]=D=>e.activeCountryCollapse=D),accordion:""},{default:c(()=>[(f(!0),y(P,null,j(e.ossCountryRates,(D,R)=>(f(),U(l,{key:R,name:`country-${R}`},{title:c(()=>[d("div",LAe,[d("div",VAe,[d("img",{class:"w-5 h-5",src:`https://flagcdn.com/w40/${D.country_code.toLowerCase()}.png`,alt:D.country_code},null,8,RAe),d("span",HAe,v(D.country_name),1)]),d("div",PAe," Total Rates: "+v(D.total_rates),1)])]),default:c(()=>[d("div",NAe,[D.rates&&D.rates.length>0?(f(),y("div",KAe,[(f(!0),y(P,null,j(D.rates,($,Q)=>(f(),y("div",{key:Q,class:"flex items-center justify-between px-4 py-1 border border-gray-200 rounded"},[d("div",zAe,[d("span",GAe,v($.type),1),$.tax_class?(f(),y("span",jAe,"("+v($.tax_class)+")",1)):S("",!0)]),d("div",YAe,v($.rate)+"% ",1)]))),128))])):(f(),y("div",WAe," No individual rates available "))])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])):(f(),y("div",qAe," No EU tax rates found "))])]),_:1})]),_:1},8,["modelValue","onChange"])])]),d("div",XAe,[d("div",JAe,[a[15]||(a[15]=d("div",{class:"flex-1 pr-6"},[d("h3",{class:"text-sm font-semibold text-gray-800 mb-2"},"Custom VAT Rates"),d("p",{class:"text-sm text-gray-600 leading-relaxed"},"Custom rates will override the default VAT rates for specific countries, giving you precise control over tax collection.")],-1)),d("div",ZAe,[r(i,{type:"primary",size:"small",class:"px-6 py-2 font-medium shadow-sm hover:shadow-md transition-shadow",onClick:e.addNewOssTaxOverride},{default:c(()=>a[14]||(a[14]=[O(" Add Custom Rate ",-1)])),_:1,__:[14]},8,["onClick"])])]),e.taxOverrides.length>0?(f(),y("div",ece,[r(h,{data:e.taxOverrides,size:"small"},{default:c(()=>[r(u,{label:"Country"},{default:c(({row:D})=>[d("div",tce,[d("img",{class:"w-5 h-5",src:`https://flagcdn.com/w40/${D.country_code.toLowerCase()}.png`,alt:D.country_code},null,8,ace),d("span",null,v(D.country_name),1)])]),_:1}),r(u,{label:"Total Rates"},{default:c(({row:D})=>[O(v(D.total_rates)+" rates ",1)]),_:1}),r(u,{label:"Actions",width:"100"},{default:c(({row:D})=>[d("div",sce,[r(we,{size:"small",tag:"span",onClick:R=>e.editOssTaxOverride(D)},{default:c(()=>[r(G,{name:"Edit"})]),_:2},1032,["onClick"]),r(we,{size:"small",tag:"span",onClick:R=>e.deleteOssTaxOverride(D)},{default:c(()=>[r(G,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])):(f(),y("div",nce," No Custom VAT rates configured "))]),e.upcomingFeature?(f(),y("div",oce,[d("div",ice,[a[17]||(a[17]=d("h3",{class:"text-sm font-medium text-gray-700"},"Shipping Overrides",-1)),r(i,{type:"primary",size:"small",onClick:e.addShippingOverride},{default:c(()=>a[16]||(a[16]=[O("Add Shipping Override",-1)])),_:1,__:[16]},8,["onClick"])]),e.shippingOverrides.length>0?(f(),y("div",rce,[r(h,{data:e.shippingOverrides,size:"small"},{default:c(()=>[r(u,{label:"Country"},{default:c(({row:D})=>[d("div",lce,[d("img",{class:"w-5",src:`https://flagcdn.com/w40/${D.country_code.toLowerCase()}.png`,alt:D.country_code},null,8,Ace),d("span",null,v(D.country_name),1)])]),_:1}),r(u,{label:"Shipping Rate"},{default:c(({row:D})=>[D.rates&&D.rates.length>0?(f(),y("span",cce,[(f(!0),y(P,null,j(D.rates.filter(R=>R.for_shipping>0),(R,$)=>(f(),y("span",{key:$},[O(v(R.for_shipping)+"%",1),$<D.rates.filter(Q=>Q.for_shipping>0).length-1?(f(),y("span",dce,", ")):S("",!0)]))),128))])):(f(),y("span",uce,"No shipping rates"))]),_:1}),r(u,{label:"Actions",width:"100"},{default:c(({row:D})=>[d("div",fce,[r(we,{size:"small",tag:"span",onClick:R=>e.editOssShippingTaxOverride(D)},{default:c(()=>[r(G,{name:"Edit"})]),_:2},1032,["onClick"]),r(we,{size:"small",tag:"span",onClick:R=>e.deleteOssShippingOverride(D)},{default:c(()=>[r(G,{name:"Delete"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])):(f(),y("div",hce," No OSS shipping overrides configured "))])):S("",!0)])):e.selectedMethod==="home"?(f(),y("div",pce,[d("div",mce,[a[19]||(a[19]=d("div",{class:"flex items-center gap-2"},[d("img",{src:"https://flagcdn.com/w40/eu.png",alt:"EU Flag",class:"w-6 rounded-sm mr-2"}),d("span",{class:"text-gray-800 font-bold"}," Using home country registration a single EU VAT number for all EU countries. ")],-1)),d("div",gce,[d("span",_ce,v(e.crossBorderSummary.methodLabel)+":",1),O(" "+v(e.crossBorderSummary.country)+" ",1),e.crossBorderSummary.vat?(f(),y("span",vce," - VAT "+v(e.crossBorderSummary.vat),1)):S("",!0)]),d("div",bce,[r(i,{type:"primary",link:"",onClick:e.proceedWithCurrentSelection},{default:c(()=>a[18]||(a[18]=[O("Edit",-1)])),_:1,__:[18]},8,["onClick"])])])])):e.selectedMethod==="specific"?(f(),y("div",yce,[d("div",wce,[d("div",null,[O(v(e.configuredSpecificCountriesCount)+" country(ies) configured ",1),a[20]||(a[20]=d("br",null,null,-1)),a[21]||(a[21]=d("p",null,"Specific EU country rates selected.",-1))]),d("div",Cce,[r(i,{type:"primary",link:"",onClick:e.proceedWithCurrentSelection},{default:c(()=>a[22]||(a[22]=[O("Edit",-1)])),_:1,__:[22]},8,["onClick"])])])])):S("",!0)])):(f(),y("div",Bce,[r(_,{modelValue:e.selectedMethod,"onUpdate:modelValue":a[2]||(a[2]=D=>e.selectedMethod=D),class:"block"},{default:c(()=>[d("div",kce,[r(m,{label:"oss"},{default:c(()=>a[23]||(a[23]=[O("Collect using a One Stop Shop (OSS) registration",-1)])),_:1,__:[23]}),a[24]||(a[24]=d("p",{class:"text-gray-500 text-xs mt-1"},"Select this option if you have a single EU VAT number for all EU countries.",-1))]),d("div",xce,[r(m,{label:"home"},{default:c(()=>a[25]||(a[25]=[O("Collect using your home country registration",-1)])),_:1,__:[25]}),a[26]||(a[26]=d("p",{class:"text-gray-500 text-xs mt-1"},"Applies to micro-businesses located in one EU country making less than €10,000 in cross-border EU sales yearly.",-1))]),d("div",Fce,[r(m,{label:"specific"},{default:c(()=>a[27]||(a[27]=[O("Collect specific country rate",-1)])),_:1,__:[27]}),a[28]||(a[28]=d("p",{class:"text-gray-500 text-xs mt-1"},"Select this option if you want to collect VAT for specific EU countries.",-1))])]),_:1},8,["modelValue"]),d("div",Sce,[e.hasExistingSelection?(f(),U(i,{key:0,onClick:a[3]||(a[3]=D=>e.showSelectionEditor=!1),plain:""},{default:c(()=>a[29]||(a[29]=[O("Cancel",-1)])),_:1,__:[29]})):S("",!0),e.selectedMethod!==""?(f(),U(i,{key:1,type:"primary",onClick:e.handleContinueSelection},{default:c(()=>a[30]||(a[30]=[O("Next",-1)])),_:1,__:[30]},8,["onClick"])):S("",!0)])]))])),e.showInlineConfig&&(e.selectedMethod==="oss"||e.selectedMethod==="home")?(f(),y("div",Ece,[r(M,{shadow:"never",class:"p-4 rounded-md"},{default:c(()=>[d("div",Uce,[r(i,{size:"small",onClick:e.cancelInlineConfig,plain:""},{default:c(()=>a[31]||(a[31]=[O("Back",-1)])),_:1,__:[31]},8,["onClick"]),d("span",Qce,"Configure "+v(e.selectedMethod==="oss"?"OSS":"Home country")+" collection",1)]),d("pre",null,v(e.crossBorderForm),1),r(E,{ref:"crossBorderFormRef",model:e.crossBorderForm,rules:e.crossBorderRules,"label-position":"top",class:"space-y-4"},{default:c(()=>[d("div",null,[e.selectedMethod==="oss"?(f(),y("div",{key:0,shadow:"never",class:le([{"border-primary":e.crossBorderForm.method==="oss"},"rounded-md p-4 border border-solid border-gray-divider"])},[a[32]||(a[32]=d("div",{class:"font-medium mb-2"},"One Stop Shop (OSS)",-1)),r(x,{gutter:"20"},{default:c(()=>[r(k,{span:12},{default:c(()=>[r(w,{label:"Country of OSS registration",prop:"oss_country"},{default:c(()=>[r(b,{modelValue:e.crossBorderForm.oss_country,"onUpdate:modelValue":a[4]||(a[4]=D=>e.crossBorderForm.oss_country=D),placeholder:"Select country",filterable:""},{default:c(()=>[(f(!0),y(P,null,j(e.countries,D=>(f(),U(B,{key:D.value,label:D.label,value:D.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),r(k,{span:12},{default:c(()=>[r(w,{label:"VAT number"},{default:c(()=>[r(F,{modelValue:e.crossBorderForm.oss_vat,"onUpdate:modelValue":a[5]||(a[5]=D=>e.crossBorderForm.oss_vat=D),placeholder:"Shown on VAT invoice"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],2)):S("",!0),e.selectedMethod==="home"?(f(),y("div",{key:1,shadow:"never",class:le([{"border-primary":e.crossBorderForm.method==="home"},"rounded-md p-4 border border-solid border-gray-divider"])},[a[33]||(a[33]=d("div",{class:"font-medium mb-2"},"Home country registration",-1)),a[34]||(a[34]=d("p",{class:"text-gray-500 text-sm mt-1"},"Applies to micro-businesses located in one EU country and making less than €10,000 in sales to other EU countries each year",-1)),r(x,{gutter:"20",class:"mt-3"},{default:c(()=>[r(k,{span:12},{default:c(()=>[r(w,{label:"Country of registration",prop:"home_country"},{default:c(()=>[r(b,{modelValue:e.crossBorderForm.home_country,"onUpdate:modelValue":a[6]||(a[6]=D=>e.crossBorderForm.home_country=D),placeholder:"Select country",filterable:""},{default:c(()=>[(f(!0),y(P,null,j(e.countries,D=>(f(),U(B,{key:D.value,label:D.label,value:D.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),r(k,{span:12},{default:c(()=>[r(w,{label:"VAT number"},{default:c(()=>[r(F,{modelValue:e.crossBorderForm.home_vat,"onUpdate:modelValue":a[7]||(a[7]=D=>e.crossBorderForm.home_vat=D),placeholder:"Shown on VAT invoice"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],2)):S("",!0)]),d("div",Dce,[r(i,{onClick:e.cancelInlineConfig},{default:c(()=>a[35]||(a[35]=[O("Cancel",-1)])),_:1,__:[35]},8,["onClick"]),r(i,{type:"primary",onClick:e.handleCollectCrossBorder},{default:c(()=>a[36]||(a[36]=[O("Save",-1)])),_:1,__:[36]},8,["onClick"])])]),_:1},8,["model","rules"])]),_:1})])):S("",!0),e.showInlineConfig&&e.selectedMethod==="specific"?(f(),y("div",Mce,[r(M,{shadow:"never",class:"p-4 rounded-md"},{default:c(()=>[d("div",Ice,[r(i,{size:"small",onClick:e.cancelInlineConfig,plain:""},{default:c(()=>a[37]||(a[37]=[O("Back",-1)])),_:1,__:[37]},8,["onClick"]),a[38]||(a[38]=d("span",{class:"ml-3 text-sm text-gray-700"},"Collect specific country VAT",-1))]),r(jl,{onlyEU:!0,onRefresh:e.refreshSettings},null,8,["onRefresh"]),e.euRatesLoading?(f(),y("div",$ce," Loading EU rates… ")):(f(),y("div",Tce,[a[39]||(a[39]=d("span",{class:"font-medium"},"EU rates available:",-1)),O(" "+v(e.euRatesSummary.totalCountries)+" countries, "+v(e.euRatesSummary.totalRates)+" total rates ",1)])),e.euCountries.length?(f(),y("div",Oce,[a[41]||(a[41]=d("div",{class:"p-3 text-sm font-medium text-gray-700"},"European Union Countries",-1)),d("div",Lce,[(f(!0),y(P,null,j(e.euCountries,(D,R)=>(f(),y("div",{key:D.country_code+"-"+R,class:"flex items-center justify-between p-3 hover:bg-gray-50 cursor-pointer transition-colors",onClick:$=>e.manageCountryTaxRates(D.country_code)},[d("div",Rce,[d("img",{class:"w-[22px] block",src:"https://flagcdn.com/w40/"+D.country_code.toLowerCase()+".png",alt:"flag"},null,8,Hce),d("span",Pce,v(D.country_name),1)]),d("div",Nce,[d("div",Kce,v(D.total_rates)+" rates",1),r(i,{type:"danger",size:"small",plain:"",onClick:Ke($=>e.deleteCountryTaxRate(D.country_code),["stop"])},{default:c(()=>a[40]||(a[40]=[O(" Delete ",-1)])),_:2,__:[40]},1032,["onClick"]),r(n,{class:"text-gray-400"},{default:c(()=>[r(g(Ca))]),_:1})])],8,Vce))),128))])])):S("",!0)]),_:1})])):S("",!0)])])]),_:1})]),_:1})]),r(d_,{modelValue:e.showAddOssTaxOverrideModal,"onUpdate:modelValue":a[8]||(a[8]=D=>e.showAddOssTaxOverrideModal=D),title:e.overrideModalTitle,countries:e.ossCountryRates,"selected-country-tax-classes":e.selectedCountryTaxClasses,"country-code":e.ossTaxOverrideForm.country_code,"has-valid-overrides":e.hasValidOverrides,onChangeCountry:e.onCountryChange,onSave:e.saveOssTaxOverride,mode:e.overrideMode,class:"fluent-cart-admin-pages","modal-class":"fct-eu-oss-override-modal","append-to-body":!0},null,8,["modelValue","title","countries","selected-country-tax-classes","country-code","has-valid-overrides","onChangeCountry","onSave","mode"])])}}});class jce extends lo{getTabs(){return{all:p("All"),active:p("Active"),expired:p("Inactive")}}getToggleableColumns(){return[{label:"Title",value:"title"},{label:"Stackable",value:"stackable"},{label:"Actions",value:"actions"}]}getSortableColumns(){return[{label:p("ID"),value:"id"},{label:p("Title"),value:"title"},{label:p("Code"),value:"code"},{label:p("Amount"),value:"amount"},{label:p("Max Uses"),value:"max_uses"},{label:p("Stackable"),value:"stackable"},{label:p("Status"),value:"status"},{label:p("Expiry Date"),value:"expiry_date"}]}getSearchHint(){return p("Search by id, title, amount, code.")}getFetchUrl(){return"coupons"}parseResponse(e){return e.coupons}getTableName(){return"coupon_table"}getAdvanceFilterOptions(){return null}getSearchGuideOptions(){return[]}with(){return["appliedCouponsCount"]}}function h_(t){return jce.init(t)}const Yce={class:"table-cell"},Wce={class:"table-cell"},qce={class:"table-cell"},Xce={class:"table-cell"},Jce={class:"table-cell"},Zce={class:"table-cell"},ede={class:"table-cell"},tde={class:"table-cell"},ade={class:"table-cell"},sde={__name:"AllCouponsLoader",props:{nextPageCount:{type:Number,default:0},couponTable:{type:Object,default:()=>({})}},setup(t){const e=t,a=Array.from({length:e.nextPageCount},(s,n)=>n+1);return(s,n)=>{const o=C("el-skeleton-item"),i=C("el-skeleton"),l=C("el-table-column"),A=C("el-table");return f(),U(A,{data:g(a),class:"w-full compact-table responsive full-compact"},{default:c(()=>[r(l,{width:100,label:g(p)("ID")},{default:c(()=>[d("div",Yce,[r(i,{animated:""},{template:c(()=>[r(o,{varient:"p",class:"w-[70px]"})]),_:1})])]),_:1},8,["label"]),t.couponTable.isColumnVisible("title")?(f(),U(l,{key:0,label:g(p)("Title"),width:250},{default:c(()=>[d("div",Wce,[r(i,{animated:""},{template:c(()=>[r(o,{varient:"p",class:"w-[180px]"})]),_:1})])]),_:1},8,["label"])):S("",!0),r(l,{label:g(p)("Code"),width:200},{default:c(()=>[d("div",qce,[r(i,{animated:""},{template:c(()=>[r(o,{varient:"p",class:"w-[130px]"})]),_:1})])]),_:1},8,["label"]),r(l,{label:g(p)("Amount"),width:120},{default:c(()=>[d("div",Xce,[r(i,{animated:""},{template:c(()=>[r(o,{varient:"p",class:"w-[100px]"})]),_:1})])]),_:1},8,["label"]),r(l,{label:g(p)("Usage"),width:150},{default:c(()=>[d("div",Jce,[r(i,{animated:""},{template:c(()=>[r(o,{varient:"p",class:"w-[100px]"})]),_:1})])]),_:1},8,["label"]),t.couponTable.isColumnVisible("stackable")?(f(),U(l,{key:1,label:g(p)("Stackable"),width:120},{default:c(()=>[d("div",Zce,[r(i,{animated:""},{template:c(()=>[r(o,{varient:"p",class:"w-[80px]"})]),_:1})])]),_:1},8,["label"])):S("",!0),r(l,{label:g(p)("Status"),width:120},{default:c(()=>[d("div",ede,[r(i,{animated:""},{template:c(()=>[r(o,{varient:"p",class:"w-[90px]"})]),_:1})])]),_:1},8,["label"]),r(l,{label:g(p)("Expiry Date"),width:120},{default:c(()=>[d("div",tde,[r(i,{animated:""},{template:c(()=>[r(o,{varient:"p",class:"w-[90px]"})]),_:1})])]),_:1},8,["label"]),t.couponTable.isColumnVisible("actions")?(f(),U(l,{key:2,label:g(p)("Actions"),width:100,align:"right"},{default:c(()=>[d("div",ade,[r(i,{animated:""},{template:c(()=>[r(o,{varient:"p",class:"w-[70px]"})]),_:1})])]),_:1},8,["label"])):S("",!0)]),_:1},8,["data"])}}},nde={class:"fc-table-mobile-wrap fc-coupons-table-mobile-wrap"},ode={class:"fc-table-mobile-header"},ide={class:"fc-table-mobile-header-left"},rde={class:"fc-table-id-col"},lde={class:"fc-table-status-col"},Ade=["onClick"],cde={class:"title"},dde={class:"value"},ude={key:0,class:"fc-table-action-col"},fde={class:"more-btn pr-0"},hde={class:"fc-table-mobile-body"},pde=["onClick"],mde={key:0,class:"fc-table-coupon-title-col"},gde={class:"fc-table-coupon-code-col"},_de=["onClick"],vde={class:"fc-table-mobile-footer"},bde=["onClick"],yde={class:"fc-table-date-col grid"},wde={class:"title"},Cde={class:"value"},Bde={key:0,class:"fc-table-stackable-col"},kde={class:"title"},xde={class:"value"},Fde={class:"fc-table-amount-col"},Sde={class:"title"},Ede={class:"value"},Ude={__name:"CouponsTableMobile",props:{table:{type:Object,required:!0},emptyText:{type:String,default:p("No customers found.")}},setup(t){const e=t,a=n=>{const o=ye().format("YYYY-MM-DD"),i=ye(n).format("YYYY-MM-DD");return i==="Invalid date"?!1:i<o},s=n=>{let o=p("Are you sure you want to delete this %s coupon. This action is not recoverable",n.coupon.title);n.action==="delete"&&Gt(o,p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{ne.delete("coupons/"+n.coupon.id).then(i=>{q.success(i.message),e.table.fetch()}).catch(i=>{console.log(i,"err"),q.error(i)}).finally(()=>{})}).catch(()=>{})};return(n,o)=>{const i=C("router-link"),l=C("el-tooltip"),A=C("el-dropdown-item"),u=C("el-dropdown-menu"),h=C("el-dropdown");return f(),y("div",nde,[(f(!0),y(P,null,j(t.table.getTableData(),(m,_)=>(f(),y("div",{key:m.id,class:"fc-table-mobile-row"},[d("div",ode,[d("div",ide,[d("div",rde,[r(i,{to:{name:"add_or_edit_coupon",params:{coupon_id:m.id}},class:"id"},{default:c(()=>[O(" #"+v(m.id),1)]),_:2},1032,["to"])]),d("div",lde,[r(pt,{status:m.status},{default:c(()=>[O(v(a(m.end_date)?g(p)("Expired"):m.status),1)]),_:2},1032,["status"]),m.status==="scheduled"?(f(),U(l,{key:0,effect:"dark",placement:"top","popper-class":"fc-label-hint-popover fc-tooltip","show-after":400,"hide-after":0},{content:c(()=>[O(v(g(p)("Available On: %s",g(Js)(m.start_date,!0))),1)]),default:c(()=>[r(G,{name:"InformationFill",class:"w-4 h-4 flex-none"})]),_:2},1024)):S("",!0)]),d("div",{class:"fc-table-usage-col",onClick:B=>n.$router.push({name:"add_or_edit_coupon",params:{coupon_id:m.id}})},[d("div",cde,v(g(p)("Usage:")),1),d("div",dde,[O(v(m.use_count??0)+" ",1),o[0]||(o[0]=d("span",null,"/",-1)),O(" "+v(m.conditions.max_uses>0?m.conditions.max_uses:g(p)("Unlimited")),1)])],8,Ade)]),t.table.isColumnVisible("actions")?(f(),y("div",ude,[r(h,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:c(()=>[r(u,null,{default:c(()=>[m.id?(f(),U(A,{key:0,class:"item-link"},{default:c(()=>[r(i,{to:{name:"add_or_edit_coupon",params:{coupon_id:m.id,action:"edit"}}},{default:c(()=>[r(G,{name:"Edit"}),O(" "+v(g(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):S("",!0),r(A,{command:{action:"delete",coupon:m},class:"item-destructive"},{default:c(()=>[r(G,{name:"Delete"}),O(" "+v(g(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:c(()=>[d("span",fde,[r(G,{name:"More"})])]),_:2},1024)])):S("",!0)]),d("div",hde,[d("div",{class:"fc-table-coupon-code-wrapper-col",onClick:B=>n.$router.push({name:"add_or_edit_coupon",params:{coupon_id:m.id}})},[t.table.isColumnVisible("title")?(f(),y("div",mde,v(m.title),1)):S("",!0),d("div",gde,[d("code",{class:"copyable-content",onClick:B=>{g(Bl).copy(m.code)}},v(m.code),9,_de)])],8,pde)]),d("div",vde,[d("div",{class:"fc-table-mobile-footer-row items-start",onClick:B=>n.$router.push({name:"add_or_edit_coupon",params:{coupon_id:m.id}})},[d("div",yde,[d("div",wde,v(g(p)("Expiry Date")),1),d("div",Cde,[isNaN(Date.parse(m.end_date))?(f(),y(P,{key:1},[O("n/a")],64)):(f(),U(Ht,{key:0,"date-time":m.end_date,"with-time":!0},null,8,["date-time"]))])]),t.table.isColumnVisible("stackable")?(f(),y("div",Bde,[d("div",kde,v(g(p)("Stackable")),1),d("div",xde,v(m.stackable),1)])):S("",!0),d("div",Fde,[d("div",Sde,v(g(p)("Amount")),1),d("div",Ede,v(m.type!=="percentage"?g(st)(m.amount,!0):m.amount+"%"),1)])],8,bde)])]))),128))])}}},Qde={},Dde={class:"px-4 py-3"},Mde={class:"grid grid-cols-3 gap-5 mt-5"};function Ide(t,e){const a=C("el-skeleton-item"),s=C("el-skeleton");return f(),U(s,{animated:""},{template:c(()=>[d("div",Dde,[(f(),y(P,null,j(2,n=>d("div",{key:n,class:"flex items-center justify-between mb-3"},[r(a,{varient:"p",class:"w-1/2"}),r(a,{varient:"p",class:"w-[100px]"})])),64)),d("div",Mde,[(f(),y(P,null,j(3,n=>d("div",{key:n},[r(a,{varient:"p",class:"w-1/2"}),r(a,{varient:"p",class:"w-[100px]"})])),64))])])]),_:1})}const Tde=ve(Qde,[["render",Ide]]),$de={class:"fc-all-coupons-page fc-layout-width"},Ode={class:"fc-all-coupons-wrap"},Lde={key:1},Vde=["onClick"],Rde={class:"capitalize"},Hde={class:"more-btn mr-2"},Gh={__name:"AllCoupons",setup(t){const e=h_(),a=T(!1),s=i=>{let l=p("Are you sure you want to delete this %s coupon. This action is not recoverable",i.coupon.title);i.action==="delete"&&Gt(l,p("Confirm Delete!"),{confirmButtonText:p("Yes, Delete!"),cancelButtonText:p("Cancel"),type:"warning"}).then(()=>{ne.delete("coupons/"+i.coupon.id).then(A=>{q.success(A.message),e.fetch()}).catch(A=>{A.status_code=="422"?q.validationErrors(A):q.error(A.message)}).finally(()=>{})}).catch(()=>{})},n=()=>{ne.get("coupons/getSettings").then(i=>{a.value=!!parseInt(i.show_on_checkout)}).catch(i=>{i.status_code=="422"?q.validationErrors(i):q.error(i.message)}).finally(()=>{})},o=i=>{const l=ye().format("YYYY-MM-DD"),A=ye(i).format("YYYY-MM-DD");return A==="Invalid date"?!1:A<l};return he(()=>{n()}),(i,l)=>{const A=C("el-button"),u=C("el-table-column"),h=C("el-tooltip"),m=C("router-link"),_=C("el-dropdown-item"),B=C("el-dropdown-menu"),b=C("el-dropdown"),w=C("el-table");return f(),U(tt,{permission:"coupons/view"},{default:c(()=>[d("div",$de,[r(kn,{title:g(p)("Coupons")},{action:c(()=>[r(A,{tag:"router-link",type:"primary",to:{name:"add_or_edit_coupon"}},{default:c(()=>[O(v(g(p)("Add Coupon")),1)]),_:1})]),_:1},8,["title"]),d("div",Ode,[r(Ao,{table:g(e),"has-mobile-slot":!0},{mobile:c(()=>[g(e).isLoading()?(f(),U(Tde,{key:0})):S("",!0),g(e).isLoading()?S("",!0):(f(),U(Ude,{key:1,table:g(e)},null,8,["table"]))]),default:c(()=>[g(e).isLoading()?(f(),U(sde,{key:0,couponTable:g(e),"next-page-count":g(e).nextPageCount},null,8,["couponTable","next-page-count"])):(f(),y("div",Lde,[r(w,{data:g(e).getTableData(),class:"w-full compact-table full-compact"},{empty:c(()=>[r(Tt,{icon:"Empty/Order","has-dark":"",text:g(p)("No coupons available at the moment.")},null,8,["text"])]),default:c(()=>[r(u,{width:100,label:g(p)("ID")},{default:c(k=>[r(St,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id}}},{default:c(()=>[O(" #"+v(k.row.id),1)]),_:2},1032,["to"])]),_:1},8,["label"]),g(e).isColumnVisible("title")?(f(),U(u,{key:0,label:g(p)("Title"),width:220},{default:c(k=>[r(St,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:c(()=>[O(v(k.row.title),1)]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),r(u,{label:g(p)("Code"),width:200},{default:c(k=>[d("code",{class:"copyable-content",onClick:F=>{g(Bl).copy(k.row.code)}},v(k.row.code),9,Vde)]),_:1},8,["label"]),r(u,{label:g(p)("Amount"),width:120},{default:c(k=>[r(St,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:c(()=>[O(v(k.row.type!=="percentage"?g(st)(k.row.amount,!0):k.row.amount+"%"),1)]),_:2},1032,["to"])]),_:1},8,["label"]),r(u,{label:g(p)("Usage"),width:150},{default:c(k=>[r(St,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:c(()=>[d("span",null,v(k.row.use_count??0),1),l[0]||(l[0]=d("span",{class:"px-1"},"/",-1)),d("span",null,v(k.row.conditions.max_uses>0?k.row.conditions.max_uses:g(p)("Unlimited")),1)]),_:2,__:[0]},1032,["to"])]),_:1},8,["label"]),g(e).isColumnVisible("stackable")?(f(),U(u,{key:1,label:g(p)("Stackable"),width:120},{default:c(k=>[r(St,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:c(()=>[d("span",Rde,v(k.row.stackable),1)]),_:2},1032,["to"])]),_:1},8,["label"])):S("",!0),r(u,{label:g(p)("Status"),width:120},{default:c(k=>[r(St,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:c(()=>[r(pt,{status:k.row.status},{default:c(()=>[O(v(o(k.row.end_date)?g(p)("Expired"):k.row.status),1)]),_:2},1032,["status"]),k.row.status==="scheduled"?(f(),U(h,{key:0,effect:"dark",placement:"top","popper-class":"fc-label-hint-popover fc-tooltip","show-after":400,"hide-after":0},{content:c(()=>[O(v(g(p)("Available On: %s",g(Js)(k.row.start_date,!0))),1)]),default:c(()=>[r(G,{name:"InformationFill",class:"w-4 h-4 flex-none"})]),_:2},1024)):S("",!0)]),_:2},1032,["to"])]),_:1},8,["label"]),r(u,{label:g(p)("Expiry Date"),width:120},{default:c(k=>[r(St,{class:"hover:no-underline",to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:c(()=>[d("span",null,[isNaN(Date.parse(k.row.end_date))?(f(),y(P,{key:1},[O("n/a")],64)):(f(),U(Ht,{key:0,"date-time":k.row.end_date,"with-time":!0},null,8,["date-time"]))])]),_:2},1032,["to"])]),_:1},8,["label"]),g(e).isColumnVisible("actions")?(f(),U(u,{key:2,label:g(p)("Actions"),width:100,align:"right",fixed:"right"},{default:c(k=>[r(b,{trigger:"click",class:"fc-more-option-wrap","popper-class":"fc-dropdown",onCommand:s,placement:"bottom-end"},{dropdown:c(()=>[r(B,null,{default:c(()=>[k.row.id?(f(),U(_,{key:0,class:"item-link"},{default:c(()=>[r(m,{to:{name:"add_or_edit_coupon",params:{coupon_id:k.row.id,action:"edit"}}},{default:c(()=>[r(G,{name:"Edit"}),O(" "+v(g(p)("Edit")),1)]),_:2},1032,["to"])]),_:2},1024)):S("",!0),r(_,{command:{action:"delete",coupon:k.row},class:"item-destructive"},{default:c(()=>[r(G,{name:"Delete"}),O(" "+v(g(p)("Delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:c(()=>[d("span",Hde,[r(G,{name:"More"})])]),_:2},1024)]),_:1},8,["label"])):S("",!0)]),_:1},8,["data"])]))]),_:1},8,["table"])])])]),_:1})}}},Pde={class:"fc-add-edit-coupon-wrapper fc-layout-width"},Nde={class:"single-page-header"},Kde={class:"single-page-body"},zde={class:"fc-add-edit-coupon"},Gde={class:"fc-add-edit-coupon-main"},jde={class:"fc-add-edit-coupon-aside"},Yde={class:"fc-admin-sidebar"},Wde={__name:"SingleCouponLoader",setup(t){return(e,a)=>{const s=C("el-skeleton-item"),n=C("el-skeleton"),o=C("el-breadcrumb-item"),i=C("el-breadcrumb");return f(),y("div",Pde,[d("div",Nde,[r(i,{"separator-icon":g(Ca)},{default:c(()=>[r(o,null,{default:c(()=>[r(n,{animated:!0},{template:c(()=>[r(s,{variant:"p",class:"w-[90px] h-4"})]),_:1})]),_:1}),r(o,null,{default:c(()=>[r(n,{animated:!0},{template:c(()=>[r(s,{variant:"p",class:"w-[90px] h-4"})]),_:1})]),_:1}),r(o,null,{default:c(()=>[r(n,{animated:!0},{template:c(()=>[r(s,{variant:"p",class:"w-[60px] h-4"})]),_:1})]),_:1})]),_:1},8,["separator-icon"])]),d("div",Kde,[d("div",zde,[d("div",Gde,[r(oe,null,{default:c(()=>[r(de,{title:g(p)("Basic Information"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:!0,class:"flex flex-col gap-3"},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"}),r(s,{variant:"p",class:"w-2/3 h-4"}),r(s,{variant:"p",class:"w-1/3 h-4"}),r(s,{variant:"p",class:"max-w-[400px] h-4"}),r(s,{variant:"p",class:"w-full h-4"}),r(s,{variant:"p",class:"w-2/3 h-4"}),r(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(de,{title:g(p)("Discount Value"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:!0,class:"flex flex-col gap-3"},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"}),r(s,{variant:"p",class:"w-2/3 h-4"}),r(s,{variant:"p",class:"w-1/3 h-4"}),r(s,{variant:"p",class:"max-w-[400px] h-4"}),r(s,{variant:"p",class:"w-full h-4"}),r(s,{variant:"p",class:"w-2/3 h-4"}),r(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(de,{title:g(p)("Schedule"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:!0,class:"flex flex-col gap-3"},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"}),r(s,{variant:"p",class:"w-2/3 h-4"}),r(s,{variant:"p",class:"w-1/3 h-4"}),r(s,{variant:"p",class:"max-w-[400px] h-4"}),r(s,{variant:"p",class:"w-full h-4"}),r(s,{variant:"p",class:"w-2/3 h-4"}),r(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(de,{title:g(p)("Maximum Discount Uses"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:!0,class:"flex flex-col gap-3"},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"}),r(s,{variant:"p",class:"w-2/3 h-4"}),r(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1}),r(oe,null,{default:c(()=>[r(de,{title:g(p)("Additional Information"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:!0,class:"flex flex-col gap-3"},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"}),r(s,{variant:"p",class:"w-2/3 h-4"}),r(s,{variant:"p",class:"w-1/3 h-4"}),r(s,{variant:"p",class:"max-w-[400px] h-4"}),r(s,{variant:"p",class:"w-full h-4"}),r(s,{variant:"p",class:"w-2/3 h-4"}),r(s,{variant:"p",class:"w-1/3 h-4"}),r(s,{variant:"p",class:"max-w-[400px] h-4"}),r(s,{variant:"p",class:"w-full h-4"}),r(s,{variant:"p",class:"w-2/3 h-4"}),r(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1})]),d("div",jde,[d("div",Yde,[r(oe,null,{default:c(()=>[r(de,{title:g(p)("Summary"),border_bottom:"",title_size:"small"},null,8,["title"]),r(ae,null,{default:c(()=>[r(n,{animated:!0,class:"flex flex-col gap-3"},{template:c(()=>[r(s,{variant:"p",class:"w-full h-4"}),r(s,{variant:"p",class:"w-2/3 h-4"}),r(s,{variant:"p",class:"w-1/3 h-4"})]),_:1})]),_:1})]),_:1})])])])])])}}};ye.extend(mp);ye.extend(gp);const qde={name:"AddOrEditCoupon",props:{coupon_id:{type:[String,Number],required:!0}},components:{CardContainer:oe,CardHeader:de,CardBody:ae,LabelHint:Xe,ValidationError:it,CopyToClipboard:$a,DynamicTemplates:go,SaveBar:uo,ProductVariationSelector:Cv,SingleCouponLoader:Wde,Activity:Og},data(){return{changes_made:0,creating:!1,updating:!1,keyboardShortcuts:null,coupon:{type:"fixed",status:"active",stackable:"no",show_on_checkout:"no",title:"",code:"",priority:0,amount:0,start_date:"",end_date:"",notes:"",conditions:{buy_quantity:1,get_quantity:1,excluded_categories:[],included_categories:[],excluded_products:[],included_products:[],min_purchase_amount:"",max_purchase_amount:"",allowed_user_ids:[],allowed_user_roles:[],apply_to_quantity:"no",apply_to_whole_cart:"yes",max_per_customer:"",max_discount_amount:"",max_uses:"",buy_products:[],get_products:[]}},validationErrors:{},minQuantity:1,maxQuantity:100,minPurchaseAmount:0,maxPurchaseAmount:1e4,minDiscountAmount:0,minLimit:0,maxLimit:1e3,categories:[],usageError:!1,isEndDateEnabled:!1,fetchingCoupon:!1,isInitialLoading:!1,showDynamicTemplates:!1,showManageActivity:!1}},methods:{translate:p,generateRandomCouponCode(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let a=0;a<8;a++)e+=t.charAt(Math.floor(Math.random()*t.length));this.coupon.code=e},onChangeCouponInput(t,e){if(e=parseInt(e),isNaN(e)||e===""){this.coupon[t]="";return}if(t==="priority"&&(e<0||e>100)){this.coupon[t]=0;return}if((t==="buy_quantity"||t==="get_quantity")&&(e<this.minQuantity||e>this.maxQuantity)){this.coupon[t]=this.minQuantity;return}if((t==="min_purchase_amount"||t==="max_discount_amount")&&(e<this.minPurchaseAmount||e>this.maxPurchaseAmount)){this.coupon.conditions[t]=this.minPurchaseAmount;return}if(t==="amount"){if(this.coupon.type==="fixed"&&(e<this.minDiscountAmount||e>this.maxDiscountAmount)){this.coupon[t]=this.minDiscountAmount;return}if(this.coupon.type==="percentage"&&(e<this.minDiscountAmount||e>this.maxDiscountAmount)){this.coupon[t]=this.minDiscountAmount;return}}if((t==="max_uses"||t==="max_per_customer")&&(e<this.minLimit||e>this.maxLimit)){this.coupon[t]=this.minLimit;return}},preventInvalidChars(t,e=!1){let a=["-",".","+"];e&&(a=["-","+"]),a.includes(t.key)&&t.preventDefault()},handleChangesMade(){this.changes_made++},setDefaultStatus(){const t=new Date,e=this.coupon.start_date?new Date(this.coupon.start_date):null,a=this.coupon.end_date?new Date(this.coupon.end_date):null;this.coupon.status!=="disabled"&&(a===null&&(this.isEndDateEnabled=!1),!e&&!a?this.coupon.status="active":e&&t<e?this.coupon.status="scheduled":a&&t>a?this.coupon.status="expired":this.coupon.status="active")},disabledStartDate(t){const e=new Date;return e.setHours(0,0,0,0),t&&t.getTime()<e.getTime()},disabledEndDate(t){const e=this.coupon.start_date?new Date(this.coupon.start_date):new Date;return e.setHours(0,0,0,0),t&&t.getTime()<e.getTime()},formatDate(t){return!t||t==="0000-00-00 00:00:00"?null:ye(t).format("YYYY-MM-DD HH:mm:ss")},formatAmount(){this.coupon.amount!==null&&(this.coupon.type!=="percentage"&&(this.coupon.amount=st(this.coupon.amount,!1)),this.coupon.conditions.min_purchase_amount!==null&&(this.coupon.conditions.min_purchase_amount?this.coupon.conditions.min_purchase_amount=st(this.coupon.conditions.min_purchase_amount,!1):this.coupon.conditions.min_purchase_amount=""),this.coupon.conditions.max_discount_amount!==null&&(this.coupon.conditions.max_discount_amount?this.coupon.conditions.max_discount_amount=st(this.coupon.conditions.max_discount_amount,!1):this.coupon.conditions.max_discount_amount=""),this.coupon.conditions.max_purchase_amount||(this.coupon.conditions.max_purchase_amount=""),this.coupon.conditions.max_uses||(this.coupon.conditions.max_uses=""),this.coupon.conditions.max_per_customer||(this.coupon.conditions.max_per_customer=""),this.coupon.conditions.min_purchase_amount||(this.coupon.conditions.min_purchase_amount=""))},parseProductIds(t){return Array.isArray(t)?t.map(e=>parseInt(e,10)):[]},reloadPage(){return window.location.reload()},validateAndFormatDate(t){let e=this.formatDate(t);return e!==null&&e!=="Invalid date"?e:null},validateDate(){this.coupon.start_date=this.validateAndFormatDate(this.coupon.start_date),this.coupon.end_date=this.validateAndFormatDate(this.coupon.end_date)},fetchTerms(){ne.get("products/fetch-term").then(t=>{this.categories=t.taxonomies["product-categories"].terms}).catch(t=>{t.status_code=="422"?q.validationErrors(t):q.error(t.message)}).finally(()=>{})},fetchCoupon(){this.fetchingCoupon=!0,this.isInitialLoading=!0,ne.get(`coupons/${this.coupon_id}`,{}).then(t=>{var s,n;const e=(s=t==null?void 0:t.coupon)==null?void 0:s.start_date,a=(n=t==null?void 0:t.coupon)==null?void 0:n.end_date;e&&e!=="0000-00-00 00:00:00"&&(t.coupon.start_date=ye.utc(e).tz(ye.tz.guess()).format("YYYY-MM-DD HH:mm:ss")),a&&a!=="0000-00-00 00:00:00"&&(t.coupon.end_date=ye.utc(a).tz(ye.tz.guess()).format("YYYY-MM-DD HH:mm:ss")),t=t.coupon,this.coupon=t,this.coupon.start_date=this.formatDate(this.coupon.start_date),this.coupon.end_date=this.formatDate(this.coupon.end_date),this.coupon.end_date!==null&&(this.isEndDateEnabled=!0),this.coupon.end_date=this.coupon.end_date!==null&&this.coupon.end_date!=="Invalid date"?this.coupon.end_date:null,this.coupon.conditions.excluded_products=this.parseProductIds(t.conditions.excluded_products),this.coupon.conditions.included_products=this.parseProductIds(t.conditions.included_products),this.formatAmount(),this.setDefaultStatus(),this.showDynamicTemplates=!0}).catch(t=>{errors.status_code=="422"?q.validationErrors(errors):q.error(errors.message),console.error("Error fetching coupon: ",t)}).finally(()=>{this.fetchingCoupon=!1,this.isInitialLoading=!1,this.changes_made=0})},updateCoupon(){var t,e;this.updating=!0,this.validateDate(),(t=this.$refs.dynamic_templates)==null||t.beforeUpdatingData({data:{coupon:this.coupon}}),ne.put(`coupons/${this.coupon_id}`,{...this.coupon,metaValue:(e=this.$refs.dynamic_templates)==null?void 0:e.getFormStates()}).then(a=>{var s;(s=this.$refs.dynamic_templates)==null||s.afterUpdatingData({coupon:this.coupon,response:a}),q.success(a.message),this.validationErrors={},this.setDefaultStatus(),this.changes_made=0}).catch(a=>{a.status_code=="422"?(q.validationErrors(a),this.validationErrors=a):q.error(a.message)}).finally(()=>{this.updating=!1,this.changes_made=0})},addCoupon(){var t,e;this.creating=!0,this.validateDate(),(t=this.$refs.dynamic_templates)==null||t.beforeUpdatingData({data:{coupon:this.coupon}}),ne.post("coupons",{...this.coupon,metaValue:(e=this.$refs.dynamic_templates)==null?void 0:e.getFormStates()}).then(a=>{var s;(s=this.$refs.dynamic_templates)==null||s.afterUpdatingData({coupon:this.coupon,response:a}),q.success(a.message),this.$router.push({name:"coupons"}),this.validationErrors={}}).catch(a=>{a.status_code=="422"?(q.validationErrors(a),this.validationErrors=a):q.error(a.message)}).finally(()=>{this.creating=!1})}},computed:{ArrowRight(){return Ca},maxDiscountAmount(){return this.coupon.type==="percentage"?100:999999}},watch:{coupon:{handler(){this.handleChangesMade()},deep:!0}},mounted(){this.keyboardShortcuts=bi(),this.fetchTerms(),this.coupon_id?(this.fetchCoupon(),this.keyboardShortcuts.bind(["meta+s"],t=>{t.preventDefault(),this.updateCoupon()}),window.onbeforeunload=()=>{if(this.changes_made>1)return!0}):this.keyboardShortcuts.bind(["meta+s"],t=>{t.preventDefault(),this.addCoupon()})},beforeRouteLeave(t,e,a){var s;(s=this.keyboardShortcuts)!=null&&s.unbind&&this.keyboardShortcuts.unbind("meta+s"),a()}},Xde={class:"fc-add-edit-coupon-wrapper fc-layout-width"},Jde={class:"single-page-header"},Zde={class:"single-page-body"},eue={class:"fc-add-edit-coupon"},tue={class:"fc-add-edit-coupon-main"},aue={class:"flex gap-2 items-center justify-between w-full mb-2.5"},sue={class:"form-note"},nue=["innerHTML"],oue={key:1},iue=["innerHTML"],rue=["innerHTML"],lue=["innerHTML"],Aue={class:"fc-add-edit-coupon-aside"},cue={class:"fc-admin-sidebar"},due={class:"fc-admin-sidebar-item"},uue={key:0,class:"flex items-center gap-1"},fue={class:"text-sm font-medium text-system-dark dark:text-gray-300"},hue={key:1},pue={class:"fc-admin-sidebar-item mt-5 hidden"},mue={class:"sidebar-title mb-3"},gue={class:"fc-bullet-lists"},_ue={class:"fc-admin-sidebar-item mt-5 hidden"},vue={class:"sidebar-title mb-3"},bue={class:"fc-bullet-lists"},yue={key:0};function wue(t,e,a,s,n,o){const i=C("SaveBar"),l=C("SingleCouponLoader"),A=C("el-breadcrumb-item"),u=C("el-breadcrumb"),h=C("CardHeader"),m=C("el-input"),_=C("validation-error"),B=C("el-form-item"),b=C("el-col"),w=C("LabelHint"),k=C("el-row"),F=C("CardBody"),x=C("CardContainer"),E=C("el-option"),M=C("el-select"),D=C("ProductVariationSelector"),R=C("el-radio"),$=C("el-radio-group"),Q=C("el-form"),I=C("CopyToClipboard"),L=C("el-date-picker"),V=C("el-checkbox"),N=C("DynamicTemplates"),Y=C("Activity");return f(),y("div",Xde,[r(i,{isActive:n.changes_made>0?"is-active":"",loading:a.coupon_id?n.updating:n.creating,onSave:e[0]||(e[0]=K=>a.coupon_id?o.updateCoupon():o.addCoupon()),onDiscard:o.reloadPage,"show-cmnd-icon":!0,saveButtonText:a.coupon_id?o.translate("Update"):o.translate("Create"),loadingText:a.coupon_id?o.translate("Updating"):o.translate("Creating")},null,8,["isActive","loading","onDiscard","saveButtonText","loadingText"]),n.fetchingCoupon?(f(),U(l,{key:0})):S("",!0),n.fetchingCoupon?S("",!0):(f(),y(P,{key:1},[d("div",Jde,[r(u,{"separator-icon":o.ArrowRight},{default:c(()=>[r(A,{to:{name:"coupons"}},{default:c(()=>[O(v(o.translate("Coupons")),1)]),_:1}),r(A,null,{default:c(()=>[O(v(a.coupon_id?o.translate("Edit Coupon"):o.translate("Add Coupon")),1)]),_:1}),a.coupon_id?(f(),U(A,{key:0},{default:c(()=>[O(v(n.coupon.title),1)]),_:1})):S("",!0)]),_:1},8,["separator-icon"])]),d("div",Zde,[d("div",eue,[d("div",tue,[r(Q,{model:n.coupon,"label-position":"top","require-asterisk-position":"right"},{default:c(()=>[r(x,null,{default:c(()=>[r(h,{title:o.translate("Basic Information"),border_bottom:"",title_size:"small"},null,8,["title"]),r(F,{class:"pb-1.5"},{default:c(()=>[r(k,{gutter:20},{default:c(()=>[r(b,{lg:24},{default:c(()=>[r(B,{label:o.translate("Title"),required:""},{default:c(()=>{var K,X;return[r(m,{modelValue:n.coupon.title,"onUpdate:modelValue":e[1]||(e[1]=re=>n.coupon.title=re),placeholder:o.translate("Enter title"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("title")?"is-error":""),maxlength:"50",id:"title"},null,8,["modelValue","placeholder","class"]),(X=n.validationErrors)!=null&&X.hasOwnProperty("title")?(f(),U(_,{key:0,"validation-errors":n.validationErrors,"field-key":"title"},null,8,["validation-errors"])):S("",!0)]}),_:1},8,["label"])]),_:1}),r(b,{lg:12},{default:c(()=>[r(B,null,{default:c(()=>{var K,X;return[d("div",aue,[r(w,{title:o.translate("Code"),required:""},null,8,["title"]),d("span",{class:"text-system-dark text-xs cursor-pointer hover:underline dark:text-gray-50 underline",onClick:e[2]||(e[2]=(...re)=>o.generateRandomCouponCode&&o.generateRandomCouponCode(...re))},v(o.translate("Generate Random Code")),1)]),r(m,{modelValue:n.coupon.code,"onUpdate:modelValue":e[3]||(e[3]=re=>n.coupon.code=re),placeholder:o.translate("Eg. COUPON10"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("code")?"is-error":""),maxlength:"20"},null,8,["modelValue","placeholder","class"]),(X=n.validationErrors)!=null&&X.hasOwnProperty("code")?(f(),U(_,{key:0,"validation-errors":n.validationErrors,"field-key":"code"},null,8,["validation-errors"])):S("",!0),d("div",sue,[d("p",null,v(o.translate("Customers must enter this code at checkout.")),1)])]}),_:1})]),_:1}),r(b,{lg:12},{default:c(()=>[r(B,null,{label:c(()=>[r(w,{title:o.translate("Coupon Priority"),content:o.translate("Coupons will be calculated based on their priority. The lower the number the higher the priority is.")},null,8,["title","content"])]),default:c(()=>{var K,X;return[r(m,{modelValue:n.coupon.priority,"onUpdate:modelValue":e[4]||(e[4]=re=>n.coupon.priority=re),type:"number",placeholder:o.translate("Enter priority"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("priority")?"is-error":""),min:"0",max:"100",onInput:e[5]||(e[5]=re=>{o.onChangeCouponInput("priority",re)}),onKeypress:o.preventInvalidChars},null,8,["modelValue","placeholder","class","onKeypress"]),(X=n.validationErrors)!=null&&X.hasOwnProperty("priority")?(f(),U(_,{key:0,"validation-errors":n.validationErrors,"field-key":"priority"},null,8,["validation-errors"])):S("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(x,null,{default:c(()=>[r(h,{title:o.translate("Discount Details"),border_bottom:"",title_size:"small"},null,8,["title"]),r(F,{class:"pb-1.5"},{default:c(()=>[r(k,{gutter:20},{default:c(()=>[r(b,{lg:8},{default:c(()=>[r(B,{label:o.translate("Type"),required:""},{default:c(()=>{var K;return[r(M,{modelValue:n.coupon.type,"onUpdate:modelValue":e[6]||(e[6]=X=>n.coupon.type=X),placeholder:o.translate("Select coupon type"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("type")?"is-error":""),"default-first-option":""},{default:c(()=>[r(E,{label:o.translate("Fixed"),value:"fixed"},null,8,["label"]),r(E,{label:o.translate("Percentage"),value:"percentage"},null,8,["label"])]),_:1},8,["modelValue","placeholder","class"])]}),_:1},8,["label"])]),_:1}),n.coupon.type==="fixed"||n.coupon.type==="percentage"?(f(),y(P,{key:0},[r(b,{lg:8},{default:c(()=>[r(B,{label:n.coupon.type==="percentage"?o.translate("Discount Percentage (%)"):o.translate("Discount Amount"),required:""},{default:c(()=>{var K;return[r(m,{modelValue:n.coupon.amount,"onUpdate:modelValue":e[7]||(e[7]=X=>n.coupon.amount=X),type:"number",placeholder:"0.00",min:n.minDiscountAmount,max:o.maxDiscountAmount,step:"0.01",onInput:e[8]||(e[8]=X=>{o.onChangeCouponInput("amount",X)}),onKeypress:e[9]||(e[9]=X=>o.preventInvalidChars(X,!0))},{prefix:c(()=>[n.coupon.type==="fixed"?(f(),y("span",{key:0,innerHTML:t.appVars.shop.currency_sign},null,8,nue)):(f(),y("span",oue,"%"))]),_:1},8,["modelValue","min","max"]),(K=n.validationErrors)!=null&&K.hasOwnProperty("amount")?(f(),U(_,{key:0,"validation-errors":n.validationErrors,"field-key":"amount"},null,8,["validation-errors"])):S("",!0)]}),_:1},8,["label"])]),_:1}),n.coupon.type==="percentage"?(f(),U(b,{key:0,lg:8},{default:c(()=>[r(B,{label:o.translate("Max Discount Amount")},{default:c(()=>{var K;return[r(m,{modelValue:n.coupon.conditions.max_discount_amount,"onUpdate:modelValue":e[10]||(e[10]=X=>n.coupon.conditions.max_discount_amount=X),type:"number",placeholder:o.translate("leave empty or 0 for no max limit"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("max_discount_amount")?"is-error":"")},{prefix:c(()=>[d("span",{innerHTML:t.appVars.shop.currency_sign},null,8,iue)]),_:1},8,["modelValue","placeholder","class"]),r(_,{"validation-errors":n.validationErrors,"field-key":"max_discount_amount"},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1})):S("",!0)],64)):S("",!0)]),_:1})]),_:1})]),_:1}),r(x,null,{default:c(()=>[r(h,{title:o.translate("Usage Restrictions"),border_bottom:"",title_size:"small"},null,8,["title"]),r(F,{class:"pb-1.5"},{default:c(()=>[r(k,{gutter:20},{default:c(()=>[r(b,{lg:12},{default:c(()=>[r(B,null,{label:c(()=>[r(w,{title:o.translate("Min Spend Amount"),content:o.translate("Minimum spend (subtotal) allowed to use the coupon.")},null,8,["title","content"])]),default:c(()=>{var K,X;return[r(m,{modelValue:n.coupon.conditions.min_purchase_amount,"onUpdate:modelValue":e[11]||(e[11]=re=>n.coupon.conditions.min_purchase_amount=re),type:"number",placeholder:"0.00",class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("min_purchase_amount")?"is-error":"")},{prefix:c(()=>[d("span",{innerHTML:t.appVars.shop.currency_sign},null,8,rue)]),_:1},8,["modelValue","class"]),(X=n.validationErrors)!=null&&X.hasOwnProperty("min_purchase_amount")?(f(),U(_,{key:0,"validation-errors":n.validationErrors,"field-key":"min_purchase_amount"},null,8,["validation-errors"])):S("",!0)]}),_:1})]),_:1}),r(b,{lg:12},{default:c(()=>[r(B,null,{label:c(()=>[r(w,{title:o.translate("Max Spend Amount"),content:o.translate("Set the maximum spend (subtotal) allowed when using the coupon.")},null,8,["title","content"])]),default:c(()=>{var K,X;return[r(m,{modelValue:n.coupon.conditions.max_purchase_amount,"onUpdate:modelValue":e[12]||(e[12]=re=>n.coupon.conditions.max_purchase_amount=re),type:"number",placeholder:o.translate("leave empty or 0 for no max limit"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("max_purchase_amount")?"is-error":"")},{prefix:c(()=>[d("span",{innerHTML:t.appVars.shop.currency_sign},null,8,lue)]),_:1},8,["modelValue","placeholder","class"]),(X=n.validationErrors)!=null&&X.hasOwnProperty("max_purchase_amount")?(f(),U(_,{key:0,"validation-errors":n.validationErrors,"field-key":"max_purchase_amount"},null,8,["validation-errors"])):S("",!0)]}),_:1})]),_:1}),r(b,{md:12},{default:c(()=>[r(B,{label:o.translate("Include Categories")},{default:c(()=>[r(M,{modelValue:n.coupon.conditions.included_categories,"onUpdate:modelValue":e[13]||(e[13]=K=>n.coupon.conditions.included_categories=K),multiple:"",placeholder:o.translate("Any Category"),filterable:"",remote:"","reserve-keyword":!1},{default:c(()=>[(f(!0),y(P,null,j(n.categories,K=>(f(),U(E,{key:K.value,label:K.label,value:K.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),r(b,{md:12},{default:c(()=>[r(B,{label:o.translate("Exclude Categories")},{default:c(()=>[r(M,{modelValue:n.coupon.conditions.excluded_categories,"onUpdate:modelValue":e[14]||(e[14]=K=>n.coupon.conditions.excluded_categories=K),multiple:"",placeholder:o.translate("No Categories"),filterable:"",remote:"","reserve-keyword":!1},{default:c(()=>[(f(!0),y(P,null,j(n.categories,K=>(f(),U(E,{key:K.value,label:K.label,value:K.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),r(b,{md:24},{default:c(()=>[r(B,{label:o.translate("Include Products")},{default:c(()=>[r(D,{modelValue:n.coupon.conditions.included_products,"onUpdate:modelValue":e[15]||(e[15]=K=>n.coupon.conditions.included_products=K)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),r(b,{md:24},{default:c(()=>[r(B,{label:o.translate("Excluded Products")},{default:c(()=>[r(D,{modelValue:n.coupon.conditions.excluded_products,"onUpdate:modelValue":e[16]||(e[16]=K=>n.coupon.conditions.excluded_products=K)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1}),r(x,null,{default:c(()=>[r(h,{title:o.translate("Maximum Discount Uses"),border_bottom:"",title_size:"small"},null,8,["title"]),r(F,{class:"pb-1.5"},{default:c(()=>[r(k,{gutter:20},{default:c(()=>[r(b,{lg:12},{default:c(()=>[r(B,null,{label:c(()=>[r(w,{title:o.translate("Total Limit"),content:o.translate("Total number of times this coupon can be redeemed across the entire store.")},null,8,["title","content"])]),default:c(()=>{var K,X;return[r(m,{modelValue:n.coupon.conditions.max_uses,"onUpdate:modelValue":e[17]||(e[17]=re=>n.coupon.conditions.max_uses=re),type:"number",placeholder:o.translate("Total limit"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("max_uses")?"is-error":n.usageError),min:n.minLimit,max:n.maxLimit,onInput:e[18]||(e[18]=re=>{o.onChangeCouponInput("max_uses",re)}),onKeypress:o.preventInvalidChars},null,8,["modelValue","placeholder","class","min","max","onKeypress"]),(X=n.validationErrors)!=null&&X.hasOwnProperty("max_uses")?(f(),U(_,{key:0,"validation-errors":n.validationErrors,"field-key":"max_uses"},null,8,["validation-errors"])):S("",!0)]}),_:1})]),_:1}),r(b,{lg:12},{default:c(()=>[r(B,null,{label:c(()=>[r(w,{title:o.translate("Per User Limit"),content:o.translate("Maximum an user can use. 0 means unlimited")},null,8,["title","content"])]),default:c(()=>[r(m,{modelValue:n.coupon.conditions.max_per_customer,"onUpdate:modelValue":e[19]||(e[19]=K=>n.coupon.conditions.max_per_customer=K),type:"number",placeholder:o.translate("Max limit per user"),class:le(n.validationErrors.hasOwnProperty("max_per_customer")?"is-error":""),min:n.minLimit,max:n.maxLimit,onInput:e[20]||(e[20]=K=>{o.onChangeCouponInput("max_per_customer",K)}),onKeypress:o.preventInvalidChars},null,8,["modelValue","placeholder","class","min","max","onKeypress"]),r(_,{"validation-errors":n.validationErrors,"field-key":"max_per_customer"},null,8,["validation-errors"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(x,null,{default:c(()=>[r(h,{title:o.translate("Additional Information"),border_bottom:"",title_size:"small"},null,8,["title"]),r(F,{class:"pb-1.5"},{default:c(()=>[r(k,{gutter:20},{default:c(()=>[r(b,{lg:24},{default:c(()=>[r(B,{label:o.translate("Status")},{default:c(()=>[r($,{modelValue:n.coupon.status,"onUpdate:modelValue":e[21]||(e[21]=K=>n.coupon.status=K)},{default:c(()=>[r(R,{value:"active",label:o.translate("Active")},null,8,["label"]),r(R,{value:"disabled",label:o.translate("Disabled")},null,8,["label"]),r(R,{disabled:"",value:"expired",label:o.translate("Expired")},null,8,["label"])]),_:1},8,["modelValue"]),r(_,{"validation-errors":n.validationErrors,"field-key":"status"},null,8,["validation-errors"])]),_:1},8,["label"])]),_:1}),r(b,{lg:24},{default:c(()=>[r(B,{label:o.translate("Internal Notes")},{default:c(()=>{var K;return[r(m,{modelValue:n.coupon.notes,"onUpdate:modelValue":e[22]||(e[22]=X=>n.coupon.notes=X),type:"textarea",placeholder:o.translate("Enter note"),class:le((K=n.validationErrors)!=null&&K.hasOwnProperty("notes")?"is-error":"")},null,8,["modelValue","placeholder","class"]),r(_,{"validation-errors":n.validationErrors,"field-key":"notes"},null,8,["validation-errors"])]}),_:1},8,["label"])]),_:1}),r(b,{lg:24},{default:c(()=>{var K;return[r(B,null,{label:c(()=>[r(w,{title:o.translate("Stackable"),content:o.translate("Yes means the coupon can be applied with other coupons")},null,8,["title","content"])]),default:c(()=>[r($,{modelValue:n.coupon.stackable,"onUpdate:modelValue":e[23]||(e[23]=X=>n.coupon.stackable=X)},{default:c(()=>[r(R,{value:"yes"},{default:c(()=>[O(v(o.translate("Yes")),1)]),_:1}),r(R,{value:"no"},{default:c(()=>[O(v(o.translate("No")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(K=n.validationErrors)!=null&&K.hasOwnProperty("stackable")?(f(),U(_,{key:0,"validation-errors":n.validationErrors,"field-key":"stackable"},null,8,["validation-errors"])):S("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),d("div",Aue,[d("div",cue,[r(x,null,{default:c(()=>[r(h,{title:o.translate("Summary"),border_bottom:"",title_size:"small"},null,8,["title"]),r(F,null,{default:c(()=>[d("div",due,[n.coupon.code?(f(),y("div",uue,[d("span",fue,v(o.translate("Coupon code"))+": "+v(n.coupon.code),1),r(I,{text:n.coupon.code,showMode:"basic_copy_btn",tooltipText:o.translate("Copy discount code")},null,8,["text","tooltipText"])])):(f(),y("div",hue,v(o.translate("No discount code yet")),1))]),d("div",pue,[d("h4",mue,v(o.translate("Type & Method")),1),d("ul",gue,[d("li",null,[d("span",null,v(o.translate("Amount off Products")),1)]),d("li",null,[d("span",null,v(o.translate("Code")),1)])])]),d("div",_ue,[d("h4",vue,v(o.translate("Details")),1),d("ul",bue,[d("li",null,[d("span",null,v(o.translate("For Online Store")),1)]),d("li",null,[d("span",null,v(o.translate("No Min Purchase Requirement")),1)]),d("li",null,[d("span",null,v(o.translate("All Customers")),1)])])])]),_:1})]),_:1}),r(x,null,{default:c(()=>[r(h,{title:o.translate("Schedule"),border_bottom:"",title_size:"small"},null,8,["title"]),r(F,{class:"pb-1.5"},{default:c(()=>[r(Q,{"label-position":"top"},{default:c(()=>[r(k,{gutter:20},{default:c(()=>[r(b,{lg:24},{default:c(()=>[r(B,{label:o.translate("Start Date & Time")},{default:c(()=>[r(L,{modelValue:n.coupon.start_date,"onUpdate:modelValue":e[24]||(e[24]=K=>n.coupon.start_date=K),type:"datetime",format:"YYYY-MM-DD HH:mm",placeholder:o.translate("Start date & time"),onChange:o.setDefaultStatus,"disabled-date":o.disabledStartDate},null,8,["modelValue","placeholder","onChange","disabled-date"])]),_:1},8,["label"])]),_:1}),r(b,{lg:24},{default:c(()=>[r(B,null,{default:c(()=>[r(V,{modelValue:n.isEndDateEnabled,"onUpdate:modelValue":e[25]||(e[25]=K=>n.isEndDateEnabled=K),label:o.translate("Set end date & time"),onChange:e[26]||(e[26]=K=>{K||(n.coupon.end_date=null)})},null,8,["modelValue","label"])]),_:1})]),_:1}),n.isEndDateEnabled?(f(),U(b,{key:0,lg:24},{default:c(()=>[r(B,{label:o.translate("End Date & Time")},{default:c(()=>[r(L,{modelValue:n.coupon.end_date,"onUpdate:modelValue":e[27]||(e[27]=K=>n.coupon.end_date=K),type:"datetime",format:"YYYY-MM-DD HH:mm",placeholder:o.translate("End date & time"),onChange:o.setDefaultStatus,"disabled-date":o.disabledEndDate},null,8,["modelValue","placeholder","onChange","disabled-date"]),n.validationErrors.hasOwnProperty("end_date")?(f(),U(_,{key:0,"validation-errors":n.validationErrors,"field-key":"end_date"},null,8,["validation-errors"])):S("",!0)]),_:1},8,["label"])]),_:1})):S("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),n.showDynamicTemplates?(f(),y("div",yue,[r(N,{filter:"fluent_cart_single_coupon_page",ref:"dynamic_templates",data:{coupon:n.coupon},widgetsQuery:{coupon_id:n.coupon.id}},null,8,["data","widgetsQuery"])])):S("",!0),r(x,null,{default:c(()=>[r(h,{title:o.translate("Activity"),border_bottom:"",title_size:"small"},null,8,["title"]),r(F,null,{default:c(()=>[r(Y,{onReload:o.fetchCoupon,activities:n.coupon.activities||[],showManageActivity:n.showManageActivity},null,8,["onReload","activities","showManageActivity"])]),_:1})]),_:1})])])])],64))])}const Cue=ve(qde,[["render",wue]]),Bue={name:"CheckoutFields",components:{CardHeader:de,Card:oe,CardBody:ae},data(){return{fields:{},settings:{},saving:!1,fetching:!1}},methods:{getFields(){this.fetching=!0,this.$get("checkout-fields/get-fields").then(t=>{this.fields=t.fields||{},this.settings=t.settings||{}}).catch(t=>{this.handleError(t)}).finally(()=>{this.fetching=!1})},saveFields(){this.saving=!0,this.$post("checkout-fields/save-fields",{settings:this.settings}).then(t=>{this.$notify.success(t.message||this.$t("Settings saved successfully!"))}).catch(t=>{this.handleError(t)}).finally(()=>{this.saving=!1})},formatSectionTitle(t){return t.replace("_"," ")}},mounted(){this.getFields()}},kue={class:"setting-wrap"},xue={class:"fc-checkout-fields-wrapp"},Fue={class:"field-heading"},Sue={class:"fc-checkout-fields"},Eue={key:0,class:"fc-checkout-field"},Uue={class:"fc-checkout-field-info"},Que={class:"fc-checkout-field-tags"},Due={key:0,class:"fc-checkout-field-action"},Mue={key:1,class:"fc-checkout-field-input"},Iue={class:"fc-checkout-field-info"},Tue={class:"fc-checkout-field-tags"},$ue={key:0,class:"fc-checkout-field-action"},Oue={class:"form-section-save-action"};function Lue(t,e,a,s,n,o){const i=C("CardHeader"),l=C("el-skeleton"),A=C("el-switch"),u=C("el-tag"),h=C("el-checkbox"),m=C("el-input"),_=C("CardBody"),B=C("Card"),b=C("el-button");return f(),y("div",kue,[d("div",xue,[r(B,null,{default:c(()=>[r(i,{title:t.$t("Checkout Fields"),border_bottom:""},null,8,["title"]),r(_,null,{default:c(()=>[r(l,{loading:n.fetching,animated:"",rows:5},null,8,["loading"]),n.fetching?S("",!0):(f(!0),y(P,{key:0},j(n.fields,(w,k)=>(f(),y("div",{key:k,class:"fc-checkout-field-section"},[d("h3",Fue,v(o.formatSectionTitle(k)),1),d("div",Sue,[w.label?(f(),y("div",Eue,[d("div",Uue,[w.can_alter==="yes"?(f(),U(A,{key:0,modelValue:n.settings[k].enabled,"onUpdate:modelValue":F=>n.settings[k].enabled=F,"active-value":"yes","inactive-value":"no"},null,8,["modelValue","onUpdate:modelValue"])):S("",!0),d("span",{class:le(`fc-checkout-field-label ${n.settings[k].enabled==="no"?"opacity-50":""}`)},v(w.label),3),d("div",Que,[w.can_alter!=="yes"&&n.settings[k].enabled==="yes"?(f(),U(u,{key:0,size:"small"},{default:c(()=>[O(v(t.$t("System")),1)]),_:1})):S("",!0),n.settings[k].required==="yes"&&n.settings[k].enabled==="yes"?(f(),U(u,{key:1,size:"small"},{default:c(()=>[O(v(t.$t("Required")),1)]),_:1})):S("",!0)])]),w.can_alter==="yes"?(f(),y("div",Due,[r(h,{modelValue:n.settings[k].required,"onUpdate:modelValue":F=>n.settings[k].required=F,"true-label":"yes","false-label":"no",disabled:n.settings[k].enabled!=="yes"},{default:c(()=>[O(v(t.$t("Required")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])):S("",!0),n.settings[k].hasOwnProperty("text")&&n.settings[k].enabled==="yes"?(f(),y("div",Mue,[r(m,{type:"textarea",modelValue:n.settings[k].text,"onUpdate:modelValue":F=>n.settings[k].text=F,disabled:n.settings[k].enabled!=="yes"},null,8,["modelValue","onUpdate:modelValue","disabled"])])):S("",!0)])):(f(!0),y(P,{key:1},j(w,(F,x)=>(f(),y("div",{key:x,class:"fc-checkout-field"},[d("div",Iue,[F.can_alter==="yes"?(f(),U(A,{key:0,modelValue:n.settings[k][x].enabled,"onUpdate:modelValue":E=>n.settings[k][x].enabled=E,"active-value":"yes","inactive-value":"no"},null,8,["modelValue","onUpdate:modelValue"])):S("",!0),d("span",{class:le(`fc-checkout-field-label ${n.settings[k][x].enabled==="no"?"opacity-50":""}`)},v(F.label),3),d("div",Tue,[F.can_alter!=="yes"&&n.settings[k][x].enabled==="yes"?(f(),U(u,{key:0,size:"small"},{default:c(()=>[O(v(t.$t("System")),1)]),_:1})):S("",!0),n.settings[k][x].required==="yes"&&n.settings[k][x].enabled==="yes"?(f(),U(u,{key:1,size:"small"},{default:c(()=>[O(v(t.$t("Required")),1)]),_:1})):S("",!0)])]),F.can_alter==="yes"?(f(),y("div",$ue,[r(h,{modelValue:n.settings[k][x].required,"onUpdate:modelValue":E=>n.settings[k][x].required=E,"true-label":"yes","false-label":"no",disabled:n.settings[k][x].enabled!=="yes"},{default:c(()=>[O(v(t.$t("Required")),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])):S("",!0)]))),128))])]))),128))]),_:1})]),_:1}),d("div",Oue,[r(b,{type:"primary",onClick:o.saveFields,loading:n.saving},{default:c(()=>[O(v(n.saving?t.$t("Saving"):t.$t("Save")),1)]),_:1},8,["onClick","loading"])])])])}const Vue=ve(Bue,[["render",Lue]]),p_=window.fluentCartAdminApp.payment_routes;for(const t of p_)t.props=!0;const m_=window.fluentCartAdminApp.storage_driver_routes;for(const t of m_)t.props=!0;var Rue={dashboard:{name:"dashboard",path:"/",component:UE,meta:{active_menu:"dashboard",title:"Dashboard"}},orders:{path:"/orders",component:kM,meta:{active_menu:"orders",title:"Orders"},children:[{name:"orders",path:"",component:TC,meta:{active_menu:"orders",title:"Orders",permission:"orders/view"}},{name:"view_order",path:":order_id/view",component:ZO,props:!0,meta:{active_menu:"orders",title:"View Order",permission:["orders/view","orders/manage"]}},{name:"add_order",path:"add",component:EL,props:!0,meta:{active_menu:"orders",title:"Create Order",permission:"orders/create"}}]},products:{name:"products",path:"/products",component:RR,meta:{active_menu:"products",title:"Products",permission:"products/view"}},product_route:{path:"/products/:product_id",component:_V,name:"product_route",meta:{active_menu:"products",title:"Products",permission:["products/view","products/edit","integrations/manage"]},props:!0,children:[{name:"product_edit",path:"",props:!0,component:Mz,meta:{active_menu:"products",title:"Product Edit",permission:"products/edit"}},{name:"product_integrations",path:"integrations",props:!0,component:Rh,meta:{active_menu:"products",title:"Integrations",permission:"integrations/manage"}},{name:"product_integration_feed_editor",path:"integrations/:integration_id/:integration_name",component:wh,meta:{active_menu:"products",title:"Edit Integration",permission:"integrations/manage"}},{name:"SingleIntegration",path:"integrations/:integration_id",props:!0,component:HG,meta:{active_menu:"products",title:"Integrations",permission:"integrations/manage"}},{name:"product_upgrade_paths",path:"upgrade-paths",props:!0,component:bG,meta:{active_menu:"products",title:"Upgrade Paths",permission:"integrations/manage"}},{name:"Integrations",path:"integrations",props:!0,component:Rh,meta:{active_menu:"integrations",title:"Product Integrations",permission:"integrations/manage"}}]},customers:{path:"/customers",component:KC,meta:{active_menu:"customers",permission:["customers/view","customers/manage"]},children:[{name:"customers",path:"/customers",component:Db,meta:{active_menu:"customers",title:"Customers",permission:"customers/view"}},{name:"view_customer",path:":customer_id/view",component:CT,props:!0,meta:{active_menu:"customers",title:"View Customer",permission:"customers/view"}}]},reports:{name:"reports",path:"/reports",component:aW,meta:{active_menu:"reports",permission:"reports/view"},children:[{name:"reports_overview",path:"overview",component:jse,meta:{title:"Overview Reports",permission:"reports/view"}},{name:"reports_sales",path:"sales",component:LW,meta:{title:"Sales Reports",permission:"reports/view"}},{name:"reports_orders",path:"orders",component:eZ,meta:{title:"Order Reports",permission:"reports/view"}},{name:"reports_revenue",path:"revenue",component:Qq,meta:{title:"Revenue Report",permission:"reports/view"}},{name:"reports_refunds",path:"refunds",component:LZ,meta:{title:"Refund Report",permission:"reports/view"}},{name:"reports_subscriptions",path:"subscriptions",component:Iee,meta:{title:"Subscription Report",permission:"reports/view"}},{name:"future_renewals",path:"subscriptions/future-renewals",component:Zee,meta:{title:"Future Renewals",permission:"reports/view"}},{name:"reports_products",path:"products",component:Jae,meta:{title:"Product Report",permission:"reports/view"}},{name:"reports_customer",path:"customer",component:xte,meta:{title:"Customer Report",permission:"reports/view"}}]},settings:{path:"/settings",component:yI,meta:{active_menu:"settings",title:"Settings",permission:["store/settings","store/sensitive"]},children:[{name:"store_settings",path:"store-settings",component:HL,meta:{active_menu:"settings",title:"Settings",permission:"store/settings"},children:[{name:"store_setup",path:"",component:dr,meta:{}},{name:"pages_setup",path:"pages_setup",component:dr,meta:{}},{name:"single_product_setup",path:"single_product_setup",component:dr,meta:{}},{name:"cart_and_checkout",path:"cart_and_checkout",component:dr,meta:{}},{name:"checkout_fields",path:"checkout_fields",component:Vue,meta:{}}]},{name:"email_notifications",path:"email_notifications",component:qG,meta:{active_menu:"settings",title:"Notifications",permission:"store/sensitive"}},{name:"email_mailing_settings",path:"email_mailing_settings",component:Ene,meta:{active_menu:"settings",title:"Mailing Settings",permission:"store/sensitive"}},{path:"email_notifications/:name/",name:"email_notifications/edit",component:sj,meta:{active_menu:"settings",title:"Edit Notification",permission:"store/sensitive"},props:!0},{path:"email_notifications/add",name:"email_notifications/add",component:bj,meta:{active_menu:"settings",title:"Add Notification",permission:"store/sensitive"}},{name:"licensing",path:"licensing",component:lV,meta:{active_menu:"settings",title:"Licensing",permission:"store/sensitive"}},{name:"payments",path:"payments",component:IM,meta:{active_menu:"settings",title:"Payment Settings",permission:"is_super_admin"}},{name:"gateway",component:dD,path:"payments",children:p_,props:!0,meta:{active_menu:"settings",title:"Payment Settings",permission:"is_super_admin"}},{name:"invoice-packing",path:"invoice-packing",component:RC,meta:{active_menu:"settings",title:"Invoice & Packing",permission:"is_super_admin"}},{name:"roles",path:"roles",component:ZM,meta:{active_menu:"settings",title:"Role Settings",permission:"is_super_admin"}},{name:"addons",path:"addons",component:ene,meta:{active_menu:"settings",title:"Features & addon",permission:"is_super_admin"}},{name:"coupons",path:"coupons",component:Gh,meta:{active_menu:"coupons",title:"Coupons Settings",permission:"is_super_admin"}},{name:"storage",path:"storage",component:fj,meta:{active_menu:"settings",title:"Storage Settings",permission:"is_super_admin"}},{name:"drivers",component:pj,path:"storage",children:m_,props:!0,meta:{active_menu:"settings",title:"Storage Settings",permission:"is_super_admin"}},{name:"tax_settings",path:"tax_settings",component:Dne,meta:{active_menu:"settings",title:"Tax Settings",permission:"store/settings"},children:[{name:"tax_configurations",path:"",component:Poe,meta:{}},{name:"tax_rates",path:"tax_rates",component:wie,meta:{}},{name:"eu",path:"eu",component:mAe,meta:{}},{name:"euo",path:"euo",component:Gce,meta:{}},{name:"eu_country_tax_rates",path:"eu/:country/:group",component:Kh,props:!0,meta:{}},{name:"tax-rates-country-single",path:"tax_rates_country_single/:country/:group",component:Kh,props:!0,meta:{}}]}]},integrations:{name:"integrations",path:"/integrations",component:N3,meta:{active_menu:"integrations",title:"Integrations",permission:"integrations/view"}},global_feed_editor:{name:"feed_editor",path:"/global_integrations/:integration_id/:integration_name",component:wh,meta:{active_menu:"integrations",title:"Global Integrations",permission:"integrations/view"}},integration_editor:{name:"integration_editor",path:"/integrations/:integration_name",component:TD,meta:{active_menu:"integrations",title:"Integrations",permission:"integrations/manage"}},coupons:{name:"coupons",path:"/coupons",component:Gh,meta:{active_menu:"coupons",title:"Coupons",permission:"coupons/view"}},logs:{name:"logs",path:"/logs",component:Jj,meta:{active_menu:"logs",title:"Logs",permission:"is_super_admin"}},taxes:{name:"taxes",path:"/taxes",component:Are,meta:{active_menu:"taxes",title:"taxes",permission:"is_super_admin"}},add_or_edit_coupon_route:{name:"add_or_edit_coupon",path:"/coupons/add_or_edit_coupon/:coupon_id?",component:Cue,props:!0,meta:{active_menu:"coupons",title:"Coupons",permission:"coupons/manage"}},onboarding:{path:"/onboarding",component:CM,name:"onboarding",meta:{active_menu:"dashboard",title:"Onboarding",permission:"is_super_admin"}}};const Hue={class:"fc-theme-button-container"},Pue={class:"theme-selected-button"},Nue={__name:"ThemeToggle",setup(t){const e=T(fe.MODE_LIGHT),a=i=>{e.value!==i&&(e.value=i,fe.apply(i))},s=[{value:"light",label:p("Light"),icon:"Sun"},{value:"dark",label:p("Dark"),icon:"Moon"},{value:"system",label:p("System"),icon:"Tools"}];Bn(()=>{e.value=localStorage.getItem("fcart_admin_theme")??fe.MODE_SYSTEM,e.value.toString().startsWith(fe.MODE_SYSTEM)&&(e.value=fe.MODE_SYSTEM)});const n=i=>{me(()=>{e.value=fe.getCurrentTheme()})},o=i=>{a(i)};return he(()=>{window.addEventListener("onWebmakerrProThemeChange",n,!1)}),(i,l)=>{const A=C("el-dropdown-item"),u=C("el-dropdown-menu"),h=C("el-dropdown");return f(),y("div",Hue,[r(h,{placement:"bottom-end",trigger:"click","popper-class":"fc-dropdown",onCommand:o},{dropdown:c(()=>[r(u,null,{default:c(()=>[(f(),y(P,null,j(s,m=>r(A,{key:m.value,command:m.value,class:le({active:e.value===m.value})},{default:c(()=>[r(G,{name:m.icon},null,8,["name"]),O(" "+v(m.label),1)]),_:2},1032,["command","class"])),64))]),_:1})]),default:c(()=>[d("div",Pue,[e.value==="light"?(f(),U(G,{key:0,name:"Sun"})):e.value==="dark"?(f(),U(G,{key:1,name:"Moon"})):e.value==="system"?(f(),U(G,{key:2,name:"Tools"})):S("",!0)])]),_:1})])}}};function Bs(t){return Array.isArray?Array.isArray(t):v_(t)==="[object Array]"}function Kue(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function zue(t){return t==null?"":Kue(t)}function ss(t){return typeof t=="string"}function g_(t){return typeof t=="number"}function Gue(t){return t===!0||t===!1||jue(t)&&v_(t)=="[object Boolean]"}function __(t){return typeof t=="object"}function jue(t){return __(t)&&t!==null}function ba(t){return t!=null}function NA(t){return!t.trim().length}function v_(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Yue="Incorrect 'index' type",Wue=t=>`Invalid value for key ${t}`,que=t=>`Pattern length exceeds max of ${t}.`,Xue=t=>`Missing ${t} property in key`,Jue=t=>`Property 'weight' in key '${t}' must be a positive integer`,jh=Object.prototype.hasOwnProperty;class Zue{constructor(e){this._keys=[],this._keyMap={};let a=0;e.forEach(s=>{let n=b_(s);this._keys.push(n),this._keyMap[n.id]=n,a+=n.weight}),this._keys.forEach(s=>{s.weight/=a})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function b_(t){let e=null,a=null,s=null,n=1,o=null;if(ss(t)||Bs(t))s=t,e=Yh(t),a=Rc(t);else{if(!jh.call(t,"name"))throw new Error(Xue("name"));const i=t.name;if(s=i,jh.call(t,"weight")&&(n=t.weight,n<=0))throw new Error(Jue(i));e=Yh(i),a=Rc(i),o=t.getFn}return{path:e,id:a,weight:n,src:s,getFn:o}}function Yh(t){return Bs(t)?t:t.split(".")}function Rc(t){return Bs(t)?t.join("."):t}function efe(t,e){let a=[],s=!1;const n=(o,i,l)=>{if(ba(o))if(!i[l])a.push(o);else{let A=i[l];const u=o[A];if(!ba(u))return;if(l===i.length-1&&(ss(u)||g_(u)||Gue(u)))a.push(zue(u));else if(Bs(u)){s=!0;for(let h=0,m=u.length;h<m;h+=1)n(u[h],i,l+1)}else i.length&&n(u,i,l+1)}};return n(t,ss(e)?e.split("."):e,0),s?a:a[0]}const tfe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},afe={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},sfe={location:0,threshold:.6,distance:100},nfe={useExtendedSearch:!1,getFn:efe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Ie={...afe,...tfe,...sfe,...nfe};const ofe=/[^ ]+/g;function ife(t=1,e=3){const a=new Map,s=Math.pow(10,e);return{get(n){const o=n.match(ofe).length;if(a.has(o))return a.get(o);const i=1/Math.pow(o,.5*t),l=parseFloat(Math.round(i*s)/s);return a.set(o,l),l},clear(){a.clear()}}}class Xd{constructor({getFn:e=Ie.getFn,fieldNormWeight:a=Ie.fieldNormWeight}={}){this.norm=ife(a,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((a,s)=>{this._keysMap[a.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ss(this.docs[0])?this.docs.forEach((e,a)=>{this._addString(e,a)}):this.docs.forEach((e,a)=>{this._addObject(e,a)}),this.norm.clear())}add(e){const a=this.size();ss(e)?this._addString(e,a):this._addObject(e,a)}removeAt(e){this.records.splice(e,1);for(let a=e,s=this.size();a<s;a+=1)this.records[a].i-=1}getValueForItemAtKeyId(e,a){return e[this._keysMap[a]]}size(){return this.records.length}_addString(e,a){if(!ba(e)||NA(e))return;let s={v:e,i:a,n:this.norm.get(e)};this.records.push(s)}_addObject(e,a){let s={i:a,$:{}};this.keys.forEach((n,o)=>{let i=n.getFn?n.getFn(e):this.getFn(e,n.path);if(ba(i)){if(Bs(i)){let l=[];const A=[{nestedArrIndex:-1,value:i}];for(;A.length;){const{nestedArrIndex:u,value:h}=A.pop();if(ba(h))if(ss(h)&&!NA(h)){let m={v:h,i:u,n:this.norm.get(h)};l.push(m)}else Bs(h)&&h.forEach((m,_)=>{A.push({nestedArrIndex:_,value:m})})}s.$[o]=l}else if(ss(i)&&!NA(i)){let l={v:i,n:this.norm.get(i)};s.$[o]=l}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function y_(t,e,{getFn:a=Ie.getFn,fieldNormWeight:s=Ie.fieldNormWeight}={}){const n=new Xd({getFn:a,fieldNormWeight:s});return n.setKeys(t.map(b_)),n.setSources(e),n.create(),n}function rfe(t,{getFn:e=Ie.getFn,fieldNormWeight:a=Ie.fieldNormWeight}={}){const{keys:s,records:n}=t,o=new Xd({getFn:e,fieldNormWeight:a});return o.setKeys(s),o.setIndexRecords(n),o}function _r(t,{errors:e=0,currentLocation:a=0,expectedLocation:s=0,distance:n=Ie.distance,ignoreLocation:o=Ie.ignoreLocation}={}){const i=e/t.length;if(o)return i;const l=Math.abs(s-a);return n?i+l/n:l?1:i}function lfe(t=[],e=Ie.minMatchCharLength){let a=[],s=-1,n=-1,o=0;for(let i=t.length;o<i;o+=1){let l=t[o];l&&s===-1?s=o:!l&&s!==-1&&(n=o-1,n-s+1>=e&&a.push([s,n]),s=-1)}return t[o-1]&&o-s>=e&&a.push([s,o-1]),a}const mn=32;function Afe(t,e,a,{location:s=Ie.location,distance:n=Ie.distance,threshold:o=Ie.threshold,findAllMatches:i=Ie.findAllMatches,minMatchCharLength:l=Ie.minMatchCharLength,includeMatches:A=Ie.includeMatches,ignoreLocation:u=Ie.ignoreLocation}={}){if(e.length>mn)throw new Error(que(mn));const h=e.length,m=t.length,_=Math.max(0,Math.min(s,m));let B=o,b=_;const w=l>1||A,k=w?Array(m):[];let F;for(;(F=t.indexOf(e,b))>-1;){let $=_r(e,{currentLocation:F,expectedLocation:_,distance:n,ignoreLocation:u});if(B=Math.min($,B),b=F+h,w){let Q=0;for(;Q<h;)k[F+Q]=1,Q+=1}}b=-1;let x=[],E=1,M=h+m;const D=1<<h-1;for(let $=0;$<h;$+=1){let Q=0,I=M;for(;Q<I;)_r(e,{errors:$,currentLocation:_+I,expectedLocation:_,distance:n,ignoreLocation:u})<=B?Q=I:M=I,I=Math.floor((M-Q)/2+Q);M=I;let L=Math.max(1,_-I+1),V=i?m:Math.min(_+I,m)+h,N=Array(V+2);N[V+1]=(1<<$)-1;for(let K=V;K>=L;K-=1){let X=K-1,re=a[t.charAt(X)];if(w&&(k[X]=+!!re),N[K]=(N[K+1]<<1|1)&re,$&&(N[K]|=(x[K+1]|x[K])<<1|1|x[K+1]),N[K]&D&&(E=_r(e,{errors:$,currentLocation:X,expectedLocation:_,distance:n,ignoreLocation:u}),E<=B)){if(B=E,b=X,b<=_)break;L=Math.max(1,2*_-b)}}if(_r(e,{errors:$+1,currentLocation:_,expectedLocation:_,distance:n,ignoreLocation:u})>B)break;x=N}const R={isMatch:b>=0,score:Math.max(.001,E)};if(w){const $=lfe(k,l);$.length?A&&(R.indices=$):R.isMatch=!1}return R}function cfe(t){let e={};for(let a=0,s=t.length;a<s;a+=1){const n=t.charAt(a);e[n]=(e[n]||0)|1<<s-a-1}return e}const ml=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class w_{constructor(e,{location:a=Ie.location,threshold:s=Ie.threshold,distance:n=Ie.distance,includeMatches:o=Ie.includeMatches,findAllMatches:i=Ie.findAllMatches,minMatchCharLength:l=Ie.minMatchCharLength,isCaseSensitive:A=Ie.isCaseSensitive,ignoreDiacritics:u=Ie.ignoreDiacritics,ignoreLocation:h=Ie.ignoreLocation}={}){if(this.options={location:a,threshold:s,distance:n,includeMatches:o,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:A,ignoreDiacritics:u,ignoreLocation:h},e=A?e:e.toLowerCase(),e=u?ml(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const m=(B,b)=>{this.chunks.push({pattern:B,alphabet:cfe(B),startIndex:b})},_=this.pattern.length;if(_>mn){let B=0;const b=_%mn,w=_-b;for(;B<w;)m(this.pattern.substr(B,mn),B),B+=mn;if(b){const k=_-mn;m(this.pattern.substr(k),k)}}else m(this.pattern,0)}searchIn(e){const{isCaseSensitive:a,ignoreDiacritics:s,includeMatches:n}=this.options;if(e=a?e:e.toLowerCase(),e=s?ml(e):e,this.pattern===e){let w={isMatch:!0,score:0};return n&&(w.indices=[[0,e.length-1]]),w}const{location:o,distance:i,threshold:l,findAllMatches:A,minMatchCharLength:u,ignoreLocation:h}=this.options;let m=[],_=0,B=!1;this.chunks.forEach(({pattern:w,alphabet:k,startIndex:F})=>{const{isMatch:x,score:E,indices:M}=Afe(e,w,k,{location:o+F,distance:i,threshold:l,findAllMatches:A,minMatchCharLength:u,includeMatches:n,ignoreLocation:h});x&&(B=!0),_+=E,x&&M&&(m=[...m,...M])});let b={isMatch:B,score:B?_/this.chunks.length:1};return B&&n&&(b.indices=m),b}}class sn{constructor(e){this.pattern=e}static isMultiMatch(e){return Wh(e,this.multiRegex)}static isSingleMatch(e){return Wh(e,this.singleRegex)}search(){}}function Wh(t,e){const a=t.match(e);return a?a[1]:null}class dfe extends sn{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const a=e===this.pattern;return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class ufe extends sn{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class ffe extends sn{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const a=e.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}class hfe extends sn{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const a=!e.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class pfe extends sn{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const a=e.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class mfe extends sn{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const a=!e.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class C_ extends sn{constructor(e,{location:a=Ie.location,threshold:s=Ie.threshold,distance:n=Ie.distance,includeMatches:o=Ie.includeMatches,findAllMatches:i=Ie.findAllMatches,minMatchCharLength:l=Ie.minMatchCharLength,isCaseSensitive:A=Ie.isCaseSensitive,ignoreDiacritics:u=Ie.ignoreDiacritics,ignoreLocation:h=Ie.ignoreLocation}={}){super(e),this._bitapSearch=new w_(e,{location:a,threshold:s,distance:n,includeMatches:o,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:A,ignoreDiacritics:u,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class B_ extends sn{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let a=0,s;const n=[],o=this.pattern.length;for(;(s=e.indexOf(this.pattern,a))>-1;)a=s+o,n.push([s,a-1]);const i=!!n.length;return{isMatch:i,score:i?0:1,indices:n}}}const Hc=[dfe,B_,ffe,hfe,mfe,pfe,ufe,C_],qh=Hc.length,gfe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,_fe="|";function vfe(t,e={}){return t.split(_fe).map(a=>{let s=a.trim().split(gfe).filter(o=>o&&!!o.trim()),n=[];for(let o=0,i=s.length;o<i;o+=1){const l=s[o];let A=!1,u=-1;for(;!A&&++u<qh;){const h=Hc[u];let m=h.isMultiMatch(l);m&&(n.push(new h(m,e)),A=!0)}if(!A)for(u=-1;++u<qh;){const h=Hc[u];let m=h.isSingleMatch(l);if(m){n.push(new h(m,e));break}}}return n})}const bfe=new Set([C_.type,B_.type]);class yfe{constructor(e,{isCaseSensitive:a=Ie.isCaseSensitive,ignoreDiacritics:s=Ie.ignoreDiacritics,includeMatches:n=Ie.includeMatches,minMatchCharLength:o=Ie.minMatchCharLength,ignoreLocation:i=Ie.ignoreLocation,findAllMatches:l=Ie.findAllMatches,location:A=Ie.location,threshold:u=Ie.threshold,distance:h=Ie.distance}={}){this.query=null,this.options={isCaseSensitive:a,ignoreDiacritics:s,includeMatches:n,minMatchCharLength:o,findAllMatches:l,ignoreLocation:i,location:A,threshold:u,distance:h},e=a?e:e.toLowerCase(),e=s?ml(e):e,this.pattern=e,this.query=vfe(this.pattern,this.options)}static condition(e,a){return a.useExtendedSearch}searchIn(e){const a=this.query;if(!a)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:n,ignoreDiacritics:o}=this.options;e=n?e:e.toLowerCase(),e=o?ml(e):e;let i=0,l=[],A=0;for(let u=0,h=a.length;u<h;u+=1){const m=a[u];l.length=0,i=0;for(let _=0,B=m.length;_<B;_+=1){const b=m[_],{isMatch:w,indices:k,score:F}=b.search(e);if(w){if(i+=1,A+=F,s){const x=b.constructor.type;bfe.has(x)?l=[...l,...k]:l.push(k)}}else{A=0,i=0,l.length=0;break}}if(i){let _={isMatch:!0,score:A/i};return s&&(_.indices=l),_}}return{isMatch:!1,score:1}}}const Pc=[];function wfe(...t){Pc.push(...t)}function Nc(t,e){for(let a=0,s=Pc.length;a<s;a+=1){let n=Pc[a];if(n.condition(t,e))return new n(t,e)}return new w_(t,e)}const gl={AND:"$and",OR:"$or"},Kc={PATH:"$path",PATTERN:"$val"},zc=t=>!!(t[gl.AND]||t[gl.OR]),Cfe=t=>!!t[Kc.PATH],Bfe=t=>!Bs(t)&&__(t)&&!zc(t),Xh=t=>({[gl.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function k_(t,e,{auto:a=!0}={}){const s=n=>{let o=Object.keys(n);const i=Cfe(n);if(!i&&o.length>1&&!zc(n))return s(Xh(n));if(Bfe(n)){const A=i?n[Kc.PATH]:o[0],u=i?n[Kc.PATTERN]:n[A];if(!ss(u))throw new Error(Wue(A));const h={keyId:Rc(A),pattern:u};return a&&(h.searcher=Nc(u,e)),h}let l={children:[],operator:o[0]};return o.forEach(A=>{const u=n[A];Bs(u)&&u.forEach(h=>{l.children.push(s(h))})}),l};return zc(t)||(t=Xh(t)),s(t)}function kfe(t,{ignoreFieldNorm:e=Ie.ignoreFieldNorm}){t.forEach(a=>{let s=1;a.matches.forEach(({key:n,norm:o,score:i})=>{const l=n?n.weight:null;s*=Math.pow(i===0&&l?Number.EPSILON:i,(l||1)*(e?1:o))}),a.score=s})}function xfe(t,e){const a=t.matches;e.matches=[],ba(a)&&a.forEach(s=>{if(!ba(s.indices)||!s.indices.length)return;const{indices:n,value:o}=s;let i={indices:n,value:o};s.key&&(i.key=s.key.src),s.idx>-1&&(i.refIndex=s.idx),e.matches.push(i)})}function Ffe(t,e){e.score=t.score}function Sfe(t,e,{includeMatches:a=Ie.includeMatches,includeScore:s=Ie.includeScore}={}){const n=[];return a&&n.push(xfe),s&&n.push(Ffe),t.map(o=>{const{idx:i}=o,l={item:e[i],refIndex:i};return n.length&&n.forEach(A=>{A(o,l)}),l})}class _o{constructor(e,a={},s){this.options={...Ie,...a},this.options.useExtendedSearch,this._keyStore=new Zue(this.options.keys),this.setCollection(e,s)}setCollection(e,a){if(this._docs=e,a&&!(a instanceof Xd))throw new Error(Yue);this._myIndex=a||y_(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){ba(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const a=[];for(let s=0,n=this._docs.length;s<n;s+=1){const o=this._docs[s];e(o,s)&&(this.removeAt(s),s-=1,n-=1,a.push(o))}return a}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:a=-1}={}){const{includeMatches:s,includeScore:n,shouldSort:o,sortFn:i,ignoreFieldNorm:l}=this.options;let A=ss(e)?ss(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return kfe(A,{ignoreFieldNorm:l}),o&&A.sort(i),g_(a)&&a>-1&&(A=A.slice(0,a)),Sfe(A,this._docs,{includeMatches:s,includeScore:n})}_searchStringList(e){const a=Nc(e,this.options),{records:s}=this._myIndex,n=[];return s.forEach(({v:o,i,n:l})=>{if(!ba(o))return;const{isMatch:A,score:u,indices:h}=a.searchIn(o);A&&n.push({item:o,idx:i,matches:[{score:u,value:o,norm:l,indices:h}]})}),n}_searchLogical(e){const a=k_(e,this.options),s=(l,A,u)=>{if(!l.children){const{keyId:m,searcher:_}=l,B=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(A,m),searcher:_});return B&&B.length?[{idx:u,item:A,matches:B}]:[]}const h=[];for(let m=0,_=l.children.length;m<_;m+=1){const B=l.children[m],b=s(B,A,u);if(b.length)h.push(...b);else if(l.operator===gl.AND)return[]}return h},n=this._myIndex.records,o={},i=[];return n.forEach(({$:l,i:A})=>{if(ba(l)){let u=s(a,l,A);u.length&&(o[A]||(o[A]={idx:A,item:l,matches:[]},i.push(o[A])),u.forEach(({matches:h})=>{o[A].matches.push(...h)}))}}),i}_searchObjectList(e){const a=Nc(e,this.options),{keys:s,records:n}=this._myIndex,o=[];return n.forEach(({$:i,i:l})=>{if(!ba(i))return;let A=[];s.forEach((u,h)=>{A.push(...this._findMatches({key:u,value:i[h],searcher:a}))}),A.length&&o.push({idx:l,item:i,matches:A})}),o}_findMatches({key:e,value:a,searcher:s}){if(!ba(a))return[];let n=[];if(Bs(a))a.forEach(({v:o,i,n:l})=>{if(!ba(o))return;const{isMatch:A,score:u,indices:h}=s.searchIn(o);A&&n.push({score:u,key:e,value:o,idx:i,norm:l,indices:h})});else{const{v:o,n:i}=a,{isMatch:l,score:A,indices:u}=s.searchIn(o);l&&n.push({score:A,key:e,value:o,norm:i,indices:u})}return n}}_o.version="7.1.0";_o.createIndex=y_;_o.parseIndex=rfe;_o.config=Ie;_o.parseQuery=k_;wfe(yfe);const Ss=window.fluentCartAdminApp.admin_url,Efe=[{title:p("Dashboard"),data:{type:"link",url:Ss,description:p("Go to dashboard"),show_description:!1}},{title:p("Orders"),data:{type:"link",url:Ss+"orders",description:p("Go to order page"),show_description:!1}},{title:p("Customers"),data:{type:"link",url:Ss+"customers",description:p("Go to customers page"),show_description:!1}},{title:p("Products"),data:{type:"link",new_tab:!0,url:Ss+"products",description:p("Go to products page"),show_description:!1}},{title:p("Integrations"),data:{type:"link",url:Ss+"integrations",description:p("Go to integrations page"),show_description:!1}},{title:p("Coupons"),data:{type:"link",url:Ss+"coupons",description:p("Go to coupons page"),show_description:!0}},{title:p("Manage %s","PayPal"),data:{type:"link",new_tab:!1,url:Ss+"settings/payments/paypal",description:p("Go to %s page","PayPal settings"),show_description:!1}},{title:p("Manage %s","Stripe"),data:{type:"link",new_tab:!1,url:Ss+"settings/payments/stripe",description:p("Go to %s page","stripe settings"),show_description:!1}}],Ufe=[{title:"Theme",title_resolver:()=>{let e=(fe.isDark()?"dark":"light")==="light"?p("Dark"):p("Light");return p("Change theme to %s",e)},data:{type:"action",action:()=>{let e=(fe.isDark()?"dark":"light")==="light"?"dark":"light";fe.apply(e,{fromShortcut:!0})}}}];window.fluentCartAdminApp.admin_url+"";const Jh={"/settings/store-settings":p("Store Setup"),"/settings/store-settings/pages_setup":p("Pages Setup"),"/settings/store-settings/single_product_setup":p("Single product & Order Setup"),"/settings/store-settings/cart_and_checkout":p("Cart and Checkout"),"/settings/store-settings/checkout_fields":p("Checkout Fields")};let x_=[];Object.keys(Jh).forEach(t=>{const e=Jh[t];x_.push({title:e,data:{type:"action",action:({router:a})=>{a.push({path:t})},description:p("Go to %s",e),show_description:!1}})});const Qfe={Menu:Efe,Actions:Ufe,Settings:x_},Gc=[];Object.entries(Qfe).forEach(([t,e])=>{e.forEach((a,s)=>{Gc.push({...a,id:`${t.toString().toLowerCase()}-${s}`,group:[t]})})});const Dfe=()=>({shouldSort:!0,threshold:.6,keys:[{name:"title",getFn:t=>t.title},{name:"data.description",getFn:t=>t.data.description},{name:"group",weight:2,getFn:t=>t.group}]}),Mfe={class:"navigable-list-container fc-global-search-result-container"},Ife={key:0,class:"no-results fc-global-search-result-not-found"},Tfe={key:1},$fe=["tabindex","onClick","onKeydown"],Ofe={__name:"NavigableList",props:{items:{type:Array,required:!0,default:()=>[]},noResultsText:{type:String,default:p("No results found")},onAction:{type:Function,required:!0}},setup(t,{expose:e}){const a=t,s=T(-1),n=H_("listContainer"),o=T({}),i=(b,w)=>{w&&(o.value[b]=w)},l=b=>{const w=a.items.length;if(w===0)return;const k=w-1;b==="up"?s.value=s.value<=0?k:s.value-1:b==="down"&&(s.value=s.value>=k?0:s.value+1),A()},A=()=>{const b=n.value,w=o.value[s.value];w&&b&&(w.scrollIntoView({behavior:"smooth",block:"nearest"}),me(()=>{w.focus()}))},u=b=>{s.value=b,h(b)},h=b=>{b>=0&&b<a.items.length&&a.onAction(a.items[b],b)},m=()=>{s.value=-1};return e({focusList:b=>{b=b??a.items.length-1,b>=0&&(s.value=b,me(()=>{o.value[b]&&o.value[b].focus()}))},resetSelection:m,performFirstAction:()=>{a.items.length>0?(s.value=0,setTimeout(()=>{h(0)},200)):s.value=-1}}),ke(()=>a.items,b=>{m(),b.length>0&&me(()=>{})},{immediate:!0}),ke(s,()=>{}),(b,w)=>(f(),y("div",Mfe,[t.items.length===0?(f(),y("div",Ife,[r(G,{name:"Empty/GlobalSearch"}),O(" "+v(t.noResultsText),1)])):(f(),y("div",Tfe,[d("ul",{ref_key:"listContainer",ref:n,class:"navigable-list fc-global-search-result-list"},[(f(!0),y(P,null,j(t.items,(k,F)=>(f(),y("li",{key:F,ref_for:!0,ref:x=>i(F,x),class:le({selected:F===s.value}),tabindex:F,onClick:x=>u(F),onKeydown:[w[0]||(w[0]=ja(Ke(x=>l("up"),["prevent"]),["arrow-up"])),w[1]||(w[1]=ja(Ke(x=>l("down"),["prevent"]),["arrow-down"])),ja(x=>h(F),["enter"])]},[aa(b.$slots,"default",{item:k,index:F,isSelected:F===s.value},void 0,!0)],42,$fe))),128))],512)]))]))}},jc=ve(Ofe,[["__scopeId","data-v-84b69080"]]),Lfe={key:0},Vfe={class:"action-icon"},Rfe={class:"recent-search-title"},Hfe={key:0},Pfe={class:"action-icon"},KA="recent_actions",Nfe={__name:"ResultList",props:{query:{type:String,required:!0},searchResults:{type:Array,required:!0,default:()=>[]},onActionPerformed:{type:Function,required:!0},focusInput:{type:Function,required:!0},searchData:{type:Array,required:!0,default:()=>[]}},setup(t,{expose:e}){const a=Ra();We().ctx;const s=t,n=T(0),o=T({}),i=T(),l=(k,F)=>{const E=k.item.data,M=u(E.type);if(M==="link"){let D=u(E.url);u(E.new_tab)?window.open(D,"_blank"):window.location.href=D}else M==="action"&&u(E.action);A(k),s.onActionPerformed()},A=k=>{const F=k.item.id;let x=Pe.get(KA)||[];x=x.filter(E=>E!==F),x.unshift(F),x=x.slice(0,5),Pe.set(KA,x)},u=k=>typeof k=="function"?h(k):k,h=async k=>await k({query:s.query,router:a}),m=()=>{var k;(k=i.value)==null||k.resetSelection()},_=()=>{var k;(k=i.value)==null||k.focusList(0)},B=()=>{var k;(k=i.value)==null||k.performFirstAction()};ke(()=>s.searchResults,async()=>{o.value={},o.value=s.searchResults??{},n.value=Object.keys(o.value).length-1;let k=o.value;for(const F of Object.keys(k)){const x=k[F];x.item.title_resolver&&(k[F].item.title=await u(x.item.title_resolver))}o.value={...k}});const b=T([]),w=async()=>{const k=Pe.get(KA)||[];let F=be.whereIn(s.searchData,"id",k),x=[];for(const E of F)typeof E.title_resolver=="function"&&(E.title=await u(E.title_resolver)),x.push({item:E});b.value=x};return he(()=>{w()}),e({focusList:_,resetSelection:m,performFirstAction:B,fetchRecentActions:w}),(k,F)=>(f(),y(P,null,[t.query||b.value.length<1?(f(),U(jc,{key:0,items:t.searchResults,"on-action":l,"no-results-text":g(p)("No matches found"),ref_key:"navigableList",ref:i},{default:c(({item:x,index:E,isSelected:M})=>{var D,R;return[d("span",null,[O(v(x.item.title)+" ",1),F[0]||(F[0]=d("br",null,null,-1)),((R=(D=x.item)==null?void 0:D.data)==null?void 0:R.show_description)===!0?(f(),y("span",Lfe,v(x.item.data.description),1)):S("",!0)]),d("div",Vfe,[r(G,{name:"Enter"})])]}),_:1},8,["items","no-results-text"])):S("",!0),!t.query&&b.value.length>0?(f(),y(P,{key:1},[d("span",Rfe,v(g(p)("Recent Actions")),1),r(jc,{items:b.value,"on-action":l,"no-results-text":g(p)("No matches found"),ref_key:"navigableList",ref:i},{default:c(({item:x,index:E,isSelected:M})=>{var D,R;return[d("span",null,[O(v(x.item.title)+" ",1),F[1]||(F[1]=d("br",null,null,-1)),((R=(D=x.item)==null?void 0:D.data)==null?void 0:R.show_description)===!0?(f(),y("span",Hfe,v(x.item.data.description),1)):S("",!0)]),d("div",Pfe,[r(G,{name:"Enter"})])]}),_:1},8,["items","no-results-text"])],64)):S("",!0)],64))}},Kfe=ve(Nfe,[["__scopeId","data-v-ab6a6817"]]),zfe={class:"fc-global-search-product-wrap"},Gfe={class:"fc-global-search-product-left-info"},jfe={key:0,class:"type"},Yfe={key:0,class:"price-and-status"},Wfe={__name:"Product",props:{product:{type:Object,required:!0}},setup(t){const e=s=>s.min_price===s.max_price?st(s.min_price,!0):`${st(s.min_price,!0)} - ${st(s.max_price,!0)}`,a=s=>s==="publish"?p("published"):s==="future"?p("scheduled"):s;return(s,n)=>(f(),y("div",zfe,[d("div",Gfe,[r(Zc,{product:t.product},null,8,["product"]),t.product.detail?(f(),y("span",jfe,[O(v(g(lt).headline(t.product.detail.variation_type))+" ",1),n[0]||(n[0]=d("br",null,null,-1)),O(" "+v(g(lt).headline(t.product.detail.fulfillment_type)),1)])):S("",!0)]),t.product.detail?(f(),y("span",Yfe,[O(v(e(t.product.detail))+" ",1),(f(),U(pt,{key:t.product.ID,status:t.product.post_status},{default:c(()=>[O(v(a(t.product.post_status)),1)]),_:1},8,["status"]))])):S("",!0)]))}},qfe={class:"fc-global-search-order-wrap"},Xfe={class:"fc-global-search-order-header"},Jfe={class:"fc-global-search-order-id"},Zfe={class:"items"},ehe={class:"fc-global-search-order-header-meta"},the={class:"date"},ahe=["innerHTML"],she={class:"customer-name"},nhe={class:"fc-global-search-order-status-wrapper"},ohe=["src","alt"],ihe={__name:"Order",props:{order:{type:Object,required:!0}},setup(t){const e=a=>be.get(window,"fluentCartAdminApp.payment_logos."+a);return(a,s)=>{var o;const n=C("el-tag");return f(),y("div",qfe,[d("div",Xfe,[d("div",Jfe,[O(" #"+v(t.order.id)+" ",1),d("span",Zfe,v(g(p)("%s Items",t.order.order_items.length)),1)]),d("div",ehe,[d("span",the,[r(Ht,{"date-time":t.order.created_at},null,8,["date-time"])]),s[0]||(s[0]=d("span",{class:"circle"},null,-1)),d("span",{class:"total-price",innerHTML:g(st)(t.order.total_amount,!0,!1,t.order.currency)},null,8,ahe),s[1]||(s[1]=d("span",{class:"circle"},null,-1)),d("span",she,v(((o=t.order.customer)==null?void 0:o.full_name)||g(p)("No Name")),1)])]),d("div",nhe,[r(pt,{status:t.order.payment_status,"hide-icon":!0},null,8,["status"]),e(t.order.payment_method)?(f(),y("img",{key:0,class:"border border-solid border-gray-divider dark:border-dark-400 rounded-xs py-1 px-2 h-[21px]",src:e(t.order.payment_method),alt:g(lt).headline(t.order.payment_method)},null,8,ohe)):(f(),U(n,{key:1,type:"info",round:"",size:"small",class:"capitalize"},{default:c(()=>[O(v(g(lt).headline(t.order.payment_method)),1)]),_:1}))])])}}},rhe={class:"fc-global-search-customer-wrap"},lhe={class:"fc-customer-card"},Ahe={class:"fc-customer-avatar"},che=["src"],dhe={class:"fc-customer-details"},uhe={class:"fc-customer-name"},fhe={class:"fc-customer-id"},hhe={class:"fc-customer-email"},phe={class:"purchase-count"},mhe={class:"date"},ghe={__name:"Customer",props:{customer:{type:Object,required:!0}},setup(t){return(e,a)=>(f(),y("div",rhe,[d("div",lhe,[d("div",Ahe,[d("img",{src:t.customer.photo,alt:"avatar"},null,8,che)]),d("div",dhe,[d("div",uhe,[O(v(t.customer.full_name||e.$t("No Name"))+" ",1),d("span",fhe,"#"+v(t.customer.id),1)]),d("div",hhe,[O(v(t.customer.email)+" ",1),a[0]||(a[0]=d("span",{class:"circle"},null,-1)),a[1]||(a[1]=O()),d("span",phe,"Purchase: "+v(t.customer.purchase_count),1)])])]),d("span",mhe,[r(Ht,{"date-time":t.customer.last_purchase_date},null,8,["date-time"])])]))}},_he={class:"grid grid-cols-3 gap-2 w-full"},vhe={class:"text-right"},bhe={__name:"Coupon",props:{coupon:{type:Object,required:!0}},setup(t){return(e,a)=>(f(),y("div",_he,[d("span",null,v(t.coupon.title),1),d("span",null,v(t.coupon.code),1),d("span",vhe,v(g(st)(t.coupon.amount,!0)),1)]))}},yhe={class:"fc-global-remote-result-container"},whe={class:"fc-global-remote-result-label flex justify-between"},Che={class:"text"},Bhe={class:"w-full"},khe={class:"action-icon"},xhe={__name:"RemoteResult",emits:["close-modal","onRemoteSearchStateChange"],setup(t,{expose:e,emit:a}){const s=a,n=Ra(),o=T({}),i=T(""),l=T(),A=T({}),u=T([]),h=$=>{m.value=!1,u.value=k.data.tableData,s("onRemoteSearchStateChange",!1)},m=T(!1),_={orders:vp({fetch:!1}),products:Kg({fetch:!1}),customers:_p({fetch:!1}),coupons:h_({fetch:!1})},B=()=>{},b=()=>{var $;($=l.value)==null||$.focusList(0)},w=()=>{var $;($=l.value)==null||$.performFirstAction()};Bn(()=>{for(const $ of Object.keys(_))_[$].onDataLoaded(h)});let k=null;const F=()=>{k=_[o.value.key],k.data.search=i.value,m.value=!0,k.fetch(),s("onRemoteSearchStateChange",!0)},x=rd.debounce(F,800),E=($,Q)=>{if(u.value=[],k&&(k.data.search=""),o.value=Q,A.value={title:Q.title,key:Q.key},!$){i.value="";return}i.value=$,x()},M=()=>{n.push({name:A.value.key,query:{search:i.value}}),s("close-modal")},D={orders:{name:"view_order",key:"order_id"},products:{name:"product_edit",key:"product_id"},customers:{name:"view_customer",key:"customer_id"},coupons:{name:"edit_coupon",key:"coupon_id"}},R=$=>{o.value.key in D&&(n.push({name:D[o.value.key].name,params:{[D[o.value.key].key]:$.id||$.ID,action:"edit"}}),s("close-modal"))};return e({fetchData:E,focusList:b,resetSelection:B,performFirstAction:w}),($,Q)=>(f(),y("div",yhe,[d("div",whe,[d("span",Che,v(o.value.title),1),A.value.key?(f(),y("span",{key:0,class:"view-all",onClick:M},v(i.value?g(p)('Search "%s" in %s',i.value,A.value.title):g(p)("See All %s",A.value.title)),1)):S("",!0)]),r(jc,{items:u.value,"on-action":I=>{R(I)},"no-results-text":i.value?g(p)("No matches found for %s",o.value.title):g(p)("Type something to find %s",o.value.title),ref_key:"navigableList",ref:l},{default:c(({item:I,index:L,isSelected:V})=>[d("div",Bhe,[o.value.key==="products"?(f(),U(Wfe,{key:0,product:I},null,8,["product"])):S("",!0),o.value.key==="orders"?(f(),U(ihe,{key:1,order:I},null,8,["order"])):S("",!0),o.value.key==="customers"?(f(),U(ghe,{key:2,customer:I},null,8,["customer"])):S("",!0),o.value.key==="coupons"?(f(),U(bhe,{key:3,coupon:I},null,8,["coupon"])):S("",!0)]),d("div",khe,[r(G,{name:"Enter"})])]),_:1},8,["items","on-action","no-results-text"])]))}},Fhe={class:"fc-global-search-input-wrap"},She={class:"fc-setting-search-icon"},Ehe={class:"fc-global-search-input-container"},Uhe={key:0,class:"searched-item"},Qhe={class:"fc-global-searching-for"},Dhe={class:"fc-global-searching-for-label"},Mhe={class:"fc-global-searching-suggestion-list"},Ihe=["onClick"],The={class:"dialog-footer is-border"},$he={class:"fc-search-commands"},Ohe={class:"command-key"},Lhe={class:"command-key"},Vhe={class:"label"},Rhe={class:"command-key"},Hhe={class:"label"},Phe={__name:"GlobalSearch",setup(t){We().ctx;const e=T(!1),a=T(""),s=T({}),n=T(),o=()=>{},i=()=>{var $,Q;e.value?($=M.value)==null||$.resetSelection():(Q=u.value)==null||Q.resetSelection(),_.value=!1,x.value=!1,A()},l=()=>{var $;($=n.value)==null||$.focus()},A=()=>{_.value=!1,s.value=[],e.value=!1,a.value="",B.value=null},u=T(),h=$=>{let Q=$.includes(","),I={},L=[];(Q?$.split(","):[$]).forEach(Y=>{Y.includes(":")?m(Y,I,L):L.push(Y)});let N=[];return Object.keys(I).forEach(Y=>{const K=I[Y];K.length>0?K.forEach(X=>{X.length>0?N.push({group:"'"+Y,title:X}):N.push({group:"'"+Y})}):N.push({group:"'"+Y})}),L.forEach(Y=>{Y.length>0&&N.push({title:Y})}),N},m=($,Q,I)=>{if($.length===1)return;let L=$.split(":"),V=L[0],N=L[1];V.length>0?(Q.hasOwnProperty(V)||(Q[V]=[]),N.length>0&&Q[V].push(N)):I.push(N)},_=T(!1),B=T(null),b=T({o:{key:"orders",title:p("Orders")},p:{key:"products",title:p("Products")},c:{key:"customers",title:p("Customers")},d:{key:"coupons",title:p("Coupons")}}),w=$=>{B.value=$,_.value=!0,s.value={},me(()=>{var Q,I;(Q=M.value)==null||Q.fetchData(a.value,$),(I=n.value)==null||I.focus()})},k=()=>{var $;s.value=[],B.value=null,a.value="",_.value=!1,($=n.value)==null||$.focus(),x.value=!1},F=()=>{var $;($=M.value)==null||$.fetchData(a.value,B.value)},x=T(!1),E=$=>{x.value=$,me(()=>{var Q;(Q=n.value)==null||Q.focus()})},M=T(),D=bi();D.bind("/",$=>{e.value&&($.preventDefault(),l())}),D.bind(["meta+k"],($,Q)=>{var V;$.preventDefault();let I=null;const L=["o","p","c","d"];D.bind(L,N=>{N.preventDefault(),I=b.value[N.key],I&&w(I)}),e.value=!0,(V=u.value)==null||V.fetchRecentActions(),setTimeout(()=>{l(),D.unbind(L)},500)});let R;return he(()=>{R=new _o(Gc,Dfe())}),($,Q)=>{const I=C("el-input"),L=C("el-dialog");return f(),y(P,null,[(f(),U(vl,{to:"#fc_admin_menu_search"},[d("div",Fhe,[d("button",{onClick:Q[0]||(Q[0]=V=>e.value=!0),type:"button",class:"fc-setting-search-button","aria-label":"Search"},[d("span",She,[r(G,{name:"Search"})]),Q[7]||(Q[7]=d("span",{class:"fc-global-search-button-keys"},[d("kbd",{class:"fc-global-search-button-key"},"⌘"),d("kbd",{class:"fc-global-search-button-key"},"K")],-1))])])])),r(L,{modelValue:e.value,"onUpdate:modelValue":Q[6]||(Q[6]=V=>e.value=V),onOpened:o,onClosed:i,class:"fc-global-search-container fluent-cart-admin-pages","append-to-body":!0},{header:c(()=>[d("div",Ehe,[r(G,{name:"Search",class:"search-icon w-4 h-4"}),B.value!=null?(f(),y("div",Uhe,[O(v(B.value.title)+" ",1),r(G,{name:"Cross",class:"w-3 h-3 cursor-pointer",onClick:k})])):S("",!0),r(I,{class:"mousetrap",placeholder:_.value?g(p)("Search %s...",B.value.title):g(p)("Search shortcuts..."),autofocus:"",ref_key:"searchRef",ref:n,id:"fc-global-search-input",disabled:x.value,onKeydown:[Q[1]||(Q[1]=ja(Ke(()=>{var V,N;if(_.value){(V=M.value)==null||V.focusList();return}(N=u.value)==null||N.focusList()},["prevent"]),["arrow-down"])),Q[2]||(Q[2]=ja(Ke(()=>{var V,N;if(_.value){(V=M.value)==null||V.performFirstAction();return}(N=u.value)==null||N.performFirstAction()},["prevent"]),["enter"])),Q[3]||(Q[3]=ja(()=>{a.value.length===0&&(B.value=null,_.value=!1)},["backspace"]))],onInput:Q[4]||(Q[4]=()=>{if(_.value){F();return}let V=a.value.includes(","),N=a.value.includes(":");if(!V&&!N)s.value.value=g(R).search(a.value);else{const Y=h(a.value);s.value.value=g(R).search({$or:Y})}}),modelValue:a.value,"onUpdate:modelValue":Q[5]||(Q[5]=V=>a.value=V),clearable:""},null,8,["placeholder","disabled","modelValue"])])]),default:c(()=>[r(pa,{visible:!B.value&&a.value.length===0,accordion:""},{default:c(()=>[d("div",Qhe,[d("div",Dhe,v(g(p)("Searching for")),1),d("div",Mhe,[(f(!0),y(P,null,j(b.value,V=>{var N;return f(),y("div",{key:V.key,onClick:Y=>w(V),class:le(["fc-global-searching-suggestion",((N=B.value)==null?void 0:N.key)===V.key?"active":""])},v(V.title),11,Ihe)}),128))])])]),_:1},8,["visible"]),_.value?(f(),U(xhe,{key:0,ref_key:"remoteResultRef",ref:M,query:a.value,tag:B.value,onCloseModal:A,onOnRemoteSearchStateChange:E},null,8,["query","tag"])):(f(),U(Kfe,{key:1,ref_key:"resultListRef",ref:u,query:a.value,"search-results":s.value.value,onActionPerformed:A,focusInput:l,searchData:g(Gc)},null,8,["query","search-results","searchData"])),d("div",The,[d("ul",$he,[d("li",null,[d("span",Ohe,[r(G,{name:"ArrowUp"})]),d("span",Lhe,[r(G,{name:"ArrowDown"})]),d("span",Vhe,v(g(p)("To navigate")),1)]),d("li",null,[d("span",Rhe,[r(G,{name:"Enter"})]),d("span",Hhe,v(g(p)("To select")),1)])])])]),_:1},8,["modelValue"])],64)}}},Nhe={class:"fl_app fluent-cart-admin-pages"},Khe=Object.assign({name:"DashboardApplication"},{__name:"Application",setup(t){T({});const e=T(""),a=T(!1);T(!1),he(()=>{jQuery(".notice:not(.fluent-cart), .error:not(.fluent-cart), #ehp-admin-cb").remove(),e.value=s();const l=document.querySelector(".fca_admin_menu_wrap"),A=()=>{window.scrollY>10?l==null||l.classList.add("scroll-header"):l==null||l.classList.remove("scroll-header")};window.addEventListener("scroll",A);const u=h=>{const m=document.querySelector("#mobile-menu-container");m&&!m.contains(h.target)&&(a.value=!1)};document.addEventListener("click",u),He(()=>{document.removeEventListener("click",u)})});const s=()=>window.location.href,n=T(!1),o=sa();ke(()=>o.fullPath,async()=>{e.value=s(),n.value=!1,me(()=>{setTimeout(()=>{n.value=!0},100)})});const i=J(()=>!(o.fullPath.includes("reports")||o.fullPath.includes("settings")));return(l,A)=>{const u=C("router-view");return f(),y("div",null,[r(Phe),i.value?(f(),U(Pd,{key:0})):S("",!0),d("div",Nhe,[r(u)]),S("",!0),(f(),U(vl,{to:"#theme-button-container"},[r(Nue)]))])}}});let Zh=!1;function zhe(t){return{data:function(){return{appVars:window.fluentCartAdminApp}},methods:{$get:ne.get,$post:ne.post,$put:ne.put,$del:ne.delete,$t:p,$n:li,formatMoney(e,a,s=!1){return!e&&s?"":(e||(e="0.00"),window.fluentCartAdminApp.shop.currency_sign+" "+e)},formatCents(e,a,s=!1){return!e&&s?"":(e?e=(e*100).toFixed(2):e="0.00",a?(e=new Intl.NumberFormat("en-US").format(e),window.fluentCartAdminApp.shop.currency_sign+" "+e):e)},formatNumber(e,a=!0,s=!1,n){return Fe.formatNumber(e,a,s,n)},getAddress(e,a="billing"){let s=[e[a+"_address_1"],e[a+"_address_2"],e[a+"_city"],e[a+"_city"],e[a+"_state"],e[a+"_zip"],e[a+"_country"]];return s=s.filter(n=>!!n).join(", "),s||"no "+a+" address"},getOrderAddress(e,a="billing",s=!1){return vv(e,a,s)},changeTitle(e){jQuery("head title").text(e+" - WebmakerrPro")},handleError(e){if(!e)return;let a="";typeof e=="string"?a=e:e&&e.message?a=e.message:a=e,typeof e=="object"&&(a=this.convertToText(e)),a||(a="Something is wrong!"),this.$notify({type:"error",title:"Error",message:a,dangerouslyUseHTMLString:!0})},convertToText(e){const a=[];if(typeof e=="object"&&e.join===void 0)for(const s in e)a.push(this.convertToText(e[s]));else if(typeof e=="object"&&e.join!==void 0)for(const s in e)a.push(this.convertToText(e[s]));else typeof e=="function"||typeof e=="string"&&a.push(e);return a.join("<br />")},handleSuccess:e=>{q.success(e)},handleMessage:(e,a="info",s=40,n=1e3)=>{z_.show(e,a,s,n)},Storage:()=>Pe,buildFormRendererValue(e,a){let s={};return Object.keys(e).forEach(n=>{let o=e[n];["grid"].includes(o.type??"")?s[n]=this.buildFormRendererValue(o.schema??{},a[n]??{}):s[n]=a[n]??""}),s},registerCopyAction(){Zh||(Zh=!0,document.addEventListener("click",e=>{e.target.matches(".copyable-content")&&Bl.copy(e.target.textContent)}))},currencySign(){return window.fluentCartAdminApp.shop.currency_sign},getPlaceholderImage(){return eo.getUrl("images/placeholder.svg")},saveLocal(e,a){Pe.set(e,a)},getLocal(e){return Pe.get(e)},hasPermission(e){return Ai.hasPermission(e)}}}}function Ghe(t){t.beforeEach((e,a,s)=>{var i,l;const n=be.get(e,"meta.permission");return n?Ai.resolve({permission:n,permissionType:be.get(e,"meta.permissionType")})?s():s({name:"unauthorized"}):(((l=(i=window.fluentCartAdminApp)==null?void 0:i.app_config)==null?void 0:l.env)==="dev"&&console.warn(`[Permission] Route "${e.name||e.path}" is missing 'meta.permission'.`),s())})}function jhe(t){t.afterEach((e,a)=>{const s=e.meta.active_menu;jQuery(".fc_menu li").removeClass("active_admin_menu"),jQuery(".fc_menu li.fc_menu_item_"+s).addClass("active_admin_menu"),jQuery(".toplevel_page_fluent-cart li").removeClass("current"),jQuery(".toplevel_page_fluent-cart li.fluent_cart_"+s).addClass("current"),e.meta.title&&jQuery("head title").text(e.meta.title+" - WebmakerrPro")})}const Yhe={mounted(t,e){const a=e.value,s=1e3,n=0,o=performance.now(),i=()=>{const l=performance.now()-o,A=Math.min(l/s,1),u=(n+A*(a-n)).toFixed(2);t.textContent=u,A<1&&requestAnimationFrame(i)};i()},updated(t,e){const a=e.value,s=2e3,n=0,o=performance.now(),i=()=>{const l=performance.now()-o,A=Math.min(l/s,1),u=(n+A*(a-n)).toFixed(2);t.textContent=u,A<1&&requestAnimationFrame(i)};i()}},Whe={__name:"Unauthorized",setup(t){return(e,a)=>(f(),y("span",null,v(g(p)("You are not allowed")),1))}},qhe=window.fluent_cart_admin.hooks.applyFilters("fluent_cart_routes",Rue);let ep=!1;window.addEventListener("fcart_renew_rest_nonce",function(t){ep||_s.alert(p("Your session has expired due to inactivity. Please refresh the page to continue."),p("Session Expired"),{confirmButtonText:p("Reload"),callback:e=>{ep=!1,window.location.reload()}})});const Xhe=[Av,cv,dv,hn,uv,nd,fv,hv,wl,pv,mv,up],Fs=P_(Khe);Fs.config.globalProperties.appVars=window.fluentCartAdminApp;Fs.provide("appVars",window.fluentCartAdminApp);Fs.mixin(zhe());Fs.directive("loading",kv);Fs.directive("animate",Yhe);Bv(Fs);const Jd=N_({routes:[...Object.values(qhe),{path:"/unauthorized",name:"unauthorized",component:Whe,props:!0},{path:"/:path(.*)*",name:"NotFound",component:Cl,props:!0}],history:K_(),scrollBehavior(t,e,a){return a||{top:0,behavior:"smooth"}}});Fs.use(Jd);Ghe(Jd);jhe(Jd);Xhe.forEach(t=>{Fs.component(t.name,t)});Fs.mount("#fluent_cart_plugin_app");
