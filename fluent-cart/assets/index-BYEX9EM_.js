import{j as T,b as Q}from"./BlockEditorTranslator-Do4trUgb.js";import"./index-CGoo2crO.js";const{useState:H,useRef:I,useEffect:we}=wp.element;function et({options:e=[],defaultValue:t=[],onChange:n,customKeys:r={key:"value",label:"label"},isMulti:i=!1}){const[s,a]=H(!1),[l,p]=H(""),o=I(null),w=I(null),c=I(null),b=I(null),[m,v]=H("auto");we(()=>{u();const d=g=>{c.current&&!c.current.contains(g.target)&&a(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[]);const[f,k]=H(i?e.filter(d=>t.includes(d[r.key])):e.find(d=>d[r.key]===t)||null),E=e.filter(d=>d[r.label].toLowerCase().includes(l.toLowerCase())),O=d=>f?i?f.some(g=>g[r.key]===d[r.key]):f[r.key]===d[r.key]:!1,F=d=>{var g;if(a(!1),(g=o.current)==null||g.blur(),i){const R=f.some(P=>P[r.key]===d[r.key])?f.filter(P=>P[r.key]!==d[r.key]):[...f,d];k(R),n(R.map(P=>P[r.key]))}else k(d),n(d[r.key]);p(""),setTimeout(()=>{u()},0)},u=()=>{if(!i||!b.current)return;const{height:d,width:g}=b.current.getBoundingClientRect();b.current&&(g<80?(o.current.style.paddingLeft=`${g+5}px`,w.current.style.paddingTop="0",o.current.style.paddingTop="4px",o.current.style.height="42px"):o.current.style.paddingLeft="4px",d>=24&&g>80&&(o.current.style.paddingTop=`${d+5}px`,o.current.style.height=`${d+30}px`))},h=d=>{if(!i)return;const g=f.filter(A=>A[r.key]!==d[r.key]);k(g),n(g.map(A=>A[r.key])),setTimeout(()=>{u()},0)},y=d=>{i&&d.key==="Backspace"&&l===""&&f.length&&h(f[f.length-1])};return T.jsxs("div",{className:"fc-custom-select-wrap",ref:c,children:[T.jsxs("div",{className:"fc-custom-select-input-wrap",onClick:()=>{var d;a(g=>!g),s?(d=o.current)==null||d.blur():o.current.focus()},ref:w,style:{height:m},children:[T.jsx("div",{className:"fc-custom-select-selected-items "+(i?" multi":"single"),ref:b,children:i?f.map(d=>T.jsxs("span",{children:[d[r.label],T.jsx("button",{onClick:g=>{g.stopPropagation(),h(d)},children:"×"})]},d[r.key])):f&&T.jsxs("span",{className:"fc-custom-select-selected-single-item",onClick:()=>{},children:[f[r.label],T.jsx("button",{onClick:d=>{d.stopPropagation(),k(null),n(null),setTimeout(()=>{u()},0)},children:"×"})]},f[r.key])}),T.jsx("input",{ref:o,value:l,onChange:d=>p(d.target.value),onKeyDown:y,onClick:()=>{},placeholder:i&&f.length?"":Q("Select...")})]}),s&&T.jsx("ul",{className:"fc-custom-select-result-list",children:E.length>0?E.map(d=>T.jsx("li",{onClick:()=>F(d),className:`rs-option ${O(d)?"selected":""}`,children:d[r.label]},d[r.key])):T.jsx("li",{className:"empty-options",children:Q("No options found")})})]})}var U={},J;function me(){return J||(J=1,function(e){(function(){var t={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(l){return i(a(l),arguments)}function r(l,p){return n.apply(null,[l].concat(p||[]))}function i(l,p){var o=1,w=l.length,c,b="",m,v,f,k,E,O,F,u;for(m=0;m<w;m++)if(typeof l[m]=="string")b+=l[m];else if(typeof l[m]=="object"){if(f=l[m],f.keys)for(c=p[o],v=0;v<f.keys.length;v++){if(c==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',f.keys[v],f.keys[v-1]));c=c[f.keys[v]]}else f.param_no?c=p[f.param_no]:c=p[o++];if(t.not_type.test(f.type)&&t.not_primitive.test(f.type)&&c instanceof Function&&(c=c()),t.numeric_arg.test(f.type)&&typeof c!="number"&&isNaN(c))throw new TypeError(n("[sprintf] expecting number but found %T",c));switch(t.number.test(f.type)&&(F=c>=0),f.type){case"b":c=parseInt(c,10).toString(2);break;case"c":c=String.fromCharCode(parseInt(c,10));break;case"d":case"i":c=parseInt(c,10);break;case"j":c=JSON.stringify(c,null,f.width?parseInt(f.width):0);break;case"e":c=f.precision?parseFloat(c).toExponential(f.precision):parseFloat(c).toExponential();break;case"f":c=f.precision?parseFloat(c).toFixed(f.precision):parseFloat(c);break;case"g":c=f.precision?String(Number(c.toPrecision(f.precision))):parseFloat(c);break;case"o":c=(parseInt(c,10)>>>0).toString(8);break;case"s":c=String(c),c=f.precision?c.substring(0,f.precision):c;break;case"t":c=String(!!c),c=f.precision?c.substring(0,f.precision):c;break;case"T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase(),c=f.precision?c.substring(0,f.precision):c;break;case"u":c=parseInt(c,10)>>>0;break;case"v":c=c.valueOf(),c=f.precision?c.substring(0,f.precision):c;break;case"x":c=(parseInt(c,10)>>>0).toString(16);break;case"X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase();break}t.json.test(f.type)?b+=c:(t.number.test(f.type)&&(!F||f.sign)?(u=F?"+":"-",c=c.toString().replace(t.sign,"")):u="",E=f.pad_char?f.pad_char==="0"?"0":f.pad_char.charAt(1):" ",O=f.width-(u+c).length,k=f.width&&O>0?E.repeat(O):"",b+=f.align?u+c+k:E==="0"?u+k+c:k+u+c)}return b}var s=Object.create(null);function a(l){if(s[l])return s[l];for(var p=l,o,w=[],c=0;p;){if((o=t.text.exec(p))!==null)w.push(o[0]);else if((o=t.modulo.exec(p))!==null)w.push("%");else if((o=t.placeholder.exec(p))!==null){if(o[2]){c|=1;var b=[],m=o[2],v=[];if((v=t.key.exec(m))!==null)for(b.push(v[1]);(m=m.substring(v[0].length))!=="";)if((v=t.key_access.exec(m))!==null)b.push(v[1]);else if((v=t.index_access.exec(m))!==null)b.push(v[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");o[2]=b}else c|=2;if(c===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");w.push({placeholder:o[0],param_no:o[1],keys:o[2],sign:o[3],pad_char:o[4],align:o[5],width:o[6],precision:o[7],type:o[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");p=p.substring(o[0].length)}return s[l]=w}e.sprintf=n,e.vsprintf=r,typeof window<"u"&&(window.sprintf=n,window.vsprintf=r)})()}(U)),U}me();var M,ae,j,ce;M={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1};ae=["(","?"];j={")":["("],":":["?","?:"]};ce=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;function _e(e){for(var t=[],n=[],r,i,s,a;r=e.match(ce);){for(i=r[0],s=e.substr(0,r.index).trim(),s&&t.push(s);a=n.pop();){if(j[i]){if(j[i][0]===a){i=j[i][1]||i;break}}else if(ae.indexOf(a)>=0||M[a]<M[i]){n.push(a);break}t.push(a)}j[i]||n.push(i),e=e.substr(r.index+i.length)}return e=e.trim(),e&&t.push(e),t.concat(n.reverse())}var be={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,n){if(e)throw t;return n}};function ve(e,t){var n=[],r,i,s,a,l,p;for(r=0;r<e.length;r++){if(l=e[r],a=be[l],a){for(i=a.length,s=Array(i);i--;)s[i]=n.pop();try{p=a.apply(null,s)}catch(o){return o}}else t.hasOwnProperty(l)?p=t[l]:p=+l;n.push(p)}return n[0]}function xe(e){var t=_e(e);return function(n){return ve(t,n)}}function Ae(e){var t=xe(e);return function(n){return+t({n})}}var X={contextDelimiter:"",onMissingKey:null};function ke(e){var t,n,r;for(t=e.split(";"),n=0;n<t.length;n++)if(r=t[n].trim(),r.indexOf("plural=")===0)return r.substr(7)}function z(e,t){var n;this.data=e,this.pluralForms={},this.options={};for(n in X)this.options[n]=t!==void 0&&n in t?t[n]:X[n]}z.prototype.getPluralForm=function(e,t){var n=this.pluralForms[e],r,i,s;return n||(r=this.data[e][""],s=r["Plural-Forms"]||r["plural-forms"]||r.plural_forms,typeof s!="function"&&(i=ke(r["Plural-Forms"]||r["plural-forms"]||r.plural_forms),s=Ae(i)),n=this.pluralForms[e]=s),n(t)};z.prototype.dcnpgettext=function(e,t,n,r,i){var s,a,l;return i===void 0?s=0:s=this.getPluralForm(e,i),a=n,t&&(a=t+this.options.contextDelimiter+n),l=this.data[e][a],l&&l[s]?l[s]:(this.options.onMissingKey&&this.options.onMissingKey(n,e),s===0?n:r)};const G={"":{plural_forms(e){return e===1?0:1}}},Te=/^i18n\.(n?gettext|has_translation)(_|$)/,Ee=(e,t,n)=>{const r=new z({}),i=new Set,s=()=>{i.forEach(u=>u())},a=u=>(i.add(u),()=>i.delete(u)),l=(u="default")=>r.data[u],p=(u,h="default")=>{var y;r.data[h]={...r.data[h],...u},r.data[h][""]={...G[""],...(y=r.data[h])==null?void 0:y[""]},delete r.pluralForms[h]},o=(u,h)=>{p(u,h),s()},w=(u,h="default")=>{var y;r.data[h]={...r.data[h],...u,"":{...G[""],...(y=r.data[h])==null?void 0:y[""],...u==null?void 0:u[""]}},delete r.pluralForms[h],s()},c=(u,h)=>{r.data={},r.pluralForms={},o(u,h)},b=(u="default",h,y,d,g)=>(r.data[u]||p(void 0,u),r.dcnpgettext(u,h,y,d,g)),m=(u="default")=>u,v=(u,h)=>{let y=b(h,void 0,u);return n?(y=n.applyFilters("i18n.gettext",y,u,h),n.applyFilters("i18n.gettext_"+m(h),y,u,h)):y},f=(u,h,y)=>{let d=b(y,h,u);return n?(d=n.applyFilters("i18n.gettext_with_context",d,u,h,y),n.applyFilters("i18n.gettext_with_context_"+m(y),d,u,h,y)):d},k=(u,h,y,d)=>{let g=b(d,void 0,u,h,y);return n?(g=n.applyFilters("i18n.ngettext",g,u,h,y,d),n.applyFilters("i18n.ngettext_"+m(d),g,u,h,y,d)):g},E=(u,h,y,d,g)=>{let A=b(g,d,u,h,y);return n?(A=n.applyFilters("i18n.ngettext_with_context",A,u,h,y,d,g),n.applyFilters("i18n.ngettext_with_context_"+m(g),A,u,h,y,d,g)):A},O=()=>f("ltr","text direction")==="rtl",F=(u,h,y)=>{var A,R;const d=h?h+""+u:u;let g=!!((R=(A=r.data)==null?void 0:A[y??"default"])!=null&&R[d]);return n&&(g=n.applyFilters("i18n.has_translation",g,u,h,y),g=n.applyFilters("i18n.has_translation_"+m(y),g,u,h,y)),g};if(n){const u=h=>{Te.test(h)&&s()};n.addAction("hookAdded","core/i18n",u),n.addAction("hookRemoved","core/i18n",u)}return{getLocaleData:l,setLocaleData:o,addLocaleData:w,resetLocaleData:c,subscribe:a,__:v,_x:f,_n:k,_nx:E,isRTL:O,hasTranslation:F}};function le(e){return typeof e!="string"||e===""?(console.error("The namespace must be a non-empty string."),!1):/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)?!0:(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)}function q(e){return typeof e!="string"||e===""?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)?!0:(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)}function Z(e,t){return function(r,i,s,a=10){const l=e[t];if(!q(r)||!le(i))return;if(typeof s!="function"){console.error("The hook callback must be a function.");return}if(typeof a!="number"){console.error("If specified, the hook priority must be a number.");return}const p={callback:s,priority:a,namespace:i};if(l[r]){const o=l[r].handlers;let w;for(w=o.length;w>0&&!(a>=o[w-1].priority);w--);w===o.length?o[w]=p:o.splice(w,0,p),l.__current.forEach(c=>{c.name===r&&c.currentIndex>=w&&c.currentIndex++})}else l[r]={handlers:[p],runs:0};r!=="hookAdded"&&e.doAction("hookAdded",r,i,s,a)}}function C(e,t,n=!1){return function(i,s){const a=e[t];if(!q(i)||!n&&!le(s))return;if(!a[i])return 0;let l=0;if(n)l=a[i].handlers.length,a[i]={runs:a[i].runs,handlers:[]};else{const p=a[i].handlers;for(let o=p.length-1;o>=0;o--)p[o].namespace===s&&(p.splice(o,1),l++,a.__current.forEach(w=>{w.name===i&&w.currentIndex>=o&&w.currentIndex--}))}return i!=="hookRemoved"&&e.doAction("hookRemoved",i,s),l}}function B(e,t){return function(r,i){const s=e[t];return typeof i<"u"?r in s&&s[r].handlers.some(a=>a.namespace===i):r in s}}function V(e,t,n=!1){return function(i,...s){const a=e[t];a[i]||(a[i]={handlers:[],runs:0}),a[i].runs++;const l=a[i].handlers;if(!l||!l.length)return n?s[0]:void 0;const p={name:i,currentIndex:0};for(a.__current.push(p);p.currentIndex<l.length;){const w=l[p.currentIndex].callback.apply(null,s);n&&(s[0]=w),p.currentIndex++}if(a.__current.pop(),n)return s[0]}}function W(e,t){return function(){var s;var r;const i=e[t];return(r=(s=i.__current[i.__current.length-1])==null?void 0:s.name)!==null&&r!==void 0?r:null}}function Y(e,t){return function(r){const i=e[t];return typeof r>"u"?typeof i.__current[0]<"u":i.__current[0]?r===i.__current[0].name:!1}}function K(e,t){return function(r){const i=e[t];if(q(r))return i[r]&&i[r].runs?i[r].runs:0}}class Oe{constructor(){this.actions=Object.create(null),this.actions.__current=[],this.filters=Object.create(null),this.filters.__current=[],this.addAction=Z(this,"actions"),this.addFilter=Z(this,"filters"),this.removeAction=C(this,"actions"),this.removeFilter=C(this,"filters"),this.hasAction=B(this,"actions"),this.hasFilter=B(this,"filters"),this.removeAllActions=C(this,"actions",!0),this.removeAllFilters=C(this,"filters",!0),this.doAction=V(this,"actions"),this.applyFilters=V(this,"filters",!0),this.currentAction=W(this,"actions"),this.currentFilter=W(this,"filters"),this.doingAction=Y(this,"actions"),this.doingFilter=Y(this,"filters"),this.didAction=K(this,"actions"),this.didFilter=K(this,"filters")}}function Fe(){return new Oe}const oe=Fe(),{addAction:tt,addFilter:rt,removeAction:nt,removeFilter:it,hasAction:st,hasFilter:at,removeAllActions:ct,removeAllFilters:lt,doAction:ot,applyFilters:ut,currentAction:dt,currentFilter:ft,doingAction:pt,doingFilter:ht,didAction:gt,didFilter:yt,actions:wt,filters:mt}=oe,_=Ee(void 0,void 0,oe);_.getLocaleData.bind(_);_.setLocaleData.bind(_);_.resetLocaleData.bind(_);_.subscribe.bind(_);const D=_.__.bind(_);_._x.bind(_);_._n.bind(_);_._nx.bind(_);_.isRTL.bind(_);_.hasTranslation.bind(_);function Se(e){const t=(n,r)=>{const{headers:i={}}=n;for(const s in i)if(s.toLowerCase()==="x-wp-nonce"&&i[s]===t.nonce)return r(n);return r({...n,headers:{...i,"X-WP-Nonce":t.nonce}})};return t.nonce=e,t}const ue=(e,t)=>{let n=e.path,r,i;return typeof e.namespace=="string"&&typeof e.endpoint=="string"&&(r=e.namespace.replace(/^\/|\/$/g,""),i=e.endpoint.replace(/^\//,""),i?n=r+"/"+i:n=r),delete e.namespace,delete e.endpoint,t({...e,path:n})},Re=e=>(t,n)=>ue(t,r=>{let i=r.url,s=r.path,a;return typeof s=="string"&&(a=e,e.indexOf("?")!==-1&&(s=s.replace("?","&")),s=s.replace(/^\//,""),typeof a=="string"&&a.indexOf("?")!==-1&&(s=s.replace("?","&")),i=a+s),n({...r,url:i})});function Pe(e){let t;try{t=new URL(e,"http://example.com").search.substring(1)}catch{}if(t)return t}function de(e){let t="";const n=Object.entries(e);let r;for(;r=n.shift();){let[i,s]=r;if(Array.isArray(s)||s&&s.constructor===Object){const l=Object.entries(s).reverse();for(const[p,o]of l)n.unshift([`${i}[${p}]`,o])}else s!==void 0&&(s===null&&(s=""),t+="&"+[i,s].map(encodeURIComponent).join("="))}return t.substr(1)}function je(e){try{return decodeURIComponent(e)}catch{return e}}function He(e,t,n){const r=t.length,i=r-1;for(let s=0;s<r;s++){let a=t[s];!a&&Array.isArray(e)&&(a=e.length.toString()),a=["__proto__","constructor","prototype"].includes(a)?a.toUpperCase():a;const l=!isNaN(Number(t[s+1]));e[a]=s===i?n:e[a]||(l?[]:{}),Array.isArray(e[a])&&!l&&(e[a]={...e[a]}),e=e[a]}}function L(e){return(Pe(e)||"").replace(/\+/g,"%20").split("&").reduce((t,n)=>{const[r,i=""]=n.split("=").filter(Boolean).map(je);if(r){const s=r.replace(/\]/g,"").split("[");He(t,s,i)}return t},Object.create(null))}function S(e="",t){if(!t||!Object.keys(t).length)return e;let n=e;const r=e.indexOf("?");return r!==-1&&(t=Object.assign(L(e),t),n=n.substr(0,r)),n+"?"+de(t)}function $(e,t){return L(e)[t]}function ee(e,t){return $(e,t)!==void 0}function te(e,...t){const n=e.indexOf("?");if(n===-1)return e;const r=L(e),i=e.substr(0,n);t.forEach(a=>delete r[a]);const s=de(r);return s?i+"?"+s:i}function re(e){const t=e.split("?"),n=t[1],r=t[0];return n?r+"?"+n.split("&").map(i=>i.split("=")).map(i=>i.map(decodeURIComponent)).sort((i,s)=>i[0].localeCompare(s[0])).map(i=>i.map(encodeURIComponent)).map(i=>i.join("=")).join("&"):r}function Ie(e){const t=Object.fromEntries(Object.entries(e).map(([n,r])=>[re(n),r]));return(n,r)=>{const{parse:i=!0}=n;let s=n.path;if(!s&&n.url){const{rest_route:p,...o}=L(n.url);typeof p=="string"&&(s=S(p,o))}if(typeof s!="string")return r(n);const a=n.method||"GET",l=re(s);if(a==="GET"&&t[l]){const p=t[l];return delete t[l],ne(p,!!i)}else if(a==="OPTIONS"&&t[a]&&t[a][l]){const p=t[a][l];return delete t[a][l],ne(p,!!i)}return r(n)}}function ne(e,t){return Promise.resolve(t?e.body:new window.Response(JSON.stringify(e.body),{status:200,statusText:"OK",headers:e.headers}))}const Ce=({path:e,url:t,...n},r)=>({...n,url:t&&S(t,r),path:e&&S(e,r)}),ie=e=>e.json?e.json():Promise.reject(e),De=e=>{if(!e)return{};const t=e.match(/<([^>]+)>; rel="next"/);return t?{next:t[1]}:{}},se=e=>{const{next:t}=De(e.headers.get("link"));return t},Le=e=>{const t=!!e.path&&e.path.indexOf("per_page=-1")!==-1,n=!!e.url&&e.url.indexOf("per_page=-1")!==-1;return t||n},fe=async(e,t)=>{if(e.parse===!1||!Le(e))return t(e);const n=await x({...Ce(e,{per_page:100}),parse:!1}),r=await ie(n);if(!Array.isArray(r))return r;let i=se(n);if(!i)return r;let s=[].concat(r);for(;i;){const a=await x({...e,path:void 0,url:i,parse:!1}),l=await ie(a);s=s.concat(l),i=se(a)}return s},Ue=new Set(["PATCH","PUT","DELETE"]),Me="GET",$e=(e,t)=>{const{method:n=Me}=e;return Ue.has(n.toUpperCase())&&(e={...e,headers:{...e.headers,"X-HTTP-Method-Override":n,"Content-Type":"application/json"},method:"POST"}),t(e)},ze=(e,t)=>(typeof e.url=="string"&&!ee(e.url,"_locale")&&(e.url=S(e.url,{_locale:"user"})),typeof e.path=="string"&&!ee(e.path,"_locale")&&(e.path=S(e.path,{_locale:"user"})),t(e)),qe=(e,t=!0)=>t?e.status===204?null:e.json?e.json():Promise.reject(e):e,Ne=e=>{const t={code:"invalid_json",message:D("The response is not a valid JSON response.")};if(!e||!e.json)throw t;return e.json().catch(()=>{throw t})},pe=(e,t=!0)=>Promise.resolve(qe(e,t)).catch(n=>N(n,t));function N(e,t=!0){if(!t)throw e;return Ne(e).then(n=>{const r={code:"unknown_error",message:D("An unknown error occurred.")};throw n||r})}function Qe(e){const t=!!e.method&&e.method==="POST";return(!!e.path&&e.path.indexOf("/wp/v2/media")!==-1||!!e.url&&e.url.indexOf("/wp/v2/media")!==-1)&&t}const Je=(e,t)=>{if(!Qe(e))return t(e);let n=0;const r=5,i=s=>(n++,t({path:`/wp/v2/media/${s}/post-process`,method:"POST",data:{action:"create-image-subsizes"},parse:!1}).catch(()=>n<r?i(s):(t({path:`/wp/v2/media/${s}?force=true`,method:"DELETE"}),Promise.reject())));return t({...e,parse:!1}).catch(s=>{const a=s.headers.get("x-wp-upload-attachment-id");return s.status>=500&&s.status<600&&a?i(a).catch(()=>e.parse!==!1?Promise.reject({code:"post_process",message:D("Media upload failed. If this is a photo or a large image, please scale it down and try again.")}):Promise.reject(s)):N(s,e.parse)}).then(s=>pe(s,e.parse))},Xe=e=>(t,n)=>{if(typeof t.url=="string"){const r=$(t.url,"wp_theme_preview");r===void 0?t.url=S(t.url,{wp_theme_preview:e}):r===""&&(t.url=te(t.url,"wp_theme_preview"))}if(typeof t.path=="string"){const r=$(t.path,"wp_theme_preview");r===void 0?t.path=S(t.path,{wp_theme_preview:e}):r===""&&(t.path=te(t.path,"wp_theme_preview"))}return n(t)},Ge={Accept:"application/json, */*;q=0.1"},Ze={credentials:"include"},he=[ze,ue,$e,fe];function Be(e){he.unshift(e)}const ge=e=>{if(e.status>=200&&e.status<300)return e;throw e},Ve=e=>{const{url:t,path:n,data:r,parse:i=!0,...s}=e;let{body:a,headers:l}=e;return l={...Ge,...l},r&&(a=JSON.stringify(r),l["Content-Type"]="application/json"),window.fetch(t||n||window.location.href,{...Ze,...s,body:a,headers:l}).then(o=>Promise.resolve(o).then(ge).catch(w=>N(w,i)).then(w=>pe(w,i)),o=>{throw o&&o.name==="AbortError"?o:{code:"fetch_error",message:D("You are probably offline.")}})};let ye=Ve;function We(e){ye=e}function x(e){return he.reduceRight((n,r)=>i=>r(i,n),ye)(e).catch(n=>n.code!=="rest_cookie_invalid_nonce"?Promise.reject(n):window.fetch(x.nonceEndpoint).then(ge).then(r=>r.text()).then(r=>(x.nonceMiddleware.nonce=r,x(e))))}x.use=Be;x.setFetchHandler=We;x.createNonceMiddleware=Se;x.createPreloadingMiddleware=Ie;x.createRootURLMiddleware=Re;x.fetchAllMiddleware=fe;x.mediaUploadMiddleware=Je;x.createThemePreviewMiddleware=Xe;export{et as C,x as a};
