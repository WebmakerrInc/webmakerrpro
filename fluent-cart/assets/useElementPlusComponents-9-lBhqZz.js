import{x as ba,y as G,_ as ne,f as Jn,A as ae,k as Tt,b as ka,B as Fe,C as Ca,D as Ge,F as Ae,G as ut,H as ue,I as Ke,U as le,J as M,K as Na,L as _t,M as Ea,N as X,O as at,P as wa,Q as De,R as zt,S as pe,T as Sa,V as Zn,W as Qn,X as je,Y as Ka,Z as $a,$ as xe,a0 as Da,a1 as Ta,a2 as _a,a as La,a3 as ea,a4 as ht,a5 as Je,a6 as ft,a7 as Pa,a8 as Oa,a9 as ta,aa as Aa,ab as Ia,ac as ot,ad as Ma,ae as Ba,af as Fa,ag as xa,ah as Ze,ai as Lt,aj as vt,ak as Va,j as Ra,z as Ha,d as za,al as Ua,am as qa,an as st,E as lt,ao as rt,ap as Ut,aq as qt}from"./index-BSdFqZUc.js";import{b as ja,a as Qe,c as pt,d as Wa,i as ke,u as jt,e as Wt,f as Ya,g as Xa,h as mt,j as Ga,k as $e,l as gt,m as Ja,s as na,n as et,o as Za,p as yt,q as Yt,r as Xt,t as Gt,v as Jt,E as Zt,w as Qt,x as en,y as tn,z as nn,A as an,B as on,C as sn,D as ln,F as rn,G as dn,H as cn,I as un,J as hn,K as fn,L as vn,M as pn,N as mn,O as gn,P as yn,Q as bn,R as kn,S as Cn,T as Nn,U as En,V as wn,W as Sn,X as Kn,Y as $n,Z as Dn,_ as Tn}from"./index-DXJWUF1E.js";import{l as R,d as U,a9 as de,ao as _n,B as ce,z as _,c as I,o as w,e as A,b as H,u as r,O as oe,w as V,f as q,A as N,F as me,i as L,h as Te,g as tt,t as ge,r as ee,x as Ne,ag as Ce,ai as te,y as Qa,W as ye,L as we,m as j,ap as eo,j as _e,p as se,s as He,I as fe,ab as Re,ae as ze,U as to,G as bt,X as Ie,Z as Ue,C as Pt,H as Ot,q as Me,aa as no,a as Ee,J as ao,an as aa,a2 as oo,aq as Ln,M as so,aj as lo,K as Pn}from"./vue.esm-bundler-VLZRLwDo.js";import{d as it}from"./dayjs.min-2rai63wT.js";import{C as ro}from"./index-CA48fF9Y.js";var io=1,co=4;function kt(e){return ja(e,io|co)}var uo=1/0;function ho(e){var t=e==null?0:e.length;return t?ba(e,uo):[]}function fo(e){return!!(de(e)?e.every(({type:t})=>t===_n):(e==null?void 0:e.type)===_n)}var vo=R({name:"NodeContent",props:{node:{type:Object,required:!0},renderLabelFn:Function},setup(e){const t=G("cascader-node"),{renderLabelFn:n,node:a}=e,{data:o,label:s}=a,l=()=>{const p=n==null?void 0:n({node:a,data:o});return fo(p)?s:p??s};return()=>U("span",{class:t.e("label")},[l()])}});const At=Symbol(),po=R({name:"ElCascaderNode"}),mo=R({...po,props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const n=e,a=ce(At),o=G("cascader-node"),s=_(()=>a.isHoverMenu),l=_(()=>a.config.multiple),p=_(()=>a.config.checkStrictly),c=_(()=>{var E;return(E=a.checkedNodes[0])==null?void 0:E.uid}),m=_(()=>n.node.isDisabled),h=_(()=>n.node.isLeaf),g=_(()=>p.value&&!h.value||!m.value),v=_(()=>u(a.expandingNode)),i=_(()=>p.value&&a.checkedNodes.some(u)),u=E=>{var W;const{level:$,uid:T}=n.node;return((W=E==null?void 0:E.pathNodes[$-1])==null?void 0:W.uid)===T},d=()=>{v.value||a.expandNode(n.node)},y=E=>{const{node:W}=n;E!==W.checked&&a.handleCheckChange(W,E)},f=()=>{a.lazyLoad(n.node,()=>{h.value||d()})},C=E=>{s.value&&(k(),!h.value&&t("expand",E))},k=()=>{const{node:E}=n;!g.value||E.loading||(E.loaded?d():f())},K=()=>{s.value&&!h.value||(h.value&&!m.value&&!p.value&&!l.value?F(!0):k())},z=E=>{p.value?(y(E),n.node.loaded&&d()):F(E)},F=E=>{n.node.loaded?(y(E),!p.value&&d()):f()};return(E,W)=>(w(),I("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!r(h),"aria-owns":r(h)?void 0:e.menuId,"aria-expanded":r(v),tabindex:r(g)?-1:void 0,class:N([r(o).b(),r(o).is("selectable",r(p)),r(o).is("active",e.node.checked),r(o).is("disabled",!r(g)),r(v)&&"in-active-path",r(i)&&"in-checked-path"]),onMouseenter:C,onFocus:C,onClick:K},[A(" prefix "),r(l)?(w(),H(r(Qe),{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:r(m),onClick:oe(()=>{},["stop"]),"onUpdate:modelValue":z},null,8,["model-value","indeterminate","disabled","onClick"])):r(p)?(w(),H(r(pt),{key:1,"model-value":r(c),label:e.node.uid,disabled:r(m),"onUpdate:modelValue":z,onClick:oe(()=>{},["stop"])},{default:V(()=>[A(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),q("span")]),_:1},8,["model-value","label","disabled","onClick"])):r(h)&&e.node.checked?(w(),H(r(ae),{key:2,class:N(r(o).e("prefix"))},{default:V(()=>[U(r(Jn))]),_:1},8,["class"])):A("v-if",!0),U(r(vo),{"render-label-fn":r(a).renderLabelFn,node:e.node},null,8,["render-label-fn","node"]),A(" postfix "),r(h)?A("v-if",!0):(w(),I(me,{key:3},[e.node.loading?(w(),H(r(ae),{key:0,class:N([r(o).is("loading"),r(o).e("postfix")])},{default:V(()=>[U(r(Tt))]),_:1},8,["class"])):(w(),H(r(ae),{key:1,class:N(["arrow-right",r(o).e("postfix")])},{default:V(()=>[U(r(ka))]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex"]))}});var go=ne(mo,[["__file","node.vue"]]);const yo=R({name:"ElCascaderMenu"}),bo=R({...yo,props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=e,n=Ne(),a=G("cascader-menu"),{t:o}=Fe(),s=Ca();let l,p;const c=ce(At),m=L(),h=_(()=>!t.nodes.length),g=_(()=>!c.initialLoaded),v=_(()=>`${s.value}-${t.index}`),i=f=>{l=f.target},u=f=>{if(!(!c.isHoverMenu||!l||!m.value))if(l.contains(f.target)){d();const C=n.vnode.el,{left:k}=C.getBoundingClientRect(),{offsetWidth:K,offsetHeight:z}=C,F=f.clientX-k,E=l.offsetTop,W=E+l.offsetHeight;m.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${F} ${E} L${K} 0 V${E} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${F} ${W} L${K} ${z} V${W} Z" />
        `}else p||(p=window.setTimeout(y,c.config.hoverThreshold))},d=()=>{p&&(clearTimeout(p),p=void 0)},y=()=>{m.value&&(m.value.innerHTML="",d())};return(f,C)=>(w(),H(r(Wa),{key:r(v),tag:"ul",role:"menu",class:N(r(a).b()),"wrap-class":r(a).e("wrap"),"view-class":[r(a).e("list"),r(a).is("empty",r(h))],onMousemove:u,onMouseleave:y},{default:V(()=>{var k;return[(w(!0),I(me,null,Te(e.nodes,K=>(w(),H(go,{key:K.uid,node:K,"menu-id":r(v),onExpand:i},null,8,["node","menu-id"]))),128)),r(g)?(w(),I("div",{key:0,class:N(r(a).e("empty-text"))},[U(r(ae),{size:"14",class:N(r(a).is("loading"))},{default:V(()=>[U(r(Tt))]),_:1},8,["class"]),tt(" "+ge(r(o)("el.cascader.loading")),1)],2)):r(h)?(w(),I("div",{key:1,class:N(r(a).e("empty-text"))},[ee(f.$slots,"empty",{},()=>[tt(ge(r(o)("el.cascader.noData")),1)])],2)):(k=r(c))!=null&&k.isHoverMenu?(w(),I(me,{key:2},[A(" eslint-disable-next-line vue/html-self-closing "),(w(),I("svg",{ref_key:"hoverZone",ref:m,class:N(r(a).e("hover-zone"))},null,2))],2112)):A("v-if",!0)]}),_:3},8,["class","wrap-class","view-class"]))}});var ko=ne(bo,[["__file","menu.vue"]]);let Co=0;const No=e=>{const t=[e];let{parent:n}=e;for(;n;)t.unshift(n),n=n.parent;return t};let Ct=class Nt{constructor(t,n,a,o=!1){this.data=t,this.config=n,this.parent=a,this.root=o,this.uid=Co++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:l,children:p}=n,c=t[p],m=No(this);this.level=o?0:a?a.level+1:1,this.value=t[s],this.label=t[l],this.pathNodes=m,this.pathValues=m.map(h=>h.value),this.pathLabels=m.map(h=>h.label),this.childrenData=c,this.children=(c||[]).map(h=>new Nt(h,n,this)),this.loaded=!n.lazy||this.isLeaf||!Ge(c),this.text=""}get isDisabled(){const{data:t,parent:n,config:a}=this,{disabled:o,checkStrictly:s}=a;return(Ce(o)?o(t,this):!!t[o])||!s&&!!(n!=null&&n.isDisabled)}get isLeaf(){const{data:t,config:n,childrenData:a,loaded:o}=this,{lazy:s,leaf:l}=n,p=Ce(l)?l(t,this):t[l];return Ae(p)?s&&!o?!1:!(de(a)&&a.length):!!p}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:n,children:a}=this,o=new Nt(t,this.config,this);return de(n)?n.push(t):this.childrenData=[t],a.push(o),o}calcText(t,n){const a=t?this.pathLabels.join(n):this.label;return this.text=a,a}broadcast(t){this.children.forEach(n=>{var a;n&&(n.broadcast(t),(a=n.onParentCheck)==null||a.call(n,t))})}emit(){var t;const{parent:n}=this;n&&((t=n.onChildCheck)==null||t.call(n),n.emit())}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,n=t.filter(o=>!o.isDisabled),a=n.length?n.every(o=>o.checked):!1;this.setCheckState(a)}setCheckState(t){const n=this.children.length,a=this.children.reduce((o,s)=>{const l=s.checked?1:s.indeterminate?.5:0;return o+l},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&t,this.indeterminate=this.loaded&&a!==n&&a>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:n,multiple:a}=this.config;n||!a?this.checked=t:(this.broadcast(t),this.setCheckState(t),this.emit())}};const Et=(e,t)=>e.reduce((n,a)=>(a.isLeaf?n.push(a):(!t&&n.push(a),n=n.concat(Et(a.children,t))),n),[]);class On{constructor(t,n){this.config=n;const a=(t||[]).map(o=>new Ct(o,this.config));this.nodes=a,this.allNodes=Et(a,!1),this.leafNodes=Et(a,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,n){const a=n?n.appendChild(t):new Ct(t,this.config);n||this.nodes.push(a),this.appendAllNodesAndLeafNodes(a)}appendNodes(t,n){t.forEach(a=>this.appendNode(a,n))}appendAllNodesAndLeafNodes(t){this.allNodes.push(t),t.isLeaf&&this.leafNodes.push(t),t.children&&t.children.forEach(n=>{this.appendAllNodesAndLeafNodes(n)})}getNodeByValue(t,n=!1){return ut(t)?null:this.getFlattedNodes(n).find(o=>ke(o.value,t)||ke(o.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:a,level:o})=>ke(t.value,a)&&t.level===o)||null}}const Eo=ue({modelValue:{type:M([Number,String,Array])},options:{type:M(Array),default:()=>[]},props:{type:M(Object),default:()=>({})}}),wo={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:te,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},So=ue({...Eo,border:{type:Boolean,default:!0},renderLabel:{type:Function}}),An=e=>!0,Ko={[le]:An,[Ke]:An,close:()=>!0,"expand-change":e=>e},$o=e=>_(()=>({...wo,...e.props})),In=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},Do=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():Na(e)&&e.click()},To=(e,t)=>{const n=t.slice(0),a=n.map(s=>s.uid),o=e.reduce((s,l)=>{const p=a.indexOf(l.uid);return p>-1&&(s.push(l),n.splice(p,1),a.splice(p,1)),s},[]);return o.push(...n),o},_o=R({name:"ElCascaderPanel",inheritAttrs:!1}),Lo=R({..._o,props:So,emits:Ko,setup(e,{expose:t,emit:n}){const a=e;let o=!1;const s=G("cascader"),l=$o(a),p=Qa();let c;const m=L(!0),h=L([]),g=L(),v=L([]),i=L(),u=L([]),d=_(()=>l.value.expandTrigger==="hover"),y=_(()=>a.renderLabel||p.default),f=()=>{const{options:S}=a,O=l.value;o=!1,c=new On(S,O),v.value=[c.getNodes()],O.lazy&&Ge(a.options)?(m.value=!1,C(void 0,x=>{x&&(c=new On(x,O),v.value=[c.getNodes()]),m.value=!0,T(!1,!0)})):T(!1,!0)},C=(S,O)=>{const x=l.value;S=S||new Ct({},x,void 0,!0),S.loading=!0;const B=b=>{const D=S,Q=D.root?null:D;b&&(c==null||c.appendNodes(b,Q)),D.loading=!1,D.loaded=!0,D.childrenData=D.childrenData||[],b&&(O==null||O(b))};x.lazyLoad(S,B)},k=(S,O)=>{var x;const{level:B}=S,b=v.value.slice(0,B);let D;S.isLeaf?D=S.pathNodes[B-2]:(D=S,b.push(S.children)),((x=i.value)==null?void 0:x.uid)!==(D==null?void 0:D.uid)&&(i.value=S,v.value=b,!O&&n("expand-change",(S==null?void 0:S.pathValues)||[]))},K=(S,O,x=!0)=>{const{checkStrictly:B,multiple:b}=l.value,D=u.value[0];o=!0,!b&&(D==null||D.doCheck(!1)),S.doCheck(O),$(),x&&!b&&!B&&n("close"),!x&&!b&&!B&&z(S)},z=S=>{S&&(S=S.parent,z(S),S&&k(S))},F=S=>c==null?void 0:c.getFlattedNodes(S),E=S=>{var O;return(O=F(S))==null?void 0:O.filter(({checked:x})=>x!==!1)},W=()=>{u.value.forEach(S=>S.doCheck(!1)),$(),v.value=v.value.slice(0,1),i.value=void 0,n("expand-change",[])},$=()=>{const{checkStrictly:S,multiple:O}=l.value,x=u.value,B=E(!S),b=To(x,B),D=b.map(Q=>Q.valueByOption);u.value=b,g.value=O?D:D[0]},T=(S=!1,O=!1)=>{const{modelValue:x}=a,{lazy:B,multiple:b,checkStrictly:D}=l.value,Q=!D;if(!(!m.value||o||!O&&ke(x,g.value)))if(B&&!S){const Le=jt(ho(Wt(x))).map(re=>c==null?void 0:c.getNodeByValue(re)).filter(re=>!!re&&!re.loaded&&!re.loading);Le.length?Le.forEach(re=>{C(re,()=>T(!1,O))}):T(!0,O)}else{const Y=b?Wt(x):[x],Le=jt(Y.map(re=>c==null?void 0:c.getNodeByValue(re,Q)));J(Le,O),g.value=kt(x)}},J=(S,O=!0)=>{const{checkStrictly:x}=l.value,B=u.value,b=S.filter(Y=>!!Y&&(x||Y.isLeaf)),D=c==null?void 0:c.getSameNode(i.value),Q=O&&D||b[0];Q?Q.pathNodes.forEach(Y=>k(Y,!0)):i.value=void 0,B.forEach(Y=>Y.doCheck(!1)),we(b).forEach(Y=>Y.doCheck(!0)),u.value=b,se(Z)},Z=()=>{_t&&h.value.forEach(S=>{const O=S==null?void 0:S.$el;if(O){const x=O.querySelector(`.${s.namespace.value}-scrollbar__wrap`),B=O.querySelector(`.${s.b("node")}.${s.is("active")}:last-child`)||O.querySelector(`.${s.b("node")}.in-active-path`);Ea(x,B)}})},he=S=>{const O=S.target,{code:x}=S;switch(x){case X.up:case X.down:{S.preventDefault();const B=x===X.up?-1:1;at(wa(O,B,`.${s.b("node")}[tabindex="-1"]`));break}case X.left:{S.preventDefault();const B=h.value[In(O)-1],b=B==null?void 0:B.$el.querySelector(`.${s.b("node")}[aria-expanded="true"]`);at(b);break}case X.right:{S.preventDefault();const B=h.value[In(O)+1],b=B==null?void 0:B.$el.querySelector(`.${s.b("node")}[tabindex="-1"]`);at(b);break}case X.enter:case X.numpadEnter:Do(O);break}};return ye(At,we({config:l,expandingNode:i,checkedNodes:u,isHoverMenu:d,initialLoaded:m,renderLabelFn:y,lazyLoad:C,expandNode:k,handleCheckChange:K})),j([l,()=>a.options],(S,O)=>{ke(S,O)||f()},{deep:!0,immediate:!0}),j(()=>a.modelValue,()=>{o=!1,T()},{deep:!0}),j(()=>g.value,S=>{ke(S,a.modelValue)||(n(le,S),n(Ke,S))}),eo(()=>h.value=[]),_e(()=>!Ge(a.modelValue)&&T()),t({menuList:h,menus:v,checkedNodes:u,handleKeyDown:he,handleCheckChange:K,getFlattedNodes:F,getCheckedNodes:E,clearCheckedNodes:W,calculateCheckedValue:$,scrollToExpandingNode:Z}),(S,O)=>(w(),I("div",{class:N([r(s).b("panel"),r(s).is("bordered",S.border)]),onKeydown:he},[(w(!0),I(me,null,Te(v.value,(x,B)=>(w(),H(ko,{key:B,ref_for:!0,ref:b=>h.value[B]=b,index:B,nodes:[...x]},{empty:V(()=>[ee(S.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],34))}});var Po=ne(Lo,[["__file","index.vue"]]);const Mn=De(Po),Oo=ue({color:{type:M(Object),required:!0},vertical:Boolean});let dt=!1;function qe(e,t){if(!_t)return;const n=function(s){var l;(l=t.drag)==null||l.call(t,s)},a=function(s){var l;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",a),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",a),document.onselectstart=null,document.ondragstart=null,dt=!1,(l=t.end)==null||l.call(t,s)},o=function(s){var l;dt||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",a),document.addEventListener("touchmove",n),document.addEventListener("touchend",a),dt=!0,(l=t.start)==null||l.call(t,s))};e.addEventListener("mousedown",o),e.addEventListener("touchstart",o,{passive:!1})}const It=e=>{let t,n;return e.type==="touchend"?(n=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(n=e.touches[0].clientY,t=e.touches[0].clientX):(n=e.clientY,t=e.clientX),{clientX:t,clientY:n}},Ao=e=>{const t=Ne(),{t:n}=Fe(),a=He(),o=He(),s=_(()=>e.color.get("alpha")),l=_(()=>n("el.colorpicker.alphaLabel"));function p(g){var v;g.target!==a.value&&c(g),(v=a.value)==null||v.focus()}function c(g){if(!o.value||!a.value)return;const i=t.vnode.el.getBoundingClientRect(),{clientX:u,clientY:d}=It(g);if(e.vertical){let y=d-i.top;y=Math.max(a.value.offsetHeight/2,y),y=Math.min(y,i.height-a.value.offsetHeight/2),e.color.set("alpha",Math.round((y-a.value.offsetHeight/2)/(i.height-a.value.offsetHeight)*100))}else{let y=u-i.left;y=Math.max(a.value.offsetWidth/2,y),y=Math.min(y,i.width-a.value.offsetWidth/2),e.color.set("alpha",Math.round((y-a.value.offsetWidth/2)/(i.width-a.value.offsetWidth)*100))}}function m(g){const{code:v,shiftKey:i}=g,u=i?10:1;switch(v){case X.left:case X.down:g.preventDefault(),g.stopPropagation(),h(-u);break;case X.right:case X.up:g.preventDefault(),g.stopPropagation(),h(u);break}}function h(g){let v=s.value+g;v=v<0?0:v>100?100:v,e.color.set("alpha",v)}return{thumb:a,bar:o,alpha:s,alphaLabel:l,handleDrag:c,handleClick:p,handleKeydown:m}},Io=(e,{bar:t,thumb:n,handleDrag:a})=>{const o=Ne(),s=G("color-alpha-slider"),l=L(0),p=L(0),c=L();function m(){if(!n.value||e.vertical)return 0;const C=o.vnode.el,k=e.color.get("alpha");return C?Math.round(k*(C.offsetWidth-n.value.offsetWidth/2)/100):0}function h(){if(!n.value)return 0;const C=o.vnode.el;if(!e.vertical)return 0;const k=e.color.get("alpha");return C?Math.round(k*(C.offsetHeight-n.value.offsetHeight/2)/100):0}function g(){if(e.color&&e.color.value){const{r:C,g:k,b:K}=e.color.toRgb();return`linear-gradient(to right, rgba(${C}, ${k}, ${K}, 0) 0%, rgba(${C}, ${k}, ${K}, 1) 100%)`}return""}function v(){l.value=m(),p.value=h(),c.value=g()}_e(()=>{if(!t.value||!n.value)return;const C={drag:k=>{a(k)},end:k=>{a(k)}};qe(t.value,C),qe(n.value,C),v()}),j(()=>e.color.get("alpha"),()=>v()),j(()=>e.color.value,()=>v());const i=_(()=>[s.b(),s.is("vertical",e.vertical)]),u=_(()=>s.e("bar")),d=_(()=>s.e("thumb")),y=_(()=>({background:c.value})),f=_(()=>({left:zt(l.value),top:zt(p.value)}));return{rootKls:i,barKls:u,barStyle:y,thumbKls:d,thumbStyle:f,update:v}},Mo="ElColorAlphaSlider",Bo=R({name:Mo}),Fo=R({...Bo,props:Oo,setup(e,{expose:t}){const n=e,{alpha:a,alphaLabel:o,bar:s,thumb:l,handleDrag:p,handleClick:c,handleKeydown:m}=Ao(n),{rootKls:h,barKls:g,barStyle:v,thumbKls:i,thumbStyle:u,update:d}=Io(n,{bar:s,thumb:l,handleDrag:p});return t({update:d,bar:s,thumb:l}),(y,f)=>(w(),I("div",{class:N(r(h))},[q("div",{ref_key:"bar",ref:s,class:N(r(g)),style:fe(r(v)),onClick:r(c)},null,14,["onClick"]),q("div",{ref_key:"thumb",ref:l,class:N(r(i)),style:fe(r(u)),"aria-label":r(o),"aria-valuenow":r(a),"aria-orientation":y.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:r(m)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var xo=ne(Fo,[["__file","alpha-slider.vue"]]);const Vo=R({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=G("color-hue-slider"),n=Ne(),a=L(),o=L(),s=L(0),l=L(0),p=_(()=>e.color.get("hue"));j(()=>p.value,()=>{v()});function c(i){i.target!==a.value&&m(i)}function m(i){if(!o.value||!a.value)return;const d=n.vnode.el.getBoundingClientRect(),{clientX:y,clientY:f}=It(i);let C;if(e.vertical){let k=f-d.top;k=Math.min(k,d.height-a.value.offsetHeight/2),k=Math.max(a.value.offsetHeight/2,k),C=Math.round((k-a.value.offsetHeight/2)/(d.height-a.value.offsetHeight)*360)}else{let k=y-d.left;k=Math.min(k,d.width-a.value.offsetWidth/2),k=Math.max(a.value.offsetWidth/2,k),C=Math.round((k-a.value.offsetWidth/2)/(d.width-a.value.offsetWidth)*360)}e.color.set("hue",C)}function h(){if(!a.value)return 0;const i=n.vnode.el;if(e.vertical)return 0;const u=e.color.get("hue");return i?Math.round(u*(i.offsetWidth-a.value.offsetWidth/2)/360):0}function g(){if(!a.value)return 0;const i=n.vnode.el;if(!e.vertical)return 0;const u=e.color.get("hue");return i?Math.round(u*(i.offsetHeight-a.value.offsetHeight/2)/360):0}function v(){s.value=h(),l.value=g()}return _e(()=>{if(!o.value||!a.value)return;const i={drag:u=>{m(u)},end:u=>{m(u)}};qe(o.value,i),qe(a.value,i),v()}),{bar:o,thumb:a,thumbLeft:s,thumbTop:l,hueValue:p,handleClick:c,update:v,ns:t}}});function Ro(e,t,n,a,o,s){return w(),I("div",{class:N([e.ns.b(),e.ns.is("vertical",e.vertical)])},[q("div",{ref:"bar",class:N(e.ns.e("bar")),onClick:e.handleClick},null,10,["onClick"]),q("div",{ref:"thumb",class:N(e.ns.e("thumb")),style:fe({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var Ho=ne(Vo,[["render",Ro],["__file","hue-slider.vue"]]);const zo=ue({modelValue:{type:M(String),default:void 0},id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Qn,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:Ya.teleported,predefine:{type:M(Array)},validateEvent:{type:Boolean,default:!0},...Zn,...Sa(["ariaLabel"])}),Uo={[le]:e=>Re(e)||pe(e),[Ke]:e=>Re(e)||pe(e),activeChange:e=>Re(e)||pe(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},oa=Symbol("colorPickerContextKey");class nt{constructor(t={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this._tiny=new je,this._isValid=!1,this.enableAlpha=!1,this.format="",this.value="";for(const n in t)ze(t,n)&&(this[n]=t[n]);t.value?this.fromString(t.value):this.doOnChange()}set(t,n){if(arguments.length===1&&typeof t=="object"){for(const a in t)ze(t,a)&&this.set(a,t[a]);return}this[`_${t}`]=n,this._isValid=!0,this.doOnChange()}get(t){return["hue","saturation","value","alpha"].includes(t)?Math.round(this[`_${t}`]):this[`_${t}`]}toRgb(){return this._isValid?this._tiny.toRgb():{r:255,g:255,b:255,a:0}}fromString(t){const n=new je(t);if(this._isValid=n.isValid,n.isValid){const{h:a,s:o,v:s,a:l}=n.toHsv();this._hue=a,this._saturation=o*100,this._value=s*100,this._alpha=l*100}else this._hue=0,this._saturation=100,this._value=100,this._alpha=100;this.doOnChange()}compare(t){const n=new je({h:t._hue,s:t._saturation/100,v:t._value/100,a:t._alpha/100});return this._tiny.equals(n)}doOnChange(){const{_hue:t,_saturation:n,_value:a,_alpha:o,format:s,enableAlpha:l}=this;let p=s||(l?"rgb":"hex");s==="hex"&&l&&(p="hex8"),this._tiny=new je({h:t,s:n/100,v:a/100,a:o/100}),this.value=this._isValid?this._tiny.toString(p):""}}const qo=R({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(e){const t=G("color-predefine"),{currentColor:n}=ce(oa),a=L(s(e.colors,e.color));j(()=>n.value,l=>{const p=new nt({value:l});a.value.forEach(c=>{c.selected=p.compare(c)})}),to(()=>{a.value=s(e.colors,e.color)});function o(l){e.color.fromString(e.colors[l])}function s(l,p){return l.map(c=>{const m=new nt({value:c});return m.selected=m.compare(p),m})}return{rgbaColors:a,handleSelect:o,ns:t}}});function jo(e,t,n,a,o,s){return w(),I("div",{class:N(e.ns.b())},[q("div",{class:N(e.ns.e("colors"))},[(w(!0),I(me,null,Te(e.rgbaColors,(l,p)=>(w(),I("div",{key:e.colors[p],class:N([e.ns.e("color-selector"),e.ns.is("alpha",l.get("alpha")<100),{selected:l.selected}]),onClick:c=>e.handleSelect(p)},[q("div",{style:fe({backgroundColor:l.value})},null,4)],10,["onClick"]))),128))],2)],2)}var Wo=ne(qo,[["render",jo],["__file","predefine.vue"]]);const Yo=R({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=G("color-svpanel"),n=Ne(),a=L(0),o=L(0),s=L("hsl(0, 100%, 50%)"),l=_(()=>{const m=e.color.get("hue"),h=e.color.get("value");return{hue:m,value:h}});function p(){const m=e.color.get("saturation"),h=e.color.get("value"),g=n.vnode.el,{clientWidth:v,clientHeight:i}=g;o.value=m*v/100,a.value=(100-h)*i/100,s.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function c(m){const g=n.vnode.el.getBoundingClientRect(),{clientX:v,clientY:i}=It(m);let u=v-g.left,d=i-g.top;u=Math.max(0,u),u=Math.min(u,g.width),d=Math.max(0,d),d=Math.min(d,g.height),o.value=u,a.value=d,e.color.set({saturation:u/g.width*100,value:100-d/g.height*100})}return j(()=>l.value,()=>{p()}),_e(()=>{qe(n.vnode.el,{drag:m=>{c(m)},end:m=>{c(m)}}),p()}),{cursorTop:a,cursorLeft:o,background:s,colorValue:l,handleDrag:c,update:p,ns:t}}});function Xo(e,t,n,a,o,s){return w(),I("div",{class:N(e.ns.b()),style:fe({backgroundColor:e.background})},[q("div",{class:N(e.ns.e("white"))},null,2),q("div",{class:N(e.ns.e("black"))},null,2),q("div",{class:N(e.ns.e("cursor")),style:fe({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},[q("div")],6)],6)}var Go=ne(Yo,[["render",Xo],["__file","sv-panel.vue"]]);const Jo=R({name:"ElColorPicker"}),Zo=R({...Jo,props:zo,emits:Uo,setup(e,{expose:t,emit:n}){const a=e,{t:o}=Fe(),s=G("color"),{formItem:l}=Ka(),p=$a(),c=xe(),{valueOnClear:m,isEmptyValue:h}=Da(a,null),{inputId:g,isLabeledByFormItem:v}=Ta(a,{formItemContext:l}),i=L(),u=L(),d=L(),y=L(),f=L(),C=L(),{isFocused:k,handleFocus:K,handleBlur:z}=_a(f,{disabled:c,beforeBlur(P){var ie;return(ie=y.value)==null?void 0:ie.isFocusInsideContent(P)},afterBlur(){B(!1),Y()}});let F=!0;const E=we(new nt({enableAlpha:a.showAlpha,format:a.colorFormat||"",value:a.modelValue})),W=L(!1),$=L(!1),T=L(""),J=_(()=>!a.modelValue&&!$.value?"transparent":x(E,a.showAlpha)),Z=_(()=>!a.modelValue&&!$.value?"":E.value),he=_(()=>v.value?void 0:a.ariaLabel||o("el.colorpicker.defaultLabel")),S=_(()=>v.value?l==null?void 0:l.labelId:void 0),O=_(()=>[s.b("picker"),s.is("disabled",c.value),s.bm("picker",p.value),s.is("focused",k.value)]);function x(P,ie){const{r:be,g:Rt,b:Ht,a:ya}=P.toRgb();return ie?`rgba(${be}, ${Rt}, ${Ht}, ${ya})`:`rgb(${be}, ${Rt}, ${Ht})`}function B(P){W.value=P}const b=Xa(B,100,{leading:!0});function D(){c.value||B(!0)}function Q(){b(!1),Y()}function Y(){se(()=>{a.modelValue?E.fromString(a.modelValue):(E.value="",!Z.value&&T.value&&(T.value=""),se(()=>{$.value=!1}))})}function Le(){c.value||(W.value&&Y(),b(!W.value))}function re(){E.fromString(T.value),E.value!==T.value&&(T.value=E.value)}function fa(){const P=h(E.value)?m.value:E.value;n(le,P),n(Ke,P),a.validateEvent&&(l==null||l.validate("change").catch(ie=>ft())),b(!1),se(()=>{const ie=new nt({enableAlpha:a.showAlpha,format:a.colorFormat||"",value:a.modelValue});E.compare(ie)||Y()})}function va(){b(!1),n(le,m.value),n(Ke,m.value),a.modelValue!==m.value&&a.validateEvent&&(l==null||l.validate("change").catch(P=>ft())),Y()}function pa(){W.value&&(Q(),k.value&&Vt())}function xt(P){P.preventDefault(),P.stopPropagation(),B(!1),Y()}function ma(P){switch(P.code){case X.enter:case X.numpadEnter:case X.space:P.preventDefault(),P.stopPropagation(),D(),C.value.focus();break;case X.esc:xt(P);break}}function Vt(){f.value.focus()}function ga(){f.value.blur()}return _e(()=>{a.modelValue&&(T.value=Z.value)}),j(()=>a.modelValue,P=>{P?P&&P!==E.value&&(F=!1,E.fromString(P)):$.value=!1}),j(()=>[a.colorFormat,a.showAlpha],()=>{E.enableAlpha=a.showAlpha,E.format=a.colorFormat||E.format,E.doOnChange(),n(le,E.value)}),j(()=>Z.value,P=>{T.value=P,F&&n("activeChange",P),F=!0}),j(()=>E.value,()=>{!a.modelValue&&!$.value&&($.value=!0)}),j(()=>W.value,()=>{se(()=>{var P,ie,be;(P=i.value)==null||P.update(),(ie=u.value)==null||ie.update(),(be=d.value)==null||be.update()})}),ye(oa,{currentColor:Z}),t({color:E,show:D,hide:Q,focus:Vt,blur:ga}),(P,ie)=>(w(),H(r(mt),{ref_key:"popper",ref:y,visible:W.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[r(s).be("picker","panel"),r(s).b("dropdown"),P.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:P.teleported,transition:`${r(s).namespace.value}-zoom-in-top`,persistent:"",onHide:be=>B(!1)},{content:V(()=>[Ie((w(),I("div",{onKeydown:Pt(xt,["esc"])},[q("div",{class:N(r(s).be("dropdown","main-wrapper"))},[U(Ho,{ref_key:"hue",ref:i,class:"hue-slider",color:r(E),vertical:""},null,8,["color"]),U(Go,{ref_key:"sv",ref:u,color:r(E)},null,8,["color"])],2),P.showAlpha?(w(),H(xo,{key:0,ref_key:"alpha",ref:d,color:r(E)},null,8,["color"])):A("v-if",!0),P.predefine?(w(),H(Wo,{key:1,ref:"predefine","enable-alpha":P.showAlpha,color:r(E),colors:P.predefine},null,8,["enable-alpha","color","colors"])):A("v-if",!0),q("div",{class:N(r(s).be("dropdown","btns"))},[q("span",{class:N(r(s).be("dropdown","value"))},[U(r(ht),{ref_key:"inputRef",ref:C,modelValue:T.value,"onUpdate:modelValue":be=>T.value=be,"validate-event":!1,size:"small",onChange:re},null,8,["modelValue","onUpdate:modelValue"])],2),U(r(Je),{class:N(r(s).be("dropdown","link-btn")),text:"",size:"small",onClick:va},{default:V(()=>[tt(ge(r(o)("el.colorpicker.clear")),1)]),_:1},8,["class"]),U(r(Je),{plain:"",size:"small",class:N(r(s).be("dropdown","btn")),onClick:fa},{default:V(()=>[tt(ge(r(o)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[r(ro),pa,f.value]])]),default:V(()=>[q("div",bt({id:r(g),ref_key:"triggerRef",ref:f},P.$attrs,{class:r(O),role:"button","aria-label":r(he),"aria-labelledby":r(S),"aria-description":r(o)("el.colorpicker.description",{color:P.modelValue||""}),"aria-disabled":r(c),tabindex:r(c)?void 0:P.tabindex,onKeydown:ma,onFocus:r(K),onBlur:r(z)}),[q("div",{class:N(r(s).be("picker","trigger")),onClick:Le},[q("span",{class:N([r(s).be("picker","color"),r(s).is("alpha",P.showAlpha)])},[q("span",{class:N(r(s).be("picker","color-inner")),style:fe({backgroundColor:r(J)})},[Ie(U(r(ae),{class:N([r(s).be("picker","icon"),r(s).is("icon-arrow-down")])},{default:V(()=>[U(r(La))]),_:1},8,["class"]),[[Ue,P.modelValue||$.value]]),Ie(U(r(ae),{class:N([r(s).be("picker","empty"),r(s).is("icon-close")])},{default:V(()=>[U(r(ea))]),_:1},8,["class"]),[[Ue,!P.modelValue&&!$.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var Qo=ne(Zo,[["__file","color-picker.vue"]]);const Bn=De(Qo),es=ue({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:M(String),default:"light"},clearable:{type:Boolean,default:!0},size:Qn,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,includeEndTime:Boolean,name:String,prefixIcon:{type:M([String,Object]),default:()=>Oa},clearIcon:{type:M([String,Object]),default:()=>Pa},...Zn}),ve=e=>{const t=(e||"").split(":");if(t.length>=2){let n=Number.parseInt(t[0],10);const a=Number.parseInt(t[1],10),o=e.toUpperCase();return o.includes("AM")&&n===12?n=0:o.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:a}}return null},ct=(e,t)=>{const n=ve(e);if(!n)return-1;const a=ve(t);if(!a)return-1;const o=n.minutes+n.hours*60,s=a.minutes+a.hours*60;return o===s?0:o>s?1:-1},Fn=e=>`${e}`.padStart(2,"0"),Oe=e=>`${Fn(e.hours)}:${Fn(e.minutes)}`,ts=(e,t)=>{const n=ve(e);if(!n)return"";const a=ve(t);if(!a)return"";const o={hours:n.hours,minutes:n.minutes};return o.minutes+=a.minutes,o.hours+=a.hours,o.hours+=Math.floor(o.minutes/60),o.minutes=o.minutes%60,Oe(o)},ns=R({name:"ElTimeSelect"}),as=R({...ns,props:es,emits:[Ke,"blur","focus","clear",le],setup(e,{expose:t}){const n=e;it.extend(Ga);const{Option:a}=$e,o=G("input"),s=L(),l=xe(),{lang:p}=Fe(),c=_(()=>n.modelValue),m=_(()=>{const f=ve(n.start);return f?Oe(f):null}),h=_(()=>{const f=ve(n.end);return f?Oe(f):null}),g=_(()=>{const f=ve(n.step);return f?Oe(f):null}),v=_(()=>{const f=ve(n.minTime||"");return f?Oe(f):null}),i=_(()=>{const f=ve(n.maxTime||"");return f?Oe(f):null}),u=_(()=>{var f;const C=[],k=(K,z)=>{C.push({value:K,disabled:ct(z,v.value||"-1:-1")<=0||ct(z,i.value||"100:100")>=0})};if(n.start&&n.end&&n.step){let K=m.value,z;for(;K&&h.value&&ct(K,h.value)<=0;)z=it(K,"HH:mm").locale(p.value).format(n.format),k(z,K),K=ts(K,g.value);if(n.includeEndTime&&h.value&&((f=C[C.length-1])==null?void 0:f.value)!==h.value){const F=it(h.value,"HH:mm").locale(p.value).format(n.format);k(F,h.value)}}return C});return t({blur:()=>{var f,C;(C=(f=s.value)==null?void 0:f.blur)==null||C.call(f)},focus:()=>{var f,C;(C=(f=s.value)==null?void 0:f.focus)==null||C.call(f)}}),(f,C)=>(w(),H(r($e),{ref_key:"select",ref:s,"model-value":r(c),disabled:r(l),clearable:f.clearable,"clear-icon":f.clearIcon,size:f.size,effect:f.effect,placeholder:f.placeholder,"default-first-option":"",filterable:f.editable,"empty-values":f.emptyValues,"value-on-clear":f.valueOnClear,"onUpdate:modelValue":k=>f.$emit(r(le),k),onChange:k=>f.$emit(r(Ke),k),onBlur:k=>f.$emit("blur",k),onFocus:k=>f.$emit("focus",k),onClear:()=>f.$emit("clear")},{prefix:V(()=>[f.prefixIcon?(w(),H(r(ae),{key:0,class:N(r(o).e("prefix-icon"))},{default:V(()=>[(w(),H(Ot(f.prefixIcon)))]),_:1},8,["class"])):A("v-if",!0)]),default:V(()=>[(w(!0),I(me,null,Te(r(u),k=>(w(),H(r(a),{key:k.value,label:k.value,value:k.value,disabled:k.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var os=ne(as,[["__file","time-select.vue"]]);const xn=De(os),ss="timeline",ls=R({name:"ElTimeline",setup(e,{slots:t}){const n=G("timeline");return ye(ss,t),()=>Me("ul",{class:[n.b()]},[ee(t,"default")])}}),rs=ue({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:ta},hollow:Boolean}),is=R({name:"ElTimelineItem"}),ds=R({...is,props:rs,setup(e){const t=e,n=G("timeline-item"),a=_(()=>[n.e("node"),n.em("node",t.size||""),n.em("node",t.type||""),n.is("hollow",t.hollow)]);return(o,s)=>(w(),I("li",{class:N([r(n).b(),{[r(n).e("center")]:o.center}])},[q("div",{class:N(r(n).e("tail"))},null,2),o.$slots.dot?A("v-if",!0):(w(),I("div",{key:0,class:N(r(a)),style:fe({backgroundColor:o.color})},[o.icon?(w(),H(r(ae),{key:0,class:N(r(n).e("icon"))},{default:V(()=>[(w(),H(Ot(o.icon)))]),_:1},8,["class"])):A("v-if",!0)],6)),o.$slots.dot?(w(),I("div",{key:1,class:N(r(n).e("dot"))},[ee(o.$slots,"dot")],2)):A("v-if",!0),q("div",{class:N(r(n).e("wrapper"))},[!o.hideTimestamp&&o.placement==="top"?(w(),I("div",{key:0,class:N([r(n).e("timestamp"),r(n).is("top")])},ge(o.timestamp),3)):A("v-if",!0),q("div",{class:N(r(n).e("content"))},[ee(o.$slots,"default")],2),!o.hideTimestamp&&o.placement==="bottom"?(w(),I("div",{key:1,class:N([r(n).e("timestamp"),r(n).is("bottom")])},ge(o.timestamp),3)):A("v-if",!0)],2)],2))}});var sa=ne(ds,[["__file","timeline-item.vue"]]);const Vn=De(ls,{TimelineItem:sa}),Rn=Aa(sa),Be="$treeNodeId",Hn=function(e,t){!t||t[Be]||Object.defineProperty(t,Be,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},Mt=(e,t)=>t==null?void 0:t[e||Be],wt=(e,t,n)=>{const a=e.value.currentNode;n();const o=e.value.currentNode;a!==o&&t("current-change",o?o.data:null,o)},St=e=>{let t=!0,n=!0,a=!0;for(let o=0,s=e.length;o<s;o++){const l=e[o];(l.checked!==!0||l.indeterminate)&&(t=!1,l.disabled||(a=!1)),(l.checked!==!1||l.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:a,half:!t&&!n}},Ve=function(e){if(e.childNodes.length===0||e.loading)return;const{all:t,none:n,half:a}=St(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):a?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const o=e.parent;!o||o.level===0||e.store.checkStrictly||Ve(o)},We=function(e,t){const n=e.store.props,a=e.data||{},o=n[t];if(Ce(o))return o(a,e);if(Re(o))return a[o];if(Ae(o)){const s=a[t];return Ae(s)?"":s}};let cs=0;class Se{constructor(t){this.isLeafByUser=void 0,this.isLeaf=void 0,this.id=cs++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in t)ze(t,n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){var t;const n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);const a=n.props;if(a&&typeof a.isLeaf<"u"){const l=We(this,"isLeaf");Ia(l)&&(this.isLeafByUser=l)}if(n.lazy!==!0&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&!this.isLeafByUser&&this.expand(),de(this.data)||Hn(this,this.data),!this.data)return;const o=n.defaultExpandedKeys,s=n.key;s&&!pe(this.key)&&o&&o.includes(this.key)&&this.expand(null,n.autoExpandParent),s&&n.currentNodeKey!==void 0&&this.key===n.currentNodeKey&&(n.currentNode=this,n.currentNode.isCurrent=!0),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState(),(this.level===1||((t=this.parent)==null?void 0:t.expanded)===!0)&&(this.canFocus=!0)}setData(t){de(t)||Hn(this,t),this.data=t,this.childNodes=[];let n;this.level===0&&de(this.data)?n=this.data:n=We(this,"children")||[];for(let a=0,o=n.length;a<o;a++)this.insertChild({data:n[a]})}get label(){return We(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return We(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return t.childNodes[n+1]}return null}get previousSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return n>0?t.childNodes[n-1]:null}return null}contains(t,n=!0){return(this.childNodes||[]).some(a=>a===t||n&&a.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,n,a){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof Se)){if(!a){const o=this.getChildren(!0);o!=null&&o.includes(t.data)||(Ae(n)||n<0?o==null||o.push(t.data):o==null||o.splice(n,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=we(new Se(t)),t instanceof Se&&t.initialize()}t.level=this.level+1,Ae(n)||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}insertBefore(t,n){let a;n&&(a=this.childNodes.indexOf(n)),this.insertChild(t,a)}insertAfter(t,n){let a;n&&(a=this.childNodes.indexOf(n),a!==-1&&(a+=1)),this.insertChild(t,a)}removeChild(t){const n=this.getChildren()||[],a=n.indexOf(t.data);a>-1&&n.splice(a,1);const o=this.childNodes.indexOf(t);o>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(o,1)),this.updateLeafState()}removeChildByData(t){let n=null;for(let a=0;a<this.childNodes.length;a++)if(this.childNodes[a].data===t){n=this.childNodes[a];break}n&&this.removeChild(n)}expand(t,n){const a=()=>{if(n){let o=this.parent;for(;o&&o.level>0;)o.expanded=!0,o=o.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(o=>{o.canFocus=!0})};this.shouldLoadData()?this.loadData(o=>{de(o)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Ve(this),a())}):a()}doCreateChildren(t,n={}){t.forEach(a=>{this.insertChild(Object.assign({data:a},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return!!(this.store.lazy===!0&&this.store.load&&!this.loaded)}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,n,a,o){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:l,allWithoutDisable:p}=St(this.childNodes);!this.isLeaf&&!l&&p&&(this.checked=!1,t=!1);const c=()=>{if(n){const m=this.childNodes;for(let v=0,i=m.length;v<i;v++){const u=m[v];o=o||t!==!1;const d=u.disabled?u.checked:o;u.setChecked(d,n,!0,o)}const{half:h,all:g}=St(m);g||(this.checked=g,this.indeterminate=h)}};if(this.shouldLoadData()){this.loadData(()=>{c(),Ve(this)},{checked:t!==!1});return}else c()}const s=this.parent;!s||s.level===0||a||Ve(s)}getChildren(t=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const a=this.store.props;let o="children";return a&&(o=a.children||"children"),Ae(n[o])&&(n[o]=null),t&&!n[o]&&(n[o]=[]),n[o]}updateChildren(){const t=this.getChildren()||[],n=this.childNodes.map(s=>s.data),a={},o=[];t.forEach((s,l)=>{const p=s[Be];!!p&&n.findIndex(m=>(m==null?void 0:m[Be])===p)>=0?a[p]={index:l,data:s}:o.push({index:l,data:s})}),this.store.lazy||n.forEach(s=>{a[s==null?void 0:s[Be]]||this.removeChildByData(s)}),o.forEach(({index:s,data:l})=>{this.insertChild({data:l},s)}),this.updateLeafState()}loadData(t,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const a=s=>{this.childNodes=[],this.doCreateChildren(s,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),t&&t.call(this,s)},o=()=>{this.loading=!1};this.store.load(this,a,o)}else t&&t.call(this)}eachNode(t){const n=[this];for(;n.length;){const a=n.shift();n.unshift(...a.childNodes),t(a)}}reInitChecked(){this.store.checkStrictly||Ve(this)}}class us{constructor(t){this.lazy=!1,this.checkStrictly=!1,this.autoExpandParent=!1,this.defaultExpandAll=!1,this.checkDescendants=!1,this.currentNode=null,this.currentNodeKey=null;for(const n in t)ze(t,n)&&(this[n]=t[n]);this.nodesMap={}}initialize(){if(this.root=new Se({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const t=this.load;t(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()},te)}else this._initDefaultCheckedNodes()}filter(t){const n=this.filterNodeMethod,a=this.lazy,o=async function(s){const l=s.root?s.root.childNodes:s.childNodes;for(const[p,c]of l.entries())c.visible=!!(n!=null&&n.call(c,t,c.data,c)),p%80===0&&p>0&&await se(),await o(c);if(!s.visible&&l.length){let p=!0;p=!l.some(c=>c.visible),s.root?s.root.visible=p===!1:s.visible=p===!1}t&&s.visible&&!s.isLeaf&&(!a||s.loaded)&&s.expand()};o(this)}setData(t){t!==this.root.data?(this.nodesMap={},this.root.setData(t),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(t){if(t instanceof Se)return t;const n=no(t)?Mt(this.key,t):t;return this.nodesMap[n]||null}insertBefore(t,n){var a;const o=this.getNode(n);(a=o.parent)==null||a.insertBefore({data:t},o)}insertAfter(t,n){var a;const o=this.getNode(n);(a=o.parent)==null||a.insertAfter({data:t},o)}remove(t){const n=this.getNode(t);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(t,n){const a=ut(n)?this.root:this.getNode(n);a&&a.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach(a=>{const o=n[a];o&&o.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){const n=this.defaultCheckedKeys||[];!pe(t.key)&&n.includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const n=this.key;if(!(!t||!t.data))if(!n)this.nodesMap[t.id]=t;else{const a=t.key;pe(a)||(this.nodesMap[a]=t)}}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(a=>{this.deregisterNode(a)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,n=!1){const a=[],o=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(p=>{(p.checked||n&&p.indeterminate)&&(!t||t&&p.isLeaf)&&a.push(p.data),o(p)})};return o(this),a}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const t=[],n=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(s=>{s.indeterminate&&t.push(s.data),n(s)})};return n(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],n=this.nodesMap;for(const a in n)ze(n,a)&&t.push(n[a]);return t}updateChildren(t,n){const a=this.nodesMap[t];if(!a)return;const o=a.childNodes;for(let s=o.length-1;s>=0;s--){const l=o[s];this.remove(l.data)}for(let s=0,l=n.length;s<l;s++){const p=n[s];this.append(p,a.data)}}_setCheckedKeys(t,n=!1,a){const o=this._getAllNodes().sort((c,m)=>c.level-m.level),s=Object.create(null),l=Object.keys(a);o.forEach(c=>c.setChecked(!1,!1));const p=c=>{c.childNodes.forEach(m=>{var h;s[m.data[t]]=!0,(h=m.childNodes)!=null&&h.length&&p(m)})};for(let c=0,m=o.length;c<m;c++){const h=o[c],g=h.data[t].toString();if(!l.includes(g)){h.checked&&!s[g]&&h.setChecked(!1,!1);continue}if(h.childNodes.length&&p(h),h.isLeaf||this.checkStrictly){h.setChecked(!0,!1);continue}if(h.setChecked(!0,!0),n){h.setChecked(!1,!1);const i=function(u){u.childNodes.forEach(y=>{y.isLeaf||y.setChecked(!1,!1),i(y)})};i(h)}}}setCheckedNodes(t,n=!1){const a=this.key,o={};t.forEach(s=>{o[(s||{})[a]]=!0}),this._setCheckedKeys(a,n,o)}setCheckedKeys(t,n=!1){this.defaultCheckedKeys=t;const a=this.key,o={};t.forEach(s=>{o[s]=!0}),this._setCheckedKeys(a,n,o)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(n=>{const a=this.getNode(n);a&&a.expand(null,this.autoExpandParent)})}setChecked(t,n,a){const o=this.getNode(t);o&&o.setChecked(!!n,a)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,n=!0){var a;const o=t[this.key],s=this.nodesMap[o];this.setCurrentNode(s),n&&this.currentNode&&this.currentNode.level>1&&((a=this.currentNode.parent)==null||a.expand(null,!0))}setCurrentNodeKey(t,n=!0){var a;if(this.currentNodeKey=t,ut(t)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const o=this.getNode(t);o&&(this.setCurrentNode(o),n&&this.currentNode&&this.currentNode.level>1&&((a=this.currentNode.parent)==null||a.expand(null,!0)))}}const Bt="RootTree",la="NodeInstance",zn="TreeNodeMap",hs=R({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=G("tree"),n=ce(la),a=ce(Bt);return()=>{const o=e.node,{data:s,store:l}=o;return e.renderContent?e.renderContent(Me,{_self:n,node:o,data:s,store:l}):ee(a.ctx.slots,"default",{node:o,data:s},()=>[Me(gt,{tag:"span",truncated:!0,class:t.be("node","label")},()=>[o.label])])}}});var fs=ne(hs,[["__file","tree-node-content.vue"]]);function ra(e){const t=ce(zn,null),n={treeNodeExpand:a=>{var o;e.node!==a&&((o=e.node)==null||o.collapse())},children:[]};return t&&t.children.push(n),ye(zn,n),{broadcastExpanded:a=>{if(e.accordion)for(const o of n.children)o.treeNodeExpand(a)}}}const ia=Symbol("dragEvents");function vs({props:e,ctx:t,el$:n,dropIndicator$:a,store:o}){const s=G("tree"),l=L({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return ye(ia,{treeNodeDragStart:({event:h,treeNode:g})=>{if(h.dataTransfer){if(Ce(e.allowDrag)&&!e.allowDrag(g.node))return h.preventDefault(),!1;h.dataTransfer.effectAllowed="move";try{h.dataTransfer.setData("text/plain","")}catch{}l.value.draggingNode=g,t.emit("node-drag-start",g.node,h)}},treeNodeDragOver:({event:h,treeNode:g})=>{if(!h.dataTransfer)return;const v=g,i=l.value.dropNode;i&&i.node.id!==v.node.id&&ot(i.$el,s.is("drop-inner"));const u=l.value.draggingNode;if(!u||!v)return;let d=!0,y=!0,f=!0,C=!0;Ce(e.allowDrop)&&(d=e.allowDrop(u.node,v.node,"prev"),C=y=e.allowDrop(u.node,v.node,"inner"),f=e.allowDrop(u.node,v.node,"next")),h.dataTransfer.dropEffect=y||d||f?"move":"none",(d||y||f)&&(i==null?void 0:i.node.id)!==v.node.id&&(i&&t.emit("node-drag-leave",u.node,i.node,h),t.emit("node-drag-enter",u.node,v.node,h)),d||y||f?l.value.dropNode=v:l.value.dropNode=null,v.node.nextSibling===u.node&&(f=!1),v.node.previousSibling===u.node&&(d=!1),v.node.contains(u.node,!1)&&(y=!1),(u.node===v.node||u.node.contains(v.node))&&(d=!1,y=!1,f=!1);const k=v.$el,K=k.querySelector(`.${s.be("node","content")}`).getBoundingClientRect(),z=n.value.getBoundingClientRect();let F;const E=d?y?.25:f?.45:1:-1,W=f?y?.75:d?.55:0:1;let $=-9999;const T=h.clientY-K.top;T<K.height*E?F="before":T>K.height*W?F="after":y?F="inner":F="none";const J=k.querySelector(`.${s.be("node","expand-icon")}`).getBoundingClientRect(),Z=a.value;F==="before"?$=J.top-z.top:F==="after"&&($=J.bottom-z.top),Z.style.top=`${$}px`,Z.style.left=`${J.right-z.left}px`,F==="inner"?Ma(k,s.is("drop-inner")):ot(k,s.is("drop-inner")),l.value.showDropIndicator=F==="before"||F==="after",l.value.allowDrop=l.value.showDropIndicator||C,l.value.dropType=F,t.emit("node-drag-over",u.node,v.node,h)},treeNodeDragEnd:h=>{var g,v;const{draggingNode:i,dropType:u,dropNode:d}=l.value;if(h.preventDefault(),h.dataTransfer&&(h.dataTransfer.dropEffect="move"),i!=null&&i.node.data&&d){const y={data:i.node.data};u!=="none"&&i.node.remove(),u==="before"?(g=d.node.parent)==null||g.insertBefore(y,d.node):u==="after"?(v=d.node.parent)==null||v.insertAfter(y,d.node):u==="inner"&&d.node.insertChild(y),u!=="none"&&(o.value.registerNode(y),o.value.key&&i.node.eachNode(f=>{var C;(C=o.value.nodesMap[f.data[o.value.key]])==null||C.setChecked(f.checked,!o.value.checkStrictly)})),ot(d.$el,s.is("drop-inner")),t.emit("node-drag-end",i.node,d.node,u,h),u!=="none"&&t.emit("node-drop",i.node,d.node,u,h)}i&&!d&&t.emit("node-drag-end",i.node,null,u,h),l.value.showDropIndicator=!1,l.value.draggingNode=null,l.value.dropNode=null,l.value.allowDrop=!0}}),{dragState:l}}const ps=R({name:"ElTreeNode",components:{ElCollapseTransition:Ja,ElCheckbox:Qe,NodeContent:fs,ElIcon:ae,Loading:Tt},props:{node:{type:Se,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:Boolean},emits:["node-expand"],setup(e,t){const n=G("tree"),{broadcastExpanded:a}=ra(e),o=ce(Bt),s=L(!1),l=L(!1),p=L(),c=L(),m=L(),h=ce(ia),g=Ne();ye(la,g),e.node.expanded&&(s.value=!0,l.value=!0);const v=o.props.props.children||"children";j(()=>{var $;const T=($=e.node.data)==null?void 0:$[v];return T&&[...T]},()=>{e.node.updateChildren()}),j(()=>e.node.indeterminate,$=>{d(e.node.checked,$)}),j(()=>e.node.checked,$=>{d($,e.node.indeterminate)}),j(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),j(()=>e.node.expanded,$=>{se(()=>s.value=$),$&&(l.value=!0)});const i=$=>Mt(o.props.nodeKey,$.data),u=$=>{const T=e.props.class;if(!T)return{};let J;if(Ce(T)){const{data:Z}=$;J=T(Z,$)}else J=T;return Re(J)?{[J]:!0}:J},d=($,T)=>{(p.value!==$||c.value!==T)&&o.ctx.emit("check-change",e.node.data,$,T),p.value=$,c.value=T},y=$=>{wt(o.store,o.ctx.emit,()=>{var T;if((T=o==null?void 0:o.props)==null?void 0:T.nodeKey){const Z=i(e.node);o.store.value.setCurrentNodeKey(Z)}else o.store.value.setCurrentNode(e.node)}),o.currentNode.value=e.node,o.props.expandOnClickNode&&C(),(o.props.checkOnClickNode||e.node.isLeaf&&o.props.checkOnClickLeaf&&e.showCheckbox)&&!e.node.disabled&&k(!e.node.checked),o.ctx.emit("node-click",e.node.data,e.node,g,$)},f=$=>{var T;(T=o.instance.vnode.props)!=null&&T.onNodeContextmenu&&($.stopPropagation(),$.preventDefault()),o.ctx.emit("node-contextmenu",$,e.node.data,e.node,g)},C=()=>{e.node.isLeaf||(s.value?(o.ctx.emit("node-collapse",e.node.data,e.node,g),e.node.collapse()):e.node.expand(()=>{t.emit("node-expand",e.node.data,e.node,g)}))},k=$=>{e.node.setChecked($,!(o!=null&&o.props.checkStrictly)),se(()=>{const T=o.store.value;o.ctx.emit("check",e.node.data,{checkedNodes:T.getCheckedNodes(),checkedKeys:T.getCheckedKeys(),halfCheckedNodes:T.getHalfCheckedNodes(),halfCheckedKeys:T.getHalfCheckedKeys()})})};return{ns:n,node$:m,tree:o,expanded:s,childNodeRendered:l,oldChecked:p,oldIndeterminate:c,getNodeKey:i,getNodeClass:u,handleSelectChange:d,handleClick:y,handleContextMenu:f,handleExpandIconClick:C,handleCheckChange:k,handleChildNodeExpand:($,T,J)=>{a(T),o.ctx.emit("node-expand",$,T,J)},handleDragStart:$=>{o.props.draggable&&h.treeNodeDragStart({event:$,treeNode:e})},handleDragOver:$=>{$.preventDefault(),o.props.draggable&&h.treeNodeDragOver({event:$,treeNode:{$el:m.value,node:e.node}})},handleDrop:$=>{$.preventDefault()},handleDragEnd:$=>{o.props.draggable&&h.treeNodeDragEnd($)},CaretRight:Ba}}});function ms(e,t,n,a,o,s){const l=Ee("el-icon"),p=Ee("el-checkbox"),c=Ee("loading"),m=Ee("node-content"),h=Ee("el-tree-node"),g=Ee("el-collapse-transition");return Ie((w(),I("div",{ref:"node$",class:N([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:oe(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:oe(e.handleDragStart,["stop"]),onDragover:oe(e.handleDragOver,["stop"]),onDragend:oe(e.handleDragEnd,["stop"]),onDrop:oe(e.handleDrop,["stop"])},[q("div",{class:N(e.ns.be("node","content")),style:fe({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(w(),H(l,{key:0,class:N([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:oe(e.handleExpandIconClick,["stop"])},{default:V(()=>[(w(),H(Ot(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):A("v-if",!0),e.showCheckbox?(w(),H(p,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:oe(()=>{},["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):A("v-if",!0),e.node.loading?(w(),H(l,{key:2,class:N([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:V(()=>[U(c)]),_:1},8,["class"])):A("v-if",!0),U(m,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),U(g,null,{default:V(()=>[!e.renderAfterExpand||e.childNodeRendered?Ie((w(),I("div",{key:0,class:N(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded,onClick:oe(()=>{},["stop"])},[(w(!0),I(me,null,Te(e.node.childNodes,v=>(w(),H(h,{key:e.getNodeKey(v),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:v,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[Ue,e.expanded]]):A("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Ue,e.node.visible]])}var gs=ne(ps,[["render",ms],["__file","tree-node.vue"]]);function ys({el$:e},t){const n=G("tree");_e(()=>{o()}),ao(()=>{Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(l=>{l.setAttribute("tabindex","-1")})}),Fa(e,"keydown",s=>{const l=s.target;if(!l.className.includes(n.b("node")))return;const p=s.code,c=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),m=c.indexOf(l);let h;if([X.up,X.down].includes(p)){if(s.preventDefault(),p===X.up){h=m===-1?0:m!==0?m-1:c.length-1;const v=h;for(;!t.value.getNode(c[h].dataset.key).canFocus;){if(h--,h===v){h=-1;break}h<0&&(h=c.length-1)}}else{h=m===-1?0:m<c.length-1?m+1:0;const v=h;for(;!t.value.getNode(c[h].dataset.key).canFocus;){if(h++,h===v){h=-1;break}h>=c.length&&(h=0)}}h!==-1&&c[h].focus()}[X.left,X.right].includes(p)&&(s.preventDefault(),l.click());const g=l.querySelector('[type="checkbox"]');[X.enter,X.numpadEnter,X.space].includes(p)&&g&&(s.preventDefault(),g.click())});const o=()=>{var s;if(!e.value)return;const l=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(m=>{m.setAttribute("tabindex","-1")});const c=e.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(c.length){c[0].setAttribute("tabindex","0");return}(s=l[0])==null||s.setAttribute("tabindex","0")}}const bs=R({name:"ElTree",components:{ElTreeNode:gs},props:{data:{type:M(Array),default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:Boolean,autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:{type:M(Function)},showCheckbox:Boolean,draggable:Boolean,allowDrag:{type:M(Function)},allowDrop:{type:M(Function)},props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:Boolean,highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:ta}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:n}=Fe(),a=G("tree"),o=ce(na,null),s=L(new us({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));s.value.initialize();const l=L(s.value.root),p=L(null),c=L(null),m=L(null),{broadcastExpanded:h}=ra(e),{dragState:g}=vs({props:e,ctx:t,el$:c,dropIndicator$:m,store:s});ys({el$:c},s);const v=_(()=>{const{childNodes:b}=l.value,D=o?o.hasFilteredOptions!==0:!1;return(!b||b.length===0||b.every(({visible:Q})=>!Q))&&!D});j(()=>e.currentNodeKey,b=>{s.value.setCurrentNodeKey(b??null)}),j(()=>e.defaultCheckedKeys,b=>{s.value.setDefaultCheckedKey(b??[])}),j(()=>e.defaultExpandedKeys,b=>{s.value.setDefaultExpandedKeys(b??[])}),j(()=>e.data,b=>{s.value.setData(b)},{deep:!0}),j(()=>e.checkStrictly,b=>{s.value.checkStrictly=b});const i=b=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");s.value.filter(b)},u=b=>Mt(e.nodeKey,b.data),d=b=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const D=s.value.getNode(b);if(!D)return[];const Q=[D.data];let Y=D.parent;for(;Y&&Y!==l.value;)Q.push(Y.data),Y=Y.parent;return Q.reverse()},y=(b,D)=>s.value.getCheckedNodes(b,D),f=b=>s.value.getCheckedKeys(b),C=()=>{const b=s.value.getCurrentNode();return b?b.data:null},k=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const b=C();return b?b[e.nodeKey]:null},K=(b,D)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");s.value.setCheckedNodes(b,D)},z=(b,D)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");s.value.setCheckedKeys(b,D)},F=(b,D,Q)=>{s.value.setChecked(b,D,Q)},E=()=>s.value.getHalfCheckedNodes(),W=()=>s.value.getHalfCheckedKeys(),$=(b,D=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");wt(s,t.emit,()=>{h(b),s.value.setUserCurrentNode(b,D)})},T=(b,D=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");wt(s,t.emit,()=>{h(),s.value.setCurrentNodeKey(b??null,D)})},J=b=>s.value.getNode(b),Z=b=>{s.value.remove(b)},he=(b,D)=>{s.value.append(b,D)},S=(b,D)=>{s.value.insertBefore(b,D)},O=(b,D)=>{s.value.insertAfter(b,D)},x=(b,D,Q)=>{h(D),t.emit("node-expand",b,D,Q)},B=(b,D)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");s.value.updateChildren(b,D)};return ye(Bt,{ctx:t,props:e,store:s,root:l,currentNode:p,instance:Ne()}),ye(xa,void 0),{ns:a,store:s,root:l,currentNode:p,dragState:g,el$:c,dropIndicator$:m,isEmpty:v,filter:i,getNodeKey:u,getNodePath:d,getCheckedNodes:y,getCheckedKeys:f,getCurrentNode:C,getCurrentKey:k,setCheckedNodes:K,setCheckedKeys:z,setChecked:F,getHalfCheckedNodes:E,getHalfCheckedKeys:W,setCurrentNode:$,setCurrentKey:T,t:n,getNode:J,remove:Z,append:he,insertBefore:S,insertAfter:O,handleNodeExpand:x,updateKeyChildren:B}}});function ks(e,t,n,a,o,s){const l=Ee("el-tree-node");return w(),I("div",{ref:"el$",class:N([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(w(!0),I(me,null,Te(e.root.childNodes,p=>(w(),H(l,{key:e.getNodeKey(p),node:p,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(w(),I("div",{key:0,class:N(e.ns.e("empty-block"))},[ee(e.$slots,"empty",{},()=>{var p;return[q("span",{class:N(e.ns.e("empty-text"))},ge((p=e.emptyText)!=null?p:e.t("el.tree.emptyText")),3)]})],2)):A("v-if",!0),Ie(q("div",{ref:"dropIndicator$",class:N(e.ns.e("drop-indicator"))},null,2),[[Ue,e.dragState.showDropIndicator]])],2)}var Cs=ne(bs,[["render",ks],["__file","tree.vue"]]);const Kt=De(Cs),Ns=(e,{attrs:t,emit:n},{select:a,tree:o,key:s})=>{const l=G("tree-select");return j(()=>e.data,()=>{e.filterable&&se(()=>{var c,m;(m=o.value)==null||m.filter((c=a.value)==null?void 0:c.states.inputValue)})},{flush:"post"}),{...Ze(aa(e),Object.keys($e.props)),...t,class:_(()=>t.class),style:_(()=>t.style),"onUpdate:modelValue":c=>n(le,c),valueKey:s,popperClass:_(()=>{const c=[l.e("popper")];return e.popperClass&&c.push(e.popperClass),c.join(" ")}),filterMethod:(c="")=>{var m;e.filterMethod?e.filterMethod(c):e.remoteMethod?e.remoteMethod(c):(m=o.value)==null||m.filter(c)}}},Es=R({extends:et,setup(e,t){const n=et.setup(e,t);delete n.selectOptionClick;const a=Ne().proxy;return se(()=>{n.select.states.cachedOptions.get(a.value)||n.select.onOptionCreate(a)}),j(()=>t.attrs.visible,o=>{se(()=>{n.states.visible=o})},{immediate:!0}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function $t(e){return e||e===0}function Ft(e){return de(e)&&e.length}function Pe(e){return de(e)?e:$t(e)?[e]:[]}function Ye(e,t,n,a,o){for(let s=0;s<e.length;s++){const l=e[s];if(t(l,s,e,o))return a?a(l,s,e,o):l;{const p=n(l);if(Ft(p)){const c=Ye(p,t,n,a,l);if(c)return c}}}}function Xe(e,t,n,a){for(let o=0;o<e.length;o++){const s=e[o];t(s,o,e,a);const l=n(s);Ft(l)&&Xe(l,t,n,s)}}const ws=(e,{attrs:t,slots:n,emit:a},{select:o,tree:s,key:l})=>{j([()=>e.modelValue,s],()=>{e.showCheckbox&&se(()=>{const v=s.value;v&&!ke(v.getCheckedKeys(),Pe(e.modelValue))&&v.setCheckedKeys(Pe(e.modelValue))})},{immediate:!0,deep:!0});const p=_(()=>({value:l.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),c=(v,i)=>{var u;const d=p.value[v];return Ce(d)?d(i,(u=s.value)==null?void 0:u.getNode(c("value",i))):i[d]},m=Pe(e.modelValue).map(v=>Ye(e.data||[],i=>c("value",i)===v,i=>c("children",i),(i,u,d,y)=>y&&c("value",y))).filter(v=>$t(v)),h=_(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const v=[];return Xe(e.data.concat(e.cacheData),i=>{const u=c("value",i);v.push({value:u,currentLabel:c("label",i),isDisabled:c("disabled",i)})},i=>c("children",i)),v}),g=()=>{var v;return(v=s.value)==null?void 0:v.getCheckedKeys().filter(i=>{var u;const d=(u=s.value)==null?void 0:u.getNode(i);return!pe(d)&&Ge(d.childNodes)})};return{...Ze(aa(e),Object.keys(Kt.props)),...t,nodeKey:l,expandOnClickNode:_(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:_(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(m):m),renderContent:(v,{node:i,data:u,store:d})=>v(Es,{value:c("value",u),label:c("label",u),disabled:c("disabled",u),visible:i.visible},e.renderContent?()=>e.renderContent(v,{node:i,data:u,store:d}):n.default?()=>n.default({node:i,data:u,store:d}):void 0),filterNodeMethod:(v,i,u)=>e.filterNodeMethod?e.filterNodeMethod(v,i,u):v?new RegExp(Za(v),"i").test(c("label",i)||""):!0,onNodeClick:(v,i,u)=>{var d,y,f,C;if((d=t.onNodeClick)==null||d.call(t,v,i,u),!(e.showCheckbox&&e.checkOnClickNode)){if(!e.showCheckbox&&(e.checkStrictly||i.isLeaf)){if(!c("disabled",v)){const k=(y=o.value)==null?void 0:y.states.options.get(c("value",v));(f=o.value)==null||f.handleOptionSelect(k)}}else e.expandOnClickNode&&u.proxy.handleExpandIconClick();(C=o.value)==null||C.focus()}},onCheck:(v,i)=>{var u;if(!e.showCheckbox)return;const d=c("value",v),y={};Xe([s.value.store.root],K=>y[K.key]=K,K=>K.childNodes);const f=i.checkedKeys,C=e.multiple?Pe(e.modelValue).filter(K=>!(K in y)&&!f.includes(K)):[],k=C.concat(f);if(e.checkStrictly)a(le,e.multiple?k:k.includes(d)?d:void 0);else if(e.multiple){const K=g();a(le,C.concat(K))}else{const K=Ye([v],E=>!Ft(c("children",E))&&!c("disabled",E),E=>c("children",E)),z=K?c("value",K):void 0,F=$t(e.modelValue)&&!!Ye([v],E=>c("value",E)===e.modelValue,E=>c("children",E));a(le,z===e.modelValue||F?void 0:z)}se(()=>{var K;const z=Pe(e.modelValue);s.value.setCheckedKeys(z),(K=t.onCheck)==null||K.call(t,v,{checkedKeys:s.value.getCheckedKeys(),checkedNodes:s.value.getCheckedNodes(),halfCheckedKeys:s.value.getHalfCheckedKeys(),halfCheckedNodes:s.value.getHalfCheckedNodes()})}),(u=o.value)==null||u.focus()},onNodeExpand:(v,i,u)=>{var d;(d=t.onNodeExpand)==null||d.call(t,v,i,u),se(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&i.checked){const y={},f=s.value.getCheckedKeys();Xe([s.value.store.root],K=>y[K.key]=K,K=>K.childNodes);const C=Pe(e.modelValue).filter(K=>!(K in y)&&!f.includes(K)),k=g();a(le,C.concat(k))}})},cacheOptions:h}};var Ss=R({props:{data:{type:Array,default:()=>[]}},setup(e){const t=ce(na);return j(()=>e.data,()=>{var n;e.data.forEach(o=>{t.states.cachedOptions.has(o.value)||t.states.cachedOptions.set(o.value,o)});const a=((n=t.selectRef)==null?void 0:n.querySelectorAll("input"))||[];_t&&!Array.from(a).includes(document.activeElement)&&t.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const Ks=R({name:"ElTreeSelect",inheritAttrs:!1,props:{...$e.props,...Kt.props,cacheData:{type:Array,default:()=>[]}},setup(e,t){const{slots:n,expose:a}=t,o=L(),s=L(),l=_(()=>e.nodeKey||e.valueKey||"value"),p=Ns(e,t,{select:o,tree:s,key:l}),{cacheOptions:c,...m}=ws(e,t,{select:o,tree:s,key:l}),h=we({});return a(h),_e(()=>{Object.assign(h,{...Ze(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Ze(o.value,["focus","blur","selectedLabel"])})}),()=>Me($e,we({...p,ref:g=>o.value=g}),{...n,default:()=>[Me(Ss,{data:c.value}),Me(Kt,we({...m,ref:g=>s.value=g}))]})}});var $s=ne(Ks,[["__file","tree-select.vue"]]);const Un=De($s),da=Symbol("uploadContextKey"),Ds="ElUpload";class Ts extends Error{constructor(t,n,a,o){super(t),this.name="UploadAjaxError",this.status=n,this.method=a,this.url=o}}function qn(e,t,n){let a;return n.response?a=`${n.response.error||n.response}`:n.responseText?a=`${n.responseText}`:a=`fail to ${t.method} ${e} ${n.status}`,new Ts(a,n.status,t.method,e)}function _s(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const Ls=e=>{typeof XMLHttpRequest>"u"&&Lt(Ds,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,n=e.action;t.upload&&t.upload.addEventListener("progress",s=>{const l=s;l.percent=s.total>0?s.loaded/s.total*100:0,e.onProgress(l)});const a=new FormData;if(e.data)for(const[s,l]of Object.entries(e.data))de(l)&&l.length?a.append(s,...l):a.append(s,l);a.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(qn(n,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(qn(n,e,t));e.onSuccess(_s(t))}),t.open(e.method,n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const o=e.headers||{};if(o instanceof Headers)o.forEach((s,l)=>t.setRequestHeader(l,s));else for(const[s,l]of Object.entries(o))pe(l)||t.setRequestHeader(s,String(l));return t.send(a),t},ca=["text","picture","picture-card"];let Ps=1;const Dt=()=>Date.now()+Ps++,ua=ue({action:{type:String,default:"#"},headers:{type:M(Object)},method:{type:String,default:"post"},data:{type:M([Object,Function,Promise]),default:()=>vt({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:M(Array),default:()=>vt([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:ca,default:"text"},httpRequest:{type:M(Function),default:Ls},disabled:Boolean,limit:Number}),Os=ue({...ua,beforeUpload:{type:M(Function),default:te},beforeRemove:{type:M(Function)},onRemove:{type:M(Function),default:te},onChange:{type:M(Function),default:te},onPreview:{type:M(Function),default:te},onSuccess:{type:M(Function),default:te},onProgress:{type:M(Function),default:te},onError:{type:M(Function),default:te},onExceed:{type:M(Function),default:te},crossorigin:{type:M(String)}}),As=ue({files:{type:M(Array),default:()=>vt([])},disabled:Boolean,handlePreview:{type:M(Function),default:te},listType:{type:String,values:ca,default:"text"},crossorigin:{type:M(String)}}),Is={remove:e=>!!e},Ms=R({name:"ElUploadList"}),Bs=R({...Ms,props:As,emits:Is,setup(e,{emit:t}){const n=e,{t:a}=Fe(),o=G("upload"),s=G("icon"),l=G("list"),p=xe(),c=L(!1),m=_(()=>[o.b("list"),o.bm("list",n.listType),o.is("disabled",n.disabled)]),h=g=>{t("remove",g)};return(g,v)=>(w(),H(oo,{tag:"ul",class:N(r(m)),name:r(l).b()},{default:V(()=>[(w(!0),I(me,null,Te(g.files,(i,u)=>(w(),I("li",{key:i.uid||i.name,class:N([r(o).be("list","item"),r(o).is(i.status),{focusing:c.value}]),tabindex:"0",onKeydown:Pt(d=>!r(p)&&h(i),["delete"]),onFocus:d=>c.value=!0,onBlur:d=>c.value=!1,onClick:d=>c.value=!1},[ee(g.$slots,"default",{file:i,index:u},()=>[g.listType==="picture"||i.status!=="uploading"&&g.listType==="picture-card"?(w(),I("img",{key:0,class:N(r(o).be("list","item-thumbnail")),src:i.url,crossorigin:g.crossorigin,alt:""},null,10,["src","crossorigin"])):A("v-if",!0),i.status==="uploading"||g.listType!=="picture-card"?(w(),I("div",{key:1,class:N(r(o).be("list","item-info"))},[q("a",{class:N(r(o).be("list","item-name")),onClick:oe(d=>g.handlePreview(i),["prevent"])},[U(r(ae),{class:N(r(s).m("document"))},{default:V(()=>[U(r(Va))]),_:1},8,["class"]),q("span",{class:N(r(o).be("list","item-file-name")),title:i.name},ge(i.name),11,["title"])],10,["onClick"]),i.status==="uploading"?(w(),H(r(yt),{key:0,type:g.listType==="picture-card"?"circle":"line","stroke-width":g.listType==="picture-card"?6:2,percentage:Number(i.percentage),style:fe(g.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):A("v-if",!0)],2)):A("v-if",!0),q("label",{class:N(r(o).be("list","item-status-label"))},[g.listType==="text"?(w(),H(r(ae),{key:0,class:N([r(s).m("upload-success"),r(s).m("circle-check")])},{default:V(()=>[U(r(Ra))]),_:1},8,["class"])):["picture-card","picture"].includes(g.listType)?(w(),H(r(ae),{key:1,class:N([r(s).m("upload-success"),r(s).m("check")])},{default:V(()=>[U(r(Jn))]),_:1},8,["class"])):A("v-if",!0)],2),r(p)?A("v-if",!0):(w(),H(r(ae),{key:2,class:N(r(s).m("close")),onClick:d=>h(i)},{default:V(()=>[U(r(ea))]),_:2},1032,["class","onClick"])),A(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),A(" This is a bug which needs to be fixed "),A(" TODO: Fix the incorrect navigation interaction "),r(p)?A("v-if",!0):(w(),I("i",{key:3,class:N(r(s).m("close-tip"))},ge(r(a)("el.upload.deleteTip")),3)),g.listType==="picture-card"?(w(),I("span",{key:4,class:N(r(o).be("list","item-actions"))},[q("span",{class:N(r(o).be("list","item-preview")),onClick:d=>g.handlePreview(i)},[U(r(ae),{class:N(r(s).m("zoom-in"))},{default:V(()=>[U(r(Ha))]),_:1},8,["class"])],10,["onClick"]),r(p)?A("v-if",!0):(w(),I("span",{key:0,class:N(r(o).be("list","item-delete")),onClick:d=>h(i)},[U(r(ae),{class:N(r(s).m("delete"))},{default:V(()=>[U(r(za))]),_:1},8,["class"])],10,["onClick"]))],2)):A("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),ee(g.$slots,"append")]),_:3},8,["class","name"]))}});var jn=ne(Bs,[["__file","upload-list.vue"]]);const Fs=ue({disabled:Boolean}),xs={file:e=>de(e)},ha="ElUploadDrag",Vs=R({name:ha}),Rs=R({...Vs,props:Fs,emits:xs,setup(e,{emit:t}){ce(da)||Lt(ha,"usage: <el-upload><el-upload-dragger /></el-upload>");const a=G("upload"),o=L(!1),s=xe(),l=m=>{if(s.value)return;o.value=!1,m.stopPropagation();const h=Array.from(m.dataTransfer.files),g=m.dataTransfer.items||[];h.forEach((v,i)=>{var u;const d=g[i],y=(u=d==null?void 0:d.webkitGetAsEntry)==null?void 0:u.call(d);y&&(v.isDirectory=y.isDirectory)}),t("file",h)},p=()=>{s.value||(o.value=!0)},c=m=>{m.currentTarget.contains(m.relatedTarget)||(o.value=!1)};return(m,h)=>(w(),I("div",{class:N([r(a).b("dragger"),r(a).is("dragover",o.value)]),onDrop:oe(l,["prevent"]),onDragover:oe(p,["prevent"]),onDragleave:oe(c,["prevent"])},[ee(m.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Hs=ne(Rs,[["__file","upload-dragger.vue"]]);const zs=ue({...ua,beforeUpload:{type:M(Function),default:te},onRemove:{type:M(Function),default:te},onStart:{type:M(Function),default:te},onSuccess:{type:M(Function),default:te},onProgress:{type:M(Function),default:te},onError:{type:M(Function),default:te},onExceed:{type:M(Function),default:te}}),Us=R({name:"ElUploadContent",inheritAttrs:!1}),qs=R({...Us,props:zs,setup(e,{expose:t}){const n=e,a=G("upload"),o=xe(),s=He({}),l=He(),p=d=>{if(d.length===0)return;const{autoUpload:y,limit:f,fileList:C,multiple:k,onStart:K,onExceed:z}=n;if(f&&C.length+d.length>f){z(d,C);return}k||(d=d.slice(0,1));for(const F of d){const E=F;E.uid=Dt(),K(E),y&&c(E)}},c=async d=>{if(l.value.value="",!n.beforeUpload)return h(d);let y,f={};try{const k=n.data,K=n.beforeUpload(d);f=Ln(n.data)?kt(n.data):n.data,y=await K,Ln(n.data)&&ke(k,f)&&(f=kt(n.data))}catch{y=!1}if(y===!1){n.onRemove(d);return}let C=d;y instanceof Blob&&(y instanceof File?C=y:C=new File([y],d.name,{type:d.type})),h(Object.assign(C,{uid:d.uid}),f)},m=async(d,y)=>Ce(d)?d(y):d,h=async(d,y)=>{const{headers:f,data:C,method:k,withCredentials:K,name:z,action:F,onProgress:E,onSuccess:W,onError:$,httpRequest:T}=n;try{y=await m(y??C,d)}catch{n.onRemove(d);return}const{uid:J}=d,Z={headers:f||{},withCredentials:K,file:d,data:y,method:k,filename:z,action:F,onProgress:S=>{E(S,d)},onSuccess:S=>{W(S,d),delete s.value[J]},onError:S=>{$(S,d),delete s.value[J]}},he=T(Z);s.value[J]=he,he instanceof Promise&&he.then(Z.onSuccess,Z.onError)},g=d=>{const y=d.target.files;y&&p(Array.from(y))},v=()=>{o.value||(l.value.value="",l.value.click())},i=()=>{v()};return t({abort:d=>{Ua(s.value).filter(d?([f])=>String(d.uid)===f:()=>!0).forEach(([f,C])=>{C instanceof XMLHttpRequest&&C.abort(),delete s.value[f]})},upload:c}),(d,y)=>(w(),I("div",{class:N([r(a).b(),r(a).m(d.listType),r(a).is("drag",d.drag),r(a).is("disabled",r(o))]),tabindex:r(o)?"-1":"0",onClick:v,onKeydown:Pt(oe(i,["self"]),["enter","space"])},[d.drag?(w(),H(Hs,{key:0,disabled:r(o),onFile:p},{default:V(()=>[ee(d.$slots,"default")]),_:3},8,["disabled"])):ee(d.$slots,"default",{key:1}),q("input",{ref_key:"inputRef",ref:l,class:N(r(a).e("input")),name:d.name,disabled:r(o),multiple:d.multiple,accept:d.accept,type:"file",onChange:g,onClick:oe(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var Wn=ne(qs,[["__file","upload-content.vue"]]);const Yn="ElUpload",Xn=e=>{var t;(t=e.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(e.url)},js=(e,t)=>{const n=qa(e,"fileList",void 0,{passive:!0}),a=i=>n.value.find(u=>u.uid===i.uid);function o(i){var u;(u=t.value)==null||u.abort(i)}function s(i=["ready","uploading","success","fail"]){n.value=n.value.filter(u=>!i.includes(u.status))}function l(i){n.value=n.value.filter(u=>u.uid!==i.uid)}const p=(i,u)=>{const d=a(u);d&&(console.error(i),d.status="fail",l(d),e.onError(i,d,n.value),e.onChange(d,n.value))},c=(i,u)=>{const d=a(u);d&&(e.onProgress(i,d,n.value),d.status="uploading",d.percentage=Math.round(i.percent))},m=(i,u)=>{const d=a(u);d&&(d.status="success",d.response=i,e.onSuccess(i,d,n.value),e.onChange(d,n.value))},h=i=>{pe(i.uid)&&(i.uid=Dt());const u={name:i.name,percentage:0,status:"ready",size:i.size,raw:i,uid:i.uid};if(e.listType==="picture-card"||e.listType==="picture")try{u.url=URL.createObjectURL(i)}catch(d){ft(Yn,d.message),e.onError(d,u,n.value)}n.value=[...n.value,u],e.onChange(u,n.value)},g=async i=>{const u=i instanceof File?a(i):i;u||Lt(Yn,"file to be removed not found");const d=y=>{o(y),l(y),e.onRemove(y,n.value),Xn(y)};e.beforeRemove?await e.beforeRemove(u,n.value)!==!1&&d(u):d(u)};function v(){n.value.filter(({status:i})=>i==="ready").forEach(({raw:i})=>{var u;return i&&((u=t.value)==null?void 0:u.upload(i))})}return j(()=>e.listType,i=>{i!=="picture-card"&&i!=="picture"||(n.value=n.value.map(u=>{const{raw:d,url:y}=u;if(!y&&d)try{u.url=URL.createObjectURL(d)}catch(f){e.onError(f,u,n.value)}return u}))}),j(n,i=>{for(const u of i)u.uid||(u.uid=Dt()),u.status||(u.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:o,clearFiles:s,handleError:p,handleProgress:c,handleStart:h,handleSuccess:m,handleRemove:g,submit:v,revokeFileObjectURL:Xn}},Ws=R({name:"ElUpload"}),Ys=R({...Ws,props:Os,setup(e,{expose:t}){const n=e,a=xe(),o=He(),{abort:s,submit:l,clearFiles:p,uploadFiles:c,handleStart:m,handleError:h,handleRemove:g,handleSuccess:v,handleProgress:i,revokeFileObjectURL:u}=js(n,o),d=_(()=>n.listType==="picture-card"),y=_(()=>({...n,fileList:c.value,onStart:m,onProgress:i,onSuccess:v,onError:h,onRemove:g}));return so(()=>{c.value.forEach(u)}),ye(da,{accept:lo(n,"accept")}),t({abort:s,submit:l,clearFiles:p,handleStart:m,handleRemove:g}),(f,C)=>(w(),I("div",null,[r(d)&&f.showFileList?(w(),H(jn,{key:0,disabled:r(a),"list-type":f.listType,files:r(c),crossorigin:f.crossorigin,"handle-preview":f.onPreview,onRemove:r(g)},Pn({append:V(()=>[U(Wn,bt({ref_key:"uploadRef",ref:o},r(y)),{default:V(()=>[f.$slots.trigger?ee(f.$slots,"trigger",{key:0}):A("v-if",!0),!f.$slots.trigger&&f.$slots.default?ee(f.$slots,"default",{key:1}):A("v-if",!0)]),_:3},16)]),_:2},[f.$slots.file?{name:"default",fn:V(({file:k,index:K})=>[ee(f.$slots,"file",{file:k,index:K})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):A("v-if",!0),!r(d)||r(d)&&!f.showFileList?(w(),H(Wn,bt({key:1,ref_key:"uploadRef",ref:o},r(y)),{default:V(()=>[f.$slots.trigger?ee(f.$slots,"trigger",{key:0}):A("v-if",!0),!f.$slots.trigger&&f.$slots.default?ee(f.$slots,"default",{key:1}):A("v-if",!0)]),_:3},16)):A("v-if",!0),f.$slots.trigger?ee(f.$slots,"default",{key:2}):A("v-if",!0),ee(f.$slots,"tip"),!r(d)&&f.showFileList?(w(),H(jn,{key:3,disabled:r(a),"list-type":f.listType,files:r(c),crossorigin:f.crossorigin,"handle-preview":f.onPreview,onRemove:r(g)},Pn({_:2},[f.$slots.file?{name:"default",fn:V(({file:k,index:K})=>[ee(f.$slots,"file",{file:k,index:K})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):A("v-if",!0)]))}});var Xs=ne(Ys,[["__file","upload.vue"]]);const Gn=De(Xs);function tl(e){e.component(st.name,st),e.component(Yt.name,Yt),e.component(lt.name,lt),e.component(rt.name,rt),e.component(Xt.name,Xt),e.component(Gt.name,Gt),e.component(ae.name,ae),e.component(Jt.name,Jt),e.component(Je.name,Je),e.component(Zt.name,Zt),e.component(ht.name,ht),e.component(Qt.name,Qt),e.component(mt.name,mt),e.component(en.name,en),e.component(Qe.name,Qe),e.component(tn.name,tn),e.component(nn.name,nn),e.component(an.name,an),e.component(pt.name,pt),e.component($e.name,$e),e.component(et.name,et),e.component(on.name,on),e.component(Ut.name,Ut),e.component(sn.name,sn),e.component(yt.name,yt),e.component(ln.name,ln),e.component(rn.name,rn),e.component(dn.name,dn),e.component(cn.name,cn),e.component(un.name,un),e.component(hn.name,hn),e.component(fn.name,fn),e.component(vn.name,vn),e.component(Vn.name,Vn),e.component(Rn.name,Rn),e.component(pn.name,pn),e.component(mn.name,mn),e.component(gn.name,gn),e.component(yn.name,yn),e.component(bn.name,bn),e.component(kn.name,kn),e.component(Cn.name,Cn),e.component(Nn.name,Nn),e.component(gt.name,gt),e.component(En.name,En),e.component(xn.name,xn),e.component(wn.name,wn),e.component(Sn.name,Sn),e.component(Kn.name,Kn),e.component($n.name,$n),e.component(Dn.name,Dn),e.component(qt.name,qt),e.component(Tn.name,Tn),e.component(Gn.name,Gn),e.component(Bn.name,Bn),e.component(Un.name,Un),e.component(Mn.name,Mn),e.config.globalProperties.$notify=st,e.config.globalProperties.$confirm=lt.confirm,e.config.globalProperties.$message=rt}export{tl as u};
