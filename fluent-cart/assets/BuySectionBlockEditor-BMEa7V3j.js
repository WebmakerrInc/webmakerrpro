import{j as t,b as i}from"./BlockEditorTranslator-Do4trUgb.js";import{C as k,a as S}from"./index-BYEX9EM_.js";import{E as B}from"./EditorPanel-4oWFueOm.js";import{E as x}from"./EditorPanelRow-CD2W-00O.js";import{S as E}from"./SelectProductModal-ZoqEuQTy.js";import{u as q}from"./SingleProductContext-BzN8-5Wa.js";import{B as C}from"./Icons-B2jBVdSk.js";import{a as L}from"./add-query-args-COp5A_Oq.js";import"./index-CGoo2crO.js";import"./ProductListItem-D_5QaYKg.js";const{InspectorControls:M}=wp.blockEditor,I=({attributes:r,setAttributes:o,selectedProduct:c,setSelectedProduct:d})=>t.jsx(M,{children:t.jsx("div",{className:"fc-inspector-control-wrap fc-inspector-control-wrap--product-card",children:t.jsx("div",{className:"fc-inspector-control-group",children:t.jsx("div",{className:"fc-inspector-control-body",children:t.jsxs(B,{title:i("Product"),children:[t.jsxs(x,{children:[t.jsx("span",{className:"fc-inspector-control-label",children:i("Query type")}),t.jsx("div",{className:"actions",children:t.jsx(k,{customKeys:{key:"value",label:"label"},defaultValue:r.query_type,options:[{label:i("Default"),value:"default"},{label:i("Custom"),value:"custom"}],onChange:function(e){o({query_type:e})}})})]}),r.query_type==="custom"&&t.jsxs(x,{className:"flex-col",children:[t.jsx(E,{onModalClosed:e=>{o({product_id:e.ID||""}),d(e)}}),c&&t.jsxs("div",{className:"fc-selected-variation-info w-full",children:[t.jsx("strong",{children:i("Selected product:")}),t.jsx("p",{children:c.post_title})]})]})]})})})})}),$=""+new URL("assets/BuySection-B6Mj6O-Z.png",import.meta.url).href,{useBlockProps:R}=wp.blockEditor,{registerBlockType:Q}=wp.blocks,{useEffect:j,useState:W}=wp.element,{useSelect:F}=wp.data,{store:U}=wp.blockEditor,l=window.fluent_cart_buy_section_data,y=l.placeholder_image,w=window.fluentCartRestVars.rest;Q(l.slug+"/"+l.name,{title:l.title,description:l.description,icon:{src:C},example:{attributes:{},innerBlocks:[{name:"core/image",attributes:{url:$,alt:"Buy Section Preview",style:{width:"100%",height:"auto"}}}]},category:"fluent-cart",attributes:{product_id:{type:"string",default:""},query_type:{type:"string",default:"default"},inside_product_info:{type:"string",default:"-"}},edit:({attributes:r,setAttributes:o,clientId:c})=>{var m,f,h,v;const d=R(),[e,u]=W({}),N=w.url+"/products/"+r.product_id,n=q(),p=F(s=>{const{getBlockParents:a,getBlockName:g}=s(U);return a(c).some(b=>g(b)==="fluent-cart/product-info")},[c]);o({inside_product_info:p?"yes":"no"});const _=()=>{S({path:L(N),headers:{"X-WP-Nonce":w.nonce}}).then(s=>{}).finally(()=>{})};return j(()=>{n!=null&&n.product&&u(n.product)},[n==null?void 0:n.product]),p||j(()=>{_()},[r.product_id]),t.jsxs("div",{...d,children:[p?"":t.jsx(I,{attributes:r,setAttributes:o,selectedProduct:e,setSelectedProduct:u}),t.jsxs("div",{className:"fct_buy_section",children:[(e==null?void 0:e.variants)&&new Set(e.variants.map(s=>{var a;return(a=s.other_info)==null?void 0:a.payment_type})).size>1&&t.jsx("div",{className:"fc-product-tab-nav",children:[...new Set(e.variants.map(s=>{var a;return(a=s.other_info)==null?void 0:a.payment_type}))].filter(Boolean).map((s,a)=>t.jsx("div",{className:`fc-product-tab-nav-item ${a===0?"active":""}`,children:s},s))}),t.jsx("div",{className:"fc-product-variants",children:(m=e==null?void 0:e.variants)!=null&&m.length?e.variants.map((s,a)=>t.jsx("div",{className:`fc-product-variant-item ${a===0?"selected":""}`,children:t.jsxs("div",{className:"variant-content",children:[t.jsx("div",{className:"fc-product-variant-image",children:t.jsx("img",{src:s.thumbnail??y,alt:s.variation_title??""})}),t.jsx("div",{className:"fc-product-variant-title",children:s.variation_title??i("Select a product")})]})},s.id??a)):t.jsx("div",{className:"fc-product-variant-item",children:t.jsxs("div",{className:"variant-content",children:[t.jsx("div",{className:"fc-product-variant-image",children:t.jsx("img",{src:((h=(f=e==null?void 0:e.detail)==null?void 0:f.featured_media)==null?void 0:h.url)??y,alt:(e==null?void 0:e.post_title)??""})}),t.jsx("div",{className:"fc-product-variant-title",children:(e==null?void 0:e.post_title)??i("Select a product")})]})})}),t.jsx("div",{className:"fc-product-item-price",children:(v=e==null?void 0:e.variants)!=null&&v[0]?`$${(e.variants[0].item_price/100).toFixed(2)}`:"$0.00"}),t.jsxs("div",{className:"fc-product-quantity-container",children:[t.jsx("h5",{className:"quantity-title",children:i("Quantity")}),t.jsxs("div",{className:"fc-product-quantity",children:[t.jsx("button",{className:"fc-quantity-decrease-button",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"2",viewBox:"0 0 14 2",fill:"none",children:t.jsx("path",{d:"M12.3333 1L1.66659 1",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),t.jsx("input",{type:"text",className:"fc-quantity-input",value:"1",min:"1",max:"10000"}),t.jsx("button",{className:"fc-quantity-increase-button",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:t.jsx("path",{d:"M6.99996 1.66666L6.99996 12.3333M12.3333 6.99999L1.66663 6.99999",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),t.jsxs("div",{className:"fc-product-buttons-wrap",children:[t.jsx("button",{className:"fluent-cart-direct-checkout-button",children:i("Buy Now")}),t.jsx("button",{className:"fluent-cart-add-to-cart-button",children:i("Add to Cart")})]})]})]})},save:function(r){return null}});
