import{j as e,b as a}from"./BlockEditorTranslator-Do4trUgb.js";import"./ColorPickerField-BzVMtfQ3.js";import{C as x,a as R}from"./index-BYEX9EM_.js";import{P as z}from"./Icons-B2jBVdSk.js";import{E as $}from"./ErrorBoundary-BPEJCTSJ.js";import{P as F}from"./ProductContext-ByBXGImP.js";import"./index-CGoo2crO.js";const{Panel:D,PanelBody:O}=wp.components,b=o=>{const{title:t,children:r,initialOpen:n=!1}=o;return e.jsx("div",{className:"fc-block-editor-control",children:e.jsx(D,{children:e.jsx(O,{title:t||null,initialOpen:n,children:e.jsx("div",{className:"fc-block-editor-control-body",children:r})})})})},{useEffect:oe}=wp.element,{ColorPicker:ce,__experimentalRadio:ie,__experimentalRadioGroup:ne,RangeControl:de}=wp.components,{InspectorControls:pe}=wp.blockEditor,{__experimentalRadio:C,__experimentalRadioGroup:B,RangeControl:T}=wp.components,G=o=>{const{attributes:t,setAttributes:r,blockEditorData:n}=o,d=l=>{r({paginator:l})};return e.jsxs(b,{title:a("Paginator"),children:[e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("View")}),e.jsx("div",{className:"actions",children:e.jsxs(B,{className:"fc-block-editor-radio-group",label:a("Pagination Type"),onChange:d,checked:t.paginator,children:[e.jsx(C,{value:"scroll",children:a("Scroll")}),e.jsx(C,{value:"numbers",children:a("Numbers")})]})})]})}),e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Per Page/Scroll")}),e.jsx("div",{className:"actions",children:e.jsx(T,{value:t.per_page,onChange:l=>r({per_page:l}),min:1,max:50})})]})})]})},{TextControl:A,ToggleControl:m}=wp.components,V=o=>{const{attributes:t,setAttributes:r,blockEditorData:n}=o,d=(l,_)=>{let s={...t.filters??{}};s[l]=_,r({filters:{...s}})};return e.jsxs(b,{title:a("Filter Option"),children:[e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Order Type")}),e.jsx("div",{className:"action",style:{width:"100px"},children:e.jsx(x,{placeholder:a("Select"),multiple:!0,customKeys:{key:"value",label:"label"},defaultValue:t.order_type,options:[{label:a("ASC"),value:"ASC"},{label:a("DESC"),value:"DESC"}],onChange:function(l){r({order_type:l})}})})]})}),e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Enable Filter")}),e.jsx("div",{className:"actions",children:e.jsx(m,{checked:t.enable_filter,onChange:l=>{r({enable_filter:l})}})})]})}),t.enable_filter&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Wildcard Filter")}),e.jsx("div",{className:"actions",children:e.jsx(m,{checked:t.enable_wildcard_filter,onChange:l=>{r({enable_wildcard_filter:l})}})})]})}),t.enable_wildcard_filter&&e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Also search in Content")}),e.jsx("div",{className:"actions",children:e.jsx(m,{checked:t.enable_wildcard_for_post_content,onChange:l=>{r({enable_wildcard_for_post_content:l})}})})]})}),e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Live Filter")}),e.jsx("div",{className:"actions",children:e.jsx(m,{checked:t.live_filter,onChange:l=>{r({live_filter:l})}})})]})}),Object.keys(t.default_filter_options).map((l,_)=>{var c,f,h;let s={};return(c=t.filters)!=null&&c.hasOwnProperty(l)?s=t.filters[l]:(f=t.default_filter_options)!=null&&f.hasOwnProperty(l)&&(s=t.default_filter_options[l]),l!=="enabled"?e.jsxs("div",{className:"mt-5",children:[e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label capitalize",children:l.replace(/[-_]/g," ")}),e.jsx("div",{className:"actions",children:e.jsx(m,{checked:typeof t.filters<"u"&&typeof t.filters[l]<"u"&&((h=t.filters[l])==null?void 0:h.enabled),onChange:p=>{var u,N;let i={};(u=t.filters)!=null&&u.hasOwnProperty(l)?i=t.filters[l]:(N=t.default_filter_options)!=null&&N.hasOwnProperty(l)&&(i=t.default_filter_options[l]),i.enabled=p,i.filter_type=t.default_filter_options[l].filter_type,i.is_meta=t.default_filter_options[l].is_meta,i.multiple=t.default_filter_options[l].multiple,d(l,i)}})})]})}),e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Display Name")}),e.jsx("div",{className:"actions",children:e.jsx(A,{value:s.label,onChange:p=>{var u;let i={};(u=t.filters)!=null&&u.hasOwnProperty(l)?i=t.filters[l]:i.enabled=!0,i.label=p,d(l,i)}})})]})})]},l):e.jsx(e.Fragment,{})})]})]})};let S=[],E={};Object.keys(window.fluent_cart_shop_app_block_editor_data.taxonomies).map((o,t)=>{let r=window.fluent_cart_shop_app_block_editor_data.taxonomies[o];S[o]=[],E[o]={filter_type:"options",is_meta:!0,label:r.label,enabled:!1,multiple:!1}});const w={paginator:{type:"string",default:"scroll"},per_page:{type:"number",default:10},view_mode:{type:"string",default:"grid"},price_format:{type:"string",default:"starts_from"},search_grid_size:{type:"number",default:0},product_grid_size:{type:"number",default:0},product_box_grid_size:{type:"number",default:0},use_default_style:{type:"boolean",default:!0},enable_filter:{type:"boolean",default:!1},live_filter:{type:"boolean",default:!0},enable_wildcard_filter:{type:"boolean",default:!1},enable_wildcard_for_post_content:{type:"boolean",default:!1},order_type:{type:"string",default:"DESC"},filters:{},default_filter_options:{type:"object",default:{...E,price_range:{filter_type:"range",is_meta:!1,label:"Price",enabled:!1}}},default_filters:{type:"object",default:{enabled:!1,allow_out_of_stock:!1,wildcard:"",...S}},colors:{}},{InspectorControls:L}=wp.blockEditor,{TextControl:M,Card:fe,CardHeader:ue,CardBody:me,ToggleControl:k,Button:_e,Tooltip:he,__experimentalRadio:xe,__experimentalRadioGroup:be,RangeControl:v}=wp.components,I=o=>{const{attributes:t,setAttributes:r,blockEditorData:n}=o,d=s=>{r({search_grid_size:s})},l=s=>{r({product_grid_size:s})},_=s=>{r({product_box_grid_size:s})};return e.jsx(L,{children:e.jsx("div",{id:"gutenpride-controls",className:"fluent-cart-product-block-editor",children:e.jsxs("div",{className:"fluent-cart-product-block-editor-inner",children:[e.jsx(G,{attributes:t,setAttributes:r,blockEditorData:n}),e.jsxs(b,{title:a("Product Grid Option"),children:[e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("View Mode")}),e.jsx("div",{className:"actions",children:e.jsx(x,{customKeys:{key:"value",label:"label"},defaultValue:t.view_mode,options:[{label:a("Grid"),value:"grid"},{label:a("List"),value:"list"}],onChange:function(s){r({view_mode:s})}})})]})}),e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Price Format")}),e.jsx("div",{className:"actions",children:e.jsx(x,{customKeys:{key:"value",label:"label"},defaultValue:t.price_format,options:[{label:a("Starts From"),value:"starts_from"},{label:a("Range"),value:"range"}],onChange:function(s){r({price_format:s})}})})]})}),e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Product Per Row")}),e.jsx("div",{className:"actions",children:e.jsx(v,{value:t.product_box_grid_size,onChange:_,min:0,max:5})})]})}),t.enable_filter&&e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Search Grid Size")}),e.jsx("div",{className:"actions",children:e.jsx(v,{value:t.search_grid_size,onChange:d,min:0,max:5})})]})}),t.enable_filter&&e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Product Grid Size")}),e.jsx("div",{className:"actions",children:e.jsx(v,{value:t.product_grid_size,onChange:l,min:0,max:5})})]})})]}),e.jsx(V,{attributes:t,setAttributes:r,blockEditorData:n}),e.jsx(b,{title:a("Default Filter"),children:e.jsxs("div",{children:[e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Enable Filtering")}),e.jsx("div",{className:"actions",children:e.jsx(k,{checked:t.default_filters.enabled,onChange:s=>{let c=t.default_filters;c.enabled=s,r({default_filters:{...c}})}})})]})}),t.default_filters.enabled&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Allow Out Of Stock")}),e.jsx("div",{className:"actions",children:e.jsx(k,{checked:t.default_filters.allow_out_of_stock,onChange:s=>{let c=t.default_filters;c.allow_out_of_stock=s,r({default_filters:{...c}})}})})]})}),e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:a("Search")}),e.jsx("div",{className:"actions",children:e.jsx(M,{value:t.default_filters.wildcard,onChange:s=>{let c=t.default_filters;c.wildcard=s,r({default_filters:{...c}})}})})]})}),Object.keys(window.fluent_cart_shop_app_block_editor_data.taxonomies).map((s,c)=>{let f=window.fluent_cart_shop_app_block_editor_data.taxonomies[s];return e.jsx("div",{className:"fc-block-editor-control-item",children:e.jsxs("div",{className:"fc-inspector-control-row",children:[e.jsx("span",{className:"label",children:f.label}),e.jsx("div",{className:"actions",children:e.jsx(x,{placeholder:a("Select"),isMulti:!0,customKeys:{key:"value",label:"label"},defaultValue:t.default_filters[s],options:f.terms,onChange:function(h){let p={...t.default_filters};p[s]=h,r({default_filters:p})}})})]})},c)})]})]})})]})})},"setting")},{useState:je}=wp.element;window.fluentCartRestVars.rest.url;window.fluent_cart_block_editor_asset.placeholder_image;const{useEffect:ve,useState:ge}=wp.element,K=""+new URL("assets/Products-D4mdThAM.png",import.meta.url).href,{useEffect:we,useRef:Ne,useMemo:Ce,useState:ke,useCallback:ye}=wp.element,{select:Pe,dispatch:Se,useSelect:Ee}=wp.data,{registerBlockType:U}=wp.blocks,{useEffect:y,useState:H,Component:Re,useMemo:ze,createContext:W}=wp.element;wp.serverSideRender;W();const{useBlockProps:P,InnerBlocks:g,BlockContextProvider:$e}=wp.blockEditor,j=window.fluent_cart_shop_app_block_editor_data;window.fluentCartShopAppTranslator=o=>{var t;return((t=window.fluent_cart_shop_app_block_editor_data)==null?void 0:t.trans[o])||o};const Y=o=>({...w.colors,...o.colors||{}}),q=window.fluentCartRestVars.rest.url,J=q+"/public/products",Q=[["fluent-cart/shopapp-product-view-switcher",{className:"fluent-product-view-switcher",layout:{type:"constrained"},metadata:{name:"View Switcher"}}],["fluent-cart/shopapp-product-container",{className:"fluent-product-container"},[["fluent-cart/shopapp-product-filter",{},[["fluent-cart/shopapp-product-filter-search-box"],["fluent-cart/shopapp-product-filter-filters"],["fluent-cart/shopapp-product-filter-button",{},[["fluent-cart/shopapp-product-filter-apply-button"],["fluent-cart/shopapp-product-filter-reset-button"]]]]],["fluent-cart/shopapp-product-no-result",{className:"fluent-product-no-result",layout:{type:"constrained"},metadata:{name:"No Result"}},[["core/paragraph",{content:"No results found",align:"center",fontSize:"large"}],["core/paragraph",{content:a("You can try %sclearing any filters%s or head to our %sstore's home%s",'<a href="#">',"</a>",'<a href="#">',"</a>"),align:"center"}]]],["fluent-cart/shopapp-product-loop",{className:"fluent-product-loop",layout:{type:"constrained"},metadata:{name:"Product Loop"}},[["fluent-cart/shopapp-product-image"],["fluent-cart/shopapp-product-title"],["fluent-cart/shopapp-product-price"],["fluent-cart/shopapp-product-buttons"]]]]],["fluent-cart/product-paginator",{className:"fluent-product-paginator",layout:{type:"constrained"},metadata:{name:"Paginator"}},[["fluent-cart/product-paginator-info"],["fluent-cart/product-paginator-number"]]]],X=`${j.slug}/${j.name}`;U(X,{apiVersion:2,providesContext:{"fluent-cart/paginator":"paginator","fluent-cart/per_page":"per_page","fluent-cart/enable_filter":"enable_filter","fluent-cart/product_box_grid_size":"product_box_grid_size","fluent-cart/view_mode":"view_mode","fluent-cart/filters":"filters","fluent-cart/default_filters":"default_filters","fluent-cart/order_type":"order_type","fluent-cart/live_filter":"live_filter","fluent-cart/price_format":"price_format","fluent-cart/enable_wildcard_filter":"enable_wildcard_filter"},title:j.title,icon:{src:z},example:{attributes:{},innerBlocks:[{name:"core/image",attributes:{url:K,alt:"Shop App Preview",style:{width:"100%",height:"auto"}}}]},supports:{html:!1,reusable:!1,innerBlocks:!0},category:"fluent-cart",attributes:{colors:{type:"object",default:w.colors||{}},message:{type:"string",default:""},variations:{type:"object",default:{}},...w},edit:({attributes:o,setAttributes:t})=>{const r=P({className:"fluent-cart-product-block-editor"}),[n,d]=H([]);return y(()=>{try{(!o.colors||Object.keys(o.colors).length===0)&&t({colors:Y(o)}),o.variations||t({variations:{}})}catch(l){console.error("Error in useEffect:",l)}},[]),y(()=>{R({path:J}).then(l=>{d(l.products.products.data)})},[]),e.jsx("div",{...r,children:e.jsx($,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(I,{attributes:o,setAttributes:t,blockEditorData:j}),e.jsx("div",{className:"fluent-cart-inner-blocks",children:e.jsx(F,{value:{products:n},children:e.jsx(g,{template:Q,allowedBlocks:["core/group","core/columns","core/paragraph","core/image","core/heading"],templateLock:!1,renderAppender:g.ButtonBlockAppender})})})]})})})},save({attributes:o}){const t=P.save();return e.jsx("div",{...t,children:e.jsx("div",{className:"fc-products-wrapper","data-fluent-cart-shop-app":!0,"data-fluent-cart-product-wrapper":"",children:e.jsx(g.Content,{})})})}});
