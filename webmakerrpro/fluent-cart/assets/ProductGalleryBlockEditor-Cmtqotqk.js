import{j as e,b as l}from"./BlockEditorTranslator-Do4trUgb.js";import{i as k}from"./Icons-B2jBVdSk.js";import"./SelectVariationModal-DIx2HZ3H.js";import{C as E,a as C}from"./index-BYEX9EM_.js";import{E as S}from"./EditorPanel-4oWFueOm.js";import{E as m}from"./EditorPanelRow-CD2W-00O.js";import{S as I}from"./SelectProductModal-ZoqEuQTy.js";import{u as P}from"./SingleProductContext-BzN8-5Wa.js";import{a as B}from"./add-query-args-COp5A_Oq.js";import"./ProductListItem-D_5QaYKg.js";import"./index-CGoo2crO.js";const{InspectorControls:q}=wp.blockEditor,{CheckboxControl:G}=wp.components,R=({attributes:r,setAttributes:a,selectedProduct:n,setSelectedProduct:d,isInsideProductInfo:t})=>e.jsx(q,{children:e.jsx("div",{className:"fc-inspector-control-wrap fc-inspector-control-wrap--product-card",children:e.jsx("div",{className:"fc-inspector-control-group",children:e.jsx("div",{className:"fc-inspector-control-body",children:e.jsxs(S,{title:l("Product"),children:[!t&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{children:[e.jsx("span",{className:"fc-inspector-control-label",children:l("Query type")}),e.jsx("div",{className:"actions",children:e.jsx(E,{customKeys:{key:"value",label:"label"},defaultValue:r.query_type,options:[{label:l("Default"),value:"default"},{label:l("Custom"),value:"custom"}],onChange:function(s){a({query_type:s})}})})]}),r.query_type==="custom"&&e.jsxs(m,{className:"flex-col",children:[e.jsx(I,{onModalClosed:s=>{a({product_id:s.ID||""}),d(s)}}),n&&e.jsxs("div",{className:"fc-selected-variation-info w-full",children:[e.jsx("strong",{children:l("Selected product:")}),e.jsx("p",{children:n.post_title})]})]})]}),e.jsxs(m,{children:[e.jsx("span",{className:"fc-inspector-control-label",children:l("Enable image zoom")}),e.jsx("div",{className:"actions",children:e.jsx(G,{checked:r.enableImageZoom==="yes",onChange:s=>{a({enableImageZoom:s?"yes":"no"})}})})]})]})})})})}),Z=""+new URL("assets/ProductGallery-Dr4b0DP7.png",import.meta.url).href,{useBlockProps:D}=wp.blockEditor,{registerBlockType:F}=wp.blocks,{useEffect:g,useState:M}=wp.element,i=window.fluent_cart_product_gallery_data,j=i.placeholder_image,b=window.fluentCartRestVars.rest,{useSelect:Q}=wp.data,{store:U}=wp.blockEditor;F(i.slug+"/"+i.name,{title:i.title,description:i.description,example:{attributes:{},innerBlocks:[{name:"core/image",attributes:{url:Z,alt:"Product Gallery Preview",style:{width:"100%",height:"auto"}}}]},icon:{src:k},category:"fluent-cart",attributes:{product_id:{type:"string",default:""},query_type:{type:"string",default:"default"},inside_product_info:{type:"string",default:"-"},enableImageZoom:{type:"string",default:"yes"}},edit:({attributes:r,setAttributes:a,clientId:n})=>{var f,h,y,x;const d=D(),[t,s]=M({}),v=b.url+"/products/"+r.product_id,u=Q(c=>{const{getBlockParents:p,getBlockName:_}=c(U);return p(n).some(N=>_(N)==="fluent-cart/product-info")},[n]);a({inside_product_info:u?"yes":"no"});const o=P(),w=()=>{C({path:B(v),headers:{"X-WP-Nonce":b.nonce}}).then(c=>{console.log(c," response")}).finally(()=>{})};return g(()=>{w()},[]),g(()=>{o!=null&&o.product&&s(o.product)},[o==null?void 0:o.product]),e.jsxs("div",{...d,children:[e.jsx(R,{attributes:r,setAttributes:a,selectedProduct:t,setSelectedProduct:s,isInsideProductInfo:u}),(f=o==null?void 0:o.product)!=null&&f.ID?e.jsxs("div",{className:"fc-product-gallery-wrapper",children:[e.jsx("div",{className:"fc-product-gallery-thumb",children:e.jsx("img",{src:((y=(h=t==null?void 0:t.detail)==null?void 0:h.featured_media)==null?void 0:y.url)??j,alt:""})}),e.jsx("div",{className:"fc-gallery-thumb-controls",children:(x=t==null?void 0:t.variants)==null?void 0:x.map((c,p)=>e.jsx("div",{className:"fc-gallery-thumb-control-button",children:e.jsx("img",{src:c.thumbnail??j,alt:c.variation_title??""})},c.id||p))})]}):e.jsx("div",{className:"fluent-cart-empty",children:e.jsx("div",{className:"fluent-cart-empty-message",children:l("No product gallery")})})]})},save:function(r){return null}});
