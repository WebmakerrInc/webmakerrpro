var k=a=>{throw TypeError(a)};var S=(a,e,n)=>e.has(a)||k("Cannot "+n);var u=(a,e,n)=>(S(a,e,"read from private field"),n?n.call(a):e.get(a)),v=(a,e,n)=>e.has(a)?k("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,n),A=(a,e,n,t)=>(S(a,e,"write to private field"),t?t.call(a,n):e.set(a,n),n);import{A as _}from"./Arr-MwYQQ3qa.js";import{d as N}from"./dayjs.min-2rai63wT.js";import{t as h}from"./Translator-B6cROAk_.js";var g,M,b,y;const i=class i{static setLocale(){var t;const e=_.get(window,"fluentCartAdminApp.shop",{});let n=null;e.decimal_separator?n=e.decimal_separator==="comma"?"de-DE":"en-US":n=navigator.language||((t=navigator.languages)==null?void 0:t[0])||"en-US",A(i,y,n)}static formatNumber(e,n=!0,t=!1,r=null){if(!e&&t)return"";const c=_.get(u(i,M),r||"",u(i,g));return e?e=(e/100).toFixed(2):e="0.00",n?(e=new Intl.NumberFormat(u(i,y)).format(e),u(i,b)==="before"?`${c}${e}`:`${e}${c}`):e}static formatScaled(e,n=!0,t=!1,r=""){if(!e&&t)return"";const c=_.get(u(i,M),r||"",u(i,g));let s=e/100,l,f="";if(Math.abs(s)>=1e9)l=new Intl.NumberFormat(u(i,y)).format((s/1e9).toFixed(2)),f="B";else if(Math.abs(s)>=1e6)l=new Intl.NumberFormat(u(i,y)).format((s/1e6).toFixed(2)),f="M";else if(Math.abs(s)>=1e3)l=new Intl.NumberFormat(u(i,y)).format((s/1e3).toFixed(2)),f="K";else return i.formatNumber(e,n,t,c);const o=`${l}${f}`;return u(i,b)==="before"?`${c}${o}`:`${o}${c}`}static scaled(e,n=!0,t=!1,r=""){return i.formatScaled(e*100,n,t,r)}static formatBulk(e,n=!1,t=u(i,g),r=!1){return e.map(c=>n?i.formatScaled(c,t,r):i.formatNumber(c,t,r))}static get currencySign(){return u(i,g)}static get currencyPosition(){return u(i,b)}static get locale(){return u(i,y)}static generateVolumeSummary(e,n=!1){if(n){const t=N(),r=t.format("YYYY-MM"),c=t.subtract(1,"month").format("YYYY-MM"),s=t.format("MMMM"),l=t.subtract(1,"month").format("MMMM"),f=e[r]||{current:0,yoy_growth:0},o=e[c]||{current:0,yoy_growth:0};o.yoy_growth=Number(o.yoy_growth||0),f.yoy_growth=Number(f.yoy_growth||0);const d=i.formatScaled(o.current),$=i.formatScaled(f.current),x=o.yoy_growth>=0?h("Increase of %s year-over-year",o.yoy_growth.toFixed(1)+"%"):h("Decrease of %s year-over-year",Math.abs(o.yoy_growth).toFixed(1)+"%");return h("%s gross volume was %s, a %s. Gross volume for the month of %s so far is %s. Here's the trend over the previous 12 months.",`<span class="font-bold">${l}</span>`,`<span class="font-bold fc-custom-tooltip">${d}<span class="fc-custom-tooltip-content">${i.formatNumber(o.current)}</span></span>`,`<span class="font-bold ${o.yoy_growth>=0?"text-green-500":"text-red-500"}">${x} </span>`,s,`<span class="font-bold fc-custom-tooltip">${$}<span class="fc-custom-tooltip-content">${i.formatNumber(f.current)}</span></span>`)}else{const t=N(),r=t.year(),c=Math.floor((t.month()+3)/3);t.format("MMMM");const s=c*3-1;let l=N().year(r).month(s).endOf("month");c===1&&(l=l.month(2).endOf("month")),c===2&&(l=l.month(5).endOf("month")),c===3&&(l=l.month(8).endOf("month")),c===4&&(l=l.month(11).endOf("month"));const f=l.diff(t,"day"),o=Object.keys(e)[0],d=Object.values(e)[0],$=i.formatScaled(d.current);d.yy_growth=Number(d.yy_growth||0);const x=d.yy_growth>=0?h("Increase of %s year-over-year",d.yy_growth.toFixed(1)+"%"):h("Decrease of %s year-over-year",Math.abs(d.yy_growth).toFixed(1)+"%");let j=`Q${c}-${r}`;const m=_.get(e,j,{current:0,prev_year:0,yy_growth:0});m.yy_growth=Number(m.yy_growth||0);const C=i.formatScaled(m.current);let p=0;m.current===0&&d.current===0?p=0:m.current===0?p=-100:(p=(m.current-d.current)/m.current*100,isNaN(p)&&(p=0));const F=p>=0?h("a increase of %s compared to %s",p.toFixed(1)+"%",o):h("a decrease of %s compared to %s",Math.abs(p).toFixed(1)+"%",o);return h("%s gross volume was %s, a %s. With %s days left in %s, Gross volume is %s for the quarter, %s and %s year-over-year",`<span class="font-bold">${o}</span>`,`<span class="font-bold fc-custom-tooltip">${$}<span class="fc-custom-tooltip-content">${i.formatNumber(d.current)}</span></span>`,`<span class="font-bold ${d.yy_growth>=0?"text-green-500":"text-red-500"}">${x} </span>`,f,`Q${c}`,`<span class="font-bold fc-custom-tooltip">${C}<span class="fc-custom-tooltip-content">${i.formatNumber(m.current)}</span></span>`,`<span class="font-bold ${p>=0?"text-green-500":"text-red-500"}">${F} </span>`,`<span class="font-bold ${m.yy_growth>=0?"text-green-500":"text-red-500"}">${m.yy_growth}% </span>`)}}};g=new WeakMap,M=new WeakMap,b=new WeakMap,y=new WeakMap,v(i,g,_.get(window,"fluentCartAdminApp.shop.currency_sign","$")),v(i,M,_.get(window,"fluentCartAdminApp.currency_signs",{})),v(i,b,_.get(window,"fluentCartAdminApp.shop.currency_position","before")),v(i,y,null);let w=i;w.setLocale();function P(a,e){var c;let n=[],t,r;if(a)for(const s of a){if(t={},t.id=s.detail.id,t.order_id=e,t.post_id=s.ID,t.object_id=s.detail.default_variation_id,t.featured_media=(c=s.detail.featured_media)==null?void 0:c.url,t.price=s.detail.item_price,t.unit_price=s.detail.item_price,t.title=s.post_title,t.post_title=s.post_title,t.quantity=1,t.fulfillment_type=s.detail.fulfillment_type,t.manage_stock=s.detail.manage_stock,t.stockStatus=s.detail.manage_stock==1?s.detail.stock_availability:"in-stock",t.soldIndividually=s.detail.sold_individually,t.settings=s.detail.settings,t.checked=!1,t.min_price=s.detail.min_price,t.max_price=s.detail.max_price,s.detail.variants&&s.detail.variants.length){t.children=[];for(const l in s.detail.variants){r=s.detail.variants[l],t.title=r.variation_title;let f=s.detail.default_variation_id==r.id;if(!f&&s.detail.variation_type==="simple"&&(f=!0),f&&(t.available=r.manage_stock.toString()==="1"?r.available:1/0,t.price=r.item_price,t.unit_price=r.item_price,t.object_id=r.id,t.cost=r.item_cost,t.other_info=r.other_info,t.payment_type=r.other_info.payment_type),s.detail.variants&&s.detail.variation_type==="simple_variations"){let o={};r=s.detail.variants[l],o.id=r.id,o.order_id=e,o.post_id=r.post_id,o.object_id=r.id,o.price=r.item_price,o.unit_price=r.item_price,o.item_cost=r.item_cost,o.featured_media=r.media&&r.media.meta_value&&r.media.meta_value[0]?r.media.meta_value[0].url:t.featured_media,o.quantity=1,o.post_title=s.post_title,o.title=r.variation_title,o.fulfillment_type=s.detail.fulfillment_type,o.manage_stock=r.manage_stock,o.stockStatus=r.manage_stock==1?r.stock_status:"in-stock",o.available=r.manage_stock==1?r.available:1/0,o.soldIndividually=r.sold_individually,o.settings=r.settings,o.checked=!1,o.disable=I(o),o.other_info=r.other_info,o.payment_type=r.other_info.payment_type,t.children.push(o)}}}t.disable=I(t),n.push(t)}return n}const I=a=>!(a.stockStatus==="in-stock"&&(Array.isArray(a.children)&&a.children.length===0||!a.children)),V=(a,e,n=!1)=>!a&&n?"":(a||(a="0.00"),window.fluentCartAdminApp.shop.currency_sign+" "+a),z=(a,e,n=!1)=>w.formatNumber(a,e,n),U=a=>!a.item_price||!a.item_cost?"--":((a.item_price-a.item_cost)/a.item_price*100).toFixed(2)+"% ",W=a=>{if(!a.item_price||!a.item_cost)return"--";const e=a.item_price-a.item_cost;return w.formatNumber(e*100,!0)},L=a=>a.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),Q=a=>{const e=new Set;return a.order_items.forEach(n=>{(Number(n.object_id)!==0||n.object_id===null)&&e.add(n.object_id)}),e.size};export{w as C,L as a,V as b,W as c,U as d,z as f,Q as g,P as p};
