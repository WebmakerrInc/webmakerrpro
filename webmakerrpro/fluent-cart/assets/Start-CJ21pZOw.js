import{i as _,j as D,a as C,c as i,o as r,f as h,d as P,w as T,F as V,h as j,b as A,A as B,e as N,t as m,u as g,R as x,g as k,a5 as E}from"./vue.esm-bundler-VLZRLwDo.js";import{u as O}from"./useElementPlusComponents-9-lBhqZz.js";import{t as v}from"./Translator-B6cROAk_.js";import{u as $}from"./useElementor-CLTCC9L5.js";import{R as F}from"./Rest-U7WPPDzn.js";import"./index-BSdFqZUc.js";import"./index-DXJWUF1E.js";import"./dayjs.min-2rai63wT.js";import"./index-CA48fF9Y.js";import"./Arr-MwYQQ3qa.js";function I(o,t=300){const e=_(null);return(...l)=>{e.value&&clearTimeout(e.value),e.value=setTimeout(()=>{o(...l)},t)}}const R={class:"searchable-select-container"},Q={key:0,class:"searchable-select-loading"},q={key:1,class:"no-results"},L={__name:"SearchableSelect",props:{value:{type:[String,Number],default:""},onChange:{type:Function,required:!0}},setup(o){const t=o,e=_(""),l=_({}),a=_(!1),b=async(u,n)=>{a.value=!0;try{const p={active_view:"publish",per_page:10,page:1,search:u,filter_type:"simple",sort_by:"ID",with:["detail","variants"]};n&&(p.include_ids=[n]),F.get("products",p).then(f=>{const s={};f.products.data.forEach(d=>{s[d.ID.toString()]={value:d.ID.toString(),label:d.post_title,product:d}}),l.value=s}).catch(f=>{console.log(f)}).finally(()=>{})}catch(p){console.error("Error loading products:",p)}finally{a.value=!1}},y=I(()=>{b(e.value)},500),S=u=>{e.value=u,y()},c=u=>{t.onChange(u)};return D(()=>{b("",t.value)}),(u,n)=>{const p=C("el-option"),f=C("el-select");return r(),i("div",null,[h("div",R,[P(f,{modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=s=>e.value=s),filterable:"",remote:"",placeholder:g(v)("Search products..."),"remote-method":S,loading:a.value,onChange:n[1]||(n[1]=s=>{const d=Object.values(l.value).find(w=>w.label===s);d&&c(d)})},{empty:T(()=>[a.value?(r(),i("div",Q,m(g(v)("Loading...")),1)):e.value?(r(),i("div",q,m(g(v)("No products found")),1)):N("",!0)]),default:T(()=>[(r(!0),i(V,null,j(Object.values(l.value),s=>(r(),A(p,{key:s.value,label:s.label,value:s.label,class:B({"option-item-selected":o.value===s.value})},null,8,["label","value","class"]))),128))]),_:1},8,["modelValue","placeholder","loading"])])])}}},M={class:"fluent-cart-product-details-button"},z={class:"fluent-cart-product-details-title"},H={key:0,class:"fc-selected-product-contents"},U=["title"],G={class:"product-title"},J={class:"product-id"},K={key:1},W={__name:"App",props:{selectedProduct:{type:String,default:""},productTitle:{type:String,default:""}},setup(o){let t=null;const e=o,l=_(e.productTitle),a=_(e.selectedProduct),b=()=>{a.value="",l.value="",setTimeout(()=>{t.setSettings("selected_product","")},100)},y=c=>{a.value=c,setTimeout(()=>{t.setSettings("selected_product",a.value.toString())},500)},S=c=>{c.hasOwnProperty("product")?(y(c.product.ID.toString()),l.value=c.product.post_title):y("")};return x(()=>{t=$()}),(c,u)=>{const n=C("el-button");return r(),i("div",M,[h("h3",z,m(g(v)("Product Details Button")),1),a.value?(r(),i("div",H,[h("div",{class:"fc-selected-product-contents-inner",title:l.value},[h("div",G,[h("span",J,"#"+m(a.value),1),k(" "+m(l.value),1)])],8,U),P(n,{class:"product-clear-button",onClick:b},{default:T(()=>[k(m(g(v)("Reset")),1)]),_:1})])):(r(),i("div",K,[P(L,{value:a.value,onChange:S},null,8,["value"])]))])}}},X=o=>{const t=o.dataset.selectedProduct,e=o.dataset.productTitle,l=E(W,{selectedProduct:t,productTitle:e});O(l),l.mixin({methods:{$t:v}}).mount(o)};jQuery(document).ready(function(){elementor.hooks.addAction("panel/open_editor/widget/fluent_cart_product_details_button",function(o,t,e){t.get("settings")})});jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/fluent_cart_product_details_button.default",function(o){const t=jQuery(o[0]).find("[data-fluent-cart-product-details-button-app]")[0];X(t)})});
