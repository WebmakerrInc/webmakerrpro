import{i as h,m as b,M as w,j as k,c as l,o as i,f as o,d as r,t as c,w as y,a as A,A as E,g as u,e as v,F as B}from"./vue.esm-bundler-VLZRLwDo.js";import{_}from"./DynamicIcon-B1vpMEi_.js";import{o as p}from"./Str-DQr93RbR.js";import{t as d}from"./Translator-B6cROAk_.js";const V={class:"fc-save-bar-inner"},N={class:"fc-save-bar-left"},D={class:"title"},I={class:"fc-save-bar-right"},L={class:"fc-btn-group"},U={key:0,class:"cmd"},z={__name:"SaveBar",props:{isActive:String,saveButtonText:{type:String,default:d("Save")},discardButtonText:{type:String,default:d("Discard")},loading:{type:Boolean,default:!1},loadingText:{type:String,default:d("Saving")},showCmndIcon:{type:Boolean,default:!1},unSaveChangesText:{type:String,default:d("Unsaved Changes")}},emits:["discard","save"],setup(e,{emit:C}){const x=e,a=h(!1),t=h("");b(()=>x.isActive,(s,g)=>{t.value=s});const f=C,S=()=>{t.value="",f("discard")},T=()=>{t.value="",f("save")},m=s=>{t.value&&t.value!==""?(s.preventDefault(),a.value=!0,setTimeout(()=>{a.value=!1},2e3),s.returnValue=""):a.value=!1};return p((s,g,n)=>{t.value&&t.value!==""?(a.value=!0,setTimeout(()=>{a.value=!1},1e3),n(!1)):(n(),a.value=!1)}),w(()=>{window.removeEventListener("beforeunload",m)}),k(()=>{window.addEventListener("beforeunload",m)}),(s,g)=>{const n=A("el-button");return i(),l("div",{class:E(`fc-save-bar ${e.isActive??""} ${a.value?"shake-unsave-changes":""}`)},[o("div",V,[o("div",N,[r(_,{name:"AlertIcon"}),o("h4",D,c(e.unSaveChangesText),1)]),o("div",I,[o("div",L,[r(n,{onClick:S,type:"info",soft:""},{default:y(()=>[u(c(e.discardButtonText),1)]),_:1}),r(n,{type:"primary",onClick:T,loading:e.loading},{default:y(()=>[e.showCmndIcon&&!e.loading?(i(),l("span",U,"âŒ˜s")):v("",!0),e.loading?(i(),l(B,{key:1},[u(c(e.loadingText),1)],64)):v("",!0),e.loading?v("",!0):(i(),l(B,{key:2},[u(c(e.saveButtonText),1)],64))]),_:1},8,["loading"])])])])],2)}}};export{z as _};
